---
ms.openlocfilehash: 53840ddd59ae3463bae2930fd0151ab2cd2d65cb
ms.sourcegitcommit: e301979e3049ce412d19b094c60ed95b316a8f8c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/16/2020
ms.locfileid: "97593327"
---
### <a name="design-time-builds-only-return-top-level-package-references"></a><span data-ttu-id="5f5cd-101">デザイン時のビルドから最上位のパッケージ参照のみが返される</span><span class="sxs-lookup"><span data-stu-id="5f5cd-101">Design-time builds only return top-level package references</span></span>

<span data-ttu-id="5f5cd-102">.NET Core SDK 3.1.400 以降では、`RunResolvePackageDependencies` ターゲットから最上位のパッケージ参照のみが返されます。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-102">Starting in .NET Core SDK 3.1.400, only top-level package references are returned by the `RunResolvePackageDependencies` target.</span></span>

#### <a name="version-introduced"></a><span data-ttu-id="5f5cd-103">導入されたバージョン</span><span class="sxs-lookup"><span data-stu-id="5f5cd-103">Version introduced</span></span>

<span data-ttu-id="5f5cd-104">.NET Core SDK 3.1.400</span><span class="sxs-lookup"><span data-stu-id="5f5cd-104">.NET Core SDK 3.1.400</span></span>

#### <a name="change-description"></a><span data-ttu-id="5f5cd-105">変更の説明</span><span class="sxs-lookup"><span data-stu-id="5f5cd-105">Change description</span></span>

<span data-ttu-id="5f5cd-106">以前のバージョンの .NET Core SDK では、`RunResolvePackageDependencies` ターゲットにより、NuGet アセット ファイルの情報を含む次の MSBuild 項目が作成されていました。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-106">In previous versions of the .NET Core SDK, the `RunResolvePackageDependencies` target created the following MSBuild items that contained information from the NuGet assets file:</span></span>

- `PackageDefinitions`
- `PackageDependencies`
- `TargetDefinitions`
- `FileDefinitions`
- `FileDependencies`

<span data-ttu-id="5f5cd-107">このデータは、ソリューション エクスプローラーで [依存関係] ノードに設定するために、Visual Studio によって使用されます。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-107">This data is used by Visual Studio to populate the Dependencies node in Solution Explorer.</span></span> <span data-ttu-id="5f5cd-108">ただし、大量のデータになる場合があります。[依存関係] ノードが展開されていない限り、このデータは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-108">However, it can be a large amount of data, and the data isn't needed unless the Dependencies node is expanded.</span></span>

<span data-ttu-id="5f5cd-109">.NET Core SDK バージョン 3.1.400 以降、これらの項目のほとんどは既定で生成されません。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-109">Starting in the .NET Core SDK version 3.1.400, most of these items aren't generated by default.</span></span> <span data-ttu-id="5f5cd-110">型 `Package` の項目のみが返されます。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-110">Only items of type `Package` are returned.</span></span> <span data-ttu-id="5f5cd-111">[依存関係] ノード設定するために、Visual Studio に項目が必要な場合、アセット ファイルから情報が直接読み取られます。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-111">If Visual Studio needs the items to populate the Dependencies node, it reads the information directly from the assets file.</span></span>

#### <a name="reason-for-change"></a><span data-ttu-id="5f5cd-112">変更理由</span><span class="sxs-lookup"><span data-stu-id="5f5cd-112">Reason for change</span></span>

<span data-ttu-id="5f5cd-113">この変更は、Visual Studio 内のソリューション読み込みのパフォーマンスを向上させるために導入されました。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-113">This changed was introduced to improve solution-load performance inside of Visual Studio.</span></span> <span data-ttu-id="5f5cd-114">以前はすべてのパッケージ参照が読み込まれ、ほとんどのユーザーが表示することのない多数の参照が読み込まれていました。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-114">Previously, all package references would be loaded, which involved loading many references that most users would never view.</span></span>

#### <a name="recommended-action"></a><span data-ttu-id="5f5cd-115">推奨アクション</span><span class="sxs-lookup"><span data-stu-id="5f5cd-115">Recommended action</span></span>

<span data-ttu-id="5f5cd-116">これらの項目が作成されることに依存する MSBuild ロジックがある場合は、プロジェクト ファイルで `EmitLegacyAssetsFileItems` プロパティを `true` に設定します。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-116">If you have MSBuild logic that depends on these items being created, set the `EmitLegacyAssetsFileItems` property to `true` in your project file.</span></span> <span data-ttu-id="5f5cd-117">この設定にすることで、すべての項目が作成される以前の動作が有効になります。</span><span class="sxs-lookup"><span data-stu-id="5f5cd-117">This setting enables the previous behavior where all the items are created.</span></span>

#### <a name="category"></a><span data-ttu-id="5f5cd-118">カテゴリ</span><span class="sxs-lookup"><span data-stu-id="5f5cd-118">Category</span></span>

<span data-ttu-id="5f5cd-119">MSBuild</span><span class="sxs-lookup"><span data-stu-id="5f5cd-119">MSBuild</span></span>

#### <a name="affected-apis"></a><span data-ttu-id="5f5cd-120">影響を受ける API</span><span class="sxs-lookup"><span data-stu-id="5f5cd-120">Affected APIs</span></span>

<span data-ttu-id="5f5cd-121">N/A</span><span class="sxs-lookup"><span data-stu-id="5f5cd-121">N/A</span></span>
