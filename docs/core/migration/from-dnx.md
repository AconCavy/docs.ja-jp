---
title: DNX から .NET Core CLI への移行
description: DNX ツールの使用から .NET Core CLI ツールの使用に移行します。
ms.date: 06/20/2016
ms.openlocfilehash: 31317f110ae1e8586b78becd757d0a8ff07f1459
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/14/2020
ms.locfileid: "77503821"
---
# <a name="migrating-from-dnx-to-net-core-cli-projectjson"></a><span data-ttu-id="b3aff-103">DNX から .NET Core CLI への移行 (project.json)</span><span class="sxs-lookup"><span data-stu-id="b3aff-103">Migrating from DNX to .NET Core CLI (project.json)</span></span>

## <a name="overview"></a><span data-ttu-id="b3aff-104">概要</span><span class="sxs-lookup"><span data-stu-id="b3aff-104">Overview</span></span>
<span data-ttu-id="b3aff-105">NET Core と ASP.NET Core 1.0 の RC1 リリースでは、DNX ツールが導入されました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-105">The RC1 release of .NET Core and ASP.NET Core 1.0 introduced DNX tooling.</span></span> <span data-ttu-id="b3aff-106">NET Core と ASP.NET Core 1.0 の RC2 リリースでは、DNX から .NET Core CLI に移行しました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-106">The RC2 release of .NET Core and ASP.NET Core 1.0 moved from DNX to the .NET Core CLI.</span></span>

<span data-ttu-id="b3aff-107">補足情報として、DNX とは何であったのかを要約します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-107">As a slight refresher, let's recap what DNX was about.</span></span> <span data-ttu-id="b3aff-108">DNX は、ランタイムであると共に、.NET Core (具体的には ASP.NET Core 1.0 アプリケーション) を構築するために使用するツールセットでした。</span><span class="sxs-lookup"><span data-stu-id="b3aff-108">DNX was a runtime and a toolset used to build .NET Core and, more specifically, ASP.NET Core 1.0 applications.</span></span> <span data-ttu-id="b3aff-109">おもに次の 3 つの部分で構成されていました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-109">It consisted of 3 main pieces:</span></span>

1. <span data-ttu-id="b3aff-110">DNVM - DNX を取得するためのインストール スクリプト</span><span class="sxs-lookup"><span data-stu-id="b3aff-110">DNVM - an install script for obtaining DNX</span></span>
2. <span data-ttu-id="b3aff-111">DNX (Dotnet 実行ランタイム) - コードを実行するランタイム</span><span class="sxs-lookup"><span data-stu-id="b3aff-111">DNX (Dotnet Execution Runtime) - the runtime that executes your code</span></span>
3. <span data-ttu-id="b3aff-112">DNU (Dotnet 開発者ユーティリティ) - 依存関係の管理、アプリケーションの構築および発行のためのツール</span><span class="sxs-lookup"><span data-stu-id="b3aff-112">DNU (Dotnet Developer Utility) - tooling for managing dependencies, building and publishing your applications</span></span>

<span data-ttu-id="b3aff-113">CLI の導入により、上記のすべてが単一のツールセットに含められました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-113">With the introduction of the CLI, all of the above are now part of a single toolset.</span></span> <span data-ttu-id="b3aff-114">ただし、RC1 タイム フレームでは DNX が提供されていたので、ご使用のプロジェクトは DNX を使用して構築されている可能性があります。その場合は、新しい CLI ツールに移行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-114">However, since DNX was available in RC1 timeframe, you might have projects that were built using it that you would want to move off to the new CLI tooling.</span></span>

<span data-ttu-id="b3aff-115">この移行ガイドでは、DNX からと .NET Core CLI にプロジェクトを移行する方法の要点を説明します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-115">This migration guide will cover the essentials on how to migrate projects off of DNX and onto .NET Core CLI.</span></span> <span data-ttu-id="b3aff-116">プロジェクトを一から .NET Core で始める場合は、このドキュメントは自由にスキップできます。</span><span class="sxs-lookup"><span data-stu-id="b3aff-116">If you are just starting a project on .NET Core from scratch, you can freely skip this document.</span></span>

## <a name="main-changes-in-the-tooling"></a><span data-ttu-id="b3aff-117">ツールの主な変更</span><span class="sxs-lookup"><span data-stu-id="b3aff-117">Main changes in the tooling</span></span>
<span data-ttu-id="b3aff-118">まずツールの全般的な変更点をいくつか説明しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-118">There are some general changes in the tooling that should be outlined first.</span></span>

### <a name="no-more-dnvm"></a><span data-ttu-id="b3aff-119">DNVM の終了</span><span class="sxs-lookup"><span data-stu-id="b3aff-119">No more DNVM</span></span>
<span data-ttu-id="b3aff-120">DNVM (*DotNet Version Manager* の略) は、コンピューターに DNX をインストールするための bash/PowerShell スクリプトでした。</span><span class="sxs-lookup"><span data-stu-id="b3aff-120">DNVM, short for *DotNet Version Manager* was a bash/PowerShell script used to install a DNX on your machine.</span></span> <span data-ttu-id="b3aff-121">DNVM を使用することにより、ユーザーは自分で指定したフィード (または既定のフィード) から必要な DNX を容易に取得することができ、さらに、特定のセッションで $PATH にプッシュされるように特定の DNX に "アクティブ" マークを付けることができました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-121">It helped users get the DNX they need from the feed they specified (or default ones) as well as mark a certain DNX "active", which would put it on the $PATH for the given session.</span></span> <span data-ttu-id="b3aff-122">これがあれば、さまざまなツールを使用できます。</span><span class="sxs-lookup"><span data-stu-id="b3aff-122">This would allow you to use the various tools.</span></span>

<span data-ttu-id="b3aff-123">.NET Core CLI に加えられた変更によって DNVM の機能セットが冗長になったため、DNVM は廃止されました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-123">DNVM was discontinued because its feature set was made redundant by changes coming in the .NET Core CLI.</span></span>

<span data-ttu-id="b3aff-124">CLI は、主に次の 2 つの方法でパッケージ化されています。</span><span class="sxs-lookup"><span data-stu-id="b3aff-124">The CLI comes packaged in two main ways:</span></span>

1. <span data-ttu-id="b3aff-125">特定のプラットフォームのネイティブ インストーラー</span><span class="sxs-lookup"><span data-stu-id="b3aff-125">Native installers for a given platform</span></span>
2. <span data-ttu-id="b3aff-126">その他の状況 (CI サーバーなど) に対応するインストール スクリプト</span><span class="sxs-lookup"><span data-stu-id="b3aff-126">Install script for other situations (like CI servers)</span></span>

<span data-ttu-id="b3aff-127">そのため、DNVM の機能のインストールは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="b3aff-127">Given this, the DNVM install features are not needed.</span></span> <span data-ttu-id="b3aff-128">しかし、ランタイム選択機能はどうでしょうか?</span><span class="sxs-lookup"><span data-stu-id="b3aff-128">But what about the runtime selection features?</span></span>

<span data-ttu-id="b3aff-129">`project.json` 内でランタイムを参照するには、特定のバージョンのパッケージを依存関係に追加します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-129">You reference a runtime in your `project.json` by adding a package of a certain version to your dependencies.</span></span> <span data-ttu-id="b3aff-130">この変更により、アプリケーションは新しいランタイム コンポーネントを使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-130">With this change, your application will be able to use the new runtime bits.</span></span> <span data-ttu-id="b3aff-131">これらのコンポーネントをコンピューターに組み込む方法は、CLI の場合と同じです。サポートされているネイティブ インストーラーのいずれか、またはインストール スクリプトを使用してランタイムをインストールします。</span><span class="sxs-lookup"><span data-stu-id="b3aff-131">Getting these bits to your machine is the same as with the CLI: you install the runtime via one of the native installers it supports or via its install script.</span></span>

### <a name="different-commands"></a><span data-ttu-id="b3aff-132">種々のコマンド</span><span class="sxs-lookup"><span data-stu-id="b3aff-132">Different commands</span></span>
<span data-ttu-id="b3aff-133">DNX の場合、一部のコマンドについては 3 つのパート (DNX、DNU、DNVM) のいずれかから使用していました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-133">If you were using DNX, you used some commands from one of its three parts (DNX, DNU or DNVM).</span></span> <span data-ttu-id="b3aff-134">CLI になって、これらのコマンドの一部は変更され、一部は使用できなくなり、一部は同じであるがセマンティクスが若干異なる状況となりました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-134">With the CLI, some of these commands change, some are not available and some are the same but have slightly different semantics.</span></span>

<span data-ttu-id="b3aff-135">次の表では、DNX/DNU コマンドと、対応する CLI コマンドのマッピングを示します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-135">The table below shows the mapping between the DNX/DNU commands and their CLI counterparts.</span></span>

| <span data-ttu-id="b3aff-136">DNX コマンド</span><span class="sxs-lookup"><span data-stu-id="b3aff-136">DNX command</span></span>                    | <span data-ttu-id="b3aff-137">CLI コマンド</span><span class="sxs-lookup"><span data-stu-id="b3aff-137">CLI command</span></span>    | <span data-ttu-id="b3aff-138">[説明]</span><span class="sxs-lookup"><span data-stu-id="b3aff-138">Description</span></span>                                                                                                     |
|--------------------------------|----------------|-----------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b3aff-139">dnx run</span><span class="sxs-lookup"><span data-stu-id="b3aff-139">dnx run</span></span>                        | `dotnet run`     | <span data-ttu-id="b3aff-140">ソースからコードを実行します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-140">Run code from source.</span></span>                                                                                           |
| <span data-ttu-id="b3aff-141">dnu build</span><span class="sxs-lookup"><span data-stu-id="b3aff-141">dnu build</span></span>                      | `dotnet build`   | <span data-ttu-id="b3aff-142">コードの IL バイナリをビルドします。</span><span class="sxs-lookup"><span data-stu-id="b3aff-142">Build an IL binary of your code.</span></span>                                                                                |
| <span data-ttu-id="b3aff-143">dnu pack</span><span class="sxs-lookup"><span data-stu-id="b3aff-143">dnu pack</span></span>                       | `dotnet pack`    | <span data-ttu-id="b3aff-144">コードの NuGet パッケージをパッケージ化します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-144">Package up a NuGet package of your code.</span></span>                                                                        |
| <span data-ttu-id="b3aff-145">dnx \[command] ("dnx web" など)</span><span class="sxs-lookup"><span data-stu-id="b3aff-145">dnx \[command] (for example, "dnx web")</span></span> | <span data-ttu-id="b3aff-146">適用なし\*</span><span class="sxs-lookup"><span data-stu-id="b3aff-146">N/A\*</span></span>          | <span data-ttu-id="b3aff-147">DNX の環境では、project.json 内の定義に従ってコマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-147">In DNX world, run a command as defined in the project.json.</span></span>                                                     |
| <span data-ttu-id="b3aff-148">dnu install</span><span class="sxs-lookup"><span data-stu-id="b3aff-148">dnu install</span></span>                    | <span data-ttu-id="b3aff-149">適用なし\*</span><span class="sxs-lookup"><span data-stu-id="b3aff-149">N/A\*</span></span>          | <span data-ttu-id="b3aff-150">DNX の環境では、パッケージを依存関係としてインストールします。</span><span class="sxs-lookup"><span data-stu-id="b3aff-150">In the DNX world, install a package as a dependency.</span></span>                                                            |
| <span data-ttu-id="b3aff-151">dnu restore</span><span class="sxs-lookup"><span data-stu-id="b3aff-151">dnu restore</span></span>                    | `dotnet restore` | <span data-ttu-id="b3aff-152">project.json に指定された依存関係を復元します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-152">Restore dependencies specified in your project.json.</span></span> <span data-ttu-id="b3aff-153">("[注を参照](#dotnet-restore-note)")</span><span class="sxs-lookup"><span data-stu-id="b3aff-153">([see note](#dotnet-restore-note))</span></span>                                                            |
| <span data-ttu-id="b3aff-154">dnu publish</span><span class="sxs-lookup"><span data-stu-id="b3aff-154">dnu publish</span></span>                    | `dotnet publish` | <span data-ttu-id="b3aff-155">展開対象のアプリケーションを 3 つの形式 (ポータブル、ネイティブ アプリ、スタンドアロン) のいずれかで発行します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-155">Publish your application for deployment in one of the three forms (portable, portable with native and standalone).</span></span> |
| <span data-ttu-id="b3aff-156">dnu wrap</span><span class="sxs-lookup"><span data-stu-id="b3aff-156">dnu wrap</span></span>                       | <span data-ttu-id="b3aff-157">適用なし\*</span><span class="sxs-lookup"><span data-stu-id="b3aff-157">N/A\*</span></span>          | <span data-ttu-id="b3aff-158">DNX の環境では、csproj で project.json をラップします。</span><span class="sxs-lookup"><span data-stu-id="b3aff-158">In DNX world, wrap a project.json in csproj.</span></span>                                                                    |
| <span data-ttu-id="b3aff-159">dnu commands</span><span class="sxs-lookup"><span data-stu-id="b3aff-159">dnu commands</span></span>                   | <span data-ttu-id="b3aff-160">適用なし\*</span><span class="sxs-lookup"><span data-stu-id="b3aff-160">N/A\*</span></span>          | <span data-ttu-id="b3aff-161">DNX の環境では、インストールされたコマンドをグローバルに管理します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-161">In DNX world, manage the globally installed commands.</span></span>                                                           |

<span data-ttu-id="b3aff-162">(\*) - これらの機能は、CLI では設計上サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="b3aff-162">(\*) - these features are not supported in the CLI by design.</span></span>

## <a name="dnx-features-that-are-not-supported"></a><span data-ttu-id="b3aff-163">サポートされていない DNX 機能</span><span class="sxs-lookup"><span data-stu-id="b3aff-163">DNX features that are not supported</span></span>
<span data-ttu-id="b3aff-164">上表に示すように、DNX 環境の機能の中には、少なくとも当面の間、CLI でサポートしないことに決定した機能があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-164">As the table above shows, there are features from the DNX world that we decided not to support in the CLI, at least for the time being.</span></span> <span data-ttu-id="b3aff-165">このセクションでは、その中で最も重要なものを取り上げ、それらのサポートを中止した論理的根拠と、必要になった場合の解決策について概説します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-165">This section will go through the most important ones and outline the rationale behind not supporting them as well as workarounds if you do need them.</span></span>

### <a name="global-commands"></a><span data-ttu-id="b3aff-166">グローバル コマンド</span><span class="sxs-lookup"><span data-stu-id="b3aff-166">Global commands</span></span>
<span data-ttu-id="b3aff-167">DNU には、"グローバル コマンド" と呼ばれる概念が採用されています。</span><span class="sxs-lookup"><span data-stu-id="b3aff-167">DNU came with a concept called "global commands".</span></span> <span data-ttu-id="b3aff-168">これらは基本的に、NuGet パッケージとしてパッケージ化されたコンソール アプリケーションであり、指定された DNX を呼び出してアプリケーションを実行するシェル スクリプトが含まれていました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-168">These were, essentially, console applications packaged up as NuGet packages with a shell script that would invoke the DNX you specified to run the application.</span></span>

<span data-ttu-id="b3aff-169">CLI では、この概念をサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="b3aff-169">The CLI does not support this concept.</span></span> <span data-ttu-id="b3aff-170">しかし、使い慣れた `dotnet <command>` 構文を使用して呼び出し可能なプロジェクトごとのコマンドを追加する、という概念はサポートされています。</span><span class="sxs-lookup"><span data-stu-id="b3aff-170">It does, however, support the concept of adding per-project commands that can be invoked using the familiar `dotnet <command>` syntax.</span></span>

### <a name="installing-dependencies"></a><span data-ttu-id="b3aff-171">依存関係のインストール</span><span class="sxs-lookup"><span data-stu-id="b3aff-171">Installing dependencies</span></span>
<span data-ttu-id="b3aff-172">v1 の時点で、.NET Core CLI には依存関係をインストールするための `install` コマンドが用意されていません。</span><span class="sxs-lookup"><span data-stu-id="b3aff-172">As of v1, the .NET Core CLI doesn't have an `install` command for installing dependencies.</span></span> <span data-ttu-id="b3aff-173">NuGet からパッケージをインストールするには、該当するパッケージを依存関係として `project.json` ファイルに追加し、`dotnet restore` を実行する必要があります ([注記参照](#dotnet-restore-note))。</span><span class="sxs-lookup"><span data-stu-id="b3aff-173">In order to install a package from NuGet, you would need to add it as a dependency to your `project.json` file and then run `dotnet restore` ([see note](#dotnet-restore-note)).</span></span>

### <a name="running-your-code"></a><span data-ttu-id="b3aff-174">コードの実行</span><span class="sxs-lookup"><span data-stu-id="b3aff-174">Running your code</span></span>
<span data-ttu-id="b3aff-175">コードを実行する方法は、主に 2 つあります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-175">There are two main ways to run your code.</span></span> <span data-ttu-id="b3aff-176">1 つは、`dotnet run` を使用してソースから実行する方法です。</span><span class="sxs-lookup"><span data-stu-id="b3aff-176">One is from source, with `dotnet run`.</span></span> <span data-ttu-id="b3aff-177">この方法では、`dnx run` の場合とは異なり、メモリ内のコンパイルを行いません。</span><span class="sxs-lookup"><span data-stu-id="b3aff-177">Unlike `dnx run`, this will not do any in-memory compilation.</span></span> <span data-ttu-id="b3aff-178">`dotnet build` を実際に呼び出すことで、コードをビルドし、ビルドされたバイナリを実行します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-178">It will actually invoke `dotnet build` to build your code and then run the built binary.</span></span>

<span data-ttu-id="b3aff-179">もう 1 つは、`dotnet` 自体を使用してコードを実行する方法です。</span><span class="sxs-lookup"><span data-stu-id="b3aff-179">Another way is using the `dotnet` itself to run your code.</span></span> <span data-ttu-id="b3aff-180">そのためには、アセンブリへのパス `dotnet path/to/an/assembly.dll` を指定します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-180">This is done by providing a path to your assembly: `dotnet path/to/an/assembly.dll`.</span></span>

## <a name="migrating-your-dnx-project-to-net-core-cli"></a><span data-ttu-id="b3aff-181">DNX プロジェクトを .NET Core CLI に移行する</span><span class="sxs-lookup"><span data-stu-id="b3aff-181">Migrating your DNX project to .NET Core CLI</span></span>
<span data-ttu-id="b3aff-182">DNX から移行する際には、コードの操作時に新しいコマンドを使用することに加えて、重要なことが他に 3 つあります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-182">In addition to using new commands when working with your code, there are three major things left in migrating from DNX:</span></span>

1. <span data-ttu-id="b3aff-183">`global.json` ファイルで CLI を使用できるようにする場合は、このファイルを移行します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-183">Migrate the `global.json` file if you have it to be able to use CLI.</span></span>
2. <span data-ttu-id="b3aff-184">プロジェクト ファイル (`project.json`) 自体を CLI ツールに移行します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-184">Migrating the project file (`project.json`) itself to the CLI tooling.</span></span>
3. <span data-ttu-id="b3aff-185">任意の DNX API を、対応する BCL API に移行します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-185">Migrating off of any DNX APIs to their BCL counterparts.</span></span>

### <a name="changing-the-globaljson-file"></a><span data-ttu-id="b3aff-186">global.json ファイルの変更</span><span class="sxs-lookup"><span data-stu-id="b3aff-186">Changing the global.json file</span></span>
<span data-ttu-id="b3aff-187">`global.json` ファイルは、RC1 プロジェクトと RC2 (またはそれ以降の) プロジェクトの両方に対して、ソリューション ファイルのように機能します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-187">The `global.json` file acts like a solution file for both the RC1 and RC2 (or later) projects.</span></span> <span data-ttu-id="b3aff-188">.NET Core CLI (および Visual Studio) で RC1 とそれ以降のバージョンを区別するために、`"sdk": { "version" }` プロパティを使用して、RC1 のプロジェクトまたはそれ以降のプロジェクトが区別されます。</span><span class="sxs-lookup"><span data-stu-id="b3aff-188">In order for the .NET Core CLI (as well as Visual Studio) to differentiate between RC1 and later versions, they use the `"sdk": { "version" }` property to make the distinction which project is RC1 or later.</span></span> <span data-ttu-id="b3aff-189">`global.json` にこのノードがまったく存在しない場合は、最新の状態であると見なされます。</span><span class="sxs-lookup"><span data-stu-id="b3aff-189">If `global.json` doesn't have this node at all, it is assumed to be the latest.</span></span>

<span data-ttu-id="b3aff-190">`global.json` ファイルを更新するには、プロパティを削除するか、使用するツールの正確なバージョンをプロパティに設定します (次の例では、**1.0.0-preview2-003121**)。</span><span class="sxs-lookup"><span data-stu-id="b3aff-190">In order to update the `global.json` file, either remove the property or set it to the exact version of the tools that you wish to use, in this case **1.0.0-preview2-003121**:</span></span>

```json
{
    "sdk": {
        "version": "1.0.0-preview2-003121"
    }
}
```

### <a name="migrating-the-project-file"></a><span data-ttu-id="b3aff-191">プロジェクト ファイルの移行</span><span class="sxs-lookup"><span data-stu-id="b3aff-191">Migrating the project file</span></span>

<span data-ttu-id="b3aff-192">CLI と DNX は両方とも、`project.json` ファイルに基づいた同じ基本プロジェクト システムを使用しています。</span><span class="sxs-lookup"><span data-stu-id="b3aff-192">The CLI and DNX both use the same basic project system based on `project.json` file.</span></span> <span data-ttu-id="b3aff-193">プロジェクト ファイルの構文とセマンティクスはほぼ同じですが、シナリオに基づく多少の違いがあります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-193">The syntax and the semantics of the project file are pretty much the same, with small differences based on the scenarios.</span></span> <span data-ttu-id="b3aff-194">スキーマの変更もあります。内容は[スキーマ ファイル](http://json.schemastore.org/project)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b3aff-194">There are also some changes to the schema which you can see in the [schema file](http://json.schemastore.org/project).</span></span>

<span data-ttu-id="b3aff-195">コンソール アプリケーションを作成する場合は、プロジェクト ファイルに次のスニペットを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-195">If you are building a console application, you need to add the following snippet to your project file:</span></span>

```json
"buildOptions": {
    "emitEntryPoint": true
}
```

<span data-ttu-id="b3aff-196">このスニペットは、アプリケーションのエントリ ポイントを出力するように `dotnet build` に指示し、コードが効果的に実行されるようにします。</span><span class="sxs-lookup"><span data-stu-id="b3aff-196">This instructs `dotnet build` to emit an entry point for your application, effectively making your code runnable.</span></span> <span data-ttu-id="b3aff-197">クラス ライブラリを作成する場合、上記のセクションは省略します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-197">If you are building a class library, simply omit the above section.</span></span> <span data-ttu-id="b3aff-198">当然ながら、上記のスニペットを `project.json` ファイルに追加したら、静的なエントリ ポイントを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-198">Of course, once you add the above snippet to your `project.json` file, you need to add a static entry point.</span></span> <span data-ttu-id="b3aff-199">DNX を移行すると、DNX によって提供されていた DI サービスは利用できなくなります。したがって、`static void Main()` のように基本的な .NET のエントリ ポイントとする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-199">With the move off DNX, the DI services it provided are no longer available and thus this needs to be a basic .NET entry point: `static void Main()`.</span></span>

<span data-ttu-id="b3aff-200">`project.json` に "コマンド" セクションがある場合は、それを削除することができます。</span><span class="sxs-lookup"><span data-stu-id="b3aff-200">If you have a "commands" section in your `project.json`, you can remove it.</span></span> <span data-ttu-id="b3aff-201">Entity Framework CLI コマンドなど、DNU コマンドとして存在していたコマンドの一部は、プロジェクトごとの拡張機能となるように CLI に移植されます。</span><span class="sxs-lookup"><span data-stu-id="b3aff-201">Some of the commands that used to exist as DNU commands, such as Entity Framework CLI commands, are being ported to be per-project extensions to the CLI.</span></span> <span data-ttu-id="b3aff-202">プロジェクトで使用する独自のコマンドをビルドした場合は、それらのコマンドを CLI の拡張機能に置き換える必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-202">If you built your own commands that you are using in your projects, you need to replace them with CLI extensions.</span></span> <span data-ttu-id="b3aff-203">この場合、`project.json` 内の `commands` ノードを `tools` ノードに置き換え、ツールの依存関係を一覧する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-203">In this case, the `commands` node in `project.json` needs to be replaced by the `tools` node and it needs to list the tools dependencies.</span></span>

<span data-ttu-id="b3aff-204">これらの処理が完了したら、アプリにどのような種類の移植性を持たせるかを決める必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-204">After these things are done, you need to decide which type of portability you wish for you app.</span></span> <span data-ttu-id="b3aff-205">.NET Core では、幅広い移植性オプションを用意し、その中から選択できるようにすることに力を注ぎました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-205">With .NET Core, we have invested into providing a spectrum of portability options that you can choose from.</span></span> <span data-ttu-id="b3aff-206">たとえば、完全に*移植可能な*アプリケーションが必要な場合もあれば、*自己完結型* アプリケーションが必要な場合もあります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-206">For instance, you may want to have a fully *portable* application or you may want to have a *self-contained* application.</span></span> <span data-ttu-id="b3aff-207">移植可能なアプリケーションの方は .NET Framework アプリケーションの動作によく似ています。対象のコンピューター上でアプリケーションを実行するには共有コンポーネント (.NET Core) が必要です。</span><span class="sxs-lookup"><span data-stu-id="b3aff-207">The portable application option is more like .NET Framework applications work: it needs a shared component to execute it on the target machine (.NET Core).</span></span> <span data-ttu-id="b3aff-208">自己完結型アプリケーションの場合は、.NET Core を対象のコンピューターにインストールする必要はありませんが、サポートする OS ごとにアプリケーションを 1 つずつ作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-208">The self-contained application doesn't require .NET Core to be installed on the target, but you have to produce one application for each OS you wish to support.</span></span> <span data-ttu-id="b3aff-209">このような移植性の種類と詳細情報については、[アプリケーションの移植性の種類](../deploying/index.md)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="b3aff-209">These portability types and more are discussed in the [application portability type](../deploying/index.md) document.</span></span>

<span data-ttu-id="b3aff-210">目的の移植性の種類に対して呼び出しを行ったら、対象となるフレームワークを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-210">Once you make a call on what type of portability you want, you need to change your targeted framework(s).</span></span> <span data-ttu-id="b3aff-211">.NET Core 用のアプリケーションを作成していた場合、対象となるフレームワークとして `dnxcore50` を使用していた可能性が最も高くなります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-211">If you were writing applications for .NET Core, you were most likely using `dnxcore50` as  your targeted framework.</span></span> <span data-ttu-id="b3aff-212">CLI の場合、新しい [.NET Standard](../../standard/net-standard.md) によってもたらされた変更点があるので、フレームワークを次のいずれかに設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-212">With the CLI and the changes that the new [.NET Standard](../../standard/net-standard.md) brought, the framework needs to be one of the following:</span></span>

1. <span data-ttu-id="b3aff-213">`netcoreapp1.0`- .NET Core でアプリケーションを作成する場合 (ASP.NET Core アプリケーションを含む)</span><span class="sxs-lookup"><span data-stu-id="b3aff-213">`netcoreapp1.0` - if you are writing applications on .NET Core (including ASP.NET Core applications)</span></span>
2. <span data-ttu-id="b3aff-214">`netstandard1.6`- .NET Core 用のクラス ライブラリを作成する場合</span><span class="sxs-lookup"><span data-stu-id="b3aff-214">`netstandard1.6` - if you are writing class libraries for .NET Core</span></span>

<span data-ttu-id="b3aff-215">その他の `dnx` の対象 (`dnx451` など) を使用する場合も、それらを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-215">If you are using other `dnx` targets, like `dnx451` you will need to change those as well.</span></span> <span data-ttu-id="b3aff-216">`dnx451` は、`net451` に変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-216">`dnx451` should be changed to `net451`.</span></span>
<span data-ttu-id="b3aff-217">詳細については、「[.NET Standard](../../standard/net-standard.md)」のトピックをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="b3aff-217">Please refer to the [.NET Standard](../../standard/net-standard.md) topic for more information.</span></span>

<span data-ttu-id="b3aff-218">これで、`project.json` は、ほぼ準備ができました。</span><span class="sxs-lookup"><span data-stu-id="b3aff-218">Your `project.json` is now mostly ready.</span></span> <span data-ttu-id="b3aff-219">特に ASP.NET Core の依存関係を使用している場合は、依存関係の一覧を確認し、依存関係を新しいバージョンに更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-219">You need to go through your dependencies list and update the dependencies to their newer versions, especially if you are using ASP.NET Core dependencies.</span></span> <span data-ttu-id="b3aff-220">BCL API 用に個別のパッケージを使用していた場合は、[アプリケーションの移植性の種類](../deploying/index.md)に関するページの説明に従って、ランタイム パッケージを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="b3aff-220">If you were using separate packages for BCL APIs, you can use the runtime package as explained in the [application portability type](../deploying/index.md) document.</span></span>

<span data-ttu-id="b3aff-221">準備ができたら、`dotnet restore` を使用して復元を試みることができます ([注記参照](#dotnet-restore-note))。</span><span class="sxs-lookup"><span data-stu-id="b3aff-221">Once you are ready, you can try restoring with `dotnet restore` ([see note](#dotnet-restore-note)).</span></span> <span data-ttu-id="b3aff-222">依存関係のバージョンによっては、上記の対象となるフレームワークのいずれかの依存関係を NuGet が解決できない場合にエラーが発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b3aff-222">Depending on the version of your dependencies, you may encounter errors if NuGet cannot resolve the dependencies for one of the targeted frameworks above.</span></span> <span data-ttu-id="b3aff-223">これは "ポイント イン タイム" 問題です。時間の経過と共に、これらのフレームワークのサポートを含むパッケージが増える現象です。</span><span class="sxs-lookup"><span data-stu-id="b3aff-223">This is a "point-in-time" problem; as time progresses, more and more packages will include support for these frameworks.</span></span> <span data-ttu-id="b3aff-224">今のところ、このエラーが発生した場合は、`framework` ノード内に `imports` ステートメントを使用して、"imports" ステートメント内のフレームワークを対象とするパッケージを復元できるという条件を NuGet に示すことができます。</span><span class="sxs-lookup"><span data-stu-id="b3aff-224">For now, if you run into this, you can use the `imports` statement within the `framework` node to specify to NuGet that it can restore the packages targeting the framework within the "imports" statement.</span></span>
<span data-ttu-id="b3aff-225">この場合に返される復元エラーに含まれる情報を見れば、どのフレームワークをインポートすればよいかを特定できるはずです。</span><span class="sxs-lookup"><span data-stu-id="b3aff-225">The restoring errors you get in this case should provide enough information to tell you which frameworks you need to import.</span></span> <span data-ttu-id="b3aff-226">情報が不足している場合、または、まだ慣れていない場合は、通常、`dnxcore50` と `portable-net45+win8` を `imports` ステートメントに指定することで、うまくいくはずです。</span><span class="sxs-lookup"><span data-stu-id="b3aff-226">If you are slightly lost or new to this, in general, specifying `dnxcore50` and `portable-net45+win8` in the `imports` statement should do the trick.</span></span> <span data-ttu-id="b3aff-227">次の JSON スニペットに、例を示します。</span><span class="sxs-lookup"><span data-stu-id="b3aff-227">The JSON snippet below shows how this looks like:</span></span>

```json
    "frameworks": {
        "netcoreapp1.0": {
            "imports": ["dnxcore50", "portable-net45+win8"]
        }
    }
```

<span data-ttu-id="b3aff-228">`dotnet build` を実行した場合、数がそんなに多くなくても、最終的にビルド エラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b3aff-228">Running `dotnet build` will show any eventual build errors, though there shouldn't be too many of them.</span></span> <span data-ttu-id="b3aff-229">コードが構築され正常に動作したら、ランナーを使用して試してみることができます。</span><span class="sxs-lookup"><span data-stu-id="b3aff-229">After your code is building and running properly, you can test it out with the runner.</span></span> <span data-ttu-id="b3aff-230">`dotnet <path-to-your-assembly>` を実行し、それが実行されているのを確認してください。</span><span class="sxs-lookup"><span data-stu-id="b3aff-230">Execute `dotnet <path-to-your-assembly>` and see it run.</span></span>

<a name="dotnet-restore-note"></a>

[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]
