---
title: .NET Core アプリケーション展開
description: .NET Core アプリケーションを展開する方法について説明します。
ms.date: 12/03/2018
ms.openlocfilehash: 41c5285f2a9ddf38e4be7326bd5cba1c58370fe7
ms.sourcegitcommit: 9a97c76e141333394676bc5d264c6624b6f45bcf
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/08/2020
ms.locfileid: "75740811"
---
# <a name="net-core-application-deployment"></a><span data-ttu-id="002ef-103">.NET Core アプリケーションの展開</span><span class="sxs-lookup"><span data-stu-id="002ef-103">.NET Core application deployment</span></span>

<span data-ttu-id="002ef-104">.NET Core アプリケーションに対して、次の 3 種類の展開を作成できます。</span><span class="sxs-lookup"><span data-stu-id="002ef-104">You can create three types of deployments for .NET Core applications:</span></span>

- <span data-ttu-id="002ef-105">フレームワークに依存する展開。</span><span class="sxs-lookup"><span data-stu-id="002ef-105">Framework-dependent deployment.</span></span> <span data-ttu-id="002ef-106">名前が示すように、フレームワークに依存する展開 (FDD) は、ターゲット システムに .NET Core のシステム全体の共有バージョンが存在することに依存します。</span><span class="sxs-lookup"><span data-stu-id="002ef-106">As the name implies, framework-dependent deployment (FDD) relies on the presence of a shared system-wide version of .NET Core on the target system.</span></span> <span data-ttu-id="002ef-107">.NET Core は既に存在するので、アプリは .NET Core のインストール間で移植することもできます。</span><span class="sxs-lookup"><span data-stu-id="002ef-107">Because .NET Core is already present, your app is also portable between installations of .NET Core.</span></span> <span data-ttu-id="002ef-108">アプリには、それ自体のコード、および .NET Core ライブラリの外部にあるサードパーティの依存関係のみが含まれています。</span><span class="sxs-lookup"><span data-stu-id="002ef-108">Your app contains only its own code and any third-party dependencies that are outside of the .NET Core libraries.</span></span> <span data-ttu-id="002ef-109">FDD には、コマンドラインから [dotnet ユーティリティ](../tools/dotnet.md)を使って起動できる *.dll* ファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="002ef-109">FDDs contain *.dll* files that can be launched by using the [dotnet utility](../tools/dotnet.md) from the command line.</span></span> <span data-ttu-id="002ef-110">たとえば、`dotnet app.dll` は `app` という名前のアプリケーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="002ef-110">For example, `dotnet app.dll` runs an application named `app`.</span></span>

- <span data-ttu-id="002ef-111">自己完結型の展開。</span><span class="sxs-lookup"><span data-stu-id="002ef-111">Self-contained deployment.</span></span> <span data-ttu-id="002ef-112">FDD とは異なり、自己完結型の展開 (SCD) は、ターゲット システムに共有コンポーネントが存在することに依存しません。</span><span class="sxs-lookup"><span data-stu-id="002ef-112">Unlike FDD, a self-contained deployment (SCD) doesn't rely on the presence of shared components on the target system.</span></span> <span data-ttu-id="002ef-113">.NET Core ライブラリと .NET Core ランタイムの両方を含むすべてのコンポーネントがアプリケーションに含まれており、他の .NET Core アプリケーションから分離されています。</span><span class="sxs-lookup"><span data-stu-id="002ef-113">All components, including both the .NET Core libraries and the .NET Core runtime, are included with the application and are isolated from other .NET Core applications.</span></span> <span data-ttu-id="002ef-114">SCD には、プラットフォーム固有の .NET Core ホストの名前変更後のバージョンである実行可能ファイル (`app` という名前のアプリケーションに対する Windows プラットフォーム上の *app.exe* など)、および実際のアプリケーションである *.dll* ファイル (*app.dll* など) が含まれています。</span><span class="sxs-lookup"><span data-stu-id="002ef-114">SCDs include an executable (such as *app.exe* on Windows platforms for an application named `app`), which is a renamed version of the platform-specific .NET Core host, and a *.dll* file (such as *app.dll*), which is the actual application.</span></span>

- <span data-ttu-id="002ef-115">フレームワークに依存する実行可能ファイル。</span><span class="sxs-lookup"><span data-stu-id="002ef-115">Framework-dependent executables.</span></span> <span data-ttu-id="002ef-116">ターゲット プラットフォーム上で実行される実行可能ファイルを生成します。</span><span class="sxs-lookup"><span data-stu-id="002ef-116">Produces an executable that runs on a target platform.</span></span> <span data-ttu-id="002ef-117">FDD と同様に、フレームワークに依存する実行可能ファイル (FDE) はプラットフォームに固有であり、自己完結型ではありません。</span><span class="sxs-lookup"><span data-stu-id="002ef-117">Similar to FDDs, framework-dependent executables (FDE) are platform-specific and aren't self-contained.</span></span> <span data-ttu-id="002ef-118">これらの展開は、引き続き .NET Core のシステム全体の共有バージョンに依存して実行されます。</span><span class="sxs-lookup"><span data-stu-id="002ef-118">These deployments still rely on the presence of a shared system-wide version of .NET Core to run.</span></span> <span data-ttu-id="002ef-119">SCD とは異なり、アプリに含まれるのは、ご自身のコードと、.NET Core ライブラリの外部にあるサードパーティの依存関係のみです。</span><span class="sxs-lookup"><span data-stu-id="002ef-119">Unlike an SCD, your app only contains your code and any third-party dependencies that are outside of the .NET Core libraries.</span></span> <span data-ttu-id="002ef-120">FDE では、ターゲット プラットフォーム上で実行される実行可能ファイルが生成されます。</span><span class="sxs-lookup"><span data-stu-id="002ef-120">FDEs produce an executable that runs on the target platform.</span></span>

## <a name="framework-dependent-deployments-fdd"></a><span data-ttu-id="002ef-121">フレームワークに依存する展開 (FDD)</span><span class="sxs-lookup"><span data-stu-id="002ef-121">Framework-dependent deployments (FDD)</span></span>

<span data-ttu-id="002ef-122">FDD では、アプリ、およびサードパーティの依存関係のみを展開します。</span><span class="sxs-lookup"><span data-stu-id="002ef-122">For an FDD, you deploy only your app and third-party dependencies.</span></span> <span data-ttu-id="002ef-123">アプリでは、ターゲット システム上に存在するバージョンの .NET Core が使われます。</span><span class="sxs-lookup"><span data-stu-id="002ef-123">Your app will use the version of .NET Core that's present on the target system.</span></span> <span data-ttu-id="002ef-124">これは、.NET Core および .NET Core をターゲットとする ASP.NET Core アプリの既定の展開モデルです。</span><span class="sxs-lookup"><span data-stu-id="002ef-124">This is the default deployment model for .NET Core and ASP.NET Core apps that target .NET Core.</span></span>

### <a name="why-create-a-framework-dependent-deployment"></a><span data-ttu-id="002ef-125">フレームワークに依存する展開を作成する理由</span><span class="sxs-lookup"><span data-stu-id="002ef-125">Why create a framework-dependent deployment?</span></span>

<span data-ttu-id="002ef-126">FDD の展開には、次のいくつかの利点があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-126">Deploying an FDD has a number of advantages:</span></span>

- <span data-ttu-id="002ef-127">.NET Core アプリが実行されるターゲットのオペレーティング システムを事前に定義する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="002ef-127">You don't have to define the target operating systems that your .NET Core app will run on in advance.</span></span> <span data-ttu-id="002ef-128">.NET Core は、オペレーティング システムに関係なく実行可能ファイルとライブラリに共通の PE ファイル形式を使用するので、.NET Core は、基になるオペレーティング システムに関係なくアプリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="002ef-128">Because .NET Core uses a common PE file format for executables and libraries regardless of operating system, .NET Core can execute your app regardless of the underlying operating system.</span></span> <span data-ttu-id="002ef-129">PE ファイル形式の詳細については、「[.NET Assembly File Format](../../standard/assembly/file-format.md)」 (.NET アセンブリのファイル形式) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="002ef-129">For more information on the PE file format, see [.NET Assembly File Format](../../standard/assembly/file-format.md).</span></span>

- <span data-ttu-id="002ef-130">展開パッケージは小サイズです。</span><span class="sxs-lookup"><span data-stu-id="002ef-130">The size of your deployment package is small.</span></span> <span data-ttu-id="002ef-131">.NET Core 自体ではなく、アプリとその依存関係のみを展開します。</span><span class="sxs-lookup"><span data-stu-id="002ef-131">You only deploy your app and its dependencies, not .NET Core itself.</span></span>

- <span data-ttu-id="002ef-132">オーバーライドされない限り、FDD では、ターゲット システムにインストールされている最新のサービス提供されたランタイムが使われます。</span><span class="sxs-lookup"><span data-stu-id="002ef-132">Unless overridden, FDDs will use the latest serviced runtime installed on the target system.</span></span> <span data-ttu-id="002ef-133">これにより、ご自身のアプリケーションで修正済みの最新バージョンの .NET Core ランタイムを使うことができます。</span><span class="sxs-lookup"><span data-stu-id="002ef-133">This allows your application to use the latest patched version of the .NET Core runtime.</span></span> 

- <span data-ttu-id="002ef-134">複数のアプリが、同じ .NET Core インストールを使用します。これにより、ホスト システム上のディスク領域とメモリ使用量の両方が削減されます。</span><span class="sxs-lookup"><span data-stu-id="002ef-134">Multiple apps use the same .NET Core installation, which reduces both disk space and memory usage on host systems.</span></span>

<span data-ttu-id="002ef-135">次のいくつかの短所もあります。</span><span class="sxs-lookup"><span data-stu-id="002ef-135">There are also a few disadvantages:</span></span>

- <span data-ttu-id="002ef-136">アプリのターゲットとなる .NET Core のバージョン、[またはそれ以降のバージョン](../versions/selection.md#framework-dependent-apps-roll-forward)が、ホスト システムに既にインストールされている場合にのみアプリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="002ef-136">Your app can run only if the version of .NET Core your app targets, [or a later version](../versions/selection.md#framework-dependent-apps-roll-forward), is already installed on the host system.</span></span>

- <span data-ttu-id="002ef-137">将来のリリースでは、ユーザーの認識なしに .NET Core ランタイムおよびライブラリが変更される場合があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-137">It's possible for the .NET Core runtime and libraries to change without your knowledge in future releases.</span></span> <span data-ttu-id="002ef-138">まれなケースでは、アプリのビヘイビアーが変更される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-138">In rare cases, this may change the behavior of your app.</span></span>

## <a name="self-contained-deployments-scd"></a><span data-ttu-id="002ef-139">自己完結型の展開 (SCD)</span><span class="sxs-lookup"><span data-stu-id="002ef-139">Self-contained deployments (SCD)</span></span>

<span data-ttu-id="002ef-140">自己完結型の展開では、アプリおよびすべての必要なサードパーティの依存関係と共に、アプリのビルドに使った .NET Core のバージョンも展開します。</span><span class="sxs-lookup"><span data-stu-id="002ef-140">For a self-contained deployment, you deploy your app and any required third-party dependencies along with the version of .NET Core that you used to build the app.</span></span> <span data-ttu-id="002ef-141">SCD の作成には、さまざまなプラットフォーム上の [.NET Core のネイティブの依存関係](https://github.com/dotnet/core/blob/master/Documentation/prereqs.md)は含まれないので、アプリが実行する前にこれらが存在している必要があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-141">Creating an SCD doesn't include the [native dependencies of .NET Core](https://github.com/dotnet/core/blob/master/Documentation/prereqs.md) on various platforms, so these must be present before the app runs.</span></span> <span data-ttu-id="002ef-142">ランタイムのバージョン バインディングについて詳しくは、[.NET Core のバージョン バインディング](../versions/selection.md)に関する記事をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="002ef-142">For more information on version binding at runtime, see the article on [version binding in .NET Core](../versions/selection.md).</span></span>

<span data-ttu-id="002ef-143">.NET Core 2.1 SDK (バージョン 2.1.300) 以降、.NET Core では "*修正プログラムのバージョンのロール フォワード*" がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="002ef-143">Starting with NET Core 2.1 SDK (version 2.1.300), .NET Core supports *patch version roll forward*.</span></span> <span data-ttu-id="002ef-144">自己完結型の展開を作成するときに、.NET Core のツールによって、アプリケーションがターゲットとする .NET Core のバージョンの最新のサービス提供されたランタイムが含まれます。</span><span class="sxs-lookup"><span data-stu-id="002ef-144">When you create a self-contained deployment, .NET Core tools automatically include the latest serviced runtime of the .NET Core version that your application targets.</span></span> <span data-ttu-id="002ef-145">(最新のサービス提供されたランタイムには、セキュリティに関する修正プログラムとその他のバグの修正が含まれます。)サービス提供されたランタイムがビルド システム上に存在する必要はありません。これは NuGet.org から自動的にダウンロードされます。修正プログラムのバージョンのロール フォワードを無効にする方法など、詳細については「[自己完結型展開ランタイムのロール フォワード](runtime-patch-selection.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="002ef-145">(The latest serviced runtime includes security patches and other bug fixes.) The serviced runtime does not have to be present on your build system; it is downloaded automatically from NuGet.org. For more information, including instructions on how to opt out of patch version roll forward, see [Self-contained deployment runtime roll forward](runtime-patch-selection.md).</span></span>

<span data-ttu-id="002ef-146">FDD および SCD の展開では別個のホスト実行可能ファイルを使用するため、発行元のシグネチャで SCD のホスト実行可能ファイルに署名できます。</span><span class="sxs-lookup"><span data-stu-id="002ef-146">FDD and SCD deployments use separate host executables, so you can sign a host executable for an SCD with your publisher signature.</span></span>

### <a name="why-deploy-a-self-contained-deployment"></a><span data-ttu-id="002ef-147">自己完結型の展開を展開する理由</span><span class="sxs-lookup"><span data-stu-id="002ef-147">Why deploy a self-contained deployment?</span></span>

<span data-ttu-id="002ef-148">自己完結型の展開を展開するのには、次の 2 つの主な利点があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-148">Deploying a Self-contained deployment has two major advantages:</span></span>

- <span data-ttu-id="002ef-149">アプリで展開されている .NET Core のバージョンは、あなただけがコントロールできます。</span><span class="sxs-lookup"><span data-stu-id="002ef-149">You have sole control of the version of .NET Core that is deployed with your app.</span></span> <span data-ttu-id="002ef-150">.NET Core を操作できるのはあなただけです。</span><span class="sxs-lookup"><span data-stu-id="002ef-150">.NET Core can be serviced only by you.</span></span>

- <span data-ttu-id="002ef-151">ターゲット システムが実行できる .NET Core のバージョンを提供しているので、ターゲット システムで .NET Core アプリを確実に実行できます。</span><span class="sxs-lookup"><span data-stu-id="002ef-151">You can be assured that the target system can run your .NET Core app, since you're providing the version of .NET Core that it will run on.</span></span>

<span data-ttu-id="002ef-152">また、次のいくつかの短所もあります。</span><span class="sxs-lookup"><span data-stu-id="002ef-152">It also has a number of disadvantages:</span></span>

- <span data-ttu-id="002ef-153">.NET Core が展開パッケージに含まれているので、展開パッケージをビルドするターゲット プラットフォームを事前に選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-153">Because .NET Core is included in your deployment package, you must select the target platforms for which you build deployment packages in advance.</span></span>

- <span data-ttu-id="002ef-154">.NET Core だけでなくアプリおよびそのサードパーティの依存関係を含める必要があるので、展開パッケージは比較的大きくなります。</span><span class="sxs-lookup"><span data-stu-id="002ef-154">The size of your deployment package is relatively large, since you have to include .NET Core as well as your app and its third-party dependencies.</span></span>

  <span data-ttu-id="002ef-155">.NET Core 2.0 以降では、.NET Core の ["*グローバリゼーション インバリアント モード*"](https://github.com/dotnet/runtime/blob/master/docs/design/features/globalization-invariant-mode.md) を使用することで、Linux システムでの展開のサイズを約 28 MB 小さくすることができます。</span><span class="sxs-lookup"><span data-stu-id="002ef-155">Starting with .NET Core 2.0, you can reduce the size of your deployment on Linux systems by approximately 28 MB by using .NET Core [*globalization invariant mode*](https://github.com/dotnet/runtime/blob/master/docs/design/features/globalization-invariant-mode.md).</span></span> <span data-ttu-id="002ef-156">通常、Linux 上の .NET Core は [ICU ライブラリ](http://icu-project.org)に依存してグローバリゼーションをサポートします。</span><span class="sxs-lookup"><span data-stu-id="002ef-156">Ordinarily, .NET Core on Linux relies on the [ICU libraries](http://icu-project.org) for globalization support.</span></span> <span data-ttu-id="002ef-157">インバリアント モードでは、ライブラリは展開に含まれず、すべてのカルチャが[インバリアント カルチャ](xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType)のように動作します。</span><span class="sxs-lookup"><span data-stu-id="002ef-157">In invariant mode, the libraries are not included with your deployment, and all cultures behave like the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType).</span></span>

- <span data-ttu-id="002ef-158">多数の自己完結型の .NET Core アプリをシステムに展開すると、各アプリが .NET Core ファイルを複製するので、非常に多くのディスク領域を使用する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-158">Deploying numerous self-contained .NET Core apps to a system can consume significant amounts of disk space, since each app duplicates .NET Core files.</span></span>

## <a name="framework-dependent-executables-fde"></a><span data-ttu-id="002ef-159">フレームワークに依存する実行可能ファイル (FDE)</span><span class="sxs-lookup"><span data-stu-id="002ef-159">Framework-dependent executables (FDE)</span></span>

<span data-ttu-id="002ef-160">.NET Core 2.2 以降では、必要なサードパーティの依存関係と共に、FDE としてアプリを展開できます。</span><span class="sxs-lookup"><span data-stu-id="002ef-160">Starting with .NET Core 2.2, you can deploy your app as an FDE, along with any required third-party dependencies.</span></span> <span data-ttu-id="002ef-161">アプリでは、ターゲット システムにインストールされているバージョンの .NET Core が使われます。</span><span class="sxs-lookup"><span data-stu-id="002ef-161">Your app will use the version of .NET Core that's installed on the target system.</span></span>

### <a name="why-deploy-a-framework-dependent-executable"></a><span data-ttu-id="002ef-162">フレームワークに依存する実行可能ファイルを展開する理由</span><span class="sxs-lookup"><span data-stu-id="002ef-162">Why deploy a framework-dependent executable?</span></span>

<span data-ttu-id="002ef-163">FDE の展開には、次のいくつかの利点があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-163">Deploying an FDE has a number of advantages:</span></span>

- <span data-ttu-id="002ef-164">展開パッケージは小サイズです。</span><span class="sxs-lookup"><span data-stu-id="002ef-164">The size of your deployment package is small.</span></span> <span data-ttu-id="002ef-165">.NET Core 自体ではなく、アプリとその依存関係のみを展開します。</span><span class="sxs-lookup"><span data-stu-id="002ef-165">You only deploy your app and its dependencies, not .NET Core itself.</span></span>

- <span data-ttu-id="002ef-166">複数のアプリが、同じ .NET Core インストールを使用します。これにより、ホスト システム上のディスク領域とメモリ使用量の両方が削減されます。</span><span class="sxs-lookup"><span data-stu-id="002ef-166">Multiple apps use the same .NET Core installation, which reduces both disk space and memory usage on host systems.</span></span>

- <span data-ttu-id="002ef-167">直接 `dotnet` ユーティリティを起動することなく、発行済みの実行可能ファイルを呼び出すことでアプリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="002ef-167">Your app can be run by calling the published executable without invoking the `dotnet` utility directly.</span></span>

<span data-ttu-id="002ef-168">次のいくつかの短所もあります。</span><span class="sxs-lookup"><span data-stu-id="002ef-168">There are also a few disadvantages:</span></span>

- <span data-ttu-id="002ef-169">アプリのターゲットとなる .NET Core のバージョン、[またはそれ以降のバージョン](../versions/selection.md#framework-dependent-apps-roll-forward)が、ホスト システムに既にインストールされている場合にのみアプリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="002ef-169">Your app can run only if the version of .NET Core your app targets, [or a later version](../versions/selection.md#framework-dependent-apps-roll-forward), is already installed on the host system.</span></span>

- <span data-ttu-id="002ef-170">将来のリリースでは、ユーザーの認識なしに .NET Core ランタイムおよびライブラリが変更される場合があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-170">It's possible for the .NET Core runtime and libraries to change without your knowledge in future releases.</span></span> <span data-ttu-id="002ef-171">まれなケースでは、アプリのビヘイビアーが変更される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-171">In rare cases, this may change the behavior of your app.</span></span>

- <span data-ttu-id="002ef-172">各ターゲット プラットフォームに対してアプリを発行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="002ef-172">You must publish your app for each target platform.</span></span>

## <a name="step-by-step-examples"></a><span data-ttu-id="002ef-173">手順の例</span><span class="sxs-lookup"><span data-stu-id="002ef-173">Step-by-step examples</span></span>

<span data-ttu-id="002ef-174">CLI ツールで .NET Core アプリを展開する手順の例については、「[CLI を使用して .NET Core アプリを展開する](deploy-with-cli.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="002ef-174">For step-by-step examples of deploying .NET Core apps with CLI tools, see [Deploying .NET Core Apps with CLI Tools](deploy-with-cli.md).</span></span> <span data-ttu-id="002ef-175">Visual Studio で .NET Core アプリを展開する手順の例については、「[Visual Studio を使用して .NET Core アプリを展開する](deploy-with-vs.md)」 をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="002ef-175">For step-by-step examples of deploying .NET Core apps with Visual Studio, see [Deploying .NET Core Apps with Visual Studio](deploy-with-vs.md).</span></span> 

## <a name="see-also"></a><span data-ttu-id="002ef-176">関連項目</span><span class="sxs-lookup"><span data-stu-id="002ef-176">See also</span></span>

- [<span data-ttu-id="002ef-177">CLI を使用して .NET Core アプリを展開する</span><span class="sxs-lookup"><span data-stu-id="002ef-177">Deploying .NET Core Apps with CLI Tools</span></span>](deploy-with-cli.md)
- [<span data-ttu-id="002ef-178">Visual Studio を使用して .NET Core アプリを展開する</span><span class="sxs-lookup"><span data-stu-id="002ef-178">Deploying .NET Core Apps with Visual Studio</span></span>](deploy-with-vs.md)
- [<span data-ttu-id="002ef-179">パッケージ、メタパッケージ、フレームワーク</span><span class="sxs-lookup"><span data-stu-id="002ef-179">Packages, Metapackages and Frameworks</span></span>](../packages.md)
- [<span data-ttu-id="002ef-180">.NET Core のランタイム識別子 (RID) のカタログ</span><span class="sxs-lookup"><span data-stu-id="002ef-180">.NET Core Runtime IDentifier (RID) catalog</span></span>](../rid-catalog.md)
