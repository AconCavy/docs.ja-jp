---
title: .NET Framework から .NET Core への移植
description: 移植プロセスを理解し、.NET Framework プロジェクトを .NET Core に移植する際に役立つツールを確認します。
author: cartermp
ms.date: 10/22/2019
ms.openlocfilehash: 764c615d250474573f873b1745b9f1469e637d29
ms.sourcegitcommit: 34968a61e9bac0f6be23ed6ffb837f52d2390c85
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/17/2020
ms.locfileid: "94687413"
---
# <a name="overview-of-porting-from-net-framework-to-net-core"></a><span data-ttu-id="b13e7-103">.NET Framework から .NET Core への移植の概要</span><span class="sxs-lookup"><span data-stu-id="b13e7-103">Overview of porting from .NET Framework to .NET Core</span></span>

<span data-ttu-id="b13e7-104">現在 .NET Framework で実行しているコードの .NET Core への移植を検討する場合があります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-104">You might have code that currently runs on the .NET Framework that you're interested in porting to .NET Core.</span></span> <span data-ttu-id="b13e7-105">この記事では、次について説明します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-105">This article provides:</span></span>

* <span data-ttu-id="b13e7-106">移植プロセスの概要。</span><span class="sxs-lookup"><span data-stu-id="b13e7-106">An overview of the porting process.</span></span>
* <span data-ttu-id="b13e7-107">コードを .NET Core に移植するときに役立つ場合があるツールの一覧。</span><span class="sxs-lookup"><span data-stu-id="b13e7-107">A list of tools that you may find helpful when you're porting your code to .NET Core.</span></span>

## <a name="overview-of-the-porting-process"></a><span data-ttu-id="b13e7-108">移植プロセスの概要</span><span class="sxs-lookup"><span data-stu-id="b13e7-108">Overview of the porting process</span></span>

<span data-ttu-id="b13e7-109">多くのプロジェクトは、.NET Framework から .NET Core (または .NET Standard) に比較的簡単に移植できます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-109">Porting to .NET Core (or .NET Standard) from .NET Framework for many projects is relatively straightforward.</span></span> <span data-ttu-id="b13e7-110">多数の変更が必要ですが、その多くは次に示すパターンどおりです。</span><span class="sxs-lookup"><span data-stu-id="b13e7-110">There are a number of changes that are required, but many of them follow the patterns outlined below.</span></span> <span data-ttu-id="b13e7-111">.NET Core にアプリ モデルがあるプロジェクト (ライブラリ、コンソール アプリ、デスクトップ アプリケーションなど) では、通常ほとんど変更することはありません。</span><span class="sxs-lookup"><span data-stu-id="b13e7-111">Projects where the app-model is available in .NET Core (such as libraries, console apps, and desktop applications) usually require little changes.</span></span> <span data-ttu-id="b13e7-112">ASP.NET から ASP.NET Core への移行など、新しいアプリケーション モデルを必要とするプロジェクトでは、多少の作業が必要になりますが、多くのパターンには変換時に使用できるアナログがあります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-112">Projects that require a new app model, such as moving to ASP.NET Core from ASP.NET, require a bit more work, but many patterns have analogs that can be used during the conversion.</span></span> <span data-ttu-id="b13e7-113">このドキュメントでは、ユーザーがどのような主戦略を使用してコード ベースをターゲットの .NET Standard または .NET Core に正常に変換したか理解し、ソリューション全体とプロジェクト別の 2 つのレベルで変換を行う方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-113">This document should help with identifying the main strategies that have been employed by users to successfully convert their code bases to target .NET Standard or .NET Core and will address the conversion at two levels: solution-wide and project specific.</span></span> <span data-ttu-id="b13e7-114">アプリ モデル固有の変換については、下部にあるリンクを参照してください。</span><span class="sxs-lookup"><span data-stu-id="b13e7-114">See the links at the bottom for directions on app-model specific conversions.</span></span>

<span data-ttu-id="b13e7-115">ご自分のプロジェクトを .NET Core に移植する場合は、次の手順を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b13e7-115">We recommend you use the following process when porting your project to .NET Core.</span></span> <span data-ttu-id="b13e7-116">これらの各手順では、動作が変わってしまう可能性がある場所を示しています。それ以降の手順に進む前に、ご自分のライブラリまたはアプリケーションは十分にテストしてください。</span><span class="sxs-lookup"><span data-stu-id="b13e7-116">Each of these steps introduces potential places for behavior changes, so ensure that you adequately test your library or application before continuing on to later steps.</span></span> <span data-ttu-id="b13e7-117">最初の手順では、ご自分のプロジェクトを .NET Standard または .NET Core に切り替えられることができるように準備します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-117">The first steps are to get your project ready for a switch to .NET Standard or .NET Core.</span></span> <span data-ttu-id="b13e7-118">単体テストがある場合は、最初にそれらを変換して、作業中の製品の変更のテストを継続できるようにすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b13e7-118">If you have unit tests, it's best to convert them first so that you can continue testing changes in the product you're working on.</span></span> <span data-ttu-id="b13e7-119">.NET Core への移植はコードベースにとって大きな変更となるため、テスト プロジェクトを移植して、ご自分のコードの移植時にテストを実行できるようにすることを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b13e7-119">Because porting to .NET Core is such a significant change to your codebase, it's highly recommended to port your test projects so that you can run tests as you port your code over.</span></span> <span data-ttu-id="b13e7-120">MSTest、xUnit、NUnit はすべて .NET Core で動作します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-120">MSTest, xUnit, and NUnit all work on .NET Core.</span></span>

## <a name="getting-started"></a><span data-ttu-id="b13e7-121">作業の開始</span><span class="sxs-lookup"><span data-stu-id="b13e7-121">Getting started</span></span>

<span data-ttu-id="b13e7-122">このプロセスを通して、次のツールを使用します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-122">The following tools will be used throughout the process:</span></span>

- <span data-ttu-id="b13e7-123">Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="b13e7-123">Visual Studio 2019</span></span>
- <span data-ttu-id="b13e7-124">[.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) をダウンロードします</span><span class="sxs-lookup"><span data-stu-id="b13e7-124">Download [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md)</span></span>
- <span data-ttu-id="b13e7-125">_省略可能_ [dotnet try-convert](https://github.com/dotnet/try-convert) をインストールします</span><span class="sxs-lookup"><span data-stu-id="b13e7-125">_Optional_ Install [dotnet try-convert](https://github.com/dotnet/try-convert)</span></span>

## <a name="porting-a-solution"></a><span data-ttu-id="b13e7-126">ソリューションの移植</span><span class="sxs-lookup"><span data-stu-id="b13e7-126">Porting a solution</span></span>

<span data-ttu-id="b13e7-127">ソリューションに複数のプロジェクトがある場合は、特定の順序でプロジェクトに対応する必要があるため、移植が複雑に思える場合があります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-127">When there are multiple projects in a solution, the porting can seem more complicated because you must address projects in a specific order.</span></span> <span data-ttu-id="b13e7-128">他のプロジェクトに依存しないソリューション内のプロジェクトを最初に変換してから、ソリューション全体を変換し続ける、ボトムアップ アプローチでこの変換プロセスは行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-128">The conversion process should be a bottom-up approach, where the projects with no dependencies on other projects in the solution are converted first, and continue up through the whole solution.</span></span>

<span data-ttu-id="b13e7-129">次のツールを使用すると、どのプロジェクトから移行するかを割り出すことができます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-129">In order to identify the order projects should be migrated, you can use the following tools:</span></span>

- <span data-ttu-id="b13e7-130">[Visual Studio の依存関係図](/visualstudio/modeling/create-layer-diagrams-from-your-code)に関する説明からは、ソリューション内のコードの有向グラフを作成できます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-130">[Dependency Diagrams in Visual Studio](/visualstudio/modeling/create-layer-diagrams-from-your-code) can create a directed graph of the code in a solution.</span></span>
- <span data-ttu-id="b13e7-131">`msbuild _SolutionPath_ /t:GenerateRestoreGraphFile /p:RestoreGraphOutputPath=graph.dg.json` を実行すると、プロジェクト参照の一覧を含む json ドキュメントを生成できます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-131">Run `msbuild _SolutionPath_ /t:GenerateRestoreGraphFile /p:RestoreGraphOutputPath=graph.dg.json` to generate a json document that includes list of project references.</span></span>
- <span data-ttu-id="b13e7-132">アセンブリの依存関係図を取得するには、`-r DGML` スイッチを使用して [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) を実行します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-132">Run [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) with the `-r DGML` switch to retrieve a dependency diagram of the assemblies.</span></span> <span data-ttu-id="b13e7-133">詳細については、[このページ](../../standard/analyzers/portability-analyzer.md#solution-wide-view)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b13e7-133">For more information, see [here](../../standard/analyzers/portability-analyzer.md#solution-wide-view).</span></span>

<span data-ttu-id="b13e7-134">依存関係の情報を取得した後は、その情報を使用してリーフ ノードから開始し、次のセクションのステップを適用して依存関係ツリーを操作できます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-134">Once you have dependency information, you can use that information to start at the leaf nodes and work your way up the dependency tree applying the steps in the next section.</span></span>

## <a name="per-project-steps"></a><span data-ttu-id="b13e7-135">プロジェクト別の手順</span><span class="sxs-lookup"><span data-stu-id="b13e7-135">Per project steps</span></span>

<span data-ttu-id="b13e7-136">プロジェクトを .NET Core に移植する場合は、次の手順を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b13e7-136">We recommend you use the following process when porting your project to .NET Core:</span></span>

1. <span data-ttu-id="b13e7-137">[Visual Studio の変換ツール](/nuget/consume-packages/migrate-packages-config-to-package-reference)を使用して、すべての `packages.config` の依存関係を [PackageReference](/nuget/consume-packages/package-references-in-project-files) 形式に変換します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-137">Convert all of your `packages.config` dependencies to the [PackageReference](/nuget/consume-packages/package-references-in-project-files) format with the [conversion tool in Visual Studio](/nuget/consume-packages/migrate-packages-config-to-package-reference).</span></span>

   <span data-ttu-id="b13e7-138">この手順では、依存関係を従来の `packages.config` 形式から変換します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-138">This step involves converting your dependencies from the legacy `packages.config` format.</span></span> <span data-ttu-id="b13e7-139">`packages.config` は .NET Core では機能しないため、パッケージの依存関係がある場合は、この変換が必須です。</span><span class="sxs-lookup"><span data-stu-id="b13e7-139">`packages.config` doesn't work on .NET Core, so this conversion is required if you have package dependencies.</span></span> <span data-ttu-id="b13e7-140">また、プロジェクトで直接使用される依存関係のみに対して実行します。これにより、管理する必要がある依存関係の数を減らせるので、後の手順を楽にできます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-140">It also only requires the dependencies you are directly using in a project, which makes later steps easier by reducing the number of dependencies you must manage.</span></span>

1. <span data-ttu-id="b13e7-141">ご自分のプロジェクト ファイルのファイル構造を新しい SDK 形式のものに変換します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-141">Convert your project file to the new SDK-style files structure.</span></span> <span data-ttu-id="b13e7-142">.NET Core 用の新しいプロジェクトを作成してソース ファイルをコピーするか、ツールを使ってお使いの既存のプロジェクト ファイルを変換することができます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-142">You can create new projects for .NET Core and copy over source files, or attempt to convert your existing project file with a tool.</span></span>

   <span data-ttu-id="b13e7-143">.NET Core では、.NET Framework よりも簡素化された (異なる) [プロジェクト ファイル形式](../tools/csproj.md)が使用されます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-143">.NET Core uses a simplified (and different) [project file format](../tools/csproj.md) than .NET Framework.</span></span> <span data-ttu-id="b13e7-144">続行するには、プロジェクト ファイルをこの形式に変換する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-144">You'll need to convert your project files into this format to continue.</span></span> <span data-ttu-id="b13e7-145">このプロジェクト形式では、この時点では、まだターゲットとしたい .NET Framework もターゲットにすることができます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-145">This project style allows you to also target .NET Framework, which at this point you'll still want to target.</span></span>

   <span data-ttu-id="b13e7-146">[dotnet try-convert](https://github.com/dotnet/try-convert) ツールを使用すると、より小規模なソリューションや個々のプロジェクトを、1 回の操作で .NET Core プロジェクトのファイル形式に移植することが可能です。</span><span class="sxs-lookup"><span data-stu-id="b13e7-146">You can attempt to port smaller solutions or individual projects in one operation to the .NET Core project file format with the [dotnet try-convert](https://github.com/dotnet/try-convert) tool.</span></span> <span data-ttu-id="b13e7-147">`dotnet try-convert` がすべてのプロジェクトに対して動作する保証はありません。また、これが原因となって、依存していた動作に微妙な変更が生じる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-147">`dotnet try-convert` is not guaranteed to work for all your projects, and it may cause subtle changes in behavior that you depended on.</span></span> <span data-ttu-id="b13e7-148">これは、自動化できる基本的なことを自動化するための "_開始点_" としてお使いください。</span><span class="sxs-lookup"><span data-stu-id="b13e7-148">Use it as a _starting point_ that automates the basic things that can be automated.</span></span> <span data-ttu-id="b13e7-149">SDK 形式のプロジェクトで使用されるターゲットと旧形式のプロジェクト ファイルで使用されるものとの間には違いが多数あるため、このソリューションではプロジェクトの移行は保証されません。</span><span class="sxs-lookup"><span data-stu-id="b13e7-149">It isn't a guaranteed solution to migrating a project, as there are many differences in the targets used by the SDK style projects compared to the old-style project files.</span></span>

1. <span data-ttu-id="b13e7-150">移植するすべてのプロジェクトを、.NET Framework 4.7.2 以降をターゲットとするように再ターゲットします。</span><span class="sxs-lookup"><span data-stu-id="b13e7-150">Retarget all projects you wish to port to target .NET Framework 4.7.2 or higher.</span></span>

   <span data-ttu-id="b13e7-151">この手順により、.NET Core で特定の API がサポートされない場合に、.NET Framework 固有のターゲットに対して API の代替を確実に使用できます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-151">This step ensures that you can use API alternatives for .NET Framework-specific targets when .NET Core doesn't support a particular API.</span></span>

1. <span data-ttu-id="b13e7-152">すべての依存関係を最新バージョンに更新します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-152">Update all dependencies to the latest version.</span></span> <span data-ttu-id="b13e7-153">プロジェクトで、.NET Standard でサポートされていない古いバージョンのライブラリが使用されている場合があります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-153">Projects may be using older versions of libraries that may not have .NET Standard support.</span></span> <span data-ttu-id="b13e7-154">ただし、単純に切り替えれば以降のバージョンでサポートされるようにできる場合があります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-154">However, later versions may support it with a simple switch.</span></span> <span data-ttu-id="b13e7-155">ライブラリに破壊的変更がある場合は、コードの変更が必要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-155">This may require code changes if there are breaking changes in libraries.</span></span>

1. <span data-ttu-id="b13e7-156">[.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) を使ってアセンブリを分析し、それらが .NET Core に移植可能かどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-156">Use the [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) to analyze your assemblies and see if they're portable to .NET Core.</span></span>

   <span data-ttu-id="b13e7-157">.NET Portability Analyzer ツールでは、ご自分のコンパイル済みのアセンブリを分析し、レポートを生成します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-157">The .NET Portability Analyzer tool analyzes your compiled assemblies and generates a report.</span></span> <span data-ttu-id="b13e7-158">このレポートには、移植性に関する大まかな概要と、使用している API のうち .NET Core では利用できないものそれぞれについての内訳が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-158">This report shows a high-level portability summary and a breakdown of each API you're using that isn't available on .NET Core.</span></span> <span data-ttu-id="b13e7-159">このツールを使用する場合、変更する必要がある可能性がある API に集中して取り組めるよう、変更するプロジェクトを個々に送信してください。</span><span class="sxs-lookup"><span data-stu-id="b13e7-159">While using the tool, only submit the individual project you are converting to focus on the API changes that are potentially needed.</span></span> <span data-ttu-id="b13e7-160">.NET Core には、多くの API と同等の、ユーザーが切り替えたいと思うものが用意されています。</span><span class="sxs-lookup"><span data-stu-id="b13e7-160">Many of the APIs have equivalent availability in .NET Core, which you'll want to switch to.</span></span>

   <span data-ttu-id="b13e7-161">Analyzer で生成されたレポートを確認するときの重要な情報は、使用されている実際の API です。必ずしもターゲットのプラットフォームのサポートのパーセンテージではありません。</span><span class="sxs-lookup"><span data-stu-id="b13e7-161">While reading the reports generated by the analyzer, the important information is the actual APIs that are being used and not necessarily the percentage of support for the target platform.</span></span> <span data-ttu-id="b13e7-162">.NET Standard と Core には、多くの API と同等の選択肢があります。そのため、お使いのライブラリまたはアプリケーションでの API の使われ方のシナリオを理解しておくと、移植において何をする必要があるかを判断することができます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-162">Many APIs have equivalent options in .NET Standard/Core, and so understanding the scenarios your library or application needs the API for will help determine the implication for portability.</span></span>

   <span data-ttu-id="b13e7-163">同等の API がなく、コンパイラ プリプロセッサ ディレクティブ (つまり、`#if NET45`) を多少使用して、そのプラットフォームに特別対応をする必要がある場合もあります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-163">There are some cases where APIs are not equivalent and you'll need to do some compiler preprocessor directives (that is, `#if NET45`) to special case the platforms.</span></span> <span data-ttu-id="b13e7-164">この時点では、あなたのプロジェクトでは、変わらず .NET Framework をターゲットにしています。</span><span class="sxs-lookup"><span data-stu-id="b13e7-164">At this point, your project will still be targeting .NET Framework.</span></span> <span data-ttu-id="b13e7-165">これらのターゲットがあるケースでは、シナリオとして理解できる広く知られた条件を都度使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b13e7-165">For each of these targeted cases, it is recommended to use well-known conditionals that can be understood as a scenario.</span></span>  <span data-ttu-id="b13e7-166">たとえば、.NET Core では限定的にしか AppDomain をサポートしていません。しかし、アセンブリを読み込みアンロードするシナリオ用に .NET Core では利用できない新しい API があります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-166">For example, AppDomain support in .NET Core is limited, but for the scenario of loading and unloading assemblies, there is a new API that's not available in .NET Core.</span></span> <span data-ttu-id="b13e7-167">これをコードで処理するには、一般的に次のような方法を使用します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-167">A common way to handle this in code would be something like this:</span></span>

   ```csharp
   #if FEATURE_APPDOMAIN_LOADING
   // Code that uses appdomains
   #elif FEATURE_ASSEMBLY_LOAD_CONTEXT
   // Code that uses assembly load context
   #else
   #error Unsupported platform
   #endif
   ```

1. <span data-ttu-id="b13e7-168">[.NET API アナライザー](../../standard/analyzers/api-analyzer.md)をプロジェクトにインストールして、一部のプラットフォームで <xref:System.PlatformNotSupportedException> をスローする API と、発生する可能性のあるその他の互換性の問題を識別します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-168">Install the [.NET API analyzer](../../standard/analyzers/api-analyzer.md) into your projects to identify APIs that throw <xref:System.PlatformNotSupportedException> on some platforms and some other potential compatibility issues.</span></span>

   <span data-ttu-id="b13e7-169">このツールは移植性アナライザーに似ていますが、.NET Core 上にコードをビルドできるかどうかが分析されるのではなく、実行時に <xref:System.PlatformNotSupportedException> をスローするような方法で API を使っているかどうかが分析されます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-169">This tool is similar to the portability analyzer, but instead of analyzing if code can build on .NET Core, it analyzes whether you're using an API in a way that will throw a <xref:System.PlatformNotSupportedException> at run time.</span></span> <span data-ttu-id="b13e7-170">.NET Framework 4.7.2 以上から移行する場合、これは一般的ではありませんが、確認することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b13e7-170">Although this isn't common if you're moving from .NET Framework 4.7.2 or higher, it's good to check.</span></span> <span data-ttu-id="b13e7-171">.NET Core で例外をスローする API の詳細については、「[.NET Core で常に例外をスローする API](../compatibility/unsupported-apis.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b13e7-171">For more information about APIs that throw exceptions on .NET Core, see [APIs that always throw exceptions on .NET Core](../compatibility/unsupported-apis.md).</span></span>

1. <span data-ttu-id="b13e7-172">この時点で、ターゲットを .NET Core (一般的にはアプリケーション用) または .NET Standard (ライブラリ用) に切り替えることができます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-172">At this point, you can switch to targeting .NET Core (generally for applications) or .NET Standard (for libraries).</span></span>

   <span data-ttu-id="b13e7-173">.NET Core と .NET Standard のどちらを選択するかは、プロジェクトの実行場所に大きく関係します。</span><span class="sxs-lookup"><span data-stu-id="b13e7-173">The choice between .NET Core and .NET Standard is largely dependent on where the project will be run.</span></span> <span data-ttu-id="b13e7-174">他のアプリケーションで使用されたり、NuGet 経由で配布されるのがライブラリである場合は、通常は .NET Standard がターゲットとなります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-174">If it is a library that will be consumed by other applications or distributed via NuGet, the preference is usually to target .NET Standard.</span></span> <span data-ttu-id="b13e7-175">ただし、パフォーマンスやその他の理由で .NET Core にしかない API がある場合があります。そのような場合、パフォーマンスや機能が低い .NET Standard のビルドがあっても .NET Core をターゲットにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-175">However, there may be APIs that are only available on .NET Core for performance or other reasons; if that's the case, .NET Core should be targeted with potentially a .NET Standard build available as well with reduced performance or functionality.</span></span> <span data-ttu-id="b13e7-176">.NET Standard をターゲットにすると、(WebAssembly などの) 新しいプラットフォームでプロジェクトを実行できます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-176">By targeting .NET Standard, the project will be ready to run on new platforms (such as WebAssembly).</span></span> <span data-ttu-id="b13e7-177">プロジェクトが (ASP.NET Core など) 特定のアプリケーション フレームワークに依存している場合、ターゲットは依存関係がサポートする内容によって制限されます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-177">If the project has dependencies on specific app frameworks (such as ASP.NET Core), then the target will be limited by what the dependencies support.</span></span>

   <span data-ttu-id="b13e7-178">.NET Framework または .NET Standard 用に条件付きでコードをコンパイルするプリプロセッサ ディレクティブがない場合は、プロジェクト ファイルで次を検索するのと同じくらいこれは簡単です。</span><span class="sxs-lookup"><span data-stu-id="b13e7-178">If there are no preprocessor directives to conditional compile code for .NET Framework or .NET Standard, this will be as simple as finding the following in the project file:</span></span>

   ```xml
   <TargetFramework>net472</TargetFramework>
   ```

   <span data-ttu-id="b13e7-179">目的のフレームワークに切り替えます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-179">and switch it to the desired framework.</span></span> <span data-ttu-id="b13e7-180">.NET Core 3.1 の場合、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="b13e7-180">For .NET Core 3.1, this would be:</span></span>

   ```xml
   <TargetFramework>netcoreapp3.1</TargetFramework>
   ```

   <span data-ttu-id="b13e7-181">ただし、このライブラリに .NET Framework の特定のビルドを引き続きサポートさせたい場合は、次のように置き換えて[マルチターゲット](../../standard/library-guidance/cross-platform-targeting.md)化させることができます。</span><span class="sxs-lookup"><span data-stu-id="b13e7-181">However, if this is a library for which you want to continue supporting .NET Framework-specific builds, you can [multi-target](../../standard/library-guidance/cross-platform-targeting.md) by replacing it with the following:</span></span>

   ```xml
   <TargetFrameworks>net472;netstandard2.0</TargetFrameworks>
   ```

   <span data-ttu-id="b13e7-182">(レジストリ アクセスなどの) Windows 専用の API を使用する場合は、[Windows 互換機能パック](./windows-compat-pack.md)をインストールしてください。</span><span class="sxs-lookup"><span data-stu-id="b13e7-182">If you're using Windows-specific APIs (such as registry access), install the [Windows Compatibility Pack](./windows-compat-pack.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="b13e7-183">次の手順</span><span class="sxs-lookup"><span data-stu-id="b13e7-183">Next steps</span></span>

> [!div class="nextstepaction"]
> <span data-ttu-id="b13e7-184">[依存関係の分析](third-party-deps.md)
> [NuGet パッケージのパッケージ化](../deploying/creating-nuget-packages.md)</span><span class="sxs-lookup"><span data-stu-id="b13e7-184">[Analyze dependencies](third-party-deps.md)
[Package a NuGet package](../deploying/creating-nuget-packages.md)</span></span>

## <a name="see-also"></a><span data-ttu-id="b13e7-185">こちらもご覧ください</span><span class="sxs-lookup"><span data-stu-id="b13e7-185">See also</span></span>

- [<span data-ttu-id="b13e7-186">ASP.NET から ASP.NET Core への移行</span><span class="sxs-lookup"><span data-stu-id="b13e7-186">ASP.NET to ASP.NET Core migration</span></span>](/aspnet/core/migration/proper-to-2x)
- [<span data-ttu-id="b13e7-187">WPF アプリを .NET Core に移行する</span><span class="sxs-lookup"><span data-stu-id="b13e7-187">Migrate WPF apps to .NET Core</span></span>](/dotnet/desktop/wpf/migration/convert-project-from-net-framework)
- [<span data-ttu-id="b13e7-188">.NET Framework Windows フォーム アプリを .NET に移行する</span><span class="sxs-lookup"><span data-stu-id="b13e7-188">Migrate .NET Framework Windows Forms apps to .NET</span></span>](/dotnet/desktop/winforms/migration/?view=netdesktop-5.0&preserve-view=true)
