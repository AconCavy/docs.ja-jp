---
title: 正規表現のオプション
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- regular expressions, options
- constructs, options
- .NET Framework regular expressions, options
- inline option constructs
- options parameter
ms.assetid: c82dc689-7e82-4767-a18d-cd24ce5f05e9
ms.openlocfilehash: 8c742c855234bfd9653bb57036c41e7ccce66295
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/02/2020
ms.locfileid: "84289292"
---
# <a name="regular-expression-options"></a><span data-ttu-id="f0260-102">正規表現のオプション</span><span class="sxs-lookup"><span data-stu-id="f0260-102">Regular Expression Options</span></span>

<span data-ttu-id="f0260-103">正規表現パターンでの入力文字列とリテラル文字列の比較では、大文字と小文字が区別されます。正規表現パターンに含まれる空白は、リテラルの空白文字として解釈されます。正規表現で使用されるキャプチャ グループは、暗黙的に指定される場合と明示的に指定される場合があります。これらはすべて、正規表現の既定の動作です。</span><span class="sxs-lookup"><span data-stu-id="f0260-103">By default, the comparison of an input string with any literal characters in a regular expression pattern is case sensitive, white space in a regular expression pattern is interpreted as literal white-space characters, and capturing groups in a regular expression are named implicitly as well as explicitly.</span></span> <span data-ttu-id="f0260-104">正規表現のオプションを指定することで、これらの正規表現の既定の動作とそのいくつかの側面を変更できます。</span><span class="sxs-lookup"><span data-stu-id="f0260-104">You can modify these and several other aspects of default regular expression behavior by specifying regular expression options.</span></span> <span data-ttu-id="f0260-105">次の表に示す各オプションは、正規表現パターンの一部としてインラインで記述することも、<xref:System.Text.RegularExpressions.Regex?displayProperty=nameWithType> クラス コンストラクターまたは静的パターン一致メソッドに <xref:System.Text.RegularExpressions.RegexOptions?displayProperty=nameWithType> 列挙値として渡すこともできます。</span><span class="sxs-lookup"><span data-stu-id="f0260-105">These options, which are listed in the following table, can be included inline as part of the regular expression pattern, or they can be supplied to a <xref:System.Text.RegularExpressions.Regex?displayProperty=nameWithType> class constructor or static pattern matching method as a <xref:System.Text.RegularExpressions.RegexOptions?displayProperty=nameWithType> enumeration value.</span></span>

|<span data-ttu-id="f0260-106">RegexOptions のメンバー</span><span class="sxs-lookup"><span data-stu-id="f0260-106">RegexOptions member</span></span>|<span data-ttu-id="f0260-107">インライン文字</span><span class="sxs-lookup"><span data-stu-id="f0260-107">Inline character</span></span>|<span data-ttu-id="f0260-108">効果</span><span class="sxs-lookup"><span data-stu-id="f0260-108">Effect</span></span>|
|-------------------------|----------------------|------------|
|<xref:System.Text.RegularExpressions.RegexOptions.None>|<span data-ttu-id="f0260-109">使用できません</span><span class="sxs-lookup"><span data-stu-id="f0260-109">Not available</span></span>|<span data-ttu-id="f0260-110">既定の動作を使用します。</span><span class="sxs-lookup"><span data-stu-id="f0260-110">Use default behavior.</span></span> <span data-ttu-id="f0260-111">詳細については、「[既定のオプション](#default-options)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-111">For more information, see [Default Options](#default-options).</span></span>|
|<xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase>|`i`|<span data-ttu-id="f0260-112">大文字と小文字を区別しない一致を使用します。</span><span class="sxs-lookup"><span data-stu-id="f0260-112">Use case-insensitive matching.</span></span> <span data-ttu-id="f0260-113">詳細については、「[大文字と小文字を区別しない一致](#case-insensitive-matching)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-113">For more information, see [Case-Insensitive Matching](#case-insensitive-matching).</span></span>|
|<xref:System.Text.RegularExpressions.RegexOptions.Multiline>|`m`|<span data-ttu-id="f0260-114">複数行モードを使用します。`^` と `$` は、(入力文字列の先頭および末尾ではなく) 各行の先頭および末尾と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-114">Use multiline mode, where `^` and `$` match the beginning and end of each line (instead of the beginning and end of the input string).</span></span> <span data-ttu-id="f0260-115">詳細については、「[複数行モード](#multiline-mode)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-115">For more information, see [Multiline Mode](#multiline-mode).</span></span>|
|<xref:System.Text.RegularExpressions.RegexOptions.Singleline>|`s`|<span data-ttu-id="f0260-116">単一行モードを使用します。このモードでは、ピリオド (.) は任意の 1 文字と一致します (`\n` を除くすべての文字の代用)。</span><span class="sxs-lookup"><span data-stu-id="f0260-116">Use single-line mode, where the period (.) matches every character (instead of every character except `\n`).</span></span> <span data-ttu-id="f0260-117">詳細については、「[単一行モード](#single-line-mode)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-117">For more information, see [Single-line Mode](#single-line-mode).</span></span>|
|<xref:System.Text.RegularExpressions.RegexOptions.ExplicitCapture>|`n`|<span data-ttu-id="f0260-118">名前のないグループをキャプチャしません。</span><span class="sxs-lookup"><span data-stu-id="f0260-118">Do not capture unnamed groups.</span></span> <span data-ttu-id="f0260-119">`(?<`*name*`>` *subexpression*`)` という形式で、明示的に名前または番号が付加されたグループのみを有効なキャプチャ対象とします。</span><span class="sxs-lookup"><span data-stu-id="f0260-119">The only valid captures are explicitly named or numbered groups of the form `(?<`*name*`>` *subexpression*`)`.</span></span> <span data-ttu-id="f0260-120">詳細については、「[明示的なキャプチャのみ](#explicit-captures-only)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-120">For more information, see [Explicit Captures Only](#explicit-captures-only).</span></span>|
|<xref:System.Text.RegularExpressions.RegexOptions.Compiled>|<span data-ttu-id="f0260-121">使用できません</span><span class="sxs-lookup"><span data-stu-id="f0260-121">Not available</span></span>|<span data-ttu-id="f0260-122">正規表現をアセンブリにコンパイルします。</span><span class="sxs-lookup"><span data-stu-id="f0260-122">Compile the regular expression to an assembly.</span></span> <span data-ttu-id="f0260-123">詳細については、「[コンパイルされた正規表現](#compiled-regular-expressions)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-123">For more information, see [Compiled Regular Expressions](#compiled-regular-expressions).</span></span>|
|<xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace>|`x`|<span data-ttu-id="f0260-124">エスケープされていない空白をパターンから除外し、シャープ記号 (`#`) の後ろのコメントを有効にします。</span><span class="sxs-lookup"><span data-stu-id="f0260-124">Exclude unescaped white space from the pattern, and enable comments after a number sign (`#`).</span></span> <span data-ttu-id="f0260-125">詳細については、「[空白を無視](#ignore-white-space)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-125">For more information, see [Ignore White Space](#ignore-white-space).</span></span>|
|<xref:System.Text.RegularExpressions.RegexOptions.RightToLeft>|<span data-ttu-id="f0260-126">使用できません</span><span class="sxs-lookup"><span data-stu-id="f0260-126">Not available</span></span>|<span data-ttu-id="f0260-127">検索の方向を変更します。</span><span class="sxs-lookup"><span data-stu-id="f0260-127">Change the search direction.</span></span> <span data-ttu-id="f0260-128">左から右ではなく、右から左に検索します。</span><span class="sxs-lookup"><span data-stu-id="f0260-128">Search moves from right to left instead of from left to right.</span></span> <span data-ttu-id="f0260-129">詳細については、「[右から左モード](#right-to-left-mode)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-129">For more information, see [Right-to-Left Mode](#right-to-left-mode).</span></span>|
|<xref:System.Text.RegularExpressions.RegexOptions.ECMAScript>|<span data-ttu-id="f0260-130">使用できません</span><span class="sxs-lookup"><span data-stu-id="f0260-130">Not available</span></span>|<span data-ttu-id="f0260-131">式の ECMAScript 準拠の動作を有効にします。</span><span class="sxs-lookup"><span data-stu-id="f0260-131">Enable ECMAScript-compliant behavior for the expression.</span></span> <span data-ttu-id="f0260-132">詳細については、「[ECMAScript 一致の動作](#ecmascript-matching-behavior)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-132">For more information, see [ECMAScript Matching Behavior](#ecmascript-matching-behavior).</span></span>|
|<xref:System.Text.RegularExpressions.RegexOptions.CultureInvariant>|<span data-ttu-id="f0260-133">使用できません</span><span class="sxs-lookup"><span data-stu-id="f0260-133">Not available</span></span>|<span data-ttu-id="f0260-134">言語のカルチャの違いを無視します。</span><span class="sxs-lookup"><span data-stu-id="f0260-134">Ignore cultural differences in language.</span></span> <span data-ttu-id="f0260-135">詳細については、「[インバリアント カルチャを使用した比較](#comparison-using-the-invariant-culture)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-135">For more information, see [Comparison Using the Invariant Culture](#comparison-using-the-invariant-culture).</span></span>|

## <a name="specifying-the-options"></a><span data-ttu-id="f0260-136">オプションの指定</span><span class="sxs-lookup"><span data-stu-id="f0260-136">Specifying the Options</span></span>

<span data-ttu-id="f0260-137">正規表現のオプションは、次の 3 種類の方法のいずれかで指定できます。</span><span class="sxs-lookup"><span data-stu-id="f0260-137">You can specify options for regular expressions in one of three ways:</span></span>

- <span data-ttu-id="f0260-138">`options` や <xref:System.Text.RegularExpressions.Regex?displayProperty=nameWithType> など、`Shared` クラス コンストラクターまたは、静的 (Visual Basic の場合は <xref:System.Text.RegularExpressions.Regex.%23ctor%28System.String%2CSystem.Text.RegularExpressions.RegexOptions%29>) パターン一致メソッドの <xref:System.Text.RegularExpressions.Regex.Match%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> パラメーターで指定します。</span><span class="sxs-lookup"><span data-stu-id="f0260-138">In the `options` parameter of a <xref:System.Text.RegularExpressions.Regex?displayProperty=nameWithType> class constructor or static (`Shared` in Visual Basic) pattern-matching method, such as <xref:System.Text.RegularExpressions.Regex.%23ctor%28System.String%2CSystem.Text.RegularExpressions.RegexOptions%29> or <xref:System.Text.RegularExpressions.Regex.Match%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f0260-139">`options` パラメーターは、<xref:System.Text.RegularExpressions.RegexOptions?displayProperty=nameWithType> 列挙値のビットごとの OR の組み合わせです。</span><span class="sxs-lookup"><span data-stu-id="f0260-139">The `options` parameter is a bitwise OR combination of <xref:System.Text.RegularExpressions.RegexOptions?displayProperty=nameWithType> enumerated values.</span></span>

  <span data-ttu-id="f0260-140">クラス コンストラクターの `options` パラメーターを使用して、オプションが <xref:System.Text.RegularExpressions.Regex> インスタンスに指定されると、それらのオプションは <xref:System.Text.RegularExpressions.RegexOptions?displayProperty=nameWithType> プロパティに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="f0260-140">When options are supplied to a <xref:System.Text.RegularExpressions.Regex> instance by using the `options` parameter of a class constructor, the options are assigned to the <xref:System.Text.RegularExpressions.RegexOptions?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="f0260-141">ただし、<xref:System.Text.RegularExpressions.RegexOptions?displayProperty=nameWithType> プロパティは、正規表現パターン自体でのインライン オプションを反映しません。</span><span class="sxs-lookup"><span data-stu-id="f0260-141">However, the <xref:System.Text.RegularExpressions.RegexOptions?displayProperty=nameWithType> property does not reflect inline options in the regular expression pattern itself.</span></span>

  <span data-ttu-id="f0260-142">具体的な例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="f0260-142">The following example provides an illustration.</span></span> <span data-ttu-id="f0260-143">`options` メソッドの <xref:System.Text.RegularExpressions.Regex.Match%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> パラメーターを使用して、文字 "d" で始まる単語を識別するときに、大文字と小文字を区別しない一致を有効にすると同時に、パターンの空白を無視します。</span><span class="sxs-lookup"><span data-stu-id="f0260-143">It uses the `options` parameter of the <xref:System.Text.RegularExpressions.Regex.Match%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method to enable case-insensitive matching and to ignore pattern white space when identifying words that begin with the letter "d".</span></span>

  [!code-csharp[Conceptual.Regex.Language.Options#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/example1.cs#6)]
  [!code-vb[Conceptual.Regex.Language.Options#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/example1.vb#6)]

- <span data-ttu-id="f0260-144">`(?imnsx-imnsx)` という構文で、インライン オプションを正規表現パターンに適用します。</span><span class="sxs-lookup"><span data-stu-id="f0260-144">By applying inline options in a regular expression pattern with the syntax `(?imnsx-imnsx)`.</span></span> <span data-ttu-id="f0260-145">この場合、オプションが定義されているパターンの先頭から、パターンの末尾を含むポイントまで、または別のインライン オプションでオプションが定義されていないポイントまでを範囲として、オプションがパターンに適用されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-145">The option applies to the pattern from the point that the option is defined to either the end of the pattern or to the point at which the option is undefined by another inline option.</span></span> <span data-ttu-id="f0260-146"><xref:System.Text.RegularExpressions.Regex> インスタンスの <xref:System.Text.RegularExpressions.RegexOptions?displayProperty=nameWithType> プロパティは、これらのインライン オプションを反映しないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-146">Note that the <xref:System.Text.RegularExpressions.RegexOptions?displayProperty=nameWithType> property of a <xref:System.Text.RegularExpressions.Regex> instance does not reflect these inline options.</span></span> <span data-ttu-id="f0260-147">詳しくは、「[その他の構成体](miscellaneous-constructs-in-regular-expressions.md)」のトピックをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="f0260-147">For more information, see the [Miscellaneous Constructs](miscellaneous-constructs-in-regular-expressions.md) topic.</span></span>

  <span data-ttu-id="f0260-148">具体的な例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="f0260-148">The following example provides an illustration.</span></span> <span data-ttu-id="f0260-149">インライン オプションを使用して、文字 "d" で始まる単語を識別するときに、大文字と小文字を区別しない一致を有効にすると同時に、パターンの空白を無視します。</span><span class="sxs-lookup"><span data-stu-id="f0260-149">It uses inline options to enable case-insensitive matching and to ignore pattern white space when identifying words that begin with the letter "d".</span></span>

  [!code-csharp[Conceptual.Regex.Language.Options#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/example1.cs#7)]
  [!code-vb[Conceptual.Regex.Language.Options#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/example1.vb#7)]

- <span data-ttu-id="f0260-150">`(?imnsx-imnsx:`*subexpression*`)` という構文で、特定のグループ化構成体のインライン オプションを正規表現パターンに適用します。</span><span class="sxs-lookup"><span data-stu-id="f0260-150">By applying inline options in a particular grouping construct in a regular expression pattern with the syntax `(?imnsx-imnsx:`*subexpression*`)`.</span></span> <span data-ttu-id="f0260-151">オプション セットの前にマイナス記号を付けないとそのオプション セットはオンになり、マイナス記号を付けるとオフになります</span><span class="sxs-lookup"><span data-stu-id="f0260-151">No sign before a set of options turns the set on; a minus sign before a set of options turns the set off.</span></span> <span data-ttu-id="f0260-152">(`?` は言語構成要素の構文の固定部分であり、オプションが有効であるか無効であるかにかかわらず、必要になります)。オプションは、そのグループに対してのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-152">(`?` is a fixed part of the language construct's syntax that is required whether options are enabled or disabled.) The option applies only to that group.</span></span> <span data-ttu-id="f0260-153">詳しくは、「[正規表現でのグループ化構成体](grouping-constructs-in-regular-expressions.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="f0260-153">For more information, see [Grouping Constructs](grouping-constructs-in-regular-expressions.md).</span></span>

  <span data-ttu-id="f0260-154">具体的な例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="f0260-154">The following example provides an illustration.</span></span> <span data-ttu-id="f0260-155">グループ化構成体のインライン オプションを使用して、文字 "d" で始まる単語を識別するときに、大文字と小文字を区別しない一致を有効にすると同時に、パターンの空白を無視します。</span><span class="sxs-lookup"><span data-stu-id="f0260-155">It uses inline options in a grouping construct to enable case-insensitive matching and to ignore pattern white space when identifying words that begin with the letter "d".</span></span>

  [!code-csharp[Conceptual.Regex.Language.Options#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/example1.cs#8)]
  [!code-vb[Conceptual.Regex.Language.Options#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/example1.vb#8)]

<span data-ttu-id="f0260-156">オプションをインラインで指定した場合は、オプションまたはオプション セットの前にマイナス記号 (`-`) を付けると、そのオプションはオフになります。</span><span class="sxs-lookup"><span data-stu-id="f0260-156">If options are specified inline, a minus sign (`-`) before an option or set of options turns off those options.</span></span> <span data-ttu-id="f0260-157">たとえば、インライン構成体 `(?ix-ms)` は <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType> オプションおよび <xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> オプションをオンにし、<xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> オプションおよび <xref:System.Text.RegularExpressions.RegexOptions.Singleline?displayProperty=nameWithType> オプションをオフにします。</span><span class="sxs-lookup"><span data-stu-id="f0260-157">For example, the inline construct `(?ix-ms)` turns on the <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType> and <xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> options and turns off the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> and <xref:System.Text.RegularExpressions.RegexOptions.Singleline?displayProperty=nameWithType> options.</span></span> <span data-ttu-id="f0260-158">既定では、すべての正規表現のオプションがオフです。</span><span class="sxs-lookup"><span data-stu-id="f0260-158">All regular expression options are turned off by default.</span></span>

> [!NOTE]
> <span data-ttu-id="f0260-159">コンストラクターまたはメソッド呼び出しの `options` パラメーターで指定した正規表現オプションが正規表現パターンのインラインで指定したオプションと競合した場合は、インラインで指定したオプションが使用されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-159">If the regular expression options specified in the `options` parameter of a constructor or method call conflict with the options specified inline in a regular expression pattern, the inline options are used.</span></span>

<span data-ttu-id="f0260-160">次に示す 5 種類の正規表現オプションは、options パラメーターとインラインの両方で設定できます。</span><span class="sxs-lookup"><span data-stu-id="f0260-160">The following five regular expression options can be set both with the options parameter and inline:</span></span>

- <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType>

- <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType>

- <xref:System.Text.RegularExpressions.RegexOptions.Singleline?displayProperty=nameWithType>

- <xref:System.Text.RegularExpressions.RegexOptions.ExplicitCapture?displayProperty=nameWithType>

- <xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType>

<span data-ttu-id="f0260-161">次に示す 5 種類の正規表現オプションは `options` パラメーターを使用して設定することはできますが、インラインで設定することはできません。</span><span class="sxs-lookup"><span data-stu-id="f0260-161">The following five regular expression options can be set using the `options` parameter but cannot be set inline:</span></span>

- <xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType>

- <xref:System.Text.RegularExpressions.RegexOptions.Compiled?displayProperty=nameWithType>

- <xref:System.Text.RegularExpressions.RegexOptions.RightToLeft?displayProperty=nameWithType>

- <xref:System.Text.RegularExpressions.RegexOptions.CultureInvariant?displayProperty=nameWithType>

- <xref:System.Text.RegularExpressions.RegexOptions.ECMAScript?displayProperty=nameWithType>

## <a name="determining-the-options"></a><span data-ttu-id="f0260-162">オプションの確認</span><span class="sxs-lookup"><span data-stu-id="f0260-162">Determining the Options</span></span>

<span data-ttu-id="f0260-163">インスタンス化されたときに <xref:System.Text.RegularExpressions.Regex> オブジェクトに渡されたオプションの種類を確認するには、読み取り専用の <xref:System.Text.RegularExpressions.Regex.Options%2A?displayProperty=nameWithType> プロパティの値を取得します。</span><span class="sxs-lookup"><span data-stu-id="f0260-163">You can determine which options were provided to a <xref:System.Text.RegularExpressions.Regex> object when it was instantiated by retrieving the value of the read-only <xref:System.Text.RegularExpressions.Regex.Options%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="f0260-164">このプロパティは、<xref:System.Text.RegularExpressions.Regex.CompileToAssembly%2A?displayProperty=nameWithType> メソッドによって作成された、コンパイルされた正規表現に定義されているオプションを確認する場合に特に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="f0260-164">This property is particularly useful for determining the options that are defined for a compiled regular expression created by the <xref:System.Text.RegularExpressions.Regex.CompileToAssembly%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="f0260-165"><xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType> を除くオプションが存在するかどうかをテストするには、目的の <xref:System.Text.RegularExpressions.Regex.Options%2A?displayProperty=nameWithType> プロパティの値と <xref:System.Text.RegularExpressions.RegexOptions> の値を使用して AND 演算を実行します。</span><span class="sxs-lookup"><span data-stu-id="f0260-165">To test for the presence of any option except <xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType>, perform an AND operation with the value of the <xref:System.Text.RegularExpressions.Regex.Options%2A?displayProperty=nameWithType> property and the <xref:System.Text.RegularExpressions.RegexOptions> value in which you are interested.</span></span> <span data-ttu-id="f0260-166">次に、この結果が <xref:System.Text.RegularExpressions.RegexOptions> の値と等しいかどうかをテストします。</span><span class="sxs-lookup"><span data-stu-id="f0260-166">Then test whether the result equals that <xref:System.Text.RegularExpressions.RegexOptions> value.</span></span> <span data-ttu-id="f0260-167">次の例は、<xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType> オプションが設定されているかどうかをテストします。</span><span class="sxs-lookup"><span data-stu-id="f0260-167">The following example tests whether the <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType> option has been set.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#19](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/determine1.cs#19)]
[!code-vb[Conceptual.Regex.Language.Options#19](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/determine1.vb#19)]

<span data-ttu-id="f0260-168"><xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType> をテストするには、次の例に示すように、<xref:System.Text.RegularExpressions.Regex.Options%2A?displayProperty=nameWithType> プロパティの値が <xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType> と等しいかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="f0260-168">To test for <xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType>, determine whether the value of the <xref:System.Text.RegularExpressions.Regex.Options%2A?displayProperty=nameWithType> property is equal to <xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType>, as the following example illustrates.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#20](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/determine1.cs#20)]
[!code-vb[Conceptual.Regex.Language.Options#20](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/determine1.vb#20)]

<span data-ttu-id="f0260-169">以降のセクションでは、.NET の正規表現でサポートされているオプションについて説明します。</span><span class="sxs-lookup"><span data-stu-id="f0260-169">The following sections list the options supported by regular expression in .NET.</span></span>

## <a name="default-options"></a><span data-ttu-id="f0260-170">既定のオプション</span><span class="sxs-lookup"><span data-stu-id="f0260-170">Default Options</span></span>

<span data-ttu-id="f0260-171"><xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType> オプションは、オプションが指定されていないことを示します。正規表現エンジンは、このオプションの既定の動作を使用します。</span><span class="sxs-lookup"><span data-stu-id="f0260-171">The <xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType> option indicates that no options have been specified, and the regular expression engine uses its default behavior.</span></span> <span data-ttu-id="f0260-172">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="f0260-172">This includes the following:</span></span>

- <span data-ttu-id="f0260-173">このパターンは、ECMAScript 正規表現ではなく、標準の形式として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-173">The pattern is interpreted as a canonical rather than an ECMAScript regular expression.</span></span>

- <span data-ttu-id="f0260-174">正規表現パターンは、左から右に入力文字列と照合されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-174">The regular expression pattern is matched in the input string from left to right.</span></span>

- <span data-ttu-id="f0260-175">比較では大文字と小文字が区別されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-175">Comparisons are case-sensitive.</span></span>

- <span data-ttu-id="f0260-176">`^` 言語要素および `$` 言語要素は、入力文字列の先頭および末尾と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-176">The `^` and `$` language elements match the beginning and end of the input string.</span></span>

- <span data-ttu-id="f0260-177">`.` 言語要素は、`\n` を除く任意の 1 文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-177">The `.` language element matches every character except `\n`.</span></span>

- <span data-ttu-id="f0260-178">正規表現パターンに含まれる空白は、リテラルの空白文字として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-178">Any white space in a regular expression pattern is interpreted as a literal space character.</span></span>

- <span data-ttu-id="f0260-179">パターンを入力文字列と比較するときに、現在のカルチャの規則が使用されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-179">The conventions of the current culture are used when comparing the pattern to the input string.</span></span>

- <span data-ttu-id="f0260-180">正規表現パターンのキャプチャ グループは、暗黙的に指定される場合と明示的に指定される場合があります。</span><span class="sxs-lookup"><span data-stu-id="f0260-180">Capturing groups in the regular expression pattern are implicit as well as explicit.</span></span>

> [!NOTE]
> <span data-ttu-id="f0260-181"><xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType> オプションには、等価なインライン オプションは存在しません。</span><span class="sxs-lookup"><span data-stu-id="f0260-181">The <xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType> option has no inline equivalent.</span></span> <span data-ttu-id="f0260-182">正規表現オプションがインラインで適用されたときに、特定のオプションをオフにすると、既定の動作がオプションごとに復元されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-182">When regular expression options are applied inline, the default behavior is restored on an option-by-option basis, by turning a particular option off.</span></span> <span data-ttu-id="f0260-183">たとえば、`(?i)` は大文字と小文字を区別しない比較をオンにし、`(?-i)` は既定の動作 (大文字と小文字を区別する比較) を復元します。</span><span class="sxs-lookup"><span data-stu-id="f0260-183">For example, `(?i)` turns on case-insensitive comparison, and `(?-i)` restores the default case-sensitive comparison.</span></span>

<span data-ttu-id="f0260-184"><xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType> オプションは正規表現エンジンの既定の動作を表しているので、メソッド呼び出しで明示的に指定されることはほとんどありません。</span><span class="sxs-lookup"><span data-stu-id="f0260-184">Because the <xref:System.Text.RegularExpressions.RegexOptions.None?displayProperty=nameWithType> option represents the default behavior of the regular expression engine, it is rarely explicitly specified in a method call.</span></span> <span data-ttu-id="f0260-185">代わりに、`options` パラメーターを使用せずにコンストラクターまたは静的パターン一致メソッドが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-185">A constructor or static pattern-matching method without an `options` parameter is called instead.</span></span>

## <a name="case-insensitive-matching"></a><span data-ttu-id="f0260-186">大文字と小文字を区別しない一致</span><span class="sxs-lookup"><span data-stu-id="f0260-186">Case-Insensitive Matching</span></span>

<span data-ttu-id="f0260-187"><xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase> オプションまたは `i` インライン オプションを指定すると、大文字と小文字を区別しない一致が実行されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-187">The <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase> option, or the `i` inline option, provides case-insensitive matching.</span></span> <span data-ttu-id="f0260-188">既定では、現在のカルチャの大文字と小文字の表記規則が使用されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-188">By default, the casing conventions of the current culture are used.</span></span>

<span data-ttu-id="f0260-189">次の例では、"the" で始まるすべての単語と一致する正規表現パターン `\bthe\w*\b` を定義します。</span><span class="sxs-lookup"><span data-stu-id="f0260-189">The following example defines a regular expression pattern, `\bthe\w*\b`, that matches all words starting with "the".</span></span> <span data-ttu-id="f0260-190"><xref:System.Text.RegularExpressions.Regex.Match%2A> メソッドの最初の呼び出しでは既定の大文字と小文字を区別する比較を使用しているので、結果の出力から、文の先頭の文字列 "The" は一致として処理されていないことがわかります。</span><span class="sxs-lookup"><span data-stu-id="f0260-190">Because the first call to the <xref:System.Text.RegularExpressions.Regex.Match%2A> method uses the default case-sensitive comparison, the output indicates that the string "The" that begins the sentence is not matched.</span></span> <span data-ttu-id="f0260-191">これが一致として処理されるのは、オプションを <xref:System.Text.RegularExpressions.Regex.Match%2A> に設定して <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase> メソッドが呼び出された場合です。</span><span class="sxs-lookup"><span data-stu-id="f0260-191">It is matched when the <xref:System.Text.RegularExpressions.Regex.Match%2A> method is called with options set to <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase>.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/case1.cs#1)]
[!code-vb[Conceptual.Regex.Language.Options#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/case1.vb#1)]

<span data-ttu-id="f0260-192">次の例では、前の例の正規表現パターンを変更し、`options` パラメーターを使用する代わりに、インライン オプションを使用して、大文字と小文字を区別しない比較を行っています。</span><span class="sxs-lookup"><span data-stu-id="f0260-192">The following example modifies the regular expression pattern from the previous example to use inline options instead of the `options` parameter to provide case-insensitive comparison.</span></span> <span data-ttu-id="f0260-193">最初のパターンでは、文字列 "the" の文字 "t" のみに適用されるよう、グループ化構成体の大文字と小文字を区別しないオプションを定義しています。</span><span class="sxs-lookup"><span data-stu-id="f0260-193">The first pattern defines the case-insensitive option in a grouping construct that applies only to the letter "t" in the string "the".</span></span> <span data-ttu-id="f0260-194">オプションの構成体がパターンの先頭にあるので、2 番目のパターンでは、大文字と小文字を区別しないオプションが正規表現全体に適用されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-194">Because the option construct occurs at the beginning of the pattern, the second pattern applies the case-insensitive option to the entire regular expression.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/case2.cs#2)]
[!code-vb[Conceptual.Regex.Language.Options#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/case2.vb#2)]

## <a name="multiline-mode"></a><span data-ttu-id="f0260-195">複数行モード</span><span class="sxs-lookup"><span data-stu-id="f0260-195">Multiline Mode</span></span>

<span data-ttu-id="f0260-196"><xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> オプションまたは `m` インライン オプションを指定すると、正規表現エンジンでは、複数行で構成される入力文字列の処理が有効になります。</span><span class="sxs-lookup"><span data-stu-id="f0260-196">The <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option, or the `m` inline option, enables the regular expression engine to handle an input string that consists of multiple lines.</span></span> <span data-ttu-id="f0260-197">具体的には、`^` 言語要素および `$` 言語要素の解釈を変更して、入力文字列の先頭および末尾ではなく、行の先頭および末尾に一致するものとします。</span><span class="sxs-lookup"><span data-stu-id="f0260-197">It changes the interpretation of the `^` and `$` language elements so that they match the beginning and end of a line, instead of the beginning and end of the input string.</span></span>

<span data-ttu-id="f0260-198">既定では、`$` は入力文字列の末尾とのみ一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-198">By default, `$` matches only the end of the input string.</span></span> <span data-ttu-id="f0260-199"><xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> オプションを指定した場合は、改行文字 (`\n`) または入力文字列の末尾と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-199">If you specify the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option, it matches either the newline character (`\n`) or the end of the input string.</span></span> <span data-ttu-id="f0260-200">ただし、復帰とライン フィード文字の組み合わせとは一致しません。</span><span class="sxs-lookup"><span data-stu-id="f0260-200">It does not, however, match the carriage return/line feed character combination.</span></span> <span data-ttu-id="f0260-201">この組み合わせと正常に一致させるには、`\r?$` を単独で使用する代わりに、部分式 `$` を使用します。</span><span class="sxs-lookup"><span data-stu-id="f0260-201">To successfully match them, use the subexpression `\r?$` instead of just `$`.</span></span>

<span data-ttu-id="f0260-202">次の例では、ボウリング参加者の名前とスコアを抽出し、降順に並べ替えて、<xref:System.Collections.Generic.SortedList%602> コレクションに追加しています。</span><span class="sxs-lookup"><span data-stu-id="f0260-202">The following example extracts bowlers' names and scores and adds them to a <xref:System.Collections.Generic.SortedList%602> collection that sorts them in descending order.</span></span> <span data-ttu-id="f0260-203"><xref:System.Text.RegularExpressions.Regex.Matches%2A> メソッドは 2 回呼び出されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-203">The <xref:System.Text.RegularExpressions.Regex.Matches%2A> method is called twice.</span></span> <span data-ttu-id="f0260-204">最初のメソッド呼び出しでは、`^(\w+)\s(\d+)$` という正規表現が使用され、オプションは設定されていません。</span><span class="sxs-lookup"><span data-stu-id="f0260-204">In the first method call, the regular expression is `^(\w+)\s(\d+)$` and no options are set.</span></span> <span data-ttu-id="f0260-205">出力結果が示すように、正規表現エンジンは入力パターンを入力文字列の先頭および末尾と一致させることができないので、一致は検出されません。</span><span class="sxs-lookup"><span data-stu-id="f0260-205">As the output shows, because the regular expression engine cannot match the input pattern along with the beginning and end of the input string, no matches are found.</span></span> <span data-ttu-id="f0260-206">2 番目のメソッド呼び出しでは、正規表現は `^(\w+)\s(\d+)\r?$` に変更されており、オプションは <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> に設定されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-206">In the second method call, the regular expression is changed to `^(\w+)\s(\d+)\r?$` and the options are set to <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f0260-207">出力結果が示すように、名前とスコアの照合は正常に行われ、スコアは降順で表示されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-207">As the output shows, the names and scores are successfully matched, and the scores are displayed in descending order.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/multiline1.cs#3)]
[!code-vb[Conceptual.Regex.Language.Options#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/multiline1.vb#3)]

<span data-ttu-id="f0260-208">正規表現パターン `^(\w+)\s(\d+)\r*$` は、次の表に示すように定義されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-208">The regular expression pattern `^(\w+)\s(\d+)\r*$` is defined as shown in the following table.</span></span>

|<span data-ttu-id="f0260-209">パターン</span><span class="sxs-lookup"><span data-stu-id="f0260-209">Pattern</span></span>|<span data-ttu-id="f0260-210">説明</span><span class="sxs-lookup"><span data-stu-id="f0260-210">Description</span></span>|
|-------------|-----------------|
|`^`|<span data-ttu-id="f0260-211">行の先頭から始まります。</span><span class="sxs-lookup"><span data-stu-id="f0260-211">Begin at the start of the line.</span></span>|
|`(\w+)`|<span data-ttu-id="f0260-212">1 つ以上の単語文字に一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-212">Match one or more word characters.</span></span> <span data-ttu-id="f0260-213">これが最初のキャプチャ グループです。</span><span class="sxs-lookup"><span data-stu-id="f0260-213">This is the first capturing group.</span></span>|
|`\s`|<span data-ttu-id="f0260-214">空白文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-214">Match a white-space character.</span></span>|
|`(\d+)`|<span data-ttu-id="f0260-215">1 個以上の 10 進数と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-215">Match one or more decimal digits.</span></span> <span data-ttu-id="f0260-216">これが 2 番目のキャプチャ グループです。</span><span class="sxs-lookup"><span data-stu-id="f0260-216">This is the second capturing group.</span></span>|
|`\r?`|<span data-ttu-id="f0260-217">0 個または 1 個の復帰文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-217">Match zero or one carriage return character.</span></span>|
|`$`|<span data-ttu-id="f0260-218">行の末尾で終了します。</span><span class="sxs-lookup"><span data-stu-id="f0260-218">End at the end of the line.</span></span>|

<span data-ttu-id="f0260-219">次の例は、前の例と等価ですが、インライン オプション `(?m)` を使用して複数行オプションを設定している点が異なります。</span><span class="sxs-lookup"><span data-stu-id="f0260-219">The following example is equivalent to the previous one, except that it uses the inline option `(?m)` to set the multiline option.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/multiline2.cs#4)]
[!code-vb[Conceptual.Regex.Language.Options#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/multiline2.vb#4)]

## <a name="single-line-mode"></a><span data-ttu-id="f0260-220">単一行モード</span><span class="sxs-lookup"><span data-stu-id="f0260-220">Single-line Mode</span></span>

<span data-ttu-id="f0260-221"><xref:System.Text.RegularExpressions.RegexOptions.Singleline?displayProperty=nameWithType> オプションまたは `s` インライン オプションを指定すると、正規表現エンジンでは、入力文字列が単一行で構成されているかのように処理されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-221">The <xref:System.Text.RegularExpressions.RegexOptions.Singleline?displayProperty=nameWithType> option, or the `s` inline option, causes the regular expression engine to treat the input string as if it consists of a single line.</span></span> <span data-ttu-id="f0260-222">具体的には、ピリオド (`.`) 言語要素の動作を変更して、改行文字 (`\n` または \u000A) を除く任意の文字ではなく、改行文字を含む任意の 1 文字と一致するようにします。</span><span class="sxs-lookup"><span data-stu-id="f0260-222">It does this by changing the behavior of the period (`.`) language element so that it matches every character, instead of matching every character except for the newline character `\n` or \u000A.</span></span>

<span data-ttu-id="f0260-223">`.` オプションを使用したときに、<xref:System.Text.RegularExpressions.RegexOptions.Singleline?displayProperty=nameWithType> 言語要素の動作が変化する例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="f0260-223">The following example illustrates how the behavior of the `.` language element changes when you use the <xref:System.Text.RegularExpressions.RegexOptions.Singleline?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="f0260-224">正規表現 `^.+` は文字列の先頭から開始し、すべての文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-224">The regular expression `^.+` starts at the beginning of the string and matches every character.</span></span> <span data-ttu-id="f0260-225">既定では、照合は 1 行目の末尾で終了します。正規表現パターンは復帰文字 `\r` (\u000D) と一致しますが、`\n` とは一致しません。</span><span class="sxs-lookup"><span data-stu-id="f0260-225">By default, the match ends at the end of the first line; the regular expression pattern matches the carriage return character, `\r` or \u000D, but it does not match `\n`.</span></span> <span data-ttu-id="f0260-226"><xref:System.Text.RegularExpressions.RegexOptions.Singleline?displayProperty=nameWithType> オプションは入力文字列全体を単一行として解釈するので、`\n` を含む入力文字列内のすべての文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-226">Because the <xref:System.Text.RegularExpressions.RegexOptions.Singleline?displayProperty=nameWithType> option interprets the entire input string as a single line, it matches every character in the input string, including `\n`.</span></span>

[!code-csharp[Conceptual.Regex.Language.CharacterClasses#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.characterclasses/cs/any2.cs#5)]
[!code-vb[Conceptual.Regex.Language.CharacterClasses#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.characterclasses/vb/any2.vb#5)]

<span data-ttu-id="f0260-227">次の例は、前の例と等価ですが、インライン オプション `(?s)` を使用して単一行モードを有効にしている点が異なります。</span><span class="sxs-lookup"><span data-stu-id="f0260-227">The following example is equivalent to the previous one, except that it uses the inline option `(?s)` to enable single-line mode.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/singleline1.cs#5)]
[!code-vb[Conceptual.Regex.Language.Options#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/singleline1.vb#5)]

## <a name="explicit-captures-only"></a><span data-ttu-id="f0260-228">明示的なキャプチャのみ</span><span class="sxs-lookup"><span data-stu-id="f0260-228">Explicit Captures Only</span></span>

<span data-ttu-id="f0260-229">既定では、キャプチャ グループは正規表現パターンでかっこを使用することで定義されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-229">By default, capturing groups are defined by the use of parentheses in the regular expression pattern.</span></span> <span data-ttu-id="f0260-230">名前付きのグループには `(?<`*name*`>`*subexpression*`)` 言語オプションで名前または番号が与えられるのに対して、名前のないグループにはインデックスでアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="f0260-230">Named groups are assigned a name or number by the `(?<`*name*`>`*subexpression*`)` language option, whereas unnamed groups are accessible by index.</span></span> <span data-ttu-id="f0260-231"><xref:System.Text.RegularExpressions.GroupCollection> オブジェクトでは、名前のないグループが名前付きのグループよりも優先されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-231">In the <xref:System.Text.RegularExpressions.GroupCollection> object, unnamed groups precede named groups.</span></span>

<span data-ttu-id="f0260-232">グループ化構成体は通常、複数の言語要素に量指定子を適用する場合にのみ使用され、キャプチャされた部分文字列は対象になりません。</span><span class="sxs-lookup"><span data-stu-id="f0260-232">Grouping constructs are often used only to apply quantifiers to multiple language elements, and the captured substrings are of no interest.</span></span> <span data-ttu-id="f0260-233">たとえば、次の正規表現について考えます。</span><span class="sxs-lookup"><span data-stu-id="f0260-233">For example, if the following regular expression:</span></span>

`\b\(?((\w+),?\s?)+[\.!?]\)?`

<span data-ttu-id="f0260-234">この正規表現は、ドキュメントから文末がピリオド、感嘆符、または疑問符である文を抽出することのみを目的とし、結果の文 (<xref:System.Text.RegularExpressions.Match> オブジェクトで表される) のみを対象としています。</span><span class="sxs-lookup"><span data-stu-id="f0260-234">is intended only to extract sentences that end with a period, exclamation point, or question mark from a document, only the resulting sentence (which is represented by the <xref:System.Text.RegularExpressions.Match> object) is of interest.</span></span> <span data-ttu-id="f0260-235">コレクション内の個々の単語は対象ではありません。</span><span class="sxs-lookup"><span data-stu-id="f0260-235">The individual words in the collection are not.</span></span>

<span data-ttu-id="f0260-236">正規表現エンジンで <xref:System.Text.RegularExpressions.GroupCollection> コレクション オブジェクトと <xref:System.Text.RegularExpressions.CaptureCollection> コレクション オブジェクトの両方を設定する必要があるので、キャプチャ グループが以後、使用されない場合は、この設定の処理が無駄になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f0260-236">Capturing groups that are not subsequently used can be expensive, because the regular expression engine must populate both the <xref:System.Text.RegularExpressions.GroupCollection> and <xref:System.Text.RegularExpressions.CaptureCollection> collection objects.</span></span> <span data-ttu-id="f0260-237">別の方法としては、<xref:System.Text.RegularExpressions.RegexOptions.ExplicitCapture?displayProperty=nameWithType> オプションまたは `n` インライン オプションを使用して、`(?<`*name*`>` *subexpression*`)` 構成体によって指定された明示的な名前または番号付きのグループのみを有効なキャプチャ対象として指定する方法が挙げられます。</span><span class="sxs-lookup"><span data-stu-id="f0260-237">As an alternative, you can use either the <xref:System.Text.RegularExpressions.RegexOptions.ExplicitCapture?displayProperty=nameWithType> option or the `n` inline option to specify that the only valid captures are explicitly named or numbered groups that are designated by the `(?<`*name*`>` *subexpression*`)` construct.</span></span>

<span data-ttu-id="f0260-238">次の例は、`\b\(?((\w+),?\s?)+[\.!?]\)?` 正規表現パターンによって返された一致に関する情報を示しています (<xref:System.Text.RegularExpressions.Regex.Match%2A> メソッドが <xref:System.Text.RegularExpressions.RegexOptions.ExplicitCapture?displayProperty=nameWithType> オプションを使用して呼び出された場合、および使用せずに呼び出された場合)。</span><span class="sxs-lookup"><span data-stu-id="f0260-238">The following example displays information about the matches returned by the `\b\(?((\w+),?\s?)+[\.!?]\)?` regular expression pattern when the <xref:System.Text.RegularExpressions.Regex.Match%2A> method is called with and without the <xref:System.Text.RegularExpressions.RegexOptions.ExplicitCapture?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="f0260-239">最初のメソッド呼び出しの出力結果が示すように、正規表現エンジンでは、キャプチャした部分文字列に関する情報に基づいて、<xref:System.Text.RegularExpressions.GroupCollection> コレクション オブジェクトおよび <xref:System.Text.RegularExpressions.CaptureCollection> コレクション オブジェクトが完全に設定されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-239">As the output from the first method call shows, the regular expression engine fully populates the <xref:System.Text.RegularExpressions.GroupCollection> and <xref:System.Text.RegularExpressions.CaptureCollection> collection objects with information about captured substrings.</span></span> <span data-ttu-id="f0260-240">2 番目のメソッドは、`options` を <xref:System.Text.RegularExpressions.RegexOptions.ExplicitCapture?displayProperty=nameWithType> に設定して呼び出されているので、グループに関する情報をキャプチャしません。</span><span class="sxs-lookup"><span data-stu-id="f0260-240">Because the second method is called with `options` set to <xref:System.Text.RegularExpressions.RegexOptions.ExplicitCapture?displayProperty=nameWithType>, it does not capture information on groups.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#9](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/explicit1.cs#9)]
[!code-vb[Conceptual.Regex.Language.Options#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/explicit1.vb#9)]

<span data-ttu-id="f0260-241">正規表現パターン `\b\(?((?>\w+),?\s?)+[\.!?]\)?` は、次の表に示すように定義されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-241">The regular expression pattern`\b\(?((?>\w+),?\s?)+[\.!?]\)?` is defined as shown in the following table.</span></span>

|<span data-ttu-id="f0260-242">パターン</span><span class="sxs-lookup"><span data-stu-id="f0260-242">Pattern</span></span>|<span data-ttu-id="f0260-243">説明</span><span class="sxs-lookup"><span data-stu-id="f0260-243">Description</span></span>|
|-------------|-----------------|
|`\b`|<span data-ttu-id="f0260-244">ワード境界から始まります。</span><span class="sxs-lookup"><span data-stu-id="f0260-244">Begin at a word boundary.</span></span>|
|`\(?`|<span data-ttu-id="f0260-245">左かっこ ("(") の 0 回または 1 回の繰り返しと一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-245">Match zero or one occurrences of the opening parenthesis ("(").</span></span>|
|`(?>\w+),?`|<span data-ttu-id="f0260-246">1 個以上の単語文字の後に 0 個または 1 個のコンマが続くパターンと一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-246">Match one or more word characters, followed by zero or one commas.</span></span> <span data-ttu-id="f0260-247">単語文字の照合中にバックトラックは実行されません。</span><span class="sxs-lookup"><span data-stu-id="f0260-247">Do not backtrack when matching word characters.</span></span>|
|`\s?`|<span data-ttu-id="f0260-248">0 個または 1 個の空白文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-248">Match zero or one white-space characters.</span></span>|
|`((\w+),?\s?)+`|<span data-ttu-id="f0260-249">1 個以上の単語文字、0 個または 1 個のコンマ、および 0 個または 1 個の空白文字が 1 回以上続くパターンと一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-249">Match the combination of one or more word characters, zero or one commas, and zero or one white-space characters one or more times.</span></span>|
|`[\.!?]\)?`|<span data-ttu-id="f0260-250">3 種類の区切り記号のいずれかの後に 0 個または 1 個の右かっこ (")") が続くパターンと一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-250">Match any of the three punctuation symbols, followed by zero or one closing parentheses (")").</span></span>|

<span data-ttu-id="f0260-251">`(?n)` インライン要素を使用して、自動的なキャプチャを抑制することもできます。</span><span class="sxs-lookup"><span data-stu-id="f0260-251">You can also use the `(?n)` inline element to suppress automatic captures.</span></span> <span data-ttu-id="f0260-252">次の例では、前の例の正規表現パターンを変更して、`(?n)` インライン要素を <xref:System.Text.RegularExpressions.RegexOptions.ExplicitCapture?displayProperty=nameWithType> オプションの代わりに使用しています。</span><span class="sxs-lookup"><span data-stu-id="f0260-252">The following example modifies the previous regular expression pattern to use the `(?n)` inline element instead of the <xref:System.Text.RegularExpressions.RegexOptions.ExplicitCapture?displayProperty=nameWithType> option.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#10](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/explicit2.cs#10)]
[!code-vb[Conceptual.Regex.Language.Options#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/explicit2.vb#10)]

<span data-ttu-id="f0260-253">最後に、`(?n:)` インライン グループ要素を使用して、グループごとに自動的なキャプチャを抑制することもできます。</span><span class="sxs-lookup"><span data-stu-id="f0260-253">Finally, you can use the inline group element `(?n:)` to suppress automatic captures on a group-by-group basis.</span></span> <span data-ttu-id="f0260-254">次の例では、前のパターンを変更して、外部グループ `((?>\w+),?\s?)` で名前のないキャプチャを抑制しています。</span><span class="sxs-lookup"><span data-stu-id="f0260-254">The following example modifies the previous pattern to suppress unnamed captures in the outer group, `((?>\w+),?\s?)`.</span></span> <span data-ttu-id="f0260-255">この処理では、内部グループでの名前のないキャプチャも抑制されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-255">Note that this suppresses unnamed captures in the inner group as well.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#11](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/explicit3.cs#11)]
[!code-vb[Conceptual.Regex.Language.Options#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/explicit3.vb#11)]

## <a name="compiled-regular-expressions"></a><span data-ttu-id="f0260-256">コンパイルされた正規表現</span><span class="sxs-lookup"><span data-stu-id="f0260-256">Compiled Regular Expressions</span></span>

<span data-ttu-id="f0260-257">既定では、.NET の正規表現は解釈の対象になります。</span><span class="sxs-lookup"><span data-stu-id="f0260-257">By default, regular expressions in .NET are interpreted.</span></span> <span data-ttu-id="f0260-258"><xref:System.Text.RegularExpressions.Regex> オブジェクトがインスタンス化されるか、静的 <xref:System.Text.RegularExpressions.Regex> メソッドが呼び出されたときに、正規表現パターンはカスタム オペコードのセットに解析され、インタープリターがこのオペコードに基づいて正規表現を実行します。</span><span class="sxs-lookup"><span data-stu-id="f0260-258">When a <xref:System.Text.RegularExpressions.Regex> object is instantiated or a static <xref:System.Text.RegularExpressions.Regex> method is called, the regular expression pattern is parsed into a set of custom opcodes, and an interpreter uses these opcodes to run the regular expression.</span></span> <span data-ttu-id="f0260-259">この場合、正規表現エンジンの初期化処理を優先すると、実行時のパフォーマンスが低下するというトレードオフが伴います。</span><span class="sxs-lookup"><span data-stu-id="f0260-259">This involves a tradeoff: The cost of initializing the regular expression engine is minimized at the expense of run-time performance.</span></span>

<span data-ttu-id="f0260-260">正規表現を逐次解釈する代わりに、<xref:System.Text.RegularExpressions.RegexOptions.Compiled?displayProperty=nameWithType> オプションを使用してコンパイルされた正規表現を使用できます。</span><span class="sxs-lookup"><span data-stu-id="f0260-260">You can use compiled instead of interpreted regular expressions by using the <xref:System.Text.RegularExpressions.RegexOptions.Compiled?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="f0260-261">この場合、パターンは正規表現エンジンに渡され、オペコードのセットに解析されてから、Microsoft Intermediate Language (MSIL) に変換されます。変換されたコードは、共通言語ランタイムに直接渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="f0260-261">In this case, when a pattern is passed to the regular expression engine, it is parsed into a set of opcodes and then converted to Microsoft intermediate language (MSIL), which can be passed directly to the common language runtime.</span></span> <span data-ttu-id="f0260-262">コンパイルされた正規表現を使用すると、初期化処理に時間を要しますが、実行時のパフォーマンスは向上します。</span><span class="sxs-lookup"><span data-stu-id="f0260-262">Compiled regular expressions maximize run-time performance at the expense of initialization time.</span></span>

> [!NOTE]
> <span data-ttu-id="f0260-263">正規表現をコンパイルするには、<xref:System.Text.RegularExpressions.RegexOptions.Compiled?displayProperty=nameWithType> 値を `options` クラス コンストラクターまたは静的パターン一致メソッドの <xref:System.Text.RegularExpressions.Regex> パラメーターに渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0260-263">A regular expression can be compiled only by supplying the <xref:System.Text.RegularExpressions.RegexOptions.Compiled?displayProperty=nameWithType> value to the `options` parameter of a <xref:System.Text.RegularExpressions.Regex> class constructor or a static pattern-matching method.</span></span> <span data-ttu-id="f0260-264">インライン オプションとしては使用できません。</span><span class="sxs-lookup"><span data-stu-id="f0260-264">It is not available as an inline option.</span></span>

<span data-ttu-id="f0260-265">コンパイルされた正規表現は、静的正規表現とインスタンス正規表現の両方の呼び出しに使用できます。</span><span class="sxs-lookup"><span data-stu-id="f0260-265">You can use compiled regular expressions in calls to both static and instance regular expressions.</span></span> <span data-ttu-id="f0260-266">静的正規表現では、<xref:System.Text.RegularExpressions.RegexOptions.Compiled?displayProperty=nameWithType> オプションは正規表現パターン一致メソッドの `options` パラメーターに渡されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-266">In static regular expressions, the <xref:System.Text.RegularExpressions.RegexOptions.Compiled?displayProperty=nameWithType> option is passed to the `options` parameter of the regular expression pattern-matching method.</span></span> <span data-ttu-id="f0260-267">インスタンス正規表現では、`options` クラス コンストラクターの <xref:System.Text.RegularExpressions.Regex> パラメーターに渡されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-267">In instance regular expressions, it is passed to the `options` parameter of the <xref:System.Text.RegularExpressions.Regex> class constructor.</span></span> <span data-ttu-id="f0260-268">どちらの場合も、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="f0260-268">In both cases, it results in enhanced performance.</span></span>

<span data-ttu-id="f0260-269">ただし、パフォーマンスが向上するのは、次の条件を満たしている場合に限定されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-269">However, this improvement in performance occurs only under the following conditions:</span></span>

- <span data-ttu-id="f0260-270">特定の正規表現を表す <xref:System.Text.RegularExpressions.Regex> オブジェクトが正規表現パターン一致メソッドの複数の呼び出しで使用されている。</span><span class="sxs-lookup"><span data-stu-id="f0260-270">A <xref:System.Text.RegularExpressions.Regex> object that represents a particular regular expression is used in multiple calls to regular expression pattern-matching methods.</span></span>

- <span data-ttu-id="f0260-271"><xref:System.Text.RegularExpressions.Regex> オブジェクトがスコープの外に出ることが許可されておらず、再利用できる。</span><span class="sxs-lookup"><span data-stu-id="f0260-271">The <xref:System.Text.RegularExpressions.Regex> object is not allowed to go out of scope, so it can be reused.</span></span>

- <span data-ttu-id="f0260-272">静的正規表現が正規表現パターン一致メソッドの複数の呼び出しで使用されている</span><span class="sxs-lookup"><span data-stu-id="f0260-272">A static regular expression is used in multiple calls to regular expression pattern-matching methods.</span></span> <span data-ttu-id="f0260-273">(静的メソッド呼び出しで使用した正規表現は正規表現エンジンによってキャッシュされるので、パフォーマンスの向上が可能になります)。</span><span class="sxs-lookup"><span data-stu-id="f0260-273">(The performance improvement is possible because regular expressions used in static method calls are cached by the regular expression engine.)</span></span>

> [!NOTE]
> <span data-ttu-id="f0260-274"><xref:System.Text.RegularExpressions.RegexOptions.Compiled?displayProperty=nameWithType> オプションは <xref:System.Text.RegularExpressions.Regex.CompileToAssembly%2A?displayProperty=nameWithType> メソッドとは関係なく、定義済みのコンパイルされた正規表現を含む、特殊な目的のアセンブリを作成します。</span><span class="sxs-lookup"><span data-stu-id="f0260-274">The <xref:System.Text.RegularExpressions.RegexOptions.Compiled?displayProperty=nameWithType> option is unrelated to the <xref:System.Text.RegularExpressions.Regex.CompileToAssembly%2A?displayProperty=nameWithType> method, which creates a special-purpose assembly that contains predefined compiled regular expressions.</span></span>

## <a name="ignore-white-space"></a><span data-ttu-id="f0260-275">空白を無視</span><span class="sxs-lookup"><span data-stu-id="f0260-275">Ignore White Space</span></span>

<span data-ttu-id="f0260-276">既定では、正規表現パターンに含まれる空白には重要な意味があり、正規表現エンジンでは、入力文字列内の空白文字との照合が強制されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-276">By default, white space in a regular expression pattern is significant; it forces the regular expression engine to match a white-space character in the input string.</span></span> <span data-ttu-id="f0260-277">この結果、正規表現 "`\b\w+\s`" および "`\b\w+`" は、ほぼ等価な正規表現であると言えます。</span><span class="sxs-lookup"><span data-stu-id="f0260-277">Because of this, the regular expression "`\b\w+\s`" and "`\b\w+` " are roughly equivalent regular expressions.</span></span> <span data-ttu-id="f0260-278">さらに、シャープ記号 (#) が正規表現パターンに含まれている場合は、照合する対象のリテラル文字として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-278">In addition, when the number sign (#) is encountered in a regular expression pattern, it is interpreted as a literal character to be matched.</span></span>

<span data-ttu-id="f0260-279"><xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> オプションまたは `x` インライン オプションを指定すると、この既定の動作は次のように変更されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-279">The <xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> option, or the `x` inline option, changes this default behavior as follows:</span></span>

- <span data-ttu-id="f0260-280">正規表現パターンでエスケープされていない空白は無視されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-280">Unescaped white space in the regular expression pattern is ignored.</span></span> <span data-ttu-id="f0260-281">空白文字を正規表現パターンの一部に含めるには、エスケープする必要があります (たとえば、`\s` や "`\`")。</span><span class="sxs-lookup"><span data-stu-id="f0260-281">To be part of a regular expression pattern, white-space characters must be escaped (for example, as `\s` or "`\` ").</span></span>

- <span data-ttu-id="f0260-282">シャープ記号 (#) は、リテラル文字ではなく、コメントの先頭として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-282">The number sign (#) is interpreted as the beginning of a comment, rather than as a literal character.</span></span> <span data-ttu-id="f0260-283"># 記号から文字列の末尾まで、正規表現パターンに含まれるすべてのテキストは、コメントとして解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-283">All text in the regular expression pattern from the # character to the end of the string is interpreted as a comment.</span></span>

<span data-ttu-id="f0260-284">ただし、次に説明する状況では、<xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> オプションを使用している場合でも、正規表現の空白文字は無視されません。</span><span class="sxs-lookup"><span data-stu-id="f0260-284">However, in the following cases, white-space characters in a regular expression aren't ignored, even if you use the <xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> option:</span></span>

- <span data-ttu-id="f0260-285">文字クラス内の空白は常に、空白として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-285">White space within a character class is always interpreted literally.</span></span> <span data-ttu-id="f0260-286">たとえば、正規表現パターン `[ .,;:]` は、空白文字、ピリオド、コンマ、セミコロン、またはコロンの任意の 1 文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-286">For example, the regular expression pattern `[ .,;:]` matches any single white-space character, period, comma, semicolon, or colon.</span></span>

- <span data-ttu-id="f0260-287">かっこで囲まれた量指定子 (`{`*n*`}`、`{`*n*`,}`、`{`*n*`,`*m*`}` など) には空白を使用できません。</span><span class="sxs-lookup"><span data-stu-id="f0260-287">White space isn't allowed within a bracketed quantifier, such as `{`*n*`}`, `{`*n*`,}`, and `{`*n*`,`*m*`}`.</span></span> <span data-ttu-id="f0260-288">たとえば、正規表現パターン `\d{1, 3}` は、空白文字が含まれているため、1 ～ 3 桁の数値のどのシーケンスにも一致しません。</span><span class="sxs-lookup"><span data-stu-id="f0260-288">For example, the regular expression pattern `\d{1, 3}` fails to match any sequences of digits from one to three digits because it contains a white-space character.</span></span>

- <span data-ttu-id="f0260-289">言語要素を導入する文字シーケンス内では空白を使用できません。</span><span class="sxs-lookup"><span data-stu-id="f0260-289">White space isn't allowed within a character sequence that introduces a language element.</span></span> <span data-ttu-id="f0260-290">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="f0260-290">For example:</span></span>

  - <span data-ttu-id="f0260-291">言語要素 `(?:`*subexpression*`)` は非キャプチャ グループを表し、要素の `(?:` 部分には空白を埋め込むことはできません。</span><span class="sxs-lookup"><span data-stu-id="f0260-291">The language element `(?:`*subexpression*`)` represents a noncapturing group, and the `(?:` portion of the element can't have embedded spaces.</span></span> <span data-ttu-id="f0260-292">パターン `(? :`*subexpression*`)` は、正規表現エンジンで解析できないため実行時に <xref:System.ArgumentException> をスローします。パターン `( ?:`*subexpression*`)` は *subexpression* に一致しません。</span><span class="sxs-lookup"><span data-stu-id="f0260-292">The pattern `(? :`*subexpression*`)` throws an <xref:System.ArgumentException> at run time because the regular expression engine can't parse the pattern, and the pattern `( ?:`*subexpression*`)` fails to match *subexpression*.</span></span>

  - <span data-ttu-id="f0260-293">Unicode カテゴリまたは名前付きブロックを表す言語要素 `\p{`*name*`}` の `\p{` 部分には、空白を埋め込むことはできません。</span><span class="sxs-lookup"><span data-stu-id="f0260-293">The language element `\p{`*name*`}`, which represents a Unicode category or named block, can't include embedded spaces in the `\p{` portion of the element.</span></span> <span data-ttu-id="f0260-294">空白を追加すると、この要素は実行時に <xref:System.ArgumentException> をスローします。</span><span class="sxs-lookup"><span data-stu-id="f0260-294">If you do include a white space, the element throws an <xref:System.ArgumentException> at run time.</span></span>

<span data-ttu-id="f0260-295">このオプションを有効にすると、多くの場合、解析や理解が困難な正規表現を簡略化できます。</span><span class="sxs-lookup"><span data-stu-id="f0260-295">Enabling this option helps simplify regular expressions that are often difficult to parse and to understand.</span></span> <span data-ttu-id="f0260-296">正規表現が読みやすくなり、説明も記述できます。</span><span class="sxs-lookup"><span data-stu-id="f0260-296">It improves readability, and makes it possible to document a regular expression.</span></span>

<span data-ttu-id="f0260-297">次の例では、正規表現パターンを定義しています。</span><span class="sxs-lookup"><span data-stu-id="f0260-297">The following example defines the following regular expression pattern:</span></span>

`\b \(? ( (?>\w+) ,?\s? )+  [\.!?] \)? # Matches an entire sentence.`

<span data-ttu-id="f0260-298">このパターンは、「[明示的なキャプチャのみ](#explicit-captures-only)」セクションで定義したパターンと似ています。ただし、<xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> オプションを使用して、パターンの空白を無視している点が異なります。</span><span class="sxs-lookup"><span data-stu-id="f0260-298">This pattern is similar to the pattern defined in the [Explicit Captures Only](#explicit-captures-only) section, except that it uses the <xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> option to ignore pattern white space.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#12](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/whitespace1.cs#12)]
[!code-vb[Conceptual.Regex.Language.Options#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/whitespace1.vb#12)]

<span data-ttu-id="f0260-299">次の例では、`(?x)` インライン オプションを使用して、パターンの空白を無視しています。</span><span class="sxs-lookup"><span data-stu-id="f0260-299">The following example uses the inline option `(?x)` to ignore pattern white space.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#13](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/whitespace2.cs#13)]
[!code-vb[Conceptual.Regex.Language.Options#13](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/whitespace2.vb#13)]

## <a name="right-to-left-mode"></a><span data-ttu-id="f0260-300">右から左モード</span><span class="sxs-lookup"><span data-stu-id="f0260-300">Right-to-Left Mode</span></span>

<span data-ttu-id="f0260-301">既定では、正規表現エンジンは左から右の方向に検索します。</span><span class="sxs-lookup"><span data-stu-id="f0260-301">By default, the regular expression engine searches from left to right.</span></span> <span data-ttu-id="f0260-302">この検索の方向を反転するには、<xref:System.Text.RegularExpressions.RegexOptions.RightToLeft?displayProperty=nameWithType> オプションを使用します。</span><span class="sxs-lookup"><span data-stu-id="f0260-302">You can reverse the search direction by using the <xref:System.Text.RegularExpressions.RegexOptions.RightToLeft?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="f0260-303">検索は、文字列の最後の文字位置から自動的に開始されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-303">The search automatically begins at the last character position of the string.</span></span> <span data-ttu-id="f0260-304"><xref:System.Text.RegularExpressions.Regex.Match%28System.String%2CSystem.Int32%29?displayProperty=nameWithType> など、開始位置のパラメーターを含むパターン一致メソッドの場合は、検索の開始位置である右端の文字位置のインデックスが開始位置になります。</span><span class="sxs-lookup"><span data-stu-id="f0260-304">For pattern-matching methods that include a starting position parameter, such as <xref:System.Text.RegularExpressions.Regex.Match%28System.String%2CSystem.Int32%29?displayProperty=nameWithType>, the starting position is the index of the rightmost character position at which the search is to begin.</span></span>

> [!NOTE]
> <span data-ttu-id="f0260-305">右から左モードを使用するには、<xref:System.Text.RegularExpressions.RegexOptions.RightToLeft?displayProperty=nameWithType> 値を `options` クラス コンストラクターまたは静的パターン一致メソッドの <xref:System.Text.RegularExpressions.Regex> パラメーターに渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0260-305">Right-to-left pattern mode is available only by supplying the <xref:System.Text.RegularExpressions.RegexOptions.RightToLeft?displayProperty=nameWithType> value to the `options` parameter of a <xref:System.Text.RegularExpressions.Regex> class constructor or static pattern-matching method.</span></span> <span data-ttu-id="f0260-306">インライン オプションとしては使用できません。</span><span class="sxs-lookup"><span data-stu-id="f0260-306">It is not available as an inline option.</span></span>

<span data-ttu-id="f0260-307"><xref:System.Text.RegularExpressions.RegexOptions.RightToLeft?displayProperty=nameWithType> オプションは、検索の方向のみを変更します。このオプションを指定すると、正規表現パターンが右から左に解釈されるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="f0260-307">The <xref:System.Text.RegularExpressions.RegexOptions.RightToLeft?displayProperty=nameWithType> option changes the search direction only; it does not interpret the regular expression pattern from right to left.</span></span> <span data-ttu-id="f0260-308">たとえば、正規表現 `\bb\w+\s` は、文字 "b" で始まる単語とそれに続く空白文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-308">For example, the regular expression `\bb\w+\s` matches words that begin with the letter "b" and are followed by a white-space character.</span></span> <span data-ttu-id="f0260-309">次の例では、入力文字列は、1 文字以上の "b" を含む 3 つの単語で構成されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-309">In the following example, the input string consists of three words that include one or more "b" characters.</span></span> <span data-ttu-id="f0260-310">最初の単語は "b" で始まり、2 番目の単語は "b" で終わり、3 番目の単語は語内に 2 文字の "b" を含んでいます。</span><span class="sxs-lookup"><span data-stu-id="f0260-310">The first word begins with "b", the second ends with "b", and the third includes two "b" characters in the middle of the word.</span></span> <span data-ttu-id="f0260-311">この例の出力結果が示すように、最初の単語のみが正規表現パターンと一致しています。</span><span class="sxs-lookup"><span data-stu-id="f0260-311">As the output from the example shows, only the first word matches the regular expression pattern.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#17](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/righttoleft1.cs#17)]
[!code-vb[Conceptual.Regex.Language.Options#17](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/righttoleft1.vb#17)]

<span data-ttu-id="f0260-312">先読みアサーション (`(?=`*subexpression*`)` 言語要素) と後読みアサーション (`(?<=`*subexpression*`)` 言語要素) では、方向が変更されないことにも注意してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-312">Also note that the lookahead assertion (the `(?=`*subexpression*`)` language element) and the lookbehind assertion (the `(?<=`*subexpression*`)` language element) do not change direction.</span></span> <span data-ttu-id="f0260-313">先読みアサーションでは右方向へ、後読みアサーションでは左方向へ参照が行われます。</span><span class="sxs-lookup"><span data-stu-id="f0260-313">The lookahead assertions look to the right; the lookbehind assertions look to the left.</span></span> <span data-ttu-id="f0260-314">たとえば、正規表現 `(?<=\d{1,2}\s)\w+,?\s\d{4}` は後読みアサーションを使用して、月の名前の前にある日付をテストします。</span><span class="sxs-lookup"><span data-stu-id="f0260-314">For example, the regular expression `(?<=\d{1,2}\s)\w+,?\s\d{4}` uses the lookbehind assertion to test for a date that precedes a month name.</span></span> <span data-ttu-id="f0260-315">次に、この正規表現は、月と年を照合しています。</span><span class="sxs-lookup"><span data-stu-id="f0260-315">The regular expression then matches the month and the year.</span></span> <span data-ttu-id="f0260-316">先読みアサーションと後読みアサーションについて詳しくは、「[グループ化構成体](grouping-constructs-in-regular-expressions.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="f0260-316">For information on lookahead and lookbehind assertions, see [Grouping Constructs](grouping-constructs-in-regular-expressions.md).</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#18](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/righttoleft2.cs#18)]
[!code-vb[Conceptual.Regex.Language.Options#18](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/righttoleft2.vb#18)]

<span data-ttu-id="f0260-317">正規表現パターンは、次の表に示すように定義されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-317">The regular expression pattern is defined as shown in the following table.</span></span>

|<span data-ttu-id="f0260-318">パターン</span><span class="sxs-lookup"><span data-stu-id="f0260-318">Pattern</span></span>|<span data-ttu-id="f0260-319">説明</span><span class="sxs-lookup"><span data-stu-id="f0260-319">Description</span></span>|
|-------------|-----------------|
|`(?<=\d{1,2}\s)`|<span data-ttu-id="f0260-320">一致の先頭の前には、1 桁または 2 桁の 10 進数とそれに続く空白が必要です。</span><span class="sxs-lookup"><span data-stu-id="f0260-320">The beginning of the match must be preceded by one or two decimal digits followed by a space.</span></span>|
|`\w+`|<span data-ttu-id="f0260-321">1 つ以上の単語文字に一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-321">Match one or more word characters.</span></span>|
|`,?`|<span data-ttu-id="f0260-322">0 個または 1 個のコンマと一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-322">Match zero or one comma characters.</span></span>|
|`\s`|<span data-ttu-id="f0260-323">空白文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-323">Match a white-space character.</span></span>|
|`\d{4}`|<span data-ttu-id="f0260-324">4 桁の 10 進数と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-324">Match four decimal digits.</span></span>|

## <a name="ecmascript-matching-behavior"></a><span data-ttu-id="f0260-325">ECMAScript 一致の動作</span><span class="sxs-lookup"><span data-stu-id="f0260-325">ECMAScript Matching Behavior</span></span>

<span data-ttu-id="f0260-326">既定では、正規表現パターンを入力テキストに照合するときに、正規表現エンジンは標準の動作を使用します。</span><span class="sxs-lookup"><span data-stu-id="f0260-326">By default, the regular expression engine uses canonical behavior when matching a regular expression pattern to input text.</span></span> <span data-ttu-id="f0260-327">ただし、<xref:System.Text.RegularExpressions.RegexOptions.ECMAScript?displayProperty=nameWithType> オプションを使用することで、ECMAScript 一致の動作を使用するように正規表現エンジンに指示できます。</span><span class="sxs-lookup"><span data-stu-id="f0260-327">However, you can instruct the regular expression engine to use ECMAScript matching behavior by specifying the <xref:System.Text.RegularExpressions.RegexOptions.ECMAScript?displayProperty=nameWithType> option.</span></span>

> [!NOTE]
> <span data-ttu-id="f0260-328">ECMAScript 準拠の動作を使用するには、<xref:System.Text.RegularExpressions.RegexOptions.ECMAScript?displayProperty=nameWithType> 値を `options` クラス コンストラクターまたは静的パターン一致メソッドの <xref:System.Text.RegularExpressions.Regex> パラメーターに渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0260-328">ECMAScript-compliant behavior is available only by supplying the <xref:System.Text.RegularExpressions.RegexOptions.ECMAScript?displayProperty=nameWithType> value to the `options` parameter of a <xref:System.Text.RegularExpressions.Regex> class constructor or static pattern-matching method.</span></span> <span data-ttu-id="f0260-329">インライン オプションとしては使用できません。</span><span class="sxs-lookup"><span data-stu-id="f0260-329">It is not available as an inline option.</span></span>

<span data-ttu-id="f0260-330"><xref:System.Text.RegularExpressions.RegexOptions.ECMAScript?displayProperty=nameWithType> オプションと同時に使用できるのは、<xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType> オプションおよび <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> オプションだけです。</span><span class="sxs-lookup"><span data-stu-id="f0260-330">The <xref:System.Text.RegularExpressions.RegexOptions.ECMAScript?displayProperty=nameWithType> option can be combined only with the <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType> and <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> options.</span></span> <span data-ttu-id="f0260-331">これ以外のオプションと同時に正規表現で使用すると、<xref:System.ArgumentOutOfRangeException> が発生します。</span><span class="sxs-lookup"><span data-stu-id="f0260-331">The use of any other option in a regular expression results in an <xref:System.ArgumentOutOfRangeException>.</span></span>

<span data-ttu-id="f0260-332">ECMAScript と標準正規表現は、文字クラスの構文、自己参照キャプチャ グループ、および 8 進数と前方参照の解釈という 3 つの点で動作が異なります。</span><span class="sxs-lookup"><span data-stu-id="f0260-332">The behavior of ECMAScript and canonical regular expressions differs in three areas: character class syntax, self-referencing capturing groups, and octal versus backreference interpretation.</span></span>

- <span data-ttu-id="f0260-333">文字クラスの構文。</span><span class="sxs-lookup"><span data-stu-id="f0260-333">Character class syntax.</span></span> <span data-ttu-id="f0260-334">標準正規表現が Unicode をサポートしているのに対して、ECMAScript は Unicode をサポートしていないので、ECMAScript の文字クラスの構文には制限が多く、文字クラスの言語要素によっては意味が異なります。</span><span class="sxs-lookup"><span data-stu-id="f0260-334">Because canonical regular expressions support Unicode whereas ECMAScript does not, character classes in ECMAScript have a more limited syntax, and some character class language elements have a different meaning.</span></span> <span data-ttu-id="f0260-335">たとえば ECMAScript は、Unicode カテゴリやブロック要素 (`\p` および `\P`) などの言語要素をサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="f0260-335">For example, ECMAScript does not support language elements such as the Unicode category or block elements `\p` and `\P`.</span></span> <span data-ttu-id="f0260-336">同様に、単語文字と一致する `\w` 要素は、ECMAScript を使用した場合は `[a-zA-Z_0-9]` 文字クラスと等価になり、標準の動作を使用した場合は `[\p{Ll}\p{Lu}\p{Lt}\p{Lo}\p{Nd}\p{Pc}\p{Lm}]` と等価になります。</span><span class="sxs-lookup"><span data-stu-id="f0260-336">Similarly, the `\w` element, which matches a word character, is equivalent to the `[a-zA-Z_0-9]` character class when using ECMAScript and `[\p{Ll}\p{Lu}\p{Lt}\p{Lo}\p{Nd}\p{Pc}\p{Lm}]` when using canonical behavior.</span></span> <span data-ttu-id="f0260-337">詳しくは、「[文字クラス](character-classes-in-regular-expressions.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="f0260-337">For more information, see [Character Classes](character-classes-in-regular-expressions.md).</span></span>

  <span data-ttu-id="f0260-338">次の例は、標準パターン一致と ECMAScript パターン一致の違いを示しています。</span><span class="sxs-lookup"><span data-stu-id="f0260-338">The following example illustrates the difference between canonical and ECMAScript pattern matching.</span></span> <span data-ttu-id="f0260-339">この例では、単語とそれに続く空白文字と一致する正規表現 `\b(\w+\s*)+` を定義しています。</span><span class="sxs-lookup"><span data-stu-id="f0260-339">It defines a regular expression, `\b(\w+\s*)+`, that matches words followed by white-space characters.</span></span> <span data-ttu-id="f0260-340">入力は 2 つの文字列で構成され、一方の文字列ではラテン語文字セットが使用され、もう一方の文字列ではキリル文字セットが使用されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-340">The input consists of two strings, one that uses the Latin character set and the other that uses the Cyrillic character set.</span></span> <span data-ttu-id="f0260-341">出力結果が示すように、ECMAScript 一致を使用した <xref:System.Text.RegularExpressions.Regex.IsMatch%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> メソッドの呼び出しではキリル文字の単語が照合されないのに対して、標準一致を使用したメソッドの呼び出しではキリル文字の単語が照合されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-341">As the output shows, the call to the <xref:System.Text.RegularExpressions.Regex.IsMatch%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method that uses ECMAScript matching fails to match the Cyrillic words, whereas the method call that uses canonical matching does match these words.</span></span>

  [!code-csharp[Conceptual.Regex.Language.Options#16](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/ecmascript1.cs#16)]
  [!code-vb[Conceptual.Regex.Language.Options#16](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/ecmascript1.vb#16)]

- <span data-ttu-id="f0260-342">自己参照キャプチャ グループ。</span><span class="sxs-lookup"><span data-stu-id="f0260-342">Self-referencing capturing groups.</span></span> <span data-ttu-id="f0260-343">正規表現キャプチャ クラスが、それ自体への前方参照を持っている場合は、キャプチャの反復処理のたびに更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0260-343">A regular expression capture class with a backreference to itself must be updated with each capture iteration.</span></span> <span data-ttu-id="f0260-344">次の例に示すように、この機能では、正規表現 `((a+)(\1) ?)+` による入力文字列 " aa aaaa aaaaaa "との照合は、ECMAScript を使用した場合は有効になり、標準一致を使用した場合は無効になります。</span><span class="sxs-lookup"><span data-stu-id="f0260-344">As the following example shows, this feature enables the regular expression `((a+)(\1) ?)+` to match the input string " aa aaaa aaaaaa " when using ECMAScript, but not when using canonical matching.</span></span>

  [!code-csharp[Conceptual.Regex.Language.Options#21](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/ecmascript2.cs#21)]
  [!code-vb[Conceptual.Regex.Language.Options#21](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/ecmascript2.vb#21)]

  <span data-ttu-id="f0260-345">正規表現は、次の表に示すように定義されています。</span><span class="sxs-lookup"><span data-stu-id="f0260-345">The regular expression is defined as shown in the following table.</span></span>

  |<span data-ttu-id="f0260-346">パターン</span><span class="sxs-lookup"><span data-stu-id="f0260-346">Pattern</span></span>|<span data-ttu-id="f0260-347">説明</span><span class="sxs-lookup"><span data-stu-id="f0260-347">Description</span></span>|
  |-------------|-----------------|
  |<span data-ttu-id="f0260-348">(a+)</span><span class="sxs-lookup"><span data-stu-id="f0260-348">(a+)</span></span>|<span data-ttu-id="f0260-349">文字 "a" と 1 回以上一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-349">Match the letter "a" one or more times.</span></span> <span data-ttu-id="f0260-350">これが 2 番目のキャプチャ グループです。</span><span class="sxs-lookup"><span data-stu-id="f0260-350">This is the second capturing group.</span></span>|
  |<span data-ttu-id="f0260-351">(\1)</span><span class="sxs-lookup"><span data-stu-id="f0260-351">(\1)</span></span>|<span data-ttu-id="f0260-352">最初のキャプチャ グループによってキャプチャされた部分文字列と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-352">Match the substring captured by the first capturing group.</span></span> <span data-ttu-id="f0260-353">これが 3 番目のキャプチャ グループです。</span><span class="sxs-lookup"><span data-stu-id="f0260-353">This is the third capturing group.</span></span>|
  |<span data-ttu-id="f0260-354">?</span><span class="sxs-lookup"><span data-stu-id="f0260-354">?</span></span>|<span data-ttu-id="f0260-355">0 個または 1 個の空白文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-355">Match zero or one space characters.</span></span>|
  |<span data-ttu-id="f0260-356">((a+)(\1) ?)+</span><span class="sxs-lookup"><span data-stu-id="f0260-356">((a+)(\1) ?)+</span></span>|<span data-ttu-id="f0260-357">1 文字以上の "a"、最初のキャプチャ グループと一致する文字列、および 0 個または 1 個の空白文字が 1 回以上続くパターンと一致します。</span><span class="sxs-lookup"><span data-stu-id="f0260-357">Match the pattern of one or more "a" characters followed by a string that matches the first capturing group followed by zero or one space characters one or more times.</span></span> <span data-ttu-id="f0260-358">これが最初のキャプチャ グループです。</span><span class="sxs-lookup"><span data-stu-id="f0260-358">This is the first capturing group.</span></span>|

- <span data-ttu-id="f0260-359">8 進数エスケープと前方参照のあいまいさの解決方法。</span><span class="sxs-lookup"><span data-stu-id="f0260-359">Resolution of ambiguities between octal escapes and backreferences.</span></span> <span data-ttu-id="f0260-360">標準正規表現と ECMAScript 正規表現による 8 進数と前方参照の解釈の違いの概要を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="f0260-360">The following table summarizes the differences in octal versus backreference interpretation by canonical and ECMAScript regular expressions.</span></span>

  |<span data-ttu-id="f0260-361">正規表現</span><span class="sxs-lookup"><span data-stu-id="f0260-361">Regular expression</span></span>|<span data-ttu-id="f0260-362">標準の動作</span><span class="sxs-lookup"><span data-stu-id="f0260-362">Canonical behavior</span></span>|<span data-ttu-id="f0260-363">ECMAScript の動作</span><span class="sxs-lookup"><span data-stu-id="f0260-363">ECMAScript behavior</span></span>|
  |------------------------|------------------------|-------------------------|
  |<span data-ttu-id="f0260-364">`\0` の後に 0 ～ 2 桁の 8 進数字が続く場合</span><span class="sxs-lookup"><span data-stu-id="f0260-364">`\0` followed by 0 to 2 octal digits</span></span>|<span data-ttu-id="f0260-365">8 進数として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-365">Interpret as an octal.</span></span> <span data-ttu-id="f0260-366">たとえば、`\044` は常に 8 進数値として解釈され、"$" を意味します。</span><span class="sxs-lookup"><span data-stu-id="f0260-366">For example, `\044` is always interpreted as an octal value and means "$".</span></span>|<span data-ttu-id="f0260-367">同じ動作です。</span><span class="sxs-lookup"><span data-stu-id="f0260-367">Same behavior.</span></span>|
  |<span data-ttu-id="f0260-368">`\` の後に 1 ～ 9 の数字が続き、その後に 10 進数字が続かない場合</span><span class="sxs-lookup"><span data-stu-id="f0260-368">`\` followed by a digit from 1 to 9, followed by no additional decimal digits,</span></span>|<span data-ttu-id="f0260-369">前方参照として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-369">Interpret as a backreference.</span></span> <span data-ttu-id="f0260-370">たとえば、9 番目のキャプチャ グループが存在しない場合でも、`\9` は常に前方参照 9 です。</span><span class="sxs-lookup"><span data-stu-id="f0260-370">For example, `\9` always means backreference 9, even if a ninth capturing group does not exist.</span></span> <span data-ttu-id="f0260-371">キャプチャ グループが存在しない場合は、正規表現パーサーは <xref:System.ArgumentException> をスローします。</span><span class="sxs-lookup"><span data-stu-id="f0260-371">If the capturing group does not exist, the regular expression parser throws an <xref:System.ArgumentException>.</span></span>|<span data-ttu-id="f0260-372">単一の 10 進数字のキャプチャ グループが存在する場合は、その数字への前方参照です。</span><span class="sxs-lookup"><span data-stu-id="f0260-372">If a single decimal digit capturing group exists, backreference to that digit.</span></span> <span data-ttu-id="f0260-373">それ以外の場合は、値はリテラルとして解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-373">Otherwise, interpret the value as a literal.</span></span>|
  |<span data-ttu-id="f0260-374">`\` の後に 1 ～ 9 の数字が続き、その後に 10 進数字が続く場合</span><span class="sxs-lookup"><span data-stu-id="f0260-374">`\` followed by a digit from 1 to 9, followed by additional decimal digits</span></span>|<span data-ttu-id="f0260-375">数字は 10 進数値として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-375">Interpret the digits as a decimal value.</span></span> <span data-ttu-id="f0260-376">そのキャプチャ グループが存在する場合は、式は前方参照として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-376">If that capturing group exists, interpret the expression as a backreference.</span></span><br /><br /> <span data-ttu-id="f0260-377">それ以外の場合は、先行する数字が 377 までの範囲で 8 進数として解釈されます。つまり、値の下位 8 ビットのみが処理の対象になります。</span><span class="sxs-lookup"><span data-stu-id="f0260-377">Otherwise, interpret the leading octal digits up to octal 377; that is, consider only the low 8 bits of the value.</span></span> <span data-ttu-id="f0260-378">残りの数字はリテラルとして解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-378">Interpret the remaining digits as literals.</span></span> <span data-ttu-id="f0260-379">たとえば、式 `\3000` では、キャプチャ グループ 300 が存在する場合は前方参照 300 として解釈されます。キャプチャ グループ 300 が存在しない場合は 8 進数 300 とそれに続く 0 として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-379">For example, in the expression `\3000`, if capturing group 300 exists, interpret as backreference 300; if capturing group 300 does not exist, interpret as octal 300 followed by 0.</span></span>|<span data-ttu-id="f0260-380">キャプチャを参照できる範囲で、できるだけ多くの桁数が 10 進値に変換され、前方参照として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-380">Interpret as a backreference by converting as many digits as possible to a decimal value that can refer to a capture.</span></span> <span data-ttu-id="f0260-381">変換できる数字がない場合は、先行する数字が 377 までの範囲で 8 進数として解釈され、残りの数字はリテラルとして解釈されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-381">If no digits can be converted, interpret as an octal by using the leading octal digits up to octal 377; interpret the remaining digits as literals.</span></span>|

## <a name="comparison-using-the-invariant-culture"></a><span data-ttu-id="f0260-382">インバリアント カルチャを使用した比較</span><span class="sxs-lookup"><span data-stu-id="f0260-382">Comparison Using the Invariant Culture</span></span>

<span data-ttu-id="f0260-383">既定では、大文字と小文字を区別しない比較を実行するときに、正規表現エンジンは現在のカルチャの大文字と小文字の表記規則を使用して、等価な大文字および小文字を決定します。</span><span class="sxs-lookup"><span data-stu-id="f0260-383">By default, when the regular expression engine performs case-insensitive comparisons, it uses the casing conventions of the current culture to determine equivalent uppercase and lowercase characters.</span></span>

<span data-ttu-id="f0260-384">ただし、この動作は、比較の種類によっては望ましくない場合があります。具体的な例としては、ユーザー入力と、パスワード、ファイル、URL など、システム リソースの名前を比較する場合が挙げられます。</span><span class="sxs-lookup"><span data-stu-id="f0260-384">However, this behavior is undesirable for some types of comparisons, particularly when comparing user input to the names of system resources, such as passwords, files, or URLs.</span></span> <span data-ttu-id="f0260-385">この場合に該当する例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="f0260-385">The following example illustrates such as scenario.</span></span> <span data-ttu-id="f0260-386">このコードは、URL が **FILE://** で始まる、任意のリソースへのアクセスをブロックすることを目的としています。</span><span class="sxs-lookup"><span data-stu-id="f0260-386">The code is intended to block access to any resource whose URL is prefaced with **FILE://**.</span></span> <span data-ttu-id="f0260-387">`$FILE://` という正規表現を使用して、文字列に対する大文字と小文字を区別しない一致が試みられます。</span><span class="sxs-lookup"><span data-stu-id="f0260-387">The regular expression attempts a case-insensitive match with the string by using the regular expression `$FILE://`.</span></span> <span data-ttu-id="f0260-388">ただし、現在のシステム カルチャが tr-TR (トルコ語 (トルコ)) である場合、"I" は "i" の大文字表現には該当しません。</span><span class="sxs-lookup"><span data-stu-id="f0260-388">However, when the current system culture is tr-TR (Turkish-Turkey), "I" is not the uppercase equivalent of "i".</span></span> <span data-ttu-id="f0260-389">結果として、<xref:System.Text.RegularExpressions.Regex.IsMatch%2A?displayProperty=nameWithType> メソッドの呼び出しでは、`false` が返され、ファイルへのアクセスは許可されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-389">As a result, the call to the <xref:System.Text.RegularExpressions.Regex.IsMatch%2A?displayProperty=nameWithType> method returns `false`, and access to the file is allowed.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#14](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/culture1.cs#14)]
[!code-vb[Conceptual.Regex.Language.Options#14](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/culture1.vb#14)]

> [!NOTE]
> <span data-ttu-id="f0260-390">大文字と小文字を区別する文字列比較とインバリアント カルチャを使用する文字列比較の詳細については、「[文字列を使用するためのベスト プラクティス](best-practices-strings.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0260-390">For more information about string comparisons that are case-sensitive and that use the invariant culture, see [Best Practices for Using Strings](best-practices-strings.md).</span></span>

<span data-ttu-id="f0260-391">現在のカルチャで大文字と小文字を区別しない比較を行う代わりに、<xref:System.Text.RegularExpressions.RegexOptions.CultureInvariant?displayProperty=nameWithType> オプションを指定すると、言語のカルチャの違いを無視して、インバリアント カルチャの規則を使用できます。</span><span class="sxs-lookup"><span data-stu-id="f0260-391">Instead of using the case-insensitive comparisons of the current culture, you can specify the <xref:System.Text.RegularExpressions.RegexOptions.CultureInvariant?displayProperty=nameWithType> option to ignore cultural differences in language and to use the conventions of the invariant culture.</span></span>

> [!NOTE]
> <span data-ttu-id="f0260-392">インバリアント カルチャを使用して比較を行うには、<xref:System.Text.RegularExpressions.RegexOptions.CultureInvariant?displayProperty=nameWithType> 値を `options` クラス コンストラクターまたは静的パターン一致メソッドの <xref:System.Text.RegularExpressions.Regex> パラメーターに渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0260-392">Comparison using the invariant culture is available only by supplying the <xref:System.Text.RegularExpressions.RegexOptions.CultureInvariant?displayProperty=nameWithType> value to the `options` parameter of a <xref:System.Text.RegularExpressions.Regex> class constructor or static pattern-matching method.</span></span> <span data-ttu-id="f0260-393">インライン オプションとしては使用できません。</span><span class="sxs-lookup"><span data-stu-id="f0260-393">It is not available as an inline option.</span></span>

<span data-ttu-id="f0260-394">次の例は前の例と同じものですが、<xref:System.Text.RegularExpressions.Regex.IsMatch%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> を含むオプションを指定して、静的メソッド <xref:System.Text.RegularExpressions.RegexOptions.CultureInvariant?displayProperty=nameWithType> が呼び出されている点が異なります。</span><span class="sxs-lookup"><span data-stu-id="f0260-394">The following example is identical to the previous example, except that the static <xref:System.Text.RegularExpressions.Regex.IsMatch%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method is called with options that include <xref:System.Text.RegularExpressions.RegexOptions.CultureInvariant?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f0260-395">現在のカルチャがトルコ語 (トルコ) に設定されている場合でも、正規表現エンジンでは "FILE" と "file" が正常に一致し、ファイル リソースへのアクセスが拒否されます。</span><span class="sxs-lookup"><span data-stu-id="f0260-395">Even when the current culture is set to Turkish (Turkey), the regular expression engine is able to successfully match "FILE" and "file" and block access to the file resource.</span></span>

[!code-csharp[Conceptual.Regex.Language.Options#15](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.options/cs/culture1.cs#15)]
[!code-vb[Conceptual.Regex.Language.Options#15](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.options/vb/culture1.vb#15)]

## <a name="see-also"></a><span data-ttu-id="f0260-396">関連項目</span><span class="sxs-lookup"><span data-stu-id="f0260-396">See also</span></span>

- [<span data-ttu-id="f0260-397">正規表現言語 - クイック リファレンス</span><span class="sxs-lookup"><span data-stu-id="f0260-397">Regular Expression Language - Quick Reference</span></span>](regular-expression-language-quick-reference.md)
