---
title: .NET 正規表現でのアンカー
description: 正規表現パターンでアンカーを使用する方法について説明します。
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- atomic zero-width assertions
- regular expressions, anchors
- regular expressions, atomic zero-width assertions
- anchors, in regular expressions
- metacharacters, atomic zero-width assertions
- metacharacters, anchors
- .NET Framework regular expressions, anchors
- .NET Framework regular expressions, atomic zero-width assertions
ms.assetid: 336391f6-2614-499b-8b1b-07a6837108a7
ms.openlocfilehash: c4853a6854f5da1a3217c976a03ddbde3b528560
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/15/2020
ms.locfileid: "78159664"
---
# <a name="anchors-in-regular-expressions"></a><span data-ttu-id="6d35f-103">正規表現のアンカー</span><span class="sxs-lookup"><span data-stu-id="6d35f-103">Anchors in Regular Expressions</span></span>
<span data-ttu-id="6d35f-104">アンカー (アトミック ゼロ幅アサーション) は、文字列が一致する位置を指定します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-104">Anchors, or atomic zero-width assertions, specify a position in the string where a match must occur.</span></span> <span data-ttu-id="6d35f-105">検索式でアンカーを使用した場合、正規表現エンジンは、後方の文字列を読み込んだり、文字に一致させたりすることはしません。指定された位置での一致のみが検索されます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-105">When you use an anchor in your search expression, the regular expression engine does not advance through the string or consume characters; it looks for a match in the specified position only.</span></span> <span data-ttu-id="6d35f-106">たとえば、 `^` は、行または文字列の先頭に一致する必要があることを指定します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-106">For example, `^` specifies that the match must start at the beginning of a line or string.</span></span> <span data-ttu-id="6d35f-107">したがって、正規表現 `^http:` は、"http:" が行の先頭にある場合にのみ一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-107">Therefore, the regular expression `^http:` matches "http:" only when it occurs at the beginning of a line.</span></span> <span data-ttu-id="6d35f-108">次の表は、.NET の正規表現でサポートされているアンカーの一覧です。</span><span class="sxs-lookup"><span data-stu-id="6d35f-108">The following table lists the anchors supported by the regular expressions in .NET.</span></span>  
  
|<span data-ttu-id="6d35f-109">アンカー</span><span class="sxs-lookup"><span data-stu-id="6d35f-109">Anchor</span></span>|<span data-ttu-id="6d35f-110">説明</span><span class="sxs-lookup"><span data-stu-id="6d35f-110">Description</span></span>|  
|------------|-----------------|  
|`^`|<span data-ttu-id="6d35f-111">既定では、文字列の先頭で一致する必要があります。複数行モードでは、行の先頭で一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6d35f-111">By default, the match must occur at the beginning of the string; in multiline mode, it must occur at the beginning of the line.</span></span> <span data-ttu-id="6d35f-112">詳細については、「 [文字列または行の先頭](#start-of-string-or-line-)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6d35f-112">For more information, see [Start of String or Line](#start-of-string-or-line-).</span></span>|  
|`$`|<span data-ttu-id="6d35f-113">既定では、文字列の末尾で一致するか、文字列の末尾にある `\n` の前で一致する必要があります。複数行モードでは、行の末尾で一致するか、行の末尾にある `\n` の前で一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6d35f-113">By default, the match must occur at the end of the string or before `\n` at the end of the string; in multiline mode, it must occur at the end of the line or before `\n` at the end of the line.</span></span> <span data-ttu-id="6d35f-114">詳細については、「 [文字列または行の末尾](#end-of-string-or-line-)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6d35f-114">For more information, see [End of String or Line](#end-of-string-or-line-).</span></span>|  
|`\A`|<span data-ttu-id="6d35f-115">文字列の先頭にのみ一致します (複数行はサポートされません)。</span><span class="sxs-lookup"><span data-stu-id="6d35f-115">The match must occur at the beginning of the string only (no multiline support).</span></span> <span data-ttu-id="6d35f-116">詳細については、「 [文字列の先頭のみ](#start-of-string-only-a)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6d35f-116">For more information, see [Start of String Only](#start-of-string-only-a).</span></span>|  
|`\Z`|<span data-ttu-id="6d35f-117">文字列の末尾で一致するか、文字列の末尾にある `\n` の前に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-117">The match must occur at the end of the string, or before `\n` at the end of the string.</span></span> <span data-ttu-id="6d35f-118">詳細については、「 [文字列の末尾または末尾の改行の前](#end-of-string-or-before-ending-newline-z)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6d35f-118">For more information, see [End of String or Before Ending Newline](#end-of-string-or-before-ending-newline-z).</span></span>|  
|`\z`|<span data-ttu-id="6d35f-119">文字列の末尾にのみ一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-119">The match must occur at the end of the string only.</span></span> <span data-ttu-id="6d35f-120">詳細については、「 [文字列の末尾のみ](#end-of-string-only-z)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6d35f-120">For more information, see [End of String Only](#end-of-string-only-z).</span></span>|  
|`\G`|<span data-ttu-id="6d35f-121">前回の一致が終了した位置に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-121">The match must start at the position where the previous match ended.</span></span> <span data-ttu-id="6d35f-122">詳細については、「 [連続一致](#contiguous-matches-g)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6d35f-122">For more information, see [Contiguous Matches](#contiguous-matches-g).</span></span>|  
|`\b`|<span data-ttu-id="6d35f-123">ワード境界に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-123">The match must occur on a word boundary.</span></span> <span data-ttu-id="6d35f-124">詳細については、「 [ワード境界](#word-boundary-b)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6d35f-124">For more information, see [Word Boundary](#word-boundary-b).</span></span>|  
|`\B`|<span data-ttu-id="6d35f-125">ワード境界以外に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-125">The match must not occur on a word boundary.</span></span> <span data-ttu-id="6d35f-126">詳細については、「 [ワード境界以外](#non-word-boundary-b)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6d35f-126">For more information, see [Non-Word Boundary](#non-word-boundary-b).</span></span>|  

## <a name="start-of-string-or-line-"></a><span data-ttu-id="6d35f-127">文字列または行の先頭: ^</span><span class="sxs-lookup"><span data-stu-id="6d35f-127">Start of String or Line: ^</span></span>  
 <span data-ttu-id="6d35f-128">既定では、`^` アンカーは、その後に続くパターンが、文字列の最初の文字位置から始まる必要があることを指定します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-128">By default, the `^` anchor specifies that the following pattern must begin at the first character position of the string.</span></span> <span data-ttu-id="6d35f-129"><xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> オプションを指定して `^` を使用した場合は (「[正規表現のオプション](../../../docs/standard/base-types/regular-expression-options.md)」を参照)、各行の先頭に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-129">If you use `^` with the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option (see [Regular Expression Options](../../../docs/standard/base-types/regular-expression-options.md)), the match must occur at the beginning of each line.</span></span>  
  
 <span data-ttu-id="6d35f-130">次の例では、正規表現で `^` アンカーを使用して、プロ野球チームが存続した年数に関する情報を抽出します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-130">The following example uses the `^` anchor in a regular expression that extracts information about the years during which some professional baseball teams existed.</span></span> <span data-ttu-id="6d35f-131">この例では、 <xref:System.Text.RegularExpressions.Regex.Matches%2A?displayProperty=nameWithType> メソッドの 2 つのオーバーロードを呼び出しています。</span><span class="sxs-lookup"><span data-stu-id="6d35f-131">The example calls two overloads of the <xref:System.Text.RegularExpressions.Regex.Matches%2A?displayProperty=nameWithType> method:</span></span>  
  
- <span data-ttu-id="6d35f-132"><xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29> オーバーロードの呼び出しでは、入力文字列内で正規表現パターンに一致する最初の部分文字列が検索されます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-132">The call to the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29> overload finds only the first substring in the input string that matches the regular expression pattern.</span></span>  
  
- <span data-ttu-id="6d35f-133"><xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29> パラメーターを `options` に設定した <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> オーバーロードの呼び出しでは、5 つのすべての部分文字列が検索されます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-133">The call to the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29> overload with the `options` parameter set to <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> finds all five substrings.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/startofstring1.cs#1)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/startofstring1.vb#1)]  
  
 <span data-ttu-id="6d35f-134">正規表現パターン `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+` は、次の表に示すように定義されています。</span><span class="sxs-lookup"><span data-stu-id="6d35f-134">The regular expression pattern `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="6d35f-135">パターン</span><span class="sxs-lookup"><span data-stu-id="6d35f-135">Pattern</span></span>|<span data-ttu-id="6d35f-136">説明</span><span class="sxs-lookup"><span data-stu-id="6d35f-136">Description</span></span>|  
|-------------|-----------------|  
|`^`|<span data-ttu-id="6d35f-137">入力文字列の先頭から (または、 <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> オプションを指定してメソッドが呼び出された場合は行の先頭から) 照合を開始します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-137">Begin the match at the beginning of the input string (or the beginning of the line if the method is called with the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option).</span></span>|  
|`((\w+(\s?)){2,}`|<span data-ttu-id="6d35f-138">1 個以上の単語文字の後に 0 個または 1 個の空白が続くパターンが少なくとも 2 回繰り返される部分に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-138">Match one or more word characters followed either by zero or by one space at least two times.</span></span> <span data-ttu-id="6d35f-139">これが最初のキャプチャ グループです。</span><span class="sxs-lookup"><span data-stu-id="6d35f-139">This is the first capturing group.</span></span> <span data-ttu-id="6d35f-140">この式では、2 番目と 3 番目のキャプチャ グループも定義されます。2 番目はキャプチャ ワードで、3 番目はキャプチャされた空白で構成されます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-140">This expression also defines a second and third capturing group: The second consists of the captured word, and the third consists of the captured white space.</span></span>|  
|`,\s`|<span data-ttu-id="6d35f-141">コンマおよびそれに続く空白文字に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-141">Match a comma followed by a white-space character.</span></span>|  
|`(\w+\s\w+)`|<span data-ttu-id="6d35f-142">1 個以上の単語文字の後に 1 個の空白が続き、さらに 1 個以上の単語文字が続くパターンに一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-142">Match one or more word characters followed by a space, followed by one or more word characters.</span></span> <span data-ttu-id="6d35f-143">これが 4 番目のキャプチャ グループです。</span><span class="sxs-lookup"><span data-stu-id="6d35f-143">This is the fourth capturing group.</span></span>|  
|`,`|<span data-ttu-id="6d35f-144">コンマに一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-144">Match a comma.</span></span>|  
|`\s\d{4}`|<span data-ttu-id="6d35f-145">1 個の空白の後に 4 個の 10 進数字が続くパターンに一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-145">Match a space followed by four decimal digits.</span></span>|  
|<code>(-(\d{4}&#124;present))?</code>|<span data-ttu-id="6d35f-146">1 個のハイフンの後に 4 個の 10 進数字または文字列 "present" が続くパターンの、0 回または 1 回の繰り返しに一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-146">Match zero or one occurrence of a hyphen followed by four decimal digits or the string "present".</span></span> <span data-ttu-id="6d35f-147">これが 6 番目のキャプチャ グループです。</span><span class="sxs-lookup"><span data-stu-id="6d35f-147">This is the sixth capturing group.</span></span> <span data-ttu-id="6d35f-148">7 番目のキャプチャ グループも含まれています。</span><span class="sxs-lookup"><span data-stu-id="6d35f-148">It also includes a seventh capturing group.</span></span>|  
|`,?`|<span data-ttu-id="6d35f-149">コンマの 0 回または 1 回の繰り返しに一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-149">Match zero or one occurrence of a comma.</span></span>|  
|<code>(\s\d{4}(-(\d{4}&#124;present))?,?)+</code>|<span data-ttu-id="6d35f-150">1 個のスペース、4 個の 10 進数字、1 個のハイフンの後に 4 個の 10 進数字または文字列 "present" が続くパターンの 0 回または 1 回の繰り返し、0 個または 1 個のコンマが並んだパターンの、1 回以上の繰り返しに一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-150">Match one or more occurrences of the following: a space, four decimal digits, zero or one occurrence of a hyphen followed by four decimal digits or the string "present", and zero or one comma.</span></span> <span data-ttu-id="6d35f-151">これが 5 番目のキャプチャ グループです。</span><span class="sxs-lookup"><span data-stu-id="6d35f-151">This is the fifth capturing group.</span></span>|

## <a name="end-of-string-or-line-"></a><span data-ttu-id="6d35f-152">文字列または行の末尾: $</span><span class="sxs-lookup"><span data-stu-id="6d35f-152">End of String or Line: $</span></span>  
 <span data-ttu-id="6d35f-153">`$` アンカーは、その前にあるパターンが、入力文字列の末尾、または入力文字列の末尾にある `\n` の前で一致する必要があることを指定します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-153">The `$` anchor specifies that the preceding pattern must occur at the end of the input string, or before `\n` at the end of the input string.</span></span>  
  
 <span data-ttu-id="6d35f-154">`$` オプションを指定して <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> を使用した場合は、行の末尾にも一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-154">If you use `$` with the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option, the match can also occur at the end of a line.</span></span> <span data-ttu-id="6d35f-155">`$` は、 `\n` に一致しますが、 `\r\n` (復帰文字と改行文字の組み合わせ、つまり CR/LF) には一致しないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6d35f-155">Note that `$` matches `\n` but does not match `\r\n` (the combination of carriage return and newline characters, or CR/LF).</span></span> <span data-ttu-id="6d35f-156">CR/LF 文字の組み合わせに一致させるには、正規表現パターンに `\r?$` を含めます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-156">To match the CR/LF character combination, include `\r?$` in the regular expression pattern.</span></span>  
  
 <span data-ttu-id="6d35f-157">次の例では、「 `$` 文字列または行の先頭 [」の例で使用した正規表現パターンに](#start-of-string-or-line-) アンカーを追加しています。</span><span class="sxs-lookup"><span data-stu-id="6d35f-157">The following example adds the `$` anchor to the regular expression pattern used in the example in the [Start of String or Line](#start-of-string-or-line-) section.</span></span> <span data-ttu-id="6d35f-158">5 つのテキスト行を含む元の入力文字列に対して使用した場合、 <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29?displayProperty=nameWithType> メソッドは一致を見つけることができません。これは、最初の行の末尾が `$` パターンに一致しないためです。</span><span class="sxs-lookup"><span data-stu-id="6d35f-158">When used with the original input string, which includes five lines of text, the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29?displayProperty=nameWithType> method is unable to find a match, because the end of the first line does not match the `$` pattern.</span></span> <span data-ttu-id="6d35f-159">元の入力文字列を文字列配列に分割すると、 <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29?displayProperty=nameWithType> メソッドは 5 つの各行の一致に成功します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-159">When the original input string is split into a string array, the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29?displayProperty=nameWithType> method succeeds in matching each of the five lines.</span></span> <span data-ttu-id="6d35f-160"><xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> パラメーターを `options` に設定して <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType>メソッドを呼び出すと、一致は見つかりません。これは、正規表現パターンで復帰要素 (\u+000D) が考慮されないためです。</span><span class="sxs-lookup"><span data-stu-id="6d35f-160">When the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method is called with the `options` parameter set to <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType>, no matches are found because the regular expression pattern does not account for the carriage return element (\u+000D).</span></span> <span data-ttu-id="6d35f-161">ただし、 `$` を `\r?$`に置き換え、 <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> パラメーターを `options` に設定して <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> メソッドを呼び指すと、正規表現パターンが変更され、再び 5 つの一致が検索されるようになります。</span><span class="sxs-lookup"><span data-stu-id="6d35f-161">However, when the regular expression pattern is modified by replacing `$` with `\r?$`, calling the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method with the `options` parameter set to <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> again finds five matches.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/endofstring1.cs#2)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/endofstring1.vb#2)]

## <a name="start-of-string-only-a"></a><span data-ttu-id="6d35f-162">文字列の先頭のみ: \A</span><span class="sxs-lookup"><span data-stu-id="6d35f-162">Start of String Only: \A</span></span>  
 <span data-ttu-id="6d35f-163">`\A` アンカーは、入力文字列の先頭に一致する必要があることを指定します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-163">The `\A` anchor specifies that a match must occur at the beginning of the input string.</span></span> <span data-ttu-id="6d35f-164">これは `^` アンカーと同じですが、 `\A` では <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> オプションが無視される点が異なります。</span><span class="sxs-lookup"><span data-stu-id="6d35f-164">It is identical to the `^` anchor, except that `\A` ignores the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="6d35f-165">したがって、複数行の入力文字列でも最初の行の先頭にのみ一致することができます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-165">Therefore, it can only match the start of the first line in a multiline input string.</span></span>  
  
 <span data-ttu-id="6d35f-166">次の例は、 `^` アンカーおよび `$` アンカーの例と似ています。</span><span class="sxs-lookup"><span data-stu-id="6d35f-166">The following example is similar to the examples for the `^` and `$` anchors.</span></span> <span data-ttu-id="6d35f-167">この例では、正規表現で `\A` アンカーを使用して、プロ野球チームが存続した年数に関する情報を抽出します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-167">It uses the `\A` anchor in a regular expression that extracts information about the years during which some professional baseball teams existed.</span></span> <span data-ttu-id="6d35f-168">入力文字列には 5 つの行が含まれます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-168">The input string includes five lines.</span></span> <span data-ttu-id="6d35f-169"><xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> メソッドを呼び出すと、入力文字列内で正規表現パターンに一致する最初の部分文字列のみが検索されます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-169">The call to the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method finds only the first substring in the input string that matches the regular expression pattern.</span></span> <span data-ttu-id="6d35f-170">この例からわかるように、 <xref:System.Text.RegularExpressions.RegexOptions.Multiline> オプションの効果はありません。</span><span class="sxs-lookup"><span data-stu-id="6d35f-170">As the example shows, the <xref:System.Text.RegularExpressions.RegexOptions.Multiline> option has no effect.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/startofstring2.cs#3)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/startofstring2.vb#3)]

## <a name="end-of-string-or-before-ending-newline-z"></a><span data-ttu-id="6d35f-171">文字列の末尾または末尾の改行の前: \Z</span><span class="sxs-lookup"><span data-stu-id="6d35f-171">End of String or Before Ending Newline: \Z</span></span>  
 <span data-ttu-id="6d35f-172">`\Z` アンカーは、入力文字列の末尾、または入力文字列の末尾にある `\n` の前に一致する必要があることを指定します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-172">The `\Z` anchor specifies that a match must occur at the end of the input string, or before `\n` at the end of the input string.</span></span> <span data-ttu-id="6d35f-173">これは `$` アンカーと同じですが、 `\Z` では <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> オプションが無視される点が異なります。</span><span class="sxs-lookup"><span data-stu-id="6d35f-173">It is identical to the `$` anchor, except that `\Z` ignores the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="6d35f-174">したがって、複数行文字列では、最後の行の末尾か、最後の行の `\n`の前にのみ一致することができます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-174">Therefore, in a multiline string, it can only match the end of the last line, or the last line before `\n`.</span></span>  
  
 <span data-ttu-id="6d35f-175">`\Z` は `\n` に一致しますが、 `\r\n` (CR/LF 文字の組み合わせ) には一致しないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6d35f-175">Note that `\Z` matches `\n` but does not match `\r\n` (the CR/LF character combination).</span></span> <span data-ttu-id="6d35f-176">CR/LF と一致させるには、 `\r?\Z` を正規表現パターンに含めます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-176">To match CR/LF, include `\r?\Z` in the regular expression pattern.</span></span>  
  
 <span data-ttu-id="6d35f-177">次の例では、正規表現で `\Z` アンカーを使用して、プロ野球チームが存続した年数に関する情報を抽出します。この正規表現は、「 [文字列または行の先頭](#start-of-string-or-line-) 」で取り上げた例に似ています。</span><span class="sxs-lookup"><span data-stu-id="6d35f-177">The following example uses the `\Z` anchor in a regular expression that is similar to the example in the [Start of String or Line](#start-of-string-or-line-) section, which extracts information about the years during which some professional baseball teams existed.</span></span> <span data-ttu-id="6d35f-178">正規表現 `\r?\Z` 内の部分式 `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+\r?\Z` は、文字列の末尾に一致するほか、 `\n` または `\r\n`で終了する文字列にも一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-178">The subexpression `\r?\Z` in the regular expression `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+\r?\Z` matches the end of a string, and also matches a string that ends with `\n` or `\r\n`.</span></span> <span data-ttu-id="6d35f-179">結果として、配列内の各要素が正規表現パターンに一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-179">As a result, each element in the array matches the regular expression pattern.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/endofstring2.cs#4)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/endofstring2.vb#4)]

## <a name="end-of-string-only-z"></a><span data-ttu-id="6d35f-180">文字列の末尾のみ: \z</span><span class="sxs-lookup"><span data-stu-id="6d35f-180">End of String Only: \z</span></span>  
 <span data-ttu-id="6d35f-181">`\z` アンカーは、入力文字列の末尾に一致する必要があることを指定します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-181">The `\z` anchor specifies that a match must occur at the end of the input string.</span></span> <span data-ttu-id="6d35f-182">`$` 言語要素と同様に、 `\z` では <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> オプションが無視されます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-182">Like the `$` language element, `\z` ignores the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="6d35f-183">`\Z` 言語要素とは異なり、 `\z` は文字列末尾にある `\n` 文字には一致しません。</span><span class="sxs-lookup"><span data-stu-id="6d35f-183">Unlike the `\Z` language element, `\z` does not match a `\n` character at the end of a string.</span></span> <span data-ttu-id="6d35f-184">したがって、入力文字列の最後の行にのみ一致することができます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-184">Therefore, it can only match the last line of the input string.</span></span>  
  
 <span data-ttu-id="6d35f-185">次の例では、正規表現で `\z` アンカーを使用して、プロ野球チームが存続した年数に関する情報を抽出します。この正規表現は、アンカーを除けば前のセクションで取り上げた例と同じです。</span><span class="sxs-lookup"><span data-stu-id="6d35f-185">The following example uses the `\z` anchor in a regular expression that is otherwise identical to the example in the previous section, which extracts information about the years during which some professional baseball teams existed.</span></span> <span data-ttu-id="6d35f-186">この例は、文字列配列の 5 つの各要素と正規表現パターン `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+\r?\z`の一致を試みます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-186">The example tries to match each of five elements in a string array with the regular expression pattern `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+\r?\z`.</span></span> <span data-ttu-id="6d35f-187">これらのうち、2 つの文字列は復帰文字と改行文字で終わり、別の 1 つの文字列は改行文字で終わっています。残りの 2 つの文字列の末尾には、復帰文字も改行文字もありません。</span><span class="sxs-lookup"><span data-stu-id="6d35f-187">Two of the strings end with carriage return and line feed characters, one ends with a line feed character, and two end with neither a carriage return nor a line feed character.</span></span> <span data-ttu-id="6d35f-188">出力結果が示すように、復帰文字も改行文字もない文字列だけがパターンに一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-188">As the output shows, only the strings without a carriage return or line feed character match the pattern.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/endofstring3.cs#5)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/endofstring3.vb#5)]

## <a name="contiguous-matches-g"></a><span data-ttu-id="6d35f-189">連続一致: \G</span><span class="sxs-lookup"><span data-stu-id="6d35f-189">Contiguous Matches: \G</span></span>  
 <span data-ttu-id="6d35f-190">`\G` アンカーは、前回の一致が終了した位置に一致する必要があることを指定します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-190">The `\G` anchor specifies that a match must occur at the point where the previous match ended.</span></span> <span data-ttu-id="6d35f-191">このアンカーを <xref:System.Text.RegularExpressions.Regex.Matches%2A?displayProperty=nameWithType> メソッドまたは <xref:System.Text.RegularExpressions.Match.NextMatch%2A?displayProperty=nameWithType> メソッドと共に使用すると、すべての一致が連続することになります。</span><span class="sxs-lookup"><span data-stu-id="6d35f-191">When you use this anchor with the <xref:System.Text.RegularExpressions.Regex.Matches%2A?displayProperty=nameWithType> or <xref:System.Text.RegularExpressions.Match.NextMatch%2A?displayProperty=nameWithType> method, it ensures that all matches are contiguous.</span></span>  
  
 <span data-ttu-id="6d35f-192">次の例では、正規表現を使用して、コンマ区切りの文字列からげっ歯類の名称を抽出します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-192">The following example uses a regular expression to extract the names of rodent species from a comma-delimited string.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/contiguous1.cs#6)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/contiguous1.vb#6)]  
  
 <span data-ttu-id="6d35f-193">この正規表現 `\G(\w+\s?\w*),?` の解釈を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-193">The regular expression `\G(\w+\s?\w*),?` is interpreted as shown in the following table.</span></span>  
  
|<span data-ttu-id="6d35f-194">パターン</span><span class="sxs-lookup"><span data-stu-id="6d35f-194">Pattern</span></span>|<span data-ttu-id="6d35f-195">説明</span><span class="sxs-lookup"><span data-stu-id="6d35f-195">Description</span></span>|  
|-------------|-----------------|  
|`\G`|<span data-ttu-id="6d35f-196">最後の一致の終了位置から開始します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-196">Begin where the last match ended.</span></span>|  
|`\w+`|<span data-ttu-id="6d35f-197">1 つ以上の単語文字に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-197">Match one or more word characters.</span></span>|  
|`\s?`|<span data-ttu-id="6d35f-198">0 個または 1 個の空白に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-198">Match zero or one space.</span></span>|  
|`\w*`|<span data-ttu-id="6d35f-199">0 個以上の単語に使用される文字に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-199">Match zero or more word characters.</span></span>|  
|`(\w+\s?\w*)`|<span data-ttu-id="6d35f-200">1 個以上の単語文字の後に 0 個または 1 個の空白が続き、さらに 0 個以上の単語文字が続くパターンに一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-200">Match one or more word characters followed by zero or one space, followed by zero or more word characters.</span></span> <span data-ttu-id="6d35f-201">これが最初のキャプチャ グループです。</span><span class="sxs-lookup"><span data-stu-id="6d35f-201">This is the first capturing group.</span></span>|  
|`,?`|<span data-ttu-id="6d35f-202">リテラルのコンマ文字の 0 回または 1 回の繰り返しに一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-202">Match zero or one occurrence of a literal comma character.</span></span>|

## <a name="word-boundary-b"></a><span data-ttu-id="6d35f-203">ワード境界: \b</span><span class="sxs-lookup"><span data-stu-id="6d35f-203">Word Boundary: \b</span></span>  
 <span data-ttu-id="6d35f-204">`\b` アンカーは、単語文字 ( `\w` 言語要素) と単語以外の文字 ( `\W` 言語要素) の境界に一致する必要があることを示します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-204">The `\b` anchor specifies that the match must occur on a boundary between a word character (the `\w` language element) and a non-word character (the `\W` language element).</span></span> <span data-ttu-id="6d35f-205">単語文字は英数字とアンダースコアで構成され、単語以外の文字は、英数字でもアンダースコアでもない任意の文字で構成されます</span><span class="sxs-lookup"><span data-stu-id="6d35f-205">Word characters consist of alphanumeric characters and underscores; a non-word character is any character that is not alphanumeric or an underscore.</span></span> <span data-ttu-id="6d35f-206">詳細については、「[文字クラス](../../../docs/standard/base-types/character-classes-in-regular-expressions.md)」を参照してください。文字列の先頭または末尾にあるワード境界にも一致する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6d35f-206">(For more information, see [Character Classes](../../../docs/standard/base-types/character-classes-in-regular-expressions.md).) The match may also occur on a word boundary at the beginning or end of the string.</span></span>  
  
 <span data-ttu-id="6d35f-207">`\b` アンカーは、部分式を単語の先頭または末尾ではなく単語全体に一致させる目的で頻繁に使用されます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-207">The `\b` anchor is frequently used to ensure that a subexpression matches an entire word instead of just the beginning or end of a word.</span></span> <span data-ttu-id="6d35f-208">次の例の正規表現 `\bare\w*\b` は、この使用方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="6d35f-208">The regular expression `\bare\w*\b` in the following example illustrates this usage.</span></span> <span data-ttu-id="6d35f-209">これは、部分文字列 "are" で始まる任意の単語に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-209">It matches any word that begins with the substring "are".</span></span> <span data-ttu-id="6d35f-210">この例の出力から、 `\b` は入力文字列の先頭と末尾の両方に一致することもわかります。</span><span class="sxs-lookup"><span data-stu-id="6d35f-210">The output from the example also illustrates that `\b` matches both the beginning and the end of the input string.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/word1.cs#7)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/word1.vb#7)]  
  
 <span data-ttu-id="6d35f-211">この正規表現パターンの解釈を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-211">The regular expression pattern is interpreted as shown in the following table.</span></span>  
  
|<span data-ttu-id="6d35f-212">パターン</span><span class="sxs-lookup"><span data-stu-id="6d35f-212">Pattern</span></span>|<span data-ttu-id="6d35f-213">説明</span><span class="sxs-lookup"><span data-stu-id="6d35f-213">Description</span></span>|  
|-------------|-----------------|  
|`\b`|<span data-ttu-id="6d35f-214">ワード境界から照合を開始します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-214">Begin the match at a word boundary.</span></span>|  
|`are`|<span data-ttu-id="6d35f-215">部分文字列 "are" に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-215">Match the substring "are".</span></span>|  
|`\w*`|<span data-ttu-id="6d35f-216">0 個以上の単語に使用される文字に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-216">Match zero or more word characters.</span></span>|  
|`\b`|<span data-ttu-id="6d35f-217">ワード境界で照合を終了します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-217">End the match at a word boundary.</span></span>|  

## <a name="non-word-boundary-b"></a><span data-ttu-id="6d35f-218">ワード境界以外: \B</span><span class="sxs-lookup"><span data-stu-id="6d35f-218">Non-Word Boundary: \B</span></span>  
 <span data-ttu-id="6d35f-219">`\B` アンカーは、ワード境界には一致しないことを指定します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-219">The `\B` anchor specifies that the match must not occur on a word boundary.</span></span> <span data-ttu-id="6d35f-220">これは、 `\b` アンカーと逆の働きをします。</span><span class="sxs-lookup"><span data-stu-id="6d35f-220">It is the opposite of the `\b` anchor.</span></span>  
  
 <span data-ttu-id="6d35f-221">次の例では、 `\B` アンカーを使用して、単語内で部分文字列 "qu" が出現する位置を見つけます。</span><span class="sxs-lookup"><span data-stu-id="6d35f-221">The following example uses the `\B` anchor to locate occurrences of the substring "qu" in a word.</span></span> <span data-ttu-id="6d35f-222">正規表現パターン `\Bqu\w+` は、"qu" で始まり (単語の先頭ではない)、単語の終わりまでの部分文字列に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-222">The regular expression pattern `\Bqu\w+` matches a substring that begins with a "qu" that does not start a word and that continues to the end of the word.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/nonword1.cs#8)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/nonword1.vb#8)]  
  
 <span data-ttu-id="6d35f-223">この正規表現パターンの解釈を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-223">The regular expression pattern is interpreted as shown in the following table.</span></span>  
  
|<span data-ttu-id="6d35f-224">パターン</span><span class="sxs-lookup"><span data-stu-id="6d35f-224">Pattern</span></span>|<span data-ttu-id="6d35f-225">説明</span><span class="sxs-lookup"><span data-stu-id="6d35f-225">Description</span></span>|  
|-------------|-----------------|  
|`\B`|<span data-ttu-id="6d35f-226">ワード境界では照合を開始しません。</span><span class="sxs-lookup"><span data-stu-id="6d35f-226">Do not begin the match at a word boundary.</span></span>|  
|`qu`|<span data-ttu-id="6d35f-227">部分文字列 "qu" と一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-227">Match the substring "qu".</span></span>|  
|`\w+`|<span data-ttu-id="6d35f-228">1 つ以上の単語文字に一致します。</span><span class="sxs-lookup"><span data-stu-id="6d35f-228">Match one or more word characters.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="6d35f-229">関連項目</span><span class="sxs-lookup"><span data-stu-id="6d35f-229">See also</span></span>

- [<span data-ttu-id="6d35f-230">正規表現言語 - クイック リファレンス</span><span class="sxs-lookup"><span data-stu-id="6d35f-230">Regular Expression Language - Quick Reference</span></span>](../../../docs/standard/base-types/regular-expression-language-quick-reference.md)
- [<span data-ttu-id="6d35f-231">正規表現のオプション</span><span class="sxs-lookup"><span data-stu-id="6d35f-231">Regular Expression Options</span></span>](../../../docs/standard/base-types/regular-expression-options.md)
