---
title: 分離ストレージ
description: 分離ストレージについて確認します。これは、コードと保存データを関連付ける標準化された方法を定義することにより、分離性と安全性を提供するデータ ストレージ機構です。
ms.date: 03/30/2017
helpviewer_keywords:
- data storage using isolated storage
- stores
- storing data using isolated storage
- isolated storage
- location of isolated storage in file system
- standardizing storage systems
- storing data using isolated storage, when not to use
- code, isolated storage
- isolated storage, options
- data storage using isolated storage, when not to use
- storing data using isolated storage, options
- isolated storage, when not to use
- data storage using isolated storage, options
- isolation
ms.assetid: aff939d7-9e49-46f2-a8cd-938d3020e94e
ms.openlocfilehash: 1b123b231a7b6856ca527d00b5927c1a8d0e08b6
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/18/2020
ms.locfileid: "94819137"
---
# <a name="isolated-storage"></a><span data-ttu-id="345f3-103">分離ストレージ</span><span class="sxs-lookup"><span data-stu-id="345f3-103">Isolated storage</span></span>

<span data-ttu-id="345f3-104">デスクトップ アプリでは、分離ストレージは、コードと保存データを関連付ける標準化された方法を定義することにより、分離性と安全性を提供するデータ ストレージ機構です。</span><span class="sxs-lookup"><span data-stu-id="345f3-104">For desktop apps, isolated storage is a data storage mechanism that provides isolation and safety by defining standardized ways of associating code with saved data.</span></span> <span data-ttu-id="345f3-105">標準化には、ほかにも利点があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-105">Standardization provides other benefits as well.</span></span> <span data-ttu-id="345f3-106">管理者は分離ストレージの操作用にデザインされたツールを使用して、ファイルのストレージ領域の構成、セキュリティ ポリシーの設定、および不要なデータの削除を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="345f3-106">Administrators can use tools designed to manipulate isolated storage to configure file storage space, set security policies, and delete unused data.</span></span> <span data-ttu-id="345f3-107">分離ストレージを使用すると、ファイル システムの安全な場所を指定するための固有のパスを指定する必要がなくなり、分離ストレージのアクセス権限を持たない他のアプリケーションからデータを保護できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-107">With isolated storage, your code no longer needs unique paths to specify safe locations in the file system, and data is protected from other applications that only have isolated storage access.</span></span> <span data-ttu-id="345f3-108">アプリケーションのストレージ領域の場所を示すハードコーディングされた情報は不要になります。</span><span class="sxs-lookup"><span data-stu-id="345f3-108">Hard-coded information that indicates where an application's storage area is located is unnecessary.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="345f3-109">分離ストレージは Windows 8.x Store アプリでは使用できません。</span><span class="sxs-lookup"><span data-stu-id="345f3-109">Isolated storage is not available for Windows 8.x Store apps.</span></span> <span data-ttu-id="345f3-110">代わりに、Windows ランタイム API に含まれる `Windows.Storage` 名前空間内のアプリケーション データ クラスを使用して、ローカル データとローカル ファイルを格納します。</span><span class="sxs-lookup"><span data-stu-id="345f3-110">Instead, use the application data classes in the `Windows.Storage` namespaces included in the Windows Runtime API to store local data and files.</span></span> <span data-ttu-id="345f3-111">詳細については、Windows デベロッパー センターの [アプリケーション データ](/previous-versions/windows/apps/hh464917(v=win.10)) に関する説明を参照してください。</span><span class="sxs-lookup"><span data-stu-id="345f3-111">For more information, see [Application data](/previous-versions/windows/apps/hh464917(v=win.10)) in the Windows Dev Center.</span></span>

<a name="data_compartments_and_stores"></a>

## <a name="data-compartments-and-stores"></a><span data-ttu-id="345f3-112">データ コンパートメントとデータ ストア</span><span class="sxs-lookup"><span data-stu-id="345f3-112">Data Compartments and Stores</span></span>

<span data-ttu-id="345f3-113">アプリケーションでファイルにデータを格納する場合は、ファイル名とストレージの場所を慎重に選択して、ストレージの場所が他のアプリケーションに知られたり、無防備に破壊されたりする可能性を最小限に抑える必要があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-113">When an application stores data in a file, the file name and storage location must be carefully chosen to minimize the possibility that the storage location will be known to another application and, therefore, vulnerable to corruption.</span></span> <span data-ttu-id="345f3-114">このような問題を管理するための標準的なシステムが適切な場所に用意されていないと、ストレージの問題点を最小限に抑える当座の技術の開発が複雑になり、信頼できる結果が得られません。</span><span class="sxs-lookup"><span data-stu-id="345f3-114">Without a standard system in place to manage these problems, improvising techniques that minimize storage conflicts can be complex, and the results can be unreliable.</span></span>

<span data-ttu-id="345f3-115">分離ストレージを使用すると、データは常にユーザーおよびアセンブリ別に分離されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-115">With isolated storage, data is always isolated by user and by assembly.</span></span> <span data-ttu-id="345f3-116">アセンブリの発生元または厳密な名前などの資格情報によって、アセンブリの ID が決定されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-116">Credentials such as the origin or the strong name of the assembly determine assembly identity.</span></span> <span data-ttu-id="345f3-117">また、同様の資格情報を使用して、データをアプリケーション ドメイン別に分離することもできます。</span><span class="sxs-lookup"><span data-stu-id="345f3-117">Data can also be isolated by application domain, using similar credentials.</span></span>

<span data-ttu-id="345f3-118">分離ストレージを使用している場合、アプリケーションはコードの ID のいくつかの側面 (発行元や署名など) に関連付けられた固有のデータ コンパートメントにデータを保存します。</span><span class="sxs-lookup"><span data-stu-id="345f3-118">When you use isolated storage, your application saves data to a unique data compartment that is associated with some aspect of the code's identity, such as its publisher or signature.</span></span> <span data-ttu-id="345f3-119">データ コンパートメントは抽象概念であり、特定の記憶場所ではありません。データ コンパートメントは、データが格納される実際のディレクトリ位置が含まれている、ストアと呼ばれる 1 つ以上の分離ストレージ ファイルで構成されています。</span><span class="sxs-lookup"><span data-stu-id="345f3-119">The data compartment is an abstraction, not a specific storage location; it consists of one or more isolated storage files, called stores, which contain the actual directory locations where data is stored.</span></span> <span data-ttu-id="345f3-120">たとえば、アプリケーションがそのアプリケーションに関連付けられたデータ コンパートメントを持ち、ファイル システムのディレクトリがそのアプリケーションのデータを実際に保存するストアを実装します。</span><span class="sxs-lookup"><span data-stu-id="345f3-120">For example, an application might have a data compartment associated with it, and a directory in the file system would implement the store that actually preserves the data for that application.</span></span> <span data-ttu-id="345f3-121">ストアには、ユーザー設定情報からアプリケーション状態まで、どのような種類のデータでも保存できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-121">The data saved in the store can be any kind of data, from user preference information to application state.</span></span> <span data-ttu-id="345f3-122">開発者にとって、データ コンパートメントの場所は明確ではありません。</span><span class="sxs-lookup"><span data-stu-id="345f3-122">For the developer, the location of the data compartment is transparent.</span></span> <span data-ttu-id="345f3-123">通常、ストアはクライアントに常駐しますが、サーバー アプリケーションがユーザーを偽装することによって機能し、分離ストアを使用して情報を格納することもあります。</span><span class="sxs-lookup"><span data-stu-id="345f3-123">Stores usually reside on the client, but a server application could use isolated stores to store information by impersonating the user on whose behalf it is functioning.</span></span> <span data-ttu-id="345f3-124">また、サーバー上の分離ストレージには、情報と共にユーザーのローミング プロファイルを格納できます。これにより、情報はローミング ユーザーと共に移動します。</span><span class="sxs-lookup"><span data-stu-id="345f3-124">Isolated storage can also store information on a server with a user's roaming profile so that the information will travel with the roaming user.</span></span>

<a name="quotas"></a>

## <a name="quotas-for-isolated-storage"></a><span data-ttu-id="345f3-125">分離ストレージのクォータ</span><span class="sxs-lookup"><span data-stu-id="345f3-125">Quotas for Isolated Storage</span></span>

<span data-ttu-id="345f3-126">クォータは、使用できる分離ストレージの量に対する制限です。</span><span class="sxs-lookup"><span data-stu-id="345f3-126">A quota is a limit on the amount of isolated storage that can be used.</span></span> <span data-ttu-id="345f3-127">クォータには、ファイル領域のバイト数だけでなく、ストア内のディレクトリやその他の情報に関連するオーバーヘッドも含まれます。</span><span class="sxs-lookup"><span data-stu-id="345f3-127">The quota includes bytes of file space as well as the overhead associated with the directory and other information in the store.</span></span> <span data-ttu-id="345f3-128">分離ストレージは許容クォータを使用します。許容クォータは、 <xref:System.Security.Permissions.IsolatedStoragePermission> オブジェクトを使用して設定されるストレージ制限です。</span><span class="sxs-lookup"><span data-stu-id="345f3-128">Isolated storage uses permission quotas, which are storage limits that are set by using <xref:System.Security.Permissions.IsolatedStoragePermission> objects.</span></span> <span data-ttu-id="345f3-129">クォータを超えるデータを書き込もうとすると、 <xref:System.IO.IsolatedStorage.IsolatedStorageException> 例外がスローされます。</span><span class="sxs-lookup"><span data-stu-id="345f3-129">If you try to write data that exceeds the quota, an <xref:System.IO.IsolatedStorage.IsolatedStorageException> exception is thrown.</span></span>  <span data-ttu-id="345f3-130">セキュリティ ポリシーによって、コードに与えるアクセス許可が決定されます。セキュリティ ポリシーは、.NET Framework 構成ツール (Mscorcfg.msc) を使用して修正できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-130">Security policy, which can be modified using the .NET Framework Configuration Tool (Mscorcfg.msc), determines which permissions are granted to code.</span></span> <span data-ttu-id="345f3-131"><xref:System.Security.Permissions.IsolatedStoragePermission> を与えられたコードは、 <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> プロパティで許容されたストレージの範囲内だけに限定されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-131">Code that has been granted <xref:System.Security.Permissions.IsolatedStoragePermission> is restricted to using no more storage than the <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> property allows.</span></span> <span data-ttu-id="345f3-132">しかし、別のユーザー ID を提示することにより許容クォータを無視できるため、許容クォータはコードの動作に対する厳格な制限ではなく、動作方法についての指針として使用されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-132">However, because code can bypass permission quotas by presenting different user identities, permission quotas serve as guidelines for how code should behave rather than as a firm limit on code behavior.</span></span>

<span data-ttu-id="345f3-133">ローミング ストアに対しては、クォータは適用されません。</span><span class="sxs-lookup"><span data-stu-id="345f3-133">Quotas are not enforced on roaming stores.</span></span> <span data-ttu-id="345f3-134">そのため、ローミング ストアを使用するコードに対しては、少し高いレベルのアクセス許可が必要になります。</span><span class="sxs-lookup"><span data-stu-id="345f3-134">Because of this, a slightly higher level of permission is required for code to use them.</span></span> <span data-ttu-id="345f3-135">列挙値 <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> および <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> により、ローミング ユーザーの分離ストレージを使用するためのアクセス許可を指定します。</span><span class="sxs-lookup"><span data-stu-id="345f3-135">The enumeration values <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> and <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> specify a permission to use isolated storage for a roaming user.</span></span>

<a name="secure_access"></a>

## <a name="secure-access"></a><span data-ttu-id="345f3-136">安全なアクセス</span><span class="sxs-lookup"><span data-stu-id="345f3-136">Secure Access</span></span>

<span data-ttu-id="345f3-137">分離ストレージを使用すると、完全な権限を与えられていないアプリケーションでも、コンピューターのセキュリティ ポリシーによって制御される方法でデータを格納できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-137">Using isolated storage enables partially trusted applications to store data in a manner that is controlled by the computer's security policy.</span></span> <span data-ttu-id="345f3-138">分離ストレージは、慎重に実行する必要のあるダウンロードされるコンポーネントに対しては、特に有益です。</span><span class="sxs-lookup"><span data-stu-id="345f3-138">This is especially useful for downloaded components that a user might want to run cautiously.</span></span> <span data-ttu-id="345f3-139">標準の I/O 機構を使用してファイル システムにアクセスする場合に、この種のコード アクセス許可がセキュリティ ポリシーによって与えられるのは非常にまれです。</span><span class="sxs-lookup"><span data-stu-id="345f3-139">Security policy rarely grants this kind of code permission when you access the file system by using standard I/O mechanisms.</span></span> <span data-ttu-id="345f3-140">ただし、既定では、ローカル コンピューター、ローカル ネットワーク、またはインターネットから実行するコードには、分離ストレージを使用する権限が与えられています。</span><span class="sxs-lookup"><span data-stu-id="345f3-140">However, by default, code running from the local computer, a local network, or the Internet is granted the right to use isolated storage.</span></span>

<span data-ttu-id="345f3-141">管理者は、適切な信頼レベルに基づいて、アプリケーションやユーザーが利用できる分離ストレージの容量を制限できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-141">Administrators can limit how much isolated storage an application or a user has available, based on an appropriate trust level.</span></span> <span data-ttu-id="345f3-142">また、管理者は、ユーザーの永続的なデータを完全に削除できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-142">In addition, administrators can remove a user's persisted data completely.</span></span> <span data-ttu-id="345f3-143">分離ストレージを作成したり、分離ストレージにアクセスしたりするには、適切な <xref:System.Security.Permissions.IsolatedStorageFilePermission> アクセス許可を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-143">To create or access isolated storage, code must be granted the appropriate <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission.</span></span>

<span data-ttu-id="345f3-144">分離ストレージにアクセスするには、必要なすべてのネイティブ プラットフォーム オペレーティング システム権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="345f3-144">To access isolated storage, code must have all necessary native platform operating system rights.</span></span> <span data-ttu-id="345f3-145">どのユーザーにファイル システムを使用する権限を与えるかを制御するアクセス制御リスト (ACL: Access Control List) の要件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-145">The access control lists (ACLs) that control which users have the rights to use the file system must be satisfied.</span></span> <span data-ttu-id="345f3-146">.NET のアプリケーションには、分離ストレージにアクセスするためのオペレーティング システム権限が既にあります。ただし、アプリケーションがプラットフォーム固有の偽装を行っていない場合だけです。</span><span class="sxs-lookup"><span data-stu-id="345f3-146">.NET applications already have operating system rights to access isolated storage unless they perform (platform-specific) impersonation.</span></span> <span data-ttu-id="345f3-147">偽装している場合は、アプリケーションが偽装しているユーザー ID に対して分離ストレージにアクセスするための適切なオペレーティング システム権限が与えられていることをアプリケーションで確認する責任があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-147">In this case, the application is responsible for ensuring that the impersonated user identity has the proper operating system rights to access isolated storage.</span></span> <span data-ttu-id="345f3-148">偽装によるアクセスは、Web から実行またはダウンロードされたコードで、特定のユーザーに関連付けられたストレージ領域を読み取ったり書き込んだりする場合には都合のよい方法です。</span><span class="sxs-lookup"><span data-stu-id="345f3-148">This access provides a convenient way for code that is run or downloaded from the web to read and write to a storage area related to a particular user.</span></span>

<span data-ttu-id="345f3-149">共通言語ランタイムは、 <xref:System.Security.Permissions.IsolatedStorageFilePermission> オブジェクトを使用して分類ストレージへのアクセスを制御します。</span><span class="sxs-lookup"><span data-stu-id="345f3-149">To control access to isolated storage, the common language runtime uses <xref:System.Security.Permissions.IsolatedStorageFilePermission> objects.</span></span> <span data-ttu-id="345f3-150">各オブジェクトには、次の値を指定するプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="345f3-150">Each object has properties that specify the following values:</span></span>

- <span data-ttu-id="345f3-151">許可するアクセス権限。許可するアクセスの種類を指定します。</span><span class="sxs-lookup"><span data-stu-id="345f3-151">Allowed usage, which indicates the type of access that is allowed.</span></span> <span data-ttu-id="345f3-152">値は <xref:System.Security.Permissions.IsolatedStorageContainment> 列挙体のメンバーです。</span><span class="sxs-lookup"><span data-stu-id="345f3-152">The values are members of the <xref:System.Security.Permissions.IsolatedStorageContainment> enumeration.</span></span> <span data-ttu-id="345f3-153">これらの値の詳細については、次のセクションの表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="345f3-153">For more information about these values, see the table in the next section.</span></span>

- <span data-ttu-id="345f3-154">ストレージ クォータ。前述のセクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="345f3-154">Storage quota, as discussed in the preceding section.</span></span>

<span data-ttu-id="345f3-155">コードが最初にストアを開く場合、ランタイムが <xref:System.Security.Permissions.IsolatedStorageFilePermission> アクセス許可を要求します。</span><span class="sxs-lookup"><span data-stu-id="345f3-155">The runtime demands <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission when code first attempts to open a store.</span></span> <span data-ttu-id="345f3-156">コードに与えられている権限の程度に応じて、このアクセス許可を与えるかどうかが決定されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-156">It decides whether to grant this permission, based on how much the code is trusted.</span></span> <span data-ttu-id="345f3-157">アクセス許可が与えられた場合は、セキュリティ ポリシーとコードからの <xref:System.Security.Permissions.IsolatedStorageFilePermission>の要求によって、許可される使用法とストレージ クォータの値が決定されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-157">If the permission is granted, the allowed usage and storage quota values are determined by security policy and by the code's request for <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span> <span data-ttu-id="345f3-158">セキュリティ ポリシーは、.NET Framework 構成ツール (Mscorcfg.msc) を使用して設定します。</span><span class="sxs-lookup"><span data-stu-id="345f3-158">Security policy is set by using the .NET Framework Configuration Tool (Mscorcfg.msc).</span></span> <span data-ttu-id="345f3-159">それぞれの呼び出し元に最低限適切なアクセス権限が与えられていることを確認するために、コール スタック内のすべての呼び出し元がチェックされます。</span><span class="sxs-lookup"><span data-stu-id="345f3-159">All callers in the call stack are checked to ensure that each caller has at least the appropriate allowed usage.</span></span> <span data-ttu-id="345f3-160">ランタイムは、ファイルを保存するストアを開いたコードまたは作成したコードに与えられているクォータもチェックします。</span><span class="sxs-lookup"><span data-stu-id="345f3-160">The runtime also checks the quota imposed on the code that opened or created the store in which the file is to be saved.</span></span> <span data-ttu-id="345f3-161">これらの条件を満たしている場合に、アクセス許可が与えられます。</span><span class="sxs-lookup"><span data-stu-id="345f3-161">If these conditions are satisfied, permission is granted.</span></span> <span data-ttu-id="345f3-162">クォータは、ストアにファイルが書き込まれるたびに再チェックされます。</span><span class="sxs-lookup"><span data-stu-id="345f3-162">The quota is checked again every time a file is written to the store.</span></span>

<span data-ttu-id="345f3-163">共通言語ランタイムは、適切な <xref:System.Security.Permissions.IsolatedStorageFilePermission> をすべてセキュリティ ポリシーに基づいて与えるため、アプリケーションのコードはアクセス許可を要求する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="345f3-163">Application code is not required to request permission because the common language runtime will grant whatever <xref:System.Security.Permissions.IsolatedStorageFilePermission> is appropriate based on security policy.</span></span> <span data-ttu-id="345f3-164">しかし、 <xref:System.Security.Permissions.IsolatedStorageFilePermission>を含め、アプリケーションに必要な特定のアクセス許可を要求するのにはそれなりの理由があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-164">However, there are good reasons to request specific permissions that your application needs, including <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span>

<a name="allowed_usage"></a>

## <a name="allowed-usage-and-security-risks"></a><span data-ttu-id="345f3-165">許可されるアクセス権限とセキュリティのリスク</span><span class="sxs-lookup"><span data-stu-id="345f3-165">Allowed Usage and Security Risks</span></span>

<span data-ttu-id="345f3-166"><xref:System.Security.Permissions.IsolatedStorageFilePermission> で指定されたアクセス権限によって、コードが分離ストレージを成および使用する権限のレベルが決まります。</span><span class="sxs-lookup"><span data-stu-id="345f3-166">The allowed usage specified by <xref:System.Security.Permissions.IsolatedStorageFilePermission> determines the degree to which code will be allowed to create and use isolated storage.</span></span> <span data-ttu-id="345f3-167">アクセス許可に指定されているアクセス権限と分離タイプの対応関係をまとめた表を次に示します。また、それぞれのアクセス権限に関係するセキュリティのリスクを要約も示します。</span><span class="sxs-lookup"><span data-stu-id="345f3-167">The following table shows how the allowed usage specified in the permission corresponds to types of isolation and summarizes the security risks associated with each allowed usage.</span></span>

|<span data-ttu-id="345f3-168">アクセス権限</span><span class="sxs-lookup"><span data-stu-id="345f3-168">Allowed usage</span></span>|<span data-ttu-id="345f3-169">分離タイプ</span><span class="sxs-lookup"><span data-stu-id="345f3-169">Isolation types</span></span>|<span data-ttu-id="345f3-170">セキュリティのリスク</span><span class="sxs-lookup"><span data-stu-id="345f3-170">Security impact</span></span>|
|-------------------|---------------------|---------------------|
|<xref:System.Security.Permissions.IsolatedStorageContainment.None>|<span data-ttu-id="345f3-171">分離ストレージの使用は不可。</span><span class="sxs-lookup"><span data-stu-id="345f3-171">No isolated storage use is allowed.</span></span>|<span data-ttu-id="345f3-172">セキュリティのリスクはありません。</span><span class="sxs-lookup"><span data-stu-id="345f3-172">There is no security impact.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByUser>|<span data-ttu-id="345f3-173">ユーザー、ドメイン、およびアセンブリ別の分離。</span><span class="sxs-lookup"><span data-stu-id="345f3-173">Isolation by user, domain, and assembly.</span></span> <span data-ttu-id="345f3-174">各アセンブリがドメイン内にサブストアを 1 つ持っています。</span><span class="sxs-lookup"><span data-stu-id="345f3-174">Each assembly has a separate substore within the domain.</span></span> <span data-ttu-id="345f3-175">このアクセス許可を使用するストアは、さらに、暗黙にコンピューター別にも分離されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-175">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="345f3-176">このアクセス許可レベルでは、権限なしの承認されない使用に対してリソースが保護されません。ただし、クォータを適用すると、承認されない使用に対する保護を強化できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-176">This permission level leaves resources open to unauthorized overuse, although enforced quotas make it more difficult.</span></span> <span data-ttu-id="345f3-177">このような認証されない使用は、サービス不能攻撃と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="345f3-177">This is called a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser>|<span data-ttu-id="345f3-178">`DomainIsolationByUser`と同じですが、ローミング ユーザー プロファイルが有効で、クォータが適用されていない場合は、ストアは移動先の場所に保存されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-178">Same as `DomainIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="345f3-179">クォータを使用できないため、ストレージ リソースはサービス不能攻撃に対して、より攻撃されやすくなります。</span><span class="sxs-lookup"><span data-stu-id="345f3-179">Because quotas must be disabled, storage resources are more vulnerable to a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByUser>|<span data-ttu-id="345f3-180">ユーザーおよびアセンブリ別の分離。</span><span class="sxs-lookup"><span data-stu-id="345f3-180">Isolation by user and assembly.</span></span> <span data-ttu-id="345f3-181">このアクセス許可を使用するストアは、さらに、暗黙にコンピューター別にも分離されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-181">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="345f3-182">このレベルでは、サービス不能攻撃の防止を強化するためにクォータが適用されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-182">Quotas are enforced at this level to help prevent a denial of service attack.</span></span> <span data-ttu-id="345f3-183">別のドメインの同じアセンブリがこのストアにアクセスできるので、アプリケーション間で情報がリークする可能性が大きくなります。</span><span class="sxs-lookup"><span data-stu-id="345f3-183">The same assembly in another domain can access this store, opening the possibility that information could be leaked between applications.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser>|<span data-ttu-id="345f3-184">`AssemblyIsolationByUser`と同じですが、ローミング ユーザー プロファイルが有効で、クォータが適用されていない場合は、ストアは移動先の場所に保存されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-184">Same as `AssemblyIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="345f3-185">`AssemblyIsolationByUser`と同じですが、クォータが適用されないため、サービス不能攻撃のリスクが大きくなります。</span><span class="sxs-lookup"><span data-stu-id="345f3-185">Same as in `AssemblyIsolationByUser`, but without quotas, the risk of a denial of service attack increases.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AdministerIsolatedStorageByUser>|<span data-ttu-id="345f3-186">ユーザー別の分離。</span><span class="sxs-lookup"><span data-stu-id="345f3-186">Isolation by user.</span></span> <span data-ttu-id="345f3-187">通常、管理ツールやデバッグ ツールのみ、このレベルのアクセス許可が使用されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-187">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="345f3-188">このアクセス許可によるアクセスでは、アセンブリの分離とは関係なく、ユーザーの分離ストレージ ファイルやディレクトリはどれも表示または削除できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-188">Access with this permission allows code to view or delete any of a user's isolated storage files or directories (regardless of assembly isolation).</span></span> <span data-ttu-id="345f3-189">情報のリークとデータ消失のリスクだけでなく、ほかのリスクもあります。</span><span class="sxs-lookup"><span data-stu-id="345f3-189">Risks include, but are not limited to, leaking information and data loss.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.UnrestrictedIsolatedStorage>|<span data-ttu-id="345f3-190">全ユーザー、ドメイン、およびアセンブリ別の分離。</span><span class="sxs-lookup"><span data-stu-id="345f3-190">Isolation by all users, domains, and assemblies.</span></span> <span data-ttu-id="345f3-191">通常、管理ツールやデバッグ ツールのみ、このレベルのアクセス許可が使用されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-191">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="345f3-192">このアクセス許可では、すべてのユーザーのすべての分離ストアがあらゆるリスクにさらされる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-192">This permission creates the potential for a total compromise of all isolated stores for all users.</span></span>|

## <a name="safety-of-isolated-storage-components-with-regard-to-untrusted-data"></a><span data-ttu-id="345f3-193">信頼されていないデータに関する分離ストレージ コンポーネントの安全性</span><span class="sxs-lookup"><span data-stu-id="345f3-193">Safety of isolated storage components with regard to untrusted data</span></span>

<span data-ttu-id="345f3-194">__このセクションは、次のフレームワークに適用されます。__</span><span class="sxs-lookup"><span data-stu-id="345f3-194">__This section applies to the following frameworks:__</span></span>

- <span data-ttu-id="345f3-195">.NET Framework (すべてのバージョン)</span><span class="sxs-lookup"><span data-stu-id="345f3-195">.NET Framework (all versions)</span></span>
- <span data-ttu-id="345f3-196">.NET Core 2.1 以降</span><span class="sxs-lookup"><span data-stu-id="345f3-196">.NET Core 2.1+</span></span>
- <span data-ttu-id="345f3-197">.NET 5.0 以降</span><span class="sxs-lookup"><span data-stu-id="345f3-197">.NET 5.0+</span></span>

<span data-ttu-id="345f3-198">.NET Framework および .NET Core では、ユーザー、アプリケーション、またはコンポーネントのデータを保持するメカニズムとして、分離ストレージが提供されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-198">.NET Framework and .NET Core offer isolated storage as a mechanism to persist data for a user, an application, or a component.</span></span> <span data-ttu-id="345f3-199">これは主に、現在非推奨のコード アクセス セキュリティのシナリオ向けに設計されたレガシ コンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="345f3-199">This is a legacy component primarily designed for now-deprecated Code Access Security scenarios.</span></span>

<span data-ttu-id="345f3-200">さまざまな分離ストレージ API とツールを使用して、信頼境界を越えてデータを読み取ることができます。</span><span class="sxs-lookup"><span data-stu-id="345f3-200">Various isolated storage APIs and tools can be used to read data across trust boundaries.</span></span> <span data-ttu-id="345f3-201">たとえば、コンピューター全体のスコープからデータを読み取ることで、コンピューター上の信頼度が低い可能性のある他のユーザー アカウントからデータを集計できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-201">For example, reading data from a machine-wide scope can aggregate data from other, possibly less-trusted user accounts on the machine.</span></span> <span data-ttu-id="345f3-202">コンピューター全体の分離ストレージ スコープから読み取るコンポーネントまたはアプリケーションの場合、このデータを読み取った場合の影響に注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-202">Components or applications that read from machine-wide isolated storage scopes should be aware of the consequences of reading this data.</span></span>

### <a name="security-sensitive-apis-that-can-read-from-the-machine-wide-scope"></a><span data-ttu-id="345f3-203">コンピューター全体のスコープから読み取ることができる、セキュリティ上の注意が必要な API</span><span class="sxs-lookup"><span data-stu-id="345f3-203">Security-sensitive APIs that can read from the machine-wide scope</span></span>

<span data-ttu-id="345f3-204">次の API のいずれかを呼び出すコンポーネントまたはアプリケーションでは、コンピューター全体のスコープから読み取りを行います:</span><span class="sxs-lookup"><span data-stu-id="345f3-204">Components or applications that call any of the following APIs read from the machine-wide scope:</span></span>

* <span data-ttu-id="345f3-205">[IsolatedStorageFile.GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator)。IsolatedStorageScope.Machine フラグを含むスコープを渡します</span><span class="sxs-lookup"><span data-stu-id="345f3-205">[IsolatedStorageFile.GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* [<span data-ttu-id="345f3-206">IsolatedStorageFile.GetMachineStoreForApplication</span><span class="sxs-lookup"><span data-stu-id="345f3-206">IsolatedStorageFile.GetMachineStoreForApplication</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforapplication)
* [<span data-ttu-id="345f3-207">IsolatedStorageFile.GetMachineStoreForAssembly</span><span class="sxs-lookup"><span data-stu-id="345f3-207">IsolatedStorageFile.GetMachineStoreForAssembly</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforassembly)
* [<span data-ttu-id="345f3-208">IsolatedStorageFile.GetMachineStoreForDomain</span><span class="sxs-lookup"><span data-stu-id="345f3-208">IsolatedStorageFile.GetMachineStoreForDomain</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestorefordomain)
* <span data-ttu-id="345f3-209">[IsolatedStorageFile.GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore)。IsolatedStorageScope.Machine フラグを含むスコープを渡します</span><span class="sxs-lookup"><span data-stu-id="345f3-209">[IsolatedStorageFile.GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* <span data-ttu-id="345f3-210">[IsolatedStorageFile.Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove)。`IsolatedStorageScope.Machine` フラグを含むスコープを渡します</span><span class="sxs-lookup"><span data-stu-id="345f3-210">[IsolatedStorageFile.Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove), passing a scope that includes the `IsolatedStorageScope.Machine` flag</span></span>

<span data-ttu-id="345f3-211">次のコードに示すように、`/machine` スイッチで呼び出された場合、[分離ストレージ ツール](../../framework/tools/storeadm-exe-isolated-storage-tool.md) `storeadm.exe` が影響を受けます。</span><span class="sxs-lookup"><span data-stu-id="345f3-211">The [isolated storage tool](../../framework/tools/storeadm-exe-isolated-storage-tool.md) `storeadm.exe` is impacted if called with the `/machine` switch, as shown in the following code:</span></span>

```txt
storeadm.exe /machine [any-other-switches]
```

<span data-ttu-id="345f3-212">分離ストレージ ツールは、Visual Studio および .NET Framework SDK の一部として提供されています。</span><span class="sxs-lookup"><span data-stu-id="345f3-212">The isolated storage tool is provided as part of Visual Studio and the .NET Framework SDK.</span></span>

<span data-ttu-id="345f3-213">アプリケーションに上記の API への呼び出しが含まれていない場合、またはワークフローでこのように `storeadm.exe` を呼び出さない場合、このドキュメントは適用されません。</span><span class="sxs-lookup"><span data-stu-id="345f3-213">If the application doesn't involve calls to the preceding APIs, or if the workflow doesn't involve calling `storeadm.exe` in this manner, this document doesn't apply.</span></span>

### <a name="impact-in-multi-user-environments"></a><span data-ttu-id="345f3-214">マルチユーザー環境での影響</span><span class="sxs-lookup"><span data-stu-id="345f3-214">Impact in multi-user environments</span></span>

<span data-ttu-id="345f3-215">前述のように、これらの API からのセキュリティへの影響は、ある信頼環境から作成されたデータが別の信頼環境から読み取られることに起因します。</span><span class="sxs-lookup"><span data-stu-id="345f3-215">As mentioned previously, the security impact from these APIs results from data written from one trust environment is read from a different trust environment.</span></span> <span data-ttu-id="345f3-216">通常、分離ストレージでは、次の 3 つの場所のいずれかを使用して、データの読み取りと書き込みを行います。</span><span class="sxs-lookup"><span data-stu-id="345f3-216">Isolated storage generally uses one of three locations to read and write data:</span></span>

1. <span data-ttu-id="345f3-217">`%LOCALAPPDATA%\IsolatedStorage\`:たとえば、`User` スコープの場合は `C:\Users\<username>\AppData\Local\IsolatedStorage\` となります。</span><span class="sxs-lookup"><span data-stu-id="345f3-217">`%LOCALAPPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Local\IsolatedStorage\`, for `User` scope.</span></span>
2. <span data-ttu-id="345f3-218">`%APPDATA%\IsolatedStorage\`:たとえば、`User|Roaming` スコープの場合は `C:\Users\<username>\AppData\Roaming\IsolatedStorage\` となります。</span><span class="sxs-lookup"><span data-stu-id="345f3-218">`%APPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Roaming\IsolatedStorage\`, for `User|Roaming` scope.</span></span>
3. <span data-ttu-id="345f3-219">`%PROGRAMDATA%\IsolatedStorage\`:たとえば、`Machine` スコープの場合は `C:\ProgramData\IsolatedStorage\` となります。</span><span class="sxs-lookup"><span data-stu-id="345f3-219">`%PROGRAMDATA%\IsolatedStorage\`: For example, `C:\ProgramData\IsolatedStorage\`, for `Machine` scope.</span></span>

<span data-ttu-id="345f3-220">最初の 2 つの場所は、ユーザーごとに分離されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-220">The first two locations are isolated per-user.</span></span> <span data-ttu-id="345f3-221">Windows では、同じコンピューター上の異なるユーザー アカウントで、互いのユーザー プロファイル フォルダーにアクセスできないようにします。</span><span class="sxs-lookup"><span data-stu-id="345f3-221">Windows ensures that different user accounts on the same machine cannot access each other's user profile folders.</span></span> <span data-ttu-id="345f3-222">`User` または `User|Roaming` ストアを使用する 2 つの異なるユーザー アカウントでは、互いのデータは表示されず、互いのデータに干渉することはできません。</span><span class="sxs-lookup"><span data-stu-id="345f3-222">Two different user accounts who use the `User` or `User|Roaming` stores will not see each other's data and cannot interfere with each other's data.</span></span>

<span data-ttu-id="345f3-223">3 つ目の場所は、コンピューター上のすべてのユーザー アカウントで共有されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-223">The third location is shared across all user accounts on the machine.</span></span> <span data-ttu-id="345f3-224">この場所に対して異なるアカウントで読み取りと書き込みを行うことができ、互いのデータを表示できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-224">Different accounts can read from and write to this location, and they're able to see each other's data.</span></span>

<span data-ttu-id="345f3-225">上記のパスは、使用している Windows のバージョンによって異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-225">The preceding paths may differ based on the version of Windows in use.</span></span>

<span data-ttu-id="345f3-226">ここで、2 人の登録済みユーザー _Mallory_ と _Bob_ を持つマルチユーザー システムについて考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="345f3-226">Now consider a multi-user system with two registered users _Mallory_ and _Bob_.</span></span> <span data-ttu-id="345f3-227">Mallory は、ユーザー プロファイル ディレクトリ `C:\Users\Mallory\` にアクセスすることができます。また、共有コンピューター全体のストレージの場所である `C:\ProgramData\IsolatedStorage\` にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="345f3-227">Mallory has the ability to access her user profile directory `C:\Users\Mallory\`, and she can access the shared machine-wide storage location `C:\ProgramData\IsolatedStorage\`.</span></span> <span data-ttu-id="345f3-228">Bob のユーザー プロファイル ディレクトリ `C:\Users\Bob\` にはアクセスできません。</span><span class="sxs-lookup"><span data-stu-id="345f3-228">She cannot access Bob's user profile directory `C:\Users\Bob\`.</span></span>

<span data-ttu-id="345f3-229">Mallory が Bob を攻撃したいと考えている場合、コンピューター全体のストレージの場所にデータを書き込んでから、Bob にコンピューター全体のストアから読み取らせようとします。</span><span class="sxs-lookup"><span data-stu-id="345f3-229">If Mallory wishes to attack Bob, she might write data to the machine-wide storage location, then attempt to influence Bob into reading from the machine-wide store.</span></span> <span data-ttu-id="345f3-230">Bob がこのストアから読み取るアプリを実行すると、そのアプリでは、Mallory がそこに配置した (ただし、Bob のユーザー アカウントのコンテキスト内から) データを処理します。</span><span class="sxs-lookup"><span data-stu-id="345f3-230">When Bob runs an app that reads from this store, that app will operate on the data Mallory placed there, but from within the context of Bob's user account.</span></span> <span data-ttu-id="345f3-231">このドキュメントの残りの部分では、さまざまな攻撃ベクトルと、アプリでこれらの攻撃に対するリスクを最小限に抑えるために行うことができる手順について検討します。</span><span class="sxs-lookup"><span data-stu-id="345f3-231">The remainder of this document contemplates various attack vectors and what steps apps can do to minimize their risk to these attacks.</span></span>

> [!NOTE]
> <span data-ttu-id="345f3-232">このような攻撃を行うには、Mallory には以下が必要になります。</span><span class="sxs-lookup"><span data-stu-id="345f3-232">In order for such an attack to take place, Mallory requires:</span></span>
>
> * <span data-ttu-id="345f3-233">コンピューター上のユーザー アカウント。</span><span class="sxs-lookup"><span data-stu-id="345f3-233">A user account on the machine.</span></span>
> * <span data-ttu-id="345f3-234">ファイル システム上の既知の場所にファイルを配置できること。</span><span class="sxs-lookup"><span data-stu-id="345f3-234">The ability to place a file into a known location on the file system.</span></span>
> * <span data-ttu-id="345f3-235">ある時点で Bob がこのデータの読み取りを試みるアプリを実行することがわかっていること。</span><span class="sxs-lookup"><span data-stu-id="345f3-235">Knowledge that Bob will at some point run an app that attempts to read this data.</span></span>
>
> <span data-ttu-id="345f3-236">これらは、自宅の PC や 1 人の従業員のエンタープライズ ワークステーションなど、標準のシングルユーザー デスクトップ環境に適用される脅威ベクトルではありません。</span><span class="sxs-lookup"><span data-stu-id="345f3-236">These are not threat vectors that apply to standard single-user desktop environments like home PCs or single-employee enterprise workstations.</span></span>

#### <a name="elevation-of-privilege"></a><span data-ttu-id="345f3-237">権限の昇格</span><span class="sxs-lookup"><span data-stu-id="345f3-237">Elevation of privilege</span></span>

<span data-ttu-id="345f3-238">Bob のアプリで Mallory のファイルが読み取られ、そのペイロードの内容に基づいて何らかのアクションを自動的に実行しようとすると、__権限の昇格__ 攻撃が発生します。</span><span class="sxs-lookup"><span data-stu-id="345f3-238">An __elevation of privilege__ attack occurs when Bob's app reads Mallory's file and automatically tries to take some action based on the contents of that payload.</span></span> <span data-ttu-id="345f3-239">コンピューター全体のストアからスタートアップ スクリプトの内容を読み取り、それらの内容を `Process.Start` に渡すアプリがあるとします。</span><span class="sxs-lookup"><span data-stu-id="345f3-239">Consider an app that reads the contents of a startup script from the machine-wide store and passes those contents to `Process.Start`.</span></span> <span data-ttu-id="345f3-240">Mallory がコンピューター全体のストア内に悪意のあるスクリプトを配置した場合、Bob が自分のアプリを起動すると、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="345f3-240">If Mallory can place a malicious script inside the machine-wide store, when Bob launches his app:</span></span>

* <span data-ttu-id="345f3-241">彼のアプリでは、"_Bob のユーザー プロファイルのコンテキストで_"、Mallory の悪意のあるスクリプトを解析して起動します。</span><span class="sxs-lookup"><span data-stu-id="345f3-241">His app parses and launches Mallory's malicious script _under the context of Bob's user profile_.</span></span>
* <span data-ttu-id="345f3-242">Mallory は、ローカル コンピューター上の Bob のアカウントにアクセスできるようになります。</span><span class="sxs-lookup"><span data-stu-id="345f3-242">Mallory gains access to Bob's account on the local machine.</span></span>

#### <a name="denial-of-service"></a><span data-ttu-id="345f3-243">サービス拒否</span><span class="sxs-lookup"><span data-stu-id="345f3-243">Denial of service</span></span>

<span data-ttu-id="345f3-244">Bob のアプリで Mallory のファイルが読み取られてクラッシュしたか、正常に機能しなくなった場合、__サービス拒否__ 攻撃が発生します。</span><span class="sxs-lookup"><span data-stu-id="345f3-244">A __denial of service__ attack occurs when Bob's app reads Mallory's file and crashes or otherwise stops functioning correctly.</span></span> <span data-ttu-id="345f3-245">コンピューター全体のストアからスタートアップ スクリプトを解析しようとする、前述のアプリについてもう一度考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="345f3-245">Consider again the app mentioned previously, which attempts to parse a startup script from the machine-wide store.</span></span> <span data-ttu-id="345f3-246">Mallory がコンピューター全体のストア内に内容が誤った形式のファイルを配置できる場合、彼女は次の操作を行う可能性があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-246">If Mallory can place a file with malformed contents inside the machine-wide store, she might:</span></span>

* <span data-ttu-id="345f3-247">Bob のアプリで、スタートアップ パスの早い段階で例外がスローされるようにする。</span><span class="sxs-lookup"><span data-stu-id="345f3-247">Cause Bob's app to throw an exception early in the startup path.</span></span>
* <span data-ttu-id="345f3-248">例外により、アプリが正常に起動しなくなるようにする。</span><span class="sxs-lookup"><span data-stu-id="345f3-248">Prevent the app from launching successfully because of the exception.</span></span>

<span data-ttu-id="345f3-249">彼女はその後、Bob が自身のユーザー アカウントでアプリを起動できないようにしました。</span><span class="sxs-lookup"><span data-stu-id="345f3-249">She has then denied Bob the ability to launch the app under his own user account.</span></span>

#### <a name="information-disclosure"></a><span data-ttu-id="345f3-250">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="345f3-250">Information disclosure</span></span>

<span data-ttu-id="345f3-251">Mallory が Bob をだまし、彼女が通常はアクセスできないファイルの内容を彼に公開させることができる場合、__情報の漏えい__ 攻撃が発生します。</span><span class="sxs-lookup"><span data-stu-id="345f3-251">An __information disclosure__ attack occurs when Mallory can trick Bob into disclosing the contents of a file that Mallory does not normally have access to.</span></span> <span data-ttu-id="345f3-252">Mallory が読み取りたいと考えている、シークレット ファイル *C:\Users\Bob\secret.txt* を Bob が持っているとします。</span><span class="sxs-lookup"><span data-stu-id="345f3-252">Consider that Bob has a secret file *C:\Users\Bob\secret.txt* that Mallory wants to read.</span></span> <span data-ttu-id="345f3-253">彼女は、このファイルへのパスを知っていますが、Windows では彼女が Bob のユーザー プロファイル ディレクトリにアクセスすることが禁止されているため、読み取ることはできません。</span><span class="sxs-lookup"><span data-stu-id="345f3-253">She knows the path to this file, but she cannot read it because Windows forbids her from gaining access to Bob's user profile directory.</span></span>

<span data-ttu-id="345f3-254">代わりに、Mallory はコンピューター全体のストアにハード リンクを配置します。</span><span class="sxs-lookup"><span data-stu-id="345f3-254">Instead, Mallory places a hard link into the machine-wide store.</span></span> <span data-ttu-id="345f3-255">これは特別な種類のファイルであり、それ自体に内容は含まれておらず、ディスク上の別のファイルを指します。</span><span class="sxs-lookup"><span data-stu-id="345f3-255">This is a special kind of file that itself does not contain any contents, rather, it points to another file on disk.</span></span> <span data-ttu-id="345f3-256">ハード リンク ファイルを読み取ろうとすると、そのリンクのターゲットとなるファイルの内容が代わりに読み取られます。</span><span class="sxs-lookup"><span data-stu-id="345f3-256">Attempting to read the hard link file will instead read the contents of the file targeted by the link.</span></span> <span data-ttu-id="345f3-257">ハード リンクを作成した後も、Mallory はファイルの内容を読み取ることはできません。これは、彼女がそのリンクのターゲット (`C:\Users\Bob\secret.txt`) にアクセスできないためです。</span><span class="sxs-lookup"><span data-stu-id="345f3-257">After creating the hard link, Mallory still cannot read the file contents because she does not have access to the target (`C:\Users\Bob\secret.txt`) of the link.</span></span> <span data-ttu-id="345f3-258">しかし、Bob はこのファイルにアクセス "_できます_"。</span><span class="sxs-lookup"><span data-stu-id="345f3-258">However, Bob _does_ have access to this file.</span></span>

<span data-ttu-id="345f3-259">Bob のアプリでは、コンピューター全体のストアから読み取るときに、ファイル自体がコンピューター全体のストアに存在する場合と同様に、彼の `secret.txt` ファイルの内容を誤って読み取るようになりました。</span><span class="sxs-lookup"><span data-stu-id="345f3-259">When Bob's app reads from the machine-wide store, it now inadvertently reads the contents of his `secret.txt` file, just as if the file itself had been present in the machine-wide store.</span></span> <span data-ttu-id="345f3-260">Bob のアプリが終了するときに、コンピューター全体のストアにファイルを再度保存しようとした場合、ファイルの実際のコピーを \*C:\ProgramData\IsolatedStorage\* ディレクトリに配置することになります。</span><span class="sxs-lookup"><span data-stu-id="345f3-260">When Bob's app exits, if it attempts to resave the file to the machine-wide store, it will end up placing an actual copy of the file in the \*C:\ProgramData\IsolatedStorage\* directory.</span></span> <span data-ttu-id="345f3-261">このディレクトリは、コンピューター上のどのユーザーも読み取ることができるため、Mallory はファイルの内容を読み取れるようになりました。</span><span class="sxs-lookup"><span data-stu-id="345f3-261">Since this directory is readable by any user on the machine, Mallory can now read the contents of the file.</span></span>

### <a name="best-practices-to-defend-against-these-attacks"></a><span data-ttu-id="345f3-262">これらの攻撃から保護するためのベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="345f3-262">Best practices to defend against these attacks</span></span>

<span data-ttu-id="345f3-263">__重要:__ ご利用の環境に相互に信頼されていないユーザーが複数存在する場合は、API `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` を呼び出したり、ツール `storeadm.exe /machine /list` を起動したり __しないでください__。</span><span class="sxs-lookup"><span data-stu-id="345f3-263">__Important:__ If your environment has multiple mutually untrusted users, __do not__ call the API `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` or invoke the tool `storeadm.exe /machine /list`.</span></span> <span data-ttu-id="345f3-264">これらはいずれも、信頼できるデータを操作していることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="345f3-264">Both of these assume that they're operating on trusted data.</span></span> <span data-ttu-id="345f3-265">攻撃者がコンピューター全体のストアに悪意のあるペイロードをシードできる場合、そのペイロードにより、これらのコマンドを実行するユーザーのコンテキストで、特権の昇格攻撃が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-265">If an attacker can seed a malicious payload in the machine-wide store, that payload can lead to an elevation of privilege attack under the context of the user who runs these commands.</span></span>

<span data-ttu-id="345f3-266">マルチユーザー環境で操作する場合は、"_コンピューター_" のスコープをターゲットとする分離ストレージ機能の使用を再検討してください。</span><span class="sxs-lookup"><span data-stu-id="345f3-266">If operating in a multi-user environment, reconsider use of isolated storage features that target the _Machine_ scope.</span></span> <span data-ttu-id="345f3-267">アプリでコンピューター全体の場所からデータを読み取る必要がある場合は、管理者アカウントでのみ書き込み可能な場所からデータを読み取ることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="345f3-267">If an app must read data from a machine-wide location, prefer to read the data from a location that's writable only by admin accounts.</span></span> <span data-ttu-id="345f3-268">`%PROGRAMFILES%` ディレクトリと `HKLM` レジストリ ハイブは、管理者のみが書き込み可能で、誰もが読み取れる場所の例です。</span><span class="sxs-lookup"><span data-stu-id="345f3-268">The `%PROGRAMFILES%` directory and the `HKLM` registry hive are examples of locations that are writable by only administrators and readable by everyone.</span></span> <span data-ttu-id="345f3-269">そのため、これらの場所から読み取られるデータは信頼できると見なされます。</span><span class="sxs-lookup"><span data-stu-id="345f3-269">Data read from those locations is therefore considered trustworthy.</span></span>

<span data-ttu-id="345f3-270">マルチユーザー環境で "_コンピューター_" のスコープをアプリで使用する必要がある場合は、コンピューター全体のストアから読み取ったすべてのファイルの内容を確認してください。</span><span class="sxs-lookup"><span data-stu-id="345f3-270">If an app must use the _Machine_ scope in a multi-user environment, validate the contents of any file that you read from the machine-wide store.</span></span> <span data-ttu-id="345f3-271">アプリでこれらのファイルからのオブジェクト グラフを逆シリアル化する場合は、`BinaryFormatter` や `NetDataContractSerializer` などの危険なシリアライザーではなく、`XmlSerializer` のような安全なシリアライザーを使用することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="345f3-271">If the app deserializing object graphs from these files, consider using safer serializers like `XmlSerializer` instead of dangerous serializers like `BinaryFormatter` or `NetDataContractSerializer`.</span></span> <span data-ttu-id="345f3-272">深く入れ子にされたオブジェクト グラフ、あるいはファイルの内容に基づいてリソースを割り当てるオブジェクト グラフを使用する場合は注意が必要です。</span><span class="sxs-lookup"><span data-stu-id="345f3-272">Use caution with deeply nested object graphs or object graphs that perform resource allocation based on the file contents.</span></span>

<a name="isolated_storage_locations"></a>

## <a name="isolated-storage-locations"></a><span data-ttu-id="345f3-273">分離ストレージの場所</span><span class="sxs-lookup"><span data-stu-id="345f3-273">Isolated Storage Locations</span></span>

<span data-ttu-id="345f3-274">オペレーティング システムのファイル システムを使用して分離ストレージの変化を検査すると役立つ場合があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-274">Sometimes it is helpful to verify a change to isolated storage by using the file system of the operating system.</span></span> <span data-ttu-id="345f3-275">また、分離ストレージ ファイルの場所を知る必要がある場合もあります。</span><span class="sxs-lookup"><span data-stu-id="345f3-275">You might also want to know the location of isolated storage files.</span></span> <span data-ttu-id="345f3-276">分離ストレージ ファイルの場所は、オペレーティングによって異なります。</span><span class="sxs-lookup"><span data-stu-id="345f3-276">This location is different depending on the operating system.</span></span> <span data-ttu-id="345f3-277">いくつかの一般的なオペレーティング システムで、分離ストレージが作成されるルート位置を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="345f3-277">The following table shows the root locations where isolated storage is created on a few common operating systems.</span></span> <span data-ttu-id="345f3-278">このルート位置の下の Microsoft\IsolatedStorage のディレクトリを検索してください。</span><span class="sxs-lookup"><span data-stu-id="345f3-278">Look for Microsoft\IsolatedStorage directories under this root location.</span></span> <span data-ttu-id="345f3-279">ファイル システムの分離ストレージを表示するには、隠しファイルやフォルダーが表示されるようにフォルダーの設定を変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-279">You must change folder settings to show hidden files and folders in order to see isolated storage in the file system.</span></span>

|<span data-ttu-id="345f3-280">オペレーティング システム</span><span class="sxs-lookup"><span data-stu-id="345f3-280">Operating system</span></span>|<span data-ttu-id="345f3-281">ファイル システム上の位置</span><span class="sxs-lookup"><span data-stu-id="345f3-281">Location in file system</span></span>|
|----------------------|-----------------------------|
|<span data-ttu-id="345f3-282">Windows 2000、Windows XP、Windows Server 2003 (Windows NT 4.0 からのアップグレード)</span><span class="sxs-lookup"><span data-stu-id="345f3-282">Windows 2000, Windows XP, Windows Server 2003  (upgrade from Windows NT 4.0)</span></span>|<span data-ttu-id="345f3-283">ローミングに対応したストア =</span><span class="sxs-lookup"><span data-stu-id="345f3-283">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="345f3-284">\<SYSTEMROOT>\Profiles\\<user\>\Application Data</span><span class="sxs-lookup"><span data-stu-id="345f3-284">\<SYSTEMROOT>\Profiles\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="345f3-285">ローミングに対応しないストア =</span><span class="sxs-lookup"><span data-stu-id="345f3-285">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="345f3-286">\<SYSTEMROOT>\Profiles\\<user\>\Local Settings\Application Data</span><span class="sxs-lookup"><span data-stu-id="345f3-286">\<SYSTEMROOT>\Profiles\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="345f3-287">Windows 2000 - クリーン インストール (および Windows 98 と Windows NT 3.51 からのアップグレード)</span><span class="sxs-lookup"><span data-stu-id="345f3-287">Windows 2000  - clean installation (and upgrades from Windows 98 and Windows NT 3.51)</span></span>|<span data-ttu-id="345f3-288">ローミングに対応したストア =</span><span class="sxs-lookup"><span data-stu-id="345f3-288">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="345f3-289">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span><span class="sxs-lookup"><span data-stu-id="345f3-289">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="345f3-290">ローミングに対応しないストア =</span><span class="sxs-lookup"><span data-stu-id="345f3-290">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="345f3-291">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span><span class="sxs-lookup"><span data-stu-id="345f3-291">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="345f3-292">Windows XP、Windows Server 2003 - クリーン インストール (および Windows 2000 と Windows 98 からのアップグレード)</span><span class="sxs-lookup"><span data-stu-id="345f3-292">Windows XP, Windows Server 2003 - clean installation (and upgrades from Windows 2000 and Windows 98)</span></span>|<span data-ttu-id="345f3-293">ローミングに対応したストア =</span><span class="sxs-lookup"><span data-stu-id="345f3-293">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="345f3-294">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span><span class="sxs-lookup"><span data-stu-id="345f3-294">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="345f3-295">ローミングに対応しないストア =</span><span class="sxs-lookup"><span data-stu-id="345f3-295">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="345f3-296">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span><span class="sxs-lookup"><span data-stu-id="345f3-296">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="345f3-297">Windows 8、Windows 7、Windows Server 2008、Windows Vista</span><span class="sxs-lookup"><span data-stu-id="345f3-297">Windows 8, Windows 7, Windows Server 2008, Windows Vista</span></span>|<span data-ttu-id="345f3-298">ローミングに対応したストア =</span><span class="sxs-lookup"><span data-stu-id="345f3-298">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="345f3-299">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Roaming</span><span class="sxs-lookup"><span data-stu-id="345f3-299">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Roaming</span></span><br /><br /> <span data-ttu-id="345f3-300">ローミングに対応しないストア =</span><span class="sxs-lookup"><span data-stu-id="345f3-300">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="345f3-301">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Local</span><span class="sxs-lookup"><span data-stu-id="345f3-301">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Local</span></span>|

<a name="isolated_storage_tasks"></a>

## <a name="creating-enumerating-and-deleting-isolated-storage"></a><span data-ttu-id="345f3-302">分離ストレージの作成、列挙、および削除</span><span class="sxs-lookup"><span data-stu-id="345f3-302">Creating, Enumerating, and Deleting Isolated Storage</span></span>

<span data-ttu-id="345f3-303">.NET には、<xref:System.IO.IsolatedStorage> 名前空間に、分離ストレージを必要とするタスクの実行に役立つ 3 つのクラスが用意されています。</span><span class="sxs-lookup"><span data-stu-id="345f3-303">.NET provides three classes in the <xref:System.IO.IsolatedStorage> namespace to help you perform tasks that involve isolated storage:</span></span>

- <span data-ttu-id="345f3-304"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>。 <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> の派生クラスであり、格納されたアセンブリおよびアプリケーション ファイルの基本的な管理を提供します。</span><span class="sxs-lookup"><span data-stu-id="345f3-304"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>, derives from <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> and provides basic management of stored assembly and application files.</span></span> <span data-ttu-id="345f3-305"><xref:System.IO.IsolatedStorage.IsolatedStorageFile> クラスのインスタンスは、ファイル システム内に存在する 1 つのストアを表します。</span><span class="sxs-lookup"><span data-stu-id="345f3-305">An instance of the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class represents a single store located in the file system.</span></span>

- <span data-ttu-id="345f3-306"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream> 。 <xref:System.IO.FileStream?displayProperty=nameWithType> の派生クラスであり、ストア内のファイルへのアクセスを提供します。</span><span class="sxs-lookup"><span data-stu-id="345f3-306"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream> derives from <xref:System.IO.FileStream?displayProperty=nameWithType> and provides access to the files in a store.</span></span>

- <span data-ttu-id="345f3-307"><xref:System.IO.IsolatedStorage.IsolatedStorageScope> クラス。適切な分離タイプのストアの作成および選択を可能にする列挙体です。</span><span class="sxs-lookup"><span data-stu-id="345f3-307"><xref:System.IO.IsolatedStorage.IsolatedStorageScope> is an enumeration that enables you to create and select a store with the appropriate isolation type.</span></span>

<span data-ttu-id="345f3-308">分離ストレージ クラスを使用すると、分離ストレージの作成、列挙、および削除を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="345f3-308">The isolated storage classes enable you to create, enumerate, and delete isolated storage.</span></span> <span data-ttu-id="345f3-309">これらの作業を実行するためのメソッドは、 <xref:System.IO.IsolatedStorage.IsolatedStorageFile> オブジェクトを通じて使用できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-309">The methods for performing these tasks are available through the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> object.</span></span> <span data-ttu-id="345f3-310">操作によっては、分離ストレージを管理する権限を表す <xref:System.Security.Permissions.IsolatedStorageFilePermission> アクセス許可が必要です。また、ファイルやディレクトリにアクセスするためのオペレーティング システム権限が必要な場合もあります。</span><span class="sxs-lookup"><span data-stu-id="345f3-310">Some operations require you to have the <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission that represents the right to administer isolated storage; you might also need to have operating system rights to access the file or directory.</span></span>

<span data-ttu-id="345f3-311">分離ストレージに関する一般的な作業を具体的に説明する一連の例については、「 [関連トピック](#related_topics)」に示す「方法」トピックを参照してください。</span><span class="sxs-lookup"><span data-stu-id="345f3-311">For a series of examples that demonstrate common isolated storage tasks, see the how-to topics listed in [Related Topics](#related_topics).</span></span>

<a name="scenarios_for_isolated_storage"></a>

## <a name="scenarios-for-isolated-storage"></a><span data-ttu-id="345f3-312">分離ストレージのシナリオ</span><span class="sxs-lookup"><span data-stu-id="345f3-312">Scenarios for Isolated Storage</span></span>

<span data-ttu-id="345f3-313">分離ストレージは、次の 4 つのシナリオを含め、さまざまな状況で役立ちます。</span><span class="sxs-lookup"><span data-stu-id="345f3-313">Isolated storage is useful in many situations, including these four scenarios:</span></span>

- <span data-ttu-id="345f3-314">ダウンロードされたコントロール。</span><span class="sxs-lookup"><span data-stu-id="345f3-314">Downloaded controls.</span></span> <span data-ttu-id="345f3-315">通常の I/O クラスを使用して、インターネットからダウンロードしたマネージド コード コントロールをハード ドライブに書き込むことはできません。ただし、分離ストレージを使用することにより、ユーザーの設定やアプリケーション状態を永続化できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-315">Managed code controls downloaded from the Internet are not allowed to write to the hard drive through normal I/O classes, but they can use isolated storage to persist users' settings and application states.</span></span>

- <span data-ttu-id="345f3-316">共有コンポーネント ストレージ。</span><span class="sxs-lookup"><span data-stu-id="345f3-316">Shared component storage.</span></span> <span data-ttu-id="345f3-317">アプリケーション間で共有されるコンポーネントで分離ストレージを使用することにより、データ ストアへのアクセスを制限できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-317">Components that are shared between applications can use isolated storage to provide controlled access to data stores.</span></span>

- <span data-ttu-id="345f3-318">サーバー ストレージ。</span><span class="sxs-lookup"><span data-stu-id="345f3-318">Server storage.</span></span> <span data-ttu-id="345f3-319">サーバー アプリケーションでは、アプリケーションに対する要求を行う多数のユーザーに個別のストアを提供するために分離ストレージを使用できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-319">Server applications can use isolated storage to provide individual stores for a large number of users making requests to the application.</span></span> <span data-ttu-id="345f3-320">分離ストレージは常にユーザー別に分離されているため、サーバーは、要求を行うユーザーを偽装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="345f3-320">Because isolated storage is always segregated by user, the server must impersonate the user making the request.</span></span> <span data-ttu-id="345f3-321">サーバーがユーザーを偽装する場合、データは、プリンシパルの ID (アプリケーションがアプリケーションのユーザーを識別するために使用する ID と同じ ID) に基づいて分離されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-321">In this case, data is isolated based on the identity of the principal, which is the same identity the application uses to distinguish between its users.</span></span>

- <span data-ttu-id="345f3-322">ローミング。</span><span class="sxs-lookup"><span data-stu-id="345f3-322">Roaming.</span></span> <span data-ttu-id="345f3-323">アプリケーションでは、分離ストレージをローミング ユーザー プロファイルと共に使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="345f3-323">Applications can also use isolated storage with roaming user profiles.</span></span> <span data-ttu-id="345f3-324">分離ストレージとローミング ユーザー プロファイルを一緒に使用することにより、ユーザーの分離ストアは、プロファイルと共に移動します。</span><span class="sxs-lookup"><span data-stu-id="345f3-324">This allows a user's isolated stores to roam with the profile.</span></span>

<span data-ttu-id="345f3-325">次のような状況では、分離ストレージを使用しないでください。</span><span class="sxs-lookup"><span data-stu-id="345f3-325">Do not use isolated storage in the following situations:</span></span>

- <span data-ttu-id="345f3-326">暗号化されていないキー、パスワードなど、重要な機密情報の格納。分離ストレージは信頼性の高いコード、アンマネージ コード、またはコンピューターの信頼されるユーザーからは保護されていません。</span><span class="sxs-lookup"><span data-stu-id="345f3-326">To store high-value secrets, such as unencrypted keys or passwords, because isolated storage is not protected from highly trusted code, from unmanaged code, or from trusted users of the computer.</span></span>

- <span data-ttu-id="345f3-327">コードの格納。</span><span class="sxs-lookup"><span data-stu-id="345f3-327">To store code.</span></span>

- <span data-ttu-id="345f3-328">管理者が制御する構成設定と配置設定の格納。</span><span class="sxs-lookup"><span data-stu-id="345f3-328">To store configuration and deployment settings, which administrators control.</span></span> <span data-ttu-id="345f3-329">ユーザー設定は管理者が制御しないので、構成設定とは見なされません。</span><span class="sxs-lookup"><span data-stu-id="345f3-329">(User preferences are not considered to be configuration settings because administrators do not control them.)</span></span>

<span data-ttu-id="345f3-330">多くのアプリケーションでは、データベースを使用してデータを格納し、分離しています。データベースを使用する場合は、データベースの 1 行または複数の行で 1 人の特定のユーザーのストレージを表します。</span><span class="sxs-lookup"><span data-stu-id="345f3-330">Many applications use a database to store and isolate data, in which case one or more rows in a database might represent storage for a specific user.</span></span> <span data-ttu-id="345f3-331">ユーザー数が少ない場合、データベースを使用するオーバーヘッドが重要である場合、またはデータベース機能が存在しない場合は、データベースの代わりに分離ストレージを使用できます。</span><span class="sxs-lookup"><span data-stu-id="345f3-331">You might choose to use isolated storage instead of a database when the number of users is small, when the overhead of using a database is significant, or when no database facility exists.</span></span> <span data-ttu-id="345f3-332">また、データベース内の行よりも複雑で柔軟性のあるストレージがアプリケーションに必要な場合でも、分離ストレージによって実行可能な選択肢が用意されます。</span><span class="sxs-lookup"><span data-stu-id="345f3-332">Also, when the application requires storage that is more flexible and complex than what a row in a database provides, isolated storage can provide a viable alternative.</span></span>

<a name="related_topics"></a>

## <a name="related-articles"></a><span data-ttu-id="345f3-333">関連記事</span><span class="sxs-lookup"><span data-stu-id="345f3-333">Related articles</span></span>

|<span data-ttu-id="345f3-334">Title</span><span class="sxs-lookup"><span data-stu-id="345f3-334">Title</span></span>|<span data-ttu-id="345f3-335">説明</span><span class="sxs-lookup"><span data-stu-id="345f3-335">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="345f3-336">分離のタイプ</span><span class="sxs-lookup"><span data-stu-id="345f3-336">Types of Isolation</span></span>](types-of-isolation.md)|<span data-ttu-id="345f3-337">さまざまなタイプの分離を説明します。</span><span class="sxs-lookup"><span data-stu-id="345f3-337">Describes the different types of isolation.</span></span>|
|[<span data-ttu-id="345f3-338">方法: 分離ストレージでストアを取得する</span><span class="sxs-lookup"><span data-stu-id="345f3-338">How to: Obtain Stores for Isolated Storage</span></span>](how-to-obtain-stores-for-isolated-storage.md)|<span data-ttu-id="345f3-339"><xref:System.IO.IsolatedStorage.IsolatedStorageFile> クラスを使用して、ユーザーおよびアセンブリ別に分離されたストアを取得する例を示します。</span><span class="sxs-lookup"><span data-stu-id="345f3-339">Provides an example of using the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class to obtain a store isolated by user and assembly.</span></span>|
|[<span data-ttu-id="345f3-340">方法: 分離ストレージでストアを列挙する</span><span class="sxs-lookup"><span data-stu-id="345f3-340">How to: Enumerate Stores for Isolated Storage</span></span>](how-to-enumerate-stores-for-isolated-storage.md)|<span data-ttu-id="345f3-341"><xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> メソッドを使用して、特定のユーザーのすべての分離ストレージのサイズを計算する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="345f3-341">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> method to calculate the size of all isolated storage for the user.</span></span>|
|[<span data-ttu-id="345f3-342">方法: 分離ストレージでストアを削除する</span><span class="sxs-lookup"><span data-stu-id="345f3-342">How to: Delete Stores in Isolated Storage</span></span>](how-to-delete-stores-in-isolated-storage.md)|<span data-ttu-id="345f3-343"><xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> メソッドを 2 とおりの方法で使用して、分離ストアを削除する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="345f3-343">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> method in two different ways to delete isolated stores.</span></span>|
|[<span data-ttu-id="345f3-344">方法: 分離ストレージの領域不足状態に備える</span><span class="sxs-lookup"><span data-stu-id="345f3-344">How to: Anticipate Out-of-Space Conditions with Isolated Storage</span></span>](how-to-anticipate-out-of-space-conditions-with-isolated-storage.md)|<span data-ttu-id="345f3-345">分離ストアの残りの領域を計測する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="345f3-345">Shows how to measure the remaining space in an isolated store.</span></span>|
|[<span data-ttu-id="345f3-346">方法: 分離ストレージでファイルおよびディレクトリを作成する</span><span class="sxs-lookup"><span data-stu-id="345f3-346">How to: Create Files and Directories in Isolated Storage</span></span>](how-to-create-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="345f3-347">分離ストア内にファイルやディレクトリを作成する例を示します。</span><span class="sxs-lookup"><span data-stu-id="345f3-347">Provides some examples of creating files and directories in an isolated store.</span></span>|
|[<span data-ttu-id="345f3-348">方法: 分離ストレージ内で既存のファイルおよびディレクトリを検索する</span><span class="sxs-lookup"><span data-stu-id="345f3-348">How to: Find Existing Files and Directories in Isolated Storage</span></span>](how-to-find-existing-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="345f3-349">分離ストレージ内のディレクトリ構造やファイルを読み取る方法を示します。</span><span class="sxs-lookup"><span data-stu-id="345f3-349">Demonstrates how to read the directory structure and files in isolated storage.</span></span>|
|[<span data-ttu-id="345f3-350">方法: 分離ストレージ内でファイルの読み取りと書き込みを行う</span><span class="sxs-lookup"><span data-stu-id="345f3-350">How to: Read and Write to Files in Isolated Storage</span></span>](how-to-read-and-write-to-files-in-isolated-storage.md)|<span data-ttu-id="345f3-351">分離ストレージ ファイルに文字列を書き込み、その文字列を読み取る例を示します。</span><span class="sxs-lookup"><span data-stu-id="345f3-351">Provides an example of writing a string to an isolated storage file and reading it back.</span></span>|
|[<span data-ttu-id="345f3-352">方法: 分離ストレージでファイルおよびディレクトリを削除する</span><span class="sxs-lookup"><span data-stu-id="345f3-352">How to: Delete Files and Directories in Isolated Storage</span></span>](how-to-delete-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="345f3-353">分離ストレージのファイルやディレクトリを削除する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="345f3-353">Demonstrates how to delete isolated storage files and directories.</span></span>|
|[<span data-ttu-id="345f3-354">ファイルおよびストリーム入出力</span><span class="sxs-lookup"><span data-stu-id="345f3-354">File and Stream I/O</span></span>](index.md)|<span data-ttu-id="345f3-355">ファイルとデータ ストリームに同期的および非同期的にアクセスする方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="345f3-355">Explains how you can perform synchronous and asynchronous file and data stream access.</span></span>|

<a name="reference"></a>

## <a name="reference"></a><span data-ttu-id="345f3-356">関連項目</span><span class="sxs-lookup"><span data-stu-id="345f3-356">Reference</span></span>

- <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFile?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFileStream?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageScope?displayProperty=nameWithType>
