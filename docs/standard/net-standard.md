---
title: .NET Standard
description: .NET Standard、そのバージョン、それをサポートする .NET 実装について学習します。
ms.date: 10/05/2020
ms.technology: dotnet-standard
ms.custom: updateeachrelease
ms.assetid: c044882c-af15-45f2-96d1-534557a5ee9b
ms.openlocfilehash: a4736e46eb7c25b64278bed8f2c2457002936b81
ms.sourcegitcommit: 67ebdb695fd017d79d9f1f7f35d145042d5a37f7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/20/2020
ms.locfileid: "92224163"
---
# <a name="net-standard"></a><span data-ttu-id="1ce2b-103">.NET Standard</span><span class="sxs-lookup"><span data-stu-id="1ce2b-103">.NET Standard</span></span>

<span data-ttu-id="1ce2b-104">[.NET Standard](https://github.com/dotnet/standard) は、複数の .NET 実装で使用できる .NET API の正式な仕様です。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-104">[.NET Standard](https://github.com/dotnet/standard) is a formal specification of .NET APIs that are available on multiple .NET implementations.</span></span> <span data-ttu-id="1ce2b-105">.NET Standard の背後にある意図は、.NET エコシステムの高度な統一性を確立することでした。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-105">The motivation behind .NET Standard was to establish greater uniformity in the .NET ecosystem.</span></span> <span data-ttu-id="1ce2b-106">しかし、.NET 5 には統一性を確立するための別のアプローチが採用されており、この新しいアプローチによって、多くのシナリオで .NET Standard が不要になります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-106">However, .NET 5 adopts a different approach to establishing uniformity, and this new approach eliminates the need for .NET Standard in many scenarios.</span></span> <span data-ttu-id="1ce2b-107">詳細については、後の「[.NET 5 と .NET Standard](#net-5-and-net-standard)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-107">For more information, see [.NET 5 and .NET Standard](#net-5-and-net-standard) later in this article.</span></span>

## <a name="net-implementation-support"></a><span data-ttu-id="1ce2b-108">.NET 実装のサポート</span><span class="sxs-lookup"><span data-stu-id="1ce2b-108">.NET implementation support</span></span>

<span data-ttu-id="1ce2b-109">さまざまな .NET 実装が、.NET Standard の特定のバージョンを対象とします。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-109">The various .NET implementations target specific versions of .NET Standard.</span></span> <span data-ttu-id="1ce2b-110">各 .NET 実装バージョンは、それがサポートしている最高の .NET Standard バージョンをアドバタイズし、そのことは以前のバージョンもサポートしていることを意味します。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-110">Each .NET implementation version advertises the highest .NET Standard version it supports, a statement that means it also supports previous versions.</span></span> <span data-ttu-id="1ce2b-111">たとえば、.NET Framework 4.6 は .NET Standard 1.3 を実装しており、このことは、.NET Standard のバージョン 1.0 ～ 1.3 で定義されているすべての API を公開していることを意味します。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-111">For example, .NET Framework 4.6 implements .NET Standard 1.3, which means that it exposes all APIs defined in .NET Standard versions 1.0 through 1.3.</span></span> <span data-ttu-id="1ce2b-112">同様に、.NET Framework 4.6.1 には .NET Standard 1.4 が実装されていますが、.NET 5.0 には .NET Standard 2.1 が実装されています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-112">Similarly, .NET Framework 4.6.1 implements .NET Standard 1.4, while .NET 5.0 implements .NET Standard 2.1.</span></span>

<span data-ttu-id="1ce2b-113">次の表は、.NET Standard の各バージョンがサポートされている **最小** の実装バージョンの一覧です。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-113">The following table lists the **minimum** implementation versions that support each .NET Standard version.</span></span> <span data-ttu-id="1ce2b-114">つまり、一覧に示されている実装以降のバージョンでも、対応する .NET Standard バージョンがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-114">That means that later versions of a listed implementation also support the corresponding .NET Standard version.</span></span> <span data-ttu-id="1ce2b-115">たとえば、.NET Core 2.1 以降のバージョンによって .NET Standard 2.0 以前のバージョンがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-115">For example, .NET Core 2.1 and later versions support .NET Standard 2.0 and earlier versions.</span></span>

[!INCLUDE [net-standard-table](../../includes/net-standard-table.md)]

<span data-ttu-id="1ce2b-116">対象にすることができる最高バージョンの .NET Standard を確認するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-116">To find the highest version of .NET Standard that you can target, do the following steps:</span></span>

1. <span data-ttu-id="1ce2b-117">実行する .NET 実装を示す行を探します。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-117">Find the row that indicates the .NET implementation you want to run on.</span></span>
1. <span data-ttu-id="1ce2b-118">この行内で、右から左の方向に、バージョンを示す列を探します。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-118">Find the column in that row that indicates your version starting from right to left.</span></span>
1. <span data-ttu-id="1ce2b-119">列ヘッダーには、ターゲットでサポートされている .NET Standard バージョンが示されます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-119">The column header indicates the .NET Standard version that your target supports.</span></span> <span data-ttu-id="1ce2b-120">任意の古い .NET Standard バージョンをターゲットにすることもできます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-120">You may also target any lower .NET Standard version.</span></span> <span data-ttu-id="1ce2b-121">.NET Standard の今後のバージョンでも実装はサポートされます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-121">Higher .NET Standard versions will also support your implementation.</span></span>
1. <span data-ttu-id="1ce2b-122">対象にするプラットフォームごとに、この手順を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-122">Repeat this process for each platform you want to target.</span></span> <span data-ttu-id="1ce2b-123">複数のターゲット プラットフォームがある場合は、その中から低いバージョンを選択することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-123">If you have more than one target platform, you should pick the smaller version among them.</span></span> <span data-ttu-id="1ce2b-124">たとえば、.NET Framework 4.8 と .NET 5.0 で実行する場合、使用できる .NET Standard の最高のバージョンは .NET Standard 2.0 です。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-124">For example, if you want to run on .NET Framework 4.8 and .NET 5.0, the highest .NET Standard version you can use is .NET Standard 2.0.</span></span>

### <a name="which-net-standard-version-to-target"></a><span data-ttu-id="1ce2b-125">対象にする .NET Standard バージョン</span><span class="sxs-lookup"><span data-stu-id="1ce2b-125">Which .NET Standard version to target</span></span>

<span data-ttu-id="1ce2b-126">.NET Standard バージョンをターゲットに選択する場合、次のトレードオフを考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-126">When choosing a .NET Standard version to target, consider this trade-off:</span></span>

- <span data-ttu-id="1ce2b-127">バージョンが高くなるほど、ユーザーのライブラリのコードで使用できる API は多くなります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-127">The higher the version, the more APIs are available to your library's code.</span></span>
- <span data-ttu-id="1ce2b-128">バージョンが低くなるほど、ユーザーのライブラリを使用できるアプリやライブラリが増えます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-128">The lower the version, the more apps and libraries can use your library.</span></span>

<span data-ttu-id="1ce2b-129">可能な限り " *最小* " のバージョンの .NET Standard をターゲットにすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-129">We recommend you target the *lowest* version of .NET Standard possible.</span></span> <span data-ttu-id="1ce2b-130">そのため、対象にする最高バージョンの .NET Standard を見つけたら、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-130">So, after you find the highest .NET Standard version you can target, follow these steps:</span></span>

1. <span data-ttu-id="1ce2b-131">1 つ低いバージョンの .NET Standard を対象にしてプロジェクトをビルドします。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-131">Target the next lower version of .NET Standard and build your project.</span></span>
2. <span data-ttu-id="1ce2b-132">プロジェクトのビルドが成功したら、手順 1 を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-132">If your project builds successfully, repeat step 1.</span></span> <span data-ttu-id="1ce2b-133">失敗した場合は、対象を次に高いバージョンに変更します。これが対象のバージョンです。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-133">Otherwise, retarget to the next higher version and that's the version you should use.</span></span>

<span data-ttu-id="1ce2b-134">ただし、下位バージョンの .NET Standard を対象にしている場合、さまざまな依存関係のサポートが導入されます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-134">However, targeting lower .NET Standard versions introduces a number of support dependencies.</span></span> <span data-ttu-id="1ce2b-135">お使いのプロジェクトが .NET Standard 1.x を対象としている場合、.NET Standard 2.0 " *も* " 対象にすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-135">If your project targets .NET Standard 1.x, we recommend that you *also* target .NET Standard 2.0.</span></span> <span data-ttu-id="1ce2b-136">これにより、.NET Standard 2.0 と互換性のある実装上で実行されるライブラリのユーザーに対しては、依存関係グラフが簡略化され、ダウンロードの必要なパッケージの数が減ります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-136">This simplifies the dependency graph for users of your library that run on .NET Standard 2.0 compatible implementations, and it reduces the number of packages they need to download.</span></span>

### <a name="net-standard-versioning-rules"></a><span data-ttu-id="1ce2b-137">.NET Standard のバージョン管理規則</span><span class="sxs-lookup"><span data-stu-id="1ce2b-137">.NET Standard versioning rules</span></span>

<span data-ttu-id="1ce2b-138">バージョン管理規則は主に 2 つあります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-138">There are two primary versioning rules:</span></span>

- <span data-ttu-id="1ce2b-139">追加式: .NET Standard バージョンは論理的に同心円形です。高位のバージョンには、旧バージョンのすべての API が組み込まれています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-139">Additive: .NET Standard versions are logically concentric circles: higher versions incorporate all APIs from previous versions.</span></span> <span data-ttu-id="1ce2b-140">バージョン間に互換性に影響する変更はありません。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-140">There are no breaking changes between versions.</span></span>
- <span data-ttu-id="1ce2b-141">不変:出荷後、.NET Standard のバージョンは固定されます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-141">Immutable: Once shipped, .NET Standard versions are frozen.</span></span>

<span data-ttu-id="1ce2b-142">2\.1 より後に .NET Standard の新しいバージョンはありません。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-142">There will be no new .NET Standard versions after 2.1.</span></span> <span data-ttu-id="1ce2b-143">詳細については、後の「[.NET 5 と .NET Standard](#net-5-and-net-standard)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-143">For more information, see [.NET 5 and .NET Standard](#net-5-and-net-standard) later in this article.</span></span>

## <a name="specification"></a><span data-ttu-id="1ce2b-144">仕様</span><span class="sxs-lookup"><span data-stu-id="1ce2b-144">Specification</span></span>

<span data-ttu-id="1ce2b-145">.NET Standard の仕様は、標準化された API のセットです。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-145">The .NET Standard specification is a standardized set of APIs.</span></span> <span data-ttu-id="1ce2b-146">この仕様は、.NET 実装、具体的には Microsoft (.NET Framework、.NET Core、Mono を含む) と Unity によって管理されています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-146">The specification is maintained by .NET implementors, specifically Microsoft (includes .NET Framework, .NET Core, and Mono) and Unity.</span></span>

### <a name="official-artifacts"></a><span data-ttu-id="1ce2b-147">正式な成果物</span><span class="sxs-lookup"><span data-stu-id="1ce2b-147">Official artifacts</span></span>

<span data-ttu-id="1ce2b-148">正式な仕様は、標準に含まれる API を定義する一連の *.cs* ファイルです。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-148">The official specification is a set of *.cs* files that define the APIs that are part of the standard.</span></span> <span data-ttu-id="1ce2b-149">[dotnet/standard リポジトリ](https://github.com/dotnet/standard)の [ref](https://github.com/dotnet/standard/tree/master/src/netstandard/ref) ディレクトリに.NET Standard API が定義されています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-149">The [ref directory](https://github.com/dotnet/standard/tree/master/src/netstandard/ref) in the [dotnet/standard repository](https://github.com/dotnet/standard) defines the .NET Standard APIs.</span></span>

<span data-ttu-id="1ce2b-150">[NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library) メタパッケージ ([ソース](https://github.com/dotnet/standard/blob/master/src/netstandard/pkg/NETStandard.Library.dependencies.props)) は、1 つ以上の .NET Standard のバージョンを定義する (一部) ライブラリのセットについて説明しています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-150">The [NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library) metapackage ([source](https://github.com/dotnet/standard/blob/master/src/netstandard/pkg/NETStandard.Library.dependencies.props)) describes the set of libraries that define (in part) one or more .NET Standard versions.</span></span>

<span data-ttu-id="1ce2b-151">`System.Runtime` などの特定のコンポーネントは、次のように説明されています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-151">A given component, like `System.Runtime`, describes:</span></span>

- <span data-ttu-id="1ce2b-152">.NET Standard の一部 (そのスコープだけ)。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-152">Part of .NET Standard (just its scope).</span></span>
- <span data-ttu-id="1ce2b-153">そのスコープの .NET Standard の複数のバージョン。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-153">Multiple versions of .NET Standard, for that scope.</span></span>

<span data-ttu-id="1ce2b-154">便利に読めるようにし、特定の開発者シナリオ (コンパイラを使用するなど) を可能にするために、派生成果物が提供されています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-154">Derivative artifacts are provided to enable more convenient reading and to enable certain developer scenarios (for example, using a compiler).</span></span>

- [<span data-ttu-id="1ce2b-155">マークダウン形式の API 一覧</span><span class="sxs-lookup"><span data-stu-id="1ce2b-155">API list in markdown</span></span>](https://github.com/dotnet/standard/tree/master/docs/versions)
- <span data-ttu-id="1ce2b-156">NuGet パッケージとして配布され、[NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library/) メタパッケージによって参照される参照アセンブリ。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-156">Reference assemblies, distributed as NuGet packages and referenced by the [NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library/) metapackage.</span></span>

### <a name="package-representation"></a><span data-ttu-id="1ce2b-157">パッケージ表現</span><span class="sxs-lookup"><span data-stu-id="1ce2b-157">Package representation</span></span>

<span data-ttu-id="1ce2b-158">.NET Standard 参照アセンブリの主要な配布手段は NuGet パッケージです。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-158">The primary distribution vehicle for the .NET Standard reference assemblies is NuGet packages.</span></span> <span data-ttu-id="1ce2b-159">実装は、各 .NET 実装に適切なさまざまな方法で配布されます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-159">Implementations are delivered in a variety of ways, appropriate for each .NET implementation.</span></span>

<span data-ttu-id="1ce2b-160">NuGet パッケージは 1 つまたは複数の[フレームワーク](frameworks.md)を対象にしています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-160">NuGet packages target one or more [frameworks](frameworks.md).</span></span> <span data-ttu-id="1ce2b-161">.NET Standard パッケージは、".NET Standard" フレームワークを対象にしています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-161">.NET Standard packages target the ".NET Standard" framework.</span></span> <span data-ttu-id="1ce2b-162">`netstandard` [コンパクト TFM](frameworks.md) (`netstandard1.4` など) を使用して、.NET Standard フレームワークを対象にすることができます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-162">You can target the .NET Standard framework using the `netstandard` [compact TFM](frameworks.md) (for example, `netstandard1.4`).</span></span> <span data-ttu-id="1ce2b-163">.NET の複数の実装で実行することが意図されたライブラリは、このフレームワークをターゲットにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-163">Libraries that are intended to run on multiple implementations of .NET should target this framework.</span></span> <span data-ttu-id="1ce2b-164">広範なセットの API の場合、.NET Standard 1.6 から 2.0 の間に使用できる API の数は 2 倍以上になったため、`netstandard2.0` を対象としてください。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-164">For the broadest set of APIs, target `netstandard2.0` since the number of available APIs more than doubled between .NET Standard 1.6 and 2.0.</span></span>

<span data-ttu-id="1ce2b-165">[`NETStandard.Library`](https://www.nuget.org/packages/NETStandard.Library/) メタパッケージは .NET Standard を定義する NuGet パッケージの完全なセットを参照しています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-165">The [`NETStandard.Library`](https://www.nuget.org/packages/NETStandard.Library/) metapackage references the complete set of NuGet packages that define .NET Standard.</span></span>  <span data-ttu-id="1ce2b-166">`netstandard` を対象とする最も一般的な方法は、このメタパッケージを参照することです。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-166">The most common way to target `netstandard` is by referencing this metapackage.</span></span> <span data-ttu-id="1ce2b-167">それは、.NET Standard を定義する約 40 の .NET ライブラリと関連する API について説明しており、それらにアクセスできるようにしています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-167">It describes and provides access to the ~40 .NET libraries and associated APIs that define .NET Standard.</span></span> <span data-ttu-id="1ce2b-168">`netstandard` を対象とする追加のパッケージを参照して、追加の API にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-168">You can reference additional packages that target `netstandard` to get access to additional APIs.</span></span>

### <a name="versioning"></a><span data-ttu-id="1ce2b-169">バージョン管理</span><span class="sxs-lookup"><span data-stu-id="1ce2b-169">Versioning</span></span>

<span data-ttu-id="1ce2b-170">仕様は 1 つだけではありませんが、直線的にバージョン管理された API のセットです。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-170">The specification is not singular, but a linearly versioned set of APIs.</span></span> <span data-ttu-id="1ce2b-171">標準の最初のバージョンは、API のベースライン セットを構築しています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-171">The first version of the standard establishes a baseline set of APIs.</span></span> <span data-ttu-id="1ce2b-172">それ以降のバージョンでは、API が追加され、以前のバージョンによって定義された API を継承しています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-172">Subsequent versions add APIs and inherit APIs defined by previous versions.</span></span> <span data-ttu-id="1ce2b-173">標準から API を削除するために確立された取り決めはありません。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-173">There is no established provision for removing APIs from the Standard.</span></span>

<span data-ttu-id="1ce2b-174">.NET Standard は、1 つの .NET 実装に固有ではなく、それらの実装のいずれかのバージョン管理スキームに一致することもありません。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-174">.NET Standard is not specific to any one .NET implementation, nor does it match the versioning scheme of any of those implementations.</span></span>

<span data-ttu-id="1ce2b-175">既に説明したように、2.1 より後に .NET Standard の新しいバージョンはありません。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-175">As noted earlier, there will be no new .NET Standard versions after 2.1.</span></span>

## <a name="target-net-standard"></a><span data-ttu-id="1ce2b-176">ターゲットの .NET Standard</span><span class="sxs-lookup"><span data-stu-id="1ce2b-176">Target .NET Standard</span></span>

<span data-ttu-id="1ce2b-177">`netstandard` フレームワークと `NETStandard.Library` メタパッケージの組み合わせを使用して、[.NET Standard Library をビルド](../core/tutorials/libraries.md)できます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-177">You can [build .NET Standard Libraries](../core/tutorials/libraries.md) using a combination of the `netstandard` framework and the `NETStandard.Library` metapackage.</span></span>

## <a name="net-framework-compatibility-mode"></a><span data-ttu-id="1ce2b-178">.NET Framework 互換モード</span><span class="sxs-lookup"><span data-stu-id="1ce2b-178">.NET Framework compatibility mode</span></span>

<span data-ttu-id="1ce2b-179">.NET Standard 2.0 以降、.NET Framework 互換モードが導入されました。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-179">Starting with .NET Standard 2.0, the .NET Framework compatibility mode was introduced.</span></span> <span data-ttu-id="1ce2b-180">この互換モードにより、.NET Standard プロジェクトは、あたかも .NET Standard にコンパイルされたかのように .NET Framework ライブラリを参照できます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-180">This compatibility mode allows .NET Standard projects to reference .NET Framework libraries as if they were compiled for .NET Standard.</span></span> <span data-ttu-id="1ce2b-181">.NET Framework ライブラリの参照は、Windows Presentation Foundation (WPF) API を使用するライブラリのような、一部のプロジェクトでは機能しません。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-181">Referencing .NET Framework libraries doesn't work for all projects, such as libraries that use Windows Presentation Foundation (WPF) APIs.</span></span>

<span data-ttu-id="1ce2b-182">詳細については、「[.NET Framework 互換モード](../core/porting/third-party-deps.md#net-framework-compatibility-mode)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-182">For more information, see [.NET Framework compatibility mode](../core/porting/third-party-deps.md#net-framework-compatibility-mode).</span></span>

## <a name="net-standard-libraries-and-visual-studio"></a><span data-ttu-id="1ce2b-183">.NET Standard ライブラリと Visual Studio</span><span class="sxs-lookup"><span data-stu-id="1ce2b-183">.NET Standard libraries and Visual Studio</span></span>

<span data-ttu-id="1ce2b-184">Visual Studio で .NET Standard ライブラリを作成するには、Windows の場合 [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019) または Visual Studio 2017 バージョン 15.3 以降、macOS の場合 [Visual Studio for Mac バージョン 7.1](https://visualstudio.microsoft.com/vs/mac/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link) 以降がインストールされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-184">In order to build .NET Standard libraries in Visual Studio, make sure you have [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019) or Visual Studio 2017 version 15.3 or later installed on Windows, or [Visual Studio for Mac version 7.1](https://visualstudio.microsoft.com/vs/mac/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link) or later installed on macOS.</span></span>

<span data-ttu-id="1ce2b-185">プロジェクトで .NET Standard 2.0 ライブラリを使用するだけである場合は、Visual Studio 2015 でこれを行うこともできます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-185">If you only need to consume .NET Standard 2.0 libraries in your projects, you can also do that in Visual Studio 2015.</span></span> <span data-ttu-id="1ce2b-186">ただし、NuGet クライアント 3.6 以降がインストールされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-186">However, you need NuGet client 3.6 or higher installed.</span></span> <span data-ttu-id="1ce2b-187">Visual Studio 2015 用の NuGet クライアントは、[NuGet のダウンロード](https://www.nuget.org/downloads)のページからダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-187">You can download the NuGet client for Visual Studio 2015 from the [NuGet downloads](https://www.nuget.org/downloads) page.</span></span>

## <a name="net-5-and-net-standard"></a><span data-ttu-id="1ce2b-188">.NET 5 と .NET Standard</span><span class="sxs-lookup"><span data-stu-id="1ce2b-188">.NET 5 and .NET Standard</span></span>

<span data-ttu-id="1ce2b-189">.NET 5 は、Microsoft が積極的に開発している .NET の実装です。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-189">.NET 5 is the implementation of .NET that Microsoft is actively developing.</span></span> <span data-ttu-id="1ce2b-190">Windows デスクトップ アプリとクロスプラットフォーム コンソール アプリ、クラウド サービス、Web サイトに使用できる統一された機能と API のセットを備えた単一の製品です。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-190">It's a single product with a uniform set of capabilities and APIs that can be used for Windows desktop apps and cross-platform console apps, cloud services, and websites.</span></span> <span data-ttu-id="1ce2b-191">.NET 5.0 [TFM](frameworks.md) には、次のような幅広いシナリオが反映されています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-191">The .NET 5.0 [TFMs](frameworks.md) reflect this broad range of scenarios:</span></span>

* `net5.0`

  <span data-ttu-id="1ce2b-192">この TFM は、どこでも実行できるコードを対象としています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-192">This TFM is for code that runs everywhere.</span></span> <span data-ttu-id="1ce2b-193">いくつか例外はありますが、クロスプラットフォームで動作するテクノロジだけが含まれています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-193">With a few exceptions, it includes only technologies that work cross-platform.</span></span> <span data-ttu-id="1ce2b-194">.NET 5 コードの場合、`net5.0` によって `netcoreapp` と `netstandard` 両方の TFM が置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-194">For .NET 5 code, `net5.0` replaces both `netcoreapp` and `netstandard` TFMs.</span></span>

* `net5.0-windows`

  <span data-ttu-id="1ce2b-195">これは、`net5.0` によって参照されているすべてのものに OS 固有の機能を追加する [OS 固有の TFM](frameworks.md#net-5-os-specific-tfms) の例です。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-195">This is an example of [OS-specific TFMs](frameworks.md#net-5-os-specific-tfms) that add OS-specific functionality to everything that `net5.0` refers to.</span></span>

### <a name="when-to-target-net50-vs-netstandard"></a><span data-ttu-id="1ce2b-196">net5.0 と netstandard をターゲットにするタイミング</span><span class="sxs-lookup"><span data-stu-id="1ce2b-196">When to target net5.0 vs. netstandard</span></span>

<span data-ttu-id="1ce2b-197">`netstandard` がターゲットの既存のコードの場合は、TFM を `net5.0` に変更する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-197">For existing code that targets `netstandard`, there's no need to change the TFM to `net5.0`.</span></span> <span data-ttu-id="1ce2b-198">.NET 5.0 により、.NET Standard 2.1 以前が実装されています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-198">.NET 5.0 implements .NET Standard 2.1 and earlier.</span></span> <span data-ttu-id="1ce2b-199">.NET Standard から .NET 5.0 にターゲットを変更する唯一の理由は、より多くのランタイム機能、言語機能、または API にアクセスできるようにすることです。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-199">The only reason to retarget from .NET Standard to .NET 5.0 would be to gain access to more runtime features, language features, or APIs.</span></span> <span data-ttu-id="1ce2b-200">たとえば、C# 9 を使用するには、.NET 5.0 をターゲットにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-200">For example, in order to use C# 9, you need to target .NET 5.0.</span></span> <span data-ttu-id="1ce2b-201">.NET 5.0 と .NET Standard をマルチターゲットにして、新しい機能にアクセスしながら、他の .NET 実装でライブラリを使用できるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-201">You can multitarget .NET 5.0 and .NET Standard to get access to newer features and still have your library available to other .NET implementations.</span></span>

<span data-ttu-id="1ce2b-202">.NET 5 用の新しいコードのガイドラインを次に示します。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-202">Here are some guidelines for new code for .NET 5:</span></span>

* <span data-ttu-id="1ce2b-203">アプリのコンポーネント</span><span class="sxs-lookup"><span data-stu-id="1ce2b-203">App components</span></span>

  <span data-ttu-id="1ce2b-204">アプリケーションを複数のコンポーネントに分割するためにライブラリを使用している場合は、`net5.x` をターゲットにすることをお勧めします。`5.x` は、アプリケーションでターゲットにできる最も古い .NET 5 バージョンです。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-204">If you're using libraries to break down an application into several components, we recommend you target `net5.x` where `5.x` is the earliest .NET 5 version that your application can target.</span></span> <span data-ttu-id="1ce2b-205">わかりやすくするために、アプリケーションを構成するすべてのプロジェクトを、同じバージョンの .NET にするのが最善の方法です。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-205">For simplicity, it's best to keep all projects that make up your application on the same version of .NET.</span></span> <span data-ttu-id="1ce2b-206">このようにすると、同じ BCL 機能をどこでも使用できます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-206">Then you can assume the same BCL features everywhere.</span></span>

* <span data-ttu-id="1ce2b-207">再利用可能なライブラリ</span><span class="sxs-lookup"><span data-stu-id="1ce2b-207">Reusable libraries</span></span>

  <span data-ttu-id="1ce2b-208">NuGet で配布する予定の再利用可能なライブラリを構築している場合は、リーチと使用可能な機能セットの間のトレードオフを検討してください。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-208">If you're building reusable libraries that you plan to ship on NuGet, consider the trade-off between reach and available feature set.</span></span> <span data-ttu-id="1ce2b-209">.NET Standard 2.0 は .NET Framework によってサポートされている最新バージョンであるため、非常に大きな機能セットで良好なリーチが提供されます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-209">.NET Standard 2.0 is the latest version that is supported by .NET Framework, so it gives good reach with a fairly large feature set.</span></span> <span data-ttu-id="1ce2b-210">リーチの増加が最小限で、使用可能な機能セットが制限されるため、.NET Standard 1.x をターゲットにすることはお勧めしません。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-210">We don't recommend targeting .NET Standard 1.x, as you'd limit the available feature set for a minimal increase in reach.</span></span>

  <span data-ttu-id="1ce2b-211">.NET Framework をサポートする必要がない場合は、.NET Standard 2.1 または .NET 5 を使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-211">If you don't need to support .NET Framework, you could go with .NET Standard 2.1 or .NET 5.</span></span> <span data-ttu-id="1ce2b-212">.NET Standard 2.1 は使わずに、.NET 5 に直接進むことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-212">We recommend you skip .NET Standard 2.1 and go straight to .NET 5.</span></span> <span data-ttu-id="1ce2b-213">最も広く使用されているライブラリは、最終的に .NET Standard 2.0 と .NET 5 の両方のマルチターゲットになります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-213">Most widely used libraries will end up multi-targeting for both .NET Standard 2.0 and .NET 5.</span></span> <span data-ttu-id="1ce2b-214">.NET Standard 2.0 をサポートすると、最大のリーチになります。一方、.NET 5 をサポートすると、.NET 5 を既に使用している顧客に対して最新のプラットフォーム機能を利用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-214">Supporting .NET Standard 2.0 gives you the most reach, while supporting .NET 5 ensures you can leverage the latest platform features for customers that are already on .NET 5.</span></span>

### <a name="net-standard-problems"></a><span data-ttu-id="1ce2b-215">.NET Standard の問題</span><span class="sxs-lookup"><span data-stu-id="1ce2b-215">.NET Standard problems</span></span>

<span data-ttu-id="1ce2b-216">ここで .NET Standard にあるいくつかの問題を示しておくと、.NET 5 がプラットフォームとワークロード間でコードを共有するための優れた方法である理由を説明するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-216">Here are some problems with .NET Standard that help explain why .NET 5 is the better way to share code across platforms and workloads:</span></span>

- <span data-ttu-id="1ce2b-217">新しい API が追加されるのが遅い</span><span class="sxs-lookup"><span data-stu-id="1ce2b-217">Slowness to add new APIs</span></span>

  <span data-ttu-id="1ce2b-218">.NET Standard は、すべての .NET 実装でサポートする必要がある API セットとして作成されているため、新しい API を追加する提案に対してレビュー プロセスがありました。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-218">.NET Standard was created as an API set that all .NET implementations would have to support, so there was a review process for proposals to add new APIs.</span></span> <span data-ttu-id="1ce2b-219">目標は、現在および将来のすべての .NET プラットフォームで実装できる API のみを標準化することでした。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-219">The goal was to standardize only APIs that could be implemented in all current and future .NET platforms.</span></span> <span data-ttu-id="1ce2b-220">その結果、ある機能が特定のリリースにない場合、Standard のバージョンに追加されるまで数年待たなければならないことがありました。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-220">The result was that if a feature missed a particular release, you might have to wait for a couple of years before it got added to a version of the Standard.</span></span> <span data-ttu-id="1ce2b-221">新しいバージョンの .NET Standard が広くサポートされるようになるまでは、さらに長く待ちました。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-221">Then you'd wait even longer for the new version of .NET Standard to be widely supported.</span></span>

  <span data-ttu-id="1ce2b-222">**.NET 5 での解決策:** コード ベースが共有されているため、機能が実装されるときには、.NET 5 のすべてのアプリとライブラリで既に使用できるようになっています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-222">**Solution in .NET 5:** When a feature is implemented, it's already available for every .NET 5 app and library because the code base is shared.</span></span> <span data-ttu-id="1ce2b-223">また、API の仕様とその実装に違いがないため、.NET Standard の場合よりはるかに早く、新機能を利用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-223">And since there's no difference between the API specification and its implementation, you're able to take advantage of new features much quicker than with .NET Standard.</span></span>

- <span data-ttu-id="1ce2b-224">複雑なバージョン管理</span><span class="sxs-lookup"><span data-stu-id="1ce2b-224">Complex versioning</span></span>

  <span data-ttu-id="1ce2b-225">API の仕様とその実装が分かれているため、API の仕様のバージョンと実装のバージョンの間のマッピングが複雑になります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-225">The separation of the API specification from its implementations results in complex mapping between API specification versions and implementation versions.</span></span> <span data-ttu-id="1ce2b-226">このような複雑さは、この記事で前に示した表と、その解釈方法の説明を見れば明らかです。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-226">This complexity is evident in the table shown earlier in this article and the instructions for how to interpret it.</span></span>

  <span data-ttu-id="1ce2b-227">**.NET 5 での解決策:** .NET 5.x の場合は、API の仕様とその実装は分かれていません。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-227">**Solution in .NET 5:** There's no separation between a .NET 5.x API specification and its implementation.</span></span> <span data-ttu-id="1ce2b-228">その結果、TFM のスキームが簡単になります。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-228">The result is a simplified TFM scheme.</span></span> <span data-ttu-id="1ce2b-229">TFM のプレフィックスは、すべてのワークロードに対して 1 つです。`net5.0` が、ライブラリ、コンソール アプリ、Web アプリに使用されます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-229">There's one TFM prefix for all workloads: `net5.0` is used for libraries, console apps, and web apps.</span></span> <span data-ttu-id="1ce2b-230">唯一のバリエーションは、特定のプラットフォームに対する[プラットフォーム固有の API を指定するサフィックス](frameworks.md#net-5-os-specific-tfms)です (`net5.0-windows` など)。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-230">The only variation is a [suffix that specifies platform-specific APIs](frameworks.md#net-5-os-specific-tfms) for a particular platform, such as `net5.0-windows`.</span></span> <span data-ttu-id="1ce2b-231">このような TFM の名前付け規則のおかげで、特定のアプリで特定のライブラリを使用できるかどうかを簡単に判断できます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-231">Thanks to this TFM naming convention, you can easily tell whether a given app can use a given library.</span></span> <span data-ttu-id="1ce2b-232">.NET Standard のようなバージョン番号対応テーブルは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-232">No version number equivalents table like the one for .NET Standard is needed.</span></span>

- <span data-ttu-id="1ce2b-233">実行時のプラットフォーム非サポート例外</span><span class="sxs-lookup"><span data-stu-id="1ce2b-233">Platform-unsupported exceptions at run time</span></span>

  <span data-ttu-id="1ce2b-234">.NET Standard の場合、プラットフォーム固有の API が公開されます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-234">.NET Standard exposes platform-specific APIs.</span></span> <span data-ttu-id="1ce2b-235">移植できない場合であっても、コードはエラーなしでコンパイルされ、任意のプラットフォームに移植できるように見えます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-235">Your code might compile without errors and appear to be portable to any platform even if it isn't portable.</span></span> <span data-ttu-id="1ce2b-236">特定の API の実装がないプラットフォームで実行すると、実行時エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-236">When it runs on a platform that doesn't have an implementation for a given API, you get run-time errors.</span></span>

  <span data-ttu-id="1ce2b-237">**.NET 5 での解決策:** .NET 5 SDK には、既定で有効になるコード アナライザーが含まれています。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-237">**Solution in .NET 5:** The .NET 5 SDK includes code analyzers that are enabled by default.</span></span> <span data-ttu-id="1ce2b-238">実行しようとしているプラットフォームでサポートされていない API をうっかり使用すると、プラットフォーム互換性アナライザーによって検出されます。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-238">The platform compatibility analyzer detects unintentional use of APIs that aren't supported on the platforms you intend to run on.</span></span> <span data-ttu-id="1ce2b-239">詳細については、「[プラットフォーム互換性アナライザー](analyzers/platform-compat-analyzer.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-239">For more information, see [Platform compatibility analyzer](analyzers/platform-compat-analyzer.md).</span></span>

### <a name="net-standard-not-deprecated"></a><span data-ttu-id="1ce2b-240">.NET Standard は非推奨ではない</span><span class="sxs-lookup"><span data-stu-id="1ce2b-240">.NET Standard not deprecated</span></span>

<span data-ttu-id="1ce2b-241">.NET Standard は、複数の .NET 実装で使用できるライブラリにまだ必要です。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-241">.NET Standard is still needed for libraries that can be used by multiple .NET implementations.</span></span> <span data-ttu-id="1ce2b-242">次のシナリオの場合、.NET Standard をターゲットにすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-242">We recommend you target .NET Standard in the following scenarios:</span></span>

* <span data-ttu-id="1ce2b-243">`netstandard2.0` を使用して、.NET Framework と .NET の他のすべての実装の間でコードを共有する。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-243">Use `netstandard2.0` to share code between .NET Framework and all other implementations of .NET.</span></span>
* <span data-ttu-id="1ce2b-244">`netstandard2.1` を使用して、Mono、Xamarin、.NET Core 3.x の間でコードを共有する。</span><span class="sxs-lookup"><span data-stu-id="1ce2b-244">Use `netstandard2.1` to share code between Mono, Xamarin, and .NET Core 3.x.</span></span>

## <a name="see-also"></a><span data-ttu-id="1ce2b-245">関連項目</span><span class="sxs-lookup"><span data-stu-id="1ce2b-245">See also</span></span>

- [<span data-ttu-id="1ce2b-246">.NET Standard のバージョン (ソース)</span><span class="sxs-lookup"><span data-stu-id="1ce2b-246">.NET Standard versions (source)</span></span>](https://github.com/dotnet/standard/blob/master/docs/versions.md)
- [<span data-ttu-id="1ce2b-247">.NET Standard のバージョン (対話型 UI)</span><span class="sxs-lookup"><span data-stu-id="1ce2b-247">.NET Standard versions (interactive UI)</span></span>](https://dotnet.microsoft.com/platform/dotnet-standard#versions)
- [<span data-ttu-id="1ce2b-248">.NET Standard ライブラリを構築する</span><span class="sxs-lookup"><span data-stu-id="1ce2b-248">Build a .NET Standard library</span></span>](../core/tutorials/library-with-visual-studio.md)
- [<span data-ttu-id="1ce2b-249">クロス プラットフォーム ターゲット</span><span class="sxs-lookup"><span data-stu-id="1ce2b-249">Cross-platform targeting</span></span>](./library-guidance/cross-platform-targeting.md)
