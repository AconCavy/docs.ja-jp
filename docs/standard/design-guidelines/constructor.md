---
title: コンストラクターのデザイン
ms.date: 10/22/2008
ms.technology: dotnet-standard
helpviewer_keywords:
- member design guidelines, constructors
- constructors, design guidelines
- instance constructors
- type constructors
- virtual members
- constructors, types
- parameterless constructors
- static constructors
ms.assetid: b4496afe-5fa7-4bb0-85ca-70b0ef21e6fc
author: KrzysztofCwalina
ms.openlocfilehash: 074aa391b71257584a01171e95da7472354cdc2c
ms.sourcegitcommit: 7f616512044ab7795e32806578e8dc0c6a0e038f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/10/2019
ms.locfileid: "67746779"
---
# <a name="constructor-design"></a>コンストラクターのデザイン
コンス トラクターの 2 種類があります: コンス トラクターとインスタンス コンス トラクターを入力します。  
  
 型コンス トラクターは、静的型を使用する前に、CLR で実行されます。 インスタンス コンス トラクターは、型のインスタンスが作成されるときに実行します。  
  
 型のコンス トラクターは、すべてのパラメーターを受け取ることはできません。 インスタンス コンス トラクターができます。 すべてのパラメーターを使用しないインスタンスのコンス トラクターはパラメーターなしのコンス トラクターとも呼ばれます。  
  
 コンス トラクターは、型のインスタンスを作成する最も自然な方法です。 ほとんどの開発者は検索し、別のファクトリ メソッド) などのインスタンスを作成する方法を検討する前に、コンス トラクターを使用しようとしています。  
  
 **✓ CONSIDER** simple、理想的には、既定コンストラクターを提供します。  
  
 簡単なコンス トラクターがパラメーター数が非常に小さいと、すべてのパラメーターがプリミティブまたは列挙型。 このような単純なコンス トラクターは、フレームワークのユーザビリティを向上させます。  
  
 **✓ CONSIDER** 目的の操作のセマンティクスは、新しいインスタンスの構築に直接マップされない場合、またはコンストラクターのデザイン ガイドラインに従うが不自然にコンストラクターではなく静的ファクトリ メソッドを使用します。  
  
 **✓ DO** 主要なプロパティを設定するためのショートカットとしてコンストラクターのパラメーターを使用します。  
  
 意味的に同じことはありませんで一部のプロパティ セットの後に空のコンス トラクターと複数の引数をコンス トラクターを使用します。  
  
 **✓ DO** コンストラクターのパラメーターを使用して単にプロパティを設定する場合は、コンストラクターのパラメーターとプロパティに同じ名前を使用します。  
  
 このようなパラメーターとプロパティの唯一の違い大文字小文字の区別する必要があります。  
  
 **✓ DO** コンストラクターで作業を最小限に抑える。  
  
 コンス トラクターは、キャプチャ以外処理がコンス トラクターのパラメーターを実行しないでください。 他の処理のコストは、必要になるまで遅延する必要があります。  
  
 **✓ DO** 該当する場合は、インスタンス コンストラクターから例外をスローします。  
  
 **✓ は**このようなコンス トラクターが必要な場合に、クラスのパブリック コンス トラクターを明示的に宣言します。  
  
 多くの言語の型に、コンス トラクターを明示的に宣言しないかどうか (などC#) のパブリック コンス トラクターが自動的に追加します。 (抽象クラスは、保護されたコンス トラクターを取得します)。  
  
 クラスにパラメーター化されたコンス トラクターを追加すると、コンパイラはパラメーターなしのコンス トラクターを追加できなくなります。 これにより、多くの場合、偶発的な重大な変更が原因です。  
  
 **避け x**パラメーターなしのコンス トラクターを構造体で明示的に定義します。  
  
 これにより、配列の作成より速く、パラメーターなしのコンス トラクターが定義されていない場合、配列内のすべてのスロット上で実行することはないためです。 など、C# の場合、多くのコンパイラがこの理由をパラメーターなしのコンス トラクターを持つ構造体を許可しないことに注意してください。  
  
 **X AVOID** コンストラクター内のオブジェクトでの仮想メンバーを呼び出すことです。  
  
 仮想メンバーを呼び出すことにより、大多数の派生型のコンス トラクターが実行されていない完全にまだ場合でも、呼び出される最派生のオーバーライドが発生します。  
  
### <a name="type-constructor-guidelines"></a>型のコンス トラクターのガイドライン  
 **✓ DO** 静的コンストラクターをプライベートに設定します。  
  
 クラスのコンス トラクターとも呼ばれる、静的コンス トラクターは、型の初期化に使用されます。 型の最初のインスタンスが作成されるか、その型の静的メンバーを呼び出す前に、CLR は、静的コンス トラクターを呼び出します。 ユーザーには、静的コンス トラクターが呼び出されたときに制御がありません。 場合は、静的コンス トラクターがプライベートでは、CLR 以外のコードから呼び出すことができます。 コンス トラクターで実行される操作、によって予期しない動作ができます。 C# コンパイラでは、プライベート静的コンス トラクターを強制します。  
  
 **X DO NOT** 静的コンストラクターから例外をスローします。  
  
 型コンス トラクターから例外がスローされた場合、型が現在のアプリケーション ドメインで使用できません。  
  
 **✓ CONSIDER** ランタイムが、明示的に定義された静的コンストラクターを持たない型のパフォーマンスを最適化するために、静的コンストラクターを明示的に使用するのではなく、静的フィールドをインラインを初期化します。  
  
 *Portions © 2005, 2009 Microsoft Corporation.All rights reserved.*  
  
 *Pearson Education, Inc. からのアクセス許可によって了承を得て転載[Framework デザイン ガイドライン。規則、手法、および再利用可能な .NET ライブラリの第 2 版のパターン](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619)Krzysztof Cwalina、Brad 内容では、Microsoft Windows の開発シリーズの一部として、Addison-wesley Professional、2008 年 10 月 22日を公開します。*  
  
## <a name="see-also"></a>関連項目

- [メンバーのデザインのガイドライン](../../../docs/standard/design-guidelines/member.md)
- [フレームワーク デザインのガイドライン](../../../docs/standard/design-guidelines/index.md)
