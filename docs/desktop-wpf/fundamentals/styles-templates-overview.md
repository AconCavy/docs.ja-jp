---
title: スタイルとテンプレート
description: NET コアの Windows プレゼンテーション ファンデーション (WPF) の XAML リソースについて説明します。 スタイルとテーマに関連する XAML リソースの種類を理解する。
author: thraka
ms.author: adegeo
ms.date: 09/09/2019
dev_langs:
- csharp
- vb
ms.openlocfilehash: f845e739ec3cae502d1e4fd6631f987c5364a42e
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/12/2020
ms.locfileid: "81433098"
---
# <a name="styles-and-templates-in-wpf"></a><span data-ttu-id="d3fdb-104">WPF のスタイルとテンプレート</span><span class="sxs-lookup"><span data-stu-id="d3fdb-104">Styles and templates in WPF</span></span>

<span data-ttu-id="d3fdb-105">Windows プレゼンテーション ファンデーション (WPF) のスタイルとテンプレートは、開発者とデザイナーが視覚的に説得力のある効果と製品の一貫した外観を作成できるようにする一連の機能を指します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-105">Windows Presentation Foundation (WPF) styling and templating refer to a suite of features that let developers and designers create visually compelling effects and a consistent appearance for their product.</span></span> <span data-ttu-id="d3fdb-106">アプリの外観をカスタマイズする場合は、アプリ内およびアプリ間で外観のメンテナンスと共有を可能にする強力なスタイルとテンプレート モデルが必要です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-106">When customizing the appearance of an app, you want a strong styling and templating model that enables maintenance and sharing of appearance within and among apps.</span></span> <span data-ttu-id="d3fdb-107">WPF はそのモデルを提供します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-107">WPF provides that model.</span></span>

<span data-ttu-id="d3fdb-108">WPF スタイル モデルのもう 1 つの機能は、プレゼンテーションとロジックの分離です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-108">Another feature of the WPF styling model is the separation of presentation and logic.</span></span> <span data-ttu-id="d3fdb-109">デザイナーは、開発者が C# または Visual Basic を使用してプログラミング ロジックを操作するのと同時に XAML のみを使用して、アプリの外観を操作できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-109">Designers can work on the appearance of an app by using only XAML at the same time that developers work on the programming logic by using C# or Visual Basic.</span></span>

<span data-ttu-id="d3fdb-110">この概要では、アプリのスタイル設定とテンプレートの側面に焦点を当て、データ バインディングの概念については説明しません。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-110">This overview focuses on the styling and templating aspects of the app and doesn't discuss any data-binding concepts.</span></span> <span data-ttu-id="d3fdb-111">データ バインディングの詳細については、「[データ バインディングの概要](../data/data-binding-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-111">For information about data binding, see [Data Binding Overview](../data/data-binding-overview.md).</span></span>

<span data-ttu-id="d3fdb-112">スタイルとテンプレートを再利用できるようにするリソースを理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-112">It's important to understand resources, which are what enable styles and templates to be reused.</span></span> <span data-ttu-id="d3fdb-113">リソースの詳細については、「[XAML Resources](xaml-resources-define.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-113">For more information about resources, see [XAML Resources](xaml-resources-define.md).</span></span>

[!INCLUDE [desktop guide under construction](../../../includes/desktop-guide-preview-note.md)]

## <a name="sample"></a><span data-ttu-id="d3fdb-114">サンプル</span><span class="sxs-lookup"><span data-stu-id="d3fdb-114">Sample</span></span>

<span data-ttu-id="d3fdb-115">この概要で提供されるサンプル コードは、次の図に示す[単純な写真参照アプリケーション](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating)に基づいています。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-115">The sample code provided in this overview is based on a [simple photo browsing application](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating) shown in the following illustration.</span></span>

<span data-ttu-id="d3fdb-116">![スタイル設定された ListView](./media/styles-and-templates-overview/stylingintro-triggers.png "StylingIntro_triggers")</span><span class="sxs-lookup"><span data-stu-id="d3fdb-116">![Styled ListView](./media/styles-and-templates-overview/stylingintro-triggers.png "StylingIntro_triggers")</span></span>

<span data-ttu-id="d3fdb-117">この単純な写真のサンプルは、スタイルとテンプレートを使用して、視覚的に説得力のあるユーザー エクスペリエンスを作成します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-117">This simple photo sample uses styling and templating to create a visually compelling user experience.</span></span> <span data-ttu-id="d3fdb-118">サンプルには 2<xref:System.Windows.Controls.TextBlock>つの要素<xref:System.Windows.Controls.ListBox>と、イメージのリストにバインドされたコントロールがあります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-118">The sample has two <xref:System.Windows.Controls.TextBlock> elements and a <xref:System.Windows.Controls.ListBox> control that is bound to a list of images.</span></span>

<span data-ttu-id="d3fdb-119">完全なサンプルについては、「[Introduction to Styling and Templating Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-119">For the complete sample, see [Introduction to Styling and Templating Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating).</span></span>

## <a name="styles"></a><span data-ttu-id="d3fdb-120">スタイル</span><span class="sxs-lookup"><span data-stu-id="d3fdb-120">Styles</span></span>

<span data-ttu-id="d3fdb-121">プロパティ<xref:System.Windows.Style>値のセットを複数の要素に適用する便利な方法と考えることができます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-121">You can think of a <xref:System.Windows.Style> as a convenient way to apply a set of property values to multiple elements.</span></span> <span data-ttu-id="d3fdb-122"><xref:System.Windows.FrameworkElement>スタイルは、 または<xref:System.Windows.FrameworkContentElement>など<xref:System.Windows.Window>から派生する任意の要素に対して<xref:System.Windows.Controls.Button>使用できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-122">You can use a style on any element that derives from <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> such as a <xref:System.Windows.Window> or a <xref:System.Windows.Controls.Button>.</span></span>

<span data-ttu-id="d3fdb-123">スタイルを宣言する最も一般的な方法は、XAML`Resources`ファイルのセクション内のリソースとして使用することです。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-123">The most common way to declare a style is as a resource in the `Resources` section in a XAML file.</span></span> <span data-ttu-id="d3fdb-124">スタイルはリソースであるため、すべてのリソースに適用されるのと同じスコープルールに従います。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-124">Because styles are resources, they obey the same scoping rules that apply to all resources.</span></span> <span data-ttu-id="d3fdb-125">簡単に言うと、スタイルを宣言する場所は、スタイルを適用できる場所に影響します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-125">Put simply, where you declare a style affects where the style can be applied.</span></span> <span data-ttu-id="d3fdb-126">たとえば、アプリ定義 XAML ファイルのルート要素でスタイルを宣言すると、アプリ内の任意の場所でスタイルを使用できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-126">For example, if you declare the style in the root element of your app definition XAML file, the style can be used anywhere in your app.</span></span>

<span data-ttu-id="d3fdb-127">たとえば、次の XAML コードでは、1 つの`TextBlock`スタイルが自動的`TextBlock`にすべての要素に適用され、もう 1 つは明示的に参照する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-127">For example, the following XAML code declares two styles for a `TextBlock`, one automatically applied to all `TextBlock` elements, and another that must be explicitly referenced.</span></span>

[!code-xaml[SnippetDefaultTextBlockStyleBasedOn](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window2.xaml#SnippetDefaultTextBlockStyleBasedOn)]

<span data-ttu-id="d3fdb-128">上で宣言したスタイルの例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-128">Here is an example of the styles declared above being used.</span></span>

[!code-xaml[SnippetTextBlocksExplicit](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window2.xaml#SnippetTextBlocksExplicit)]

![スタイル付きのテキストブロック](./media/styles-and-templates-overview/stylingintro-textblocks.png)

<span data-ttu-id="d3fdb-130">詳細については、「[コントロールのスタイルを作成する」を](styles-templates-create-apply-style.md)参照してください。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-130">For more information, see [Create a style for a control](styles-templates-create-apply-style.md).</span></span>

## <a name="controltemplates"></a><span data-ttu-id="d3fdb-131">ControlTemplate</span><span class="sxs-lookup"><span data-stu-id="d3fdb-131">ControlTemplates</span></span>

<span data-ttu-id="d3fdb-132">WPF では、<xref:System.Windows.Controls.ControlTemplate>コントロールの コントロールの外観が定義されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-132">In WPF, the <xref:System.Windows.Controls.ControlTemplate> of a control defines the appearance of the control.</span></span> <span data-ttu-id="d3fdb-133">新しい<xref:System.Windows.Controls.ControlTemplate>コントロールを定義してコントロールに割り当てることで、コントロールの構造と外観を変更できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-133">You can change the structure and appearance of a control by defining a new <xref:System.Windows.Controls.ControlTemplate> and assigning it to a control.</span></span> <span data-ttu-id="d3fdb-134">多くの場合、テンプレートは十分な柔軟性を提供するため、独自のカスタム コントロールを作成する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-134">In many cases, templates give you enough flexibility so that you do not have to write your own custom controls.</span></span>

<span data-ttu-id="d3fdb-135">各コントロールには[、Control.Template](xref:System.Windows.Controls.Control.Template)プロパティに割り当てられた既定のテンプレートがあります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-135">Each control has a default template assigned to the [Control.Template](xref:System.Windows.Controls.Control.Template) property.</span></span> <span data-ttu-id="d3fdb-136">テンプレートは、コントロールのビジュアル プレゼンテーションとコントロールの機能を結び付けます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-136">The template connects the visual presentation of the control with the control's capabilities.</span></span> <span data-ttu-id="d3fdb-137">XAML でテンプレートを定義するため、コードを記述せずにコントロールの外観を変更できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-137">Because you define a template in XAML, you can change the control's appearance without writing any code.</span></span> <span data-ttu-id="d3fdb-138">各テンプレートは、 など、特定のコントロール用に<xref:System.Windows.Controls.Button>設計されています。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-138">Each template is designed for a specific control, such as a <xref:System.Windows.Controls.Button>.</span></span>

<span data-ttu-id="d3fdb-139">通常、テンプレートは XAML ファイルのセクション`Resources`でリソースとして宣言します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-139">Commonly you declare a template as a resource on the `Resources` section of a XAML file.</span></span> <span data-ttu-id="d3fdb-140">すべてのリソースと同様に、スコープルールが適用されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-140">As with all resources, scoping rules apply.</span></span>

<span data-ttu-id="d3fdb-141">コントロール テンプレートは、スタイルよりも多くの関係があります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-141">Control templates are a lot more involved than a style.</span></span> <span data-ttu-id="d3fdb-142">これは、コントロール テンプレートがコントロール全体の外観を書き換える一方で、スタイルは単に既存のコントロールにプロパティの変更を適用するためです。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-142">This is because the control template rewrites the visual appearance of the entire control, while a style simply applies property changes to the existing control.</span></span> <span data-ttu-id="d3fdb-143">ただし[、Control.Template](xref:System.Windows.Controls.Control.Template)プロパティを設定してコントロールのテンプレートを適用するため、スタイルを使用してテンプレートを定義または設定できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-143">However, since the template of a control is applied by setting the [Control.Template](xref:System.Windows.Controls.Control.Template) property, you can use a style to define or set a template.</span></span>

<span data-ttu-id="d3fdb-144">通常、デザイナーでは既存のテンプレートのコピーを作成して変更できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-144">Designers generally allow you to create a copy of an existing template and modify it.</span></span> <span data-ttu-id="d3fdb-145">たとえば、Visual Studio WPF デザイナーでコントロールを`CheckBox`選択し、右クリックして [**テンプレート** > の編集] を**選択します。**</span><span class="sxs-lookup"><span data-stu-id="d3fdb-145">For example, in the Visual Studio WPF designer, select a `CheckBox` control, and then right-click and select **Edit template** > **Create a copy**.</span></span> <span data-ttu-id="d3fdb-146">このコマンドは、*テンプレートを定義するスタイルを*生成します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-146">This command generates a *style that defines a template*.</span></span>

```xaml
<Style x:Key="CheckBoxStyle1" TargetType="{x:Type CheckBox}">
    <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual1}"/>
    <Setter Property="Background" Value="{StaticResource OptionMark.Static.Background1}"/>
    <Setter Property="BorderBrush" Value="{StaticResource OptionMark.Static.Border1}"/>
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type CheckBox}">
                <Grid x:Name="templateRoot" Background="Transparent" SnapsToDevicePixels="True">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Border x:Name="checkBoxBorder" Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="1" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                        <Grid x:Name="markGrid">
                            <Path x:Name="optionMark" Data="F1 M 9.97498,1.22334L 4.6983,9.09834L 4.52164,9.09834L 0,5.19331L 1.27664,3.52165L 4.255,6.08833L 8.33331,1.52588e-005L 9.97498,1.22334 Z " Fill="{StaticResource OptionMark.Static.Glyph1}" Margin="1" Opacity="0" Stretch="None"/>
                            <Rectangle x:Name="indeterminateMark" Fill="{StaticResource OptionMark.Static.Glyph1}" Margin="2" Opacity="0"/>
                        </Grid>
                    </Border>
                    <ContentPresenter x:Name="contentPresenter" Grid.Column="1" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasContent" Value="true">
                        <Setter Property="FocusVisualStyle" Value="{StaticResource OptionMarkFocusVisual1}"/>
                        <Setter Property="Padding" Value="4,-1,0,0"/>

... content removed to save space ...
```

<span data-ttu-id="d3fdb-147">テンプレートのコピーを編集すると、テンプレートの動作を理解できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-147">Editing a copy of a template is a great way to learn how templates work.</span></span> <span data-ttu-id="d3fdb-148">新しい空のテンプレートを作成する代わりに、コピーを編集し、ビジュアル プレゼンテーションのいくつかの側面を変更する方が簡単です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-148">Instead of creating a new blank template, it's easier to edit a copy and change a few aspects of the visual presentation.</span></span>

<span data-ttu-id="d3fdb-149">例については、「[コントロールのテンプレートを作成する](../themes/how-to-create-apply-template.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-149">For an example, see [Create a template for a control](../themes/how-to-create-apply-template.md).</span></span>

### <a name="templatebinding"></a><span data-ttu-id="d3fdb-150">TemplateBinding</span><span class="sxs-lookup"><span data-stu-id="d3fdb-150">TemplateBinding</span></span>

<span data-ttu-id="d3fdb-151">前のセクションで定義したテンプレート リソースで[TemplateBinding マークアップ拡張機能](../../framework/wpf/advanced/templatebinding-markup-extension.md)が使用されていることがわかります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-151">You may have noticed that the template resource defined in the previous section uses the [TemplateBinding Markup Extension](../../framework/wpf/advanced/templatebinding-markup-extension.md).</span></span> <span data-ttu-id="d3fdb-152">A`TemplateBinding`は、テンプレート シナリオ用のバインディングの最適化された形式で、 で`{Binding RelativeSource={RelativeSource TemplatedParent}}`作成されたバインディングに似ています。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-152">A `TemplateBinding` is an optimized form of a binding for template scenarios, analogous to a binding constructed with `{Binding RelativeSource={RelativeSource TemplatedParent}}`.</span></span> <span data-ttu-id="d3fdb-153">`TemplateBinding`は、テンプレートの一部をコントロールのプロパティにバインドする場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-153">`TemplateBinding` is useful for binding parts of the template to properties of the control.</span></span> <span data-ttu-id="d3fdb-154">たとえば、各コントロールにはプロパティがあります<xref:System.Windows.Controls.Control.BorderThickness>。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-154">For example, each control has a <xref:System.Windows.Controls.Control.BorderThickness> property.</span></span> <span data-ttu-id="d3fdb-155">テンプレート内`TemplateBinding`のどの要素がこのコントロール設定の影響を受けるかを管理するには、 を使用します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-155">Use a `TemplateBinding` to manage which element in the template is affected by this control setting.</span></span>

### <a name="contentcontrol-and-itemscontrol"></a><span data-ttu-id="d3fdb-156">コンテンツ コントロールとアイテム コントロール</span><span class="sxs-lookup"><span data-stu-id="d3fdb-156">ContentControl and ItemsControl</span></span>

<span data-ttu-id="d3fdb-157">の<xref:System.Windows.Controls.ContentPresenter>で<xref:System.Windows.Controls.ControlTemplate><xref:System.Windows.Controls.ContentControl>a が宣言されている場合<xref:System.Windows.Controls.ContentPresenter>、 は、<xref:System.Windows.Controls.ContentControl.ContentTemplate%2A>プロパティ<xref:System.Windows.Controls.ContentControl.Content%2A>と プロパティに自動的にバインドされます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-157">If a <xref:System.Windows.Controls.ContentPresenter> is declared in the <xref:System.Windows.Controls.ControlTemplate> of a <xref:System.Windows.Controls.ContentControl>, the <xref:System.Windows.Controls.ContentPresenter> will automatically bind to the <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> and <xref:System.Windows.Controls.ContentControl.Content%2A> properties.</span></span> <span data-ttu-id="d3fdb-158">同様に、<xref:System.Windows.Controls.ItemsPresenter>のに含まれる<xref:System.Windows.Controls.ControlTemplate>の<xref:System.Windows.Controls.ItemsControl>は、 プロパティと<xref:System.Windows.Controls.ItemsControl.ItemTemplate%2A><xref:System.Windows.Controls.ItemsControl.Items%2A>プロパティに自動的にバインドされます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-158">Likewise, an <xref:System.Windows.Controls.ItemsPresenter> that is in the <xref:System.Windows.Controls.ControlTemplate> of an <xref:System.Windows.Controls.ItemsControl> will automatically bind to the <xref:System.Windows.Controls.ItemsControl.ItemTemplate%2A> and <xref:System.Windows.Controls.ItemsControl.Items%2A> properties.</span></span>

## <a name="datatemplates"></a><span data-ttu-id="d3fdb-159">データテンプレート</span><span class="sxs-lookup"><span data-stu-id="d3fdb-159">DataTemplates</span></span>

<span data-ttu-id="d3fdb-160">このサンプル アプリでは、写真の<xref:System.Windows.Controls.ListBox>一覧にバインドされたコントロールがあります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-160">In this sample app, there is a <xref:System.Windows.Controls.ListBox> control that is bound to a list of photos.</span></span>

[!code-xaml[ListBox](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window3.xaml#SnippetListBox)]

<span data-ttu-id="d3fdb-161">これは<xref:System.Windows.Controls.ListBox>現在、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-161">This <xref:System.Windows.Controls.ListBox> currently looks like the following.</span></span>

<span data-ttu-id="d3fdb-162">![テンプレート適用前の ListBox](./media/styles-and-templates-overview/stylingintro-listboxbefore.png "StylingIntro_ListBoxBefore")</span><span class="sxs-lookup"><span data-stu-id="d3fdb-162">![ListBox before applying template](./media/styles-and-templates-overview/stylingintro-listboxbefore.png "StylingIntro_ListBoxBefore")</span></span>

<span data-ttu-id="d3fdb-163">ほとんどのコントロールはいくつかの型のコンテンツを持ち、そのコンテンツは多くの場合バインディング先のデータから取得されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-163">Most controls have some type of content, and that content often comes from data that you are binding to.</span></span> <span data-ttu-id="d3fdb-164">このサンプルでは、データは写真のリストです。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-164">In this sample, the data is the list of photos.</span></span> <span data-ttu-id="d3fdb-165">WPF では、 を<xref:System.Windows.DataTemplate>使用してデータの視覚的表現を定義します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-165">In WPF, you use a <xref:System.Windows.DataTemplate> to define the visual representation of data.</span></span> <span data-ttu-id="d3fdb-166">基本的に、レンダリングされたアプリで<xref:System.Windows.DataTemplate>データがどのようなものに表示されるかは決まります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-166">Basically, what you put into a <xref:System.Windows.DataTemplate> determines what the data looks like in the rendered app.</span></span>

<span data-ttu-id="d3fdb-167">サンプル アプリでは、各カスタム`Photo`オブジェクトには`Source`、イメージのファイル パスを指定する string 型のプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-167">In our sample app, each custom `Photo` object has a `Source` property of type string that specifies the file path of the image.</span></span> <span data-ttu-id="d3fdb-168">現在のところ、写真オブジェクトは、ファイルのパスとして表示されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-168">Currently, the photo objects appear as file paths.</span></span>

[!code-csharp[PhotoClass](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Photo.cs#PhotoClass)]
[!code-vb[PhotoClass](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/vb/Photo.vb#PhotoClass)]

<span data-ttu-id="d3fdb-169">写真を画像として表示するには、リソースとして を<xref:System.Windows.DataTemplate>作成します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-169">For the photos to appear as images, you create a <xref:System.Windows.DataTemplate> as a resource.</span></span>

[!code-xaml[DataTemplate](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window4.xaml#SnippetDataTemplate)]

<span data-ttu-id="d3fdb-170">プロパティは、 <xref:System.Windows.DataTemplate.DataType%2A> <xref:System.Windows.Style.TargetType%2A><xref:System.Windows.Style>のプロパティと似ています。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-170">Notice that the <xref:System.Windows.DataTemplate.DataType%2A> property is similar to the <xref:System.Windows.Style.TargetType%2A> property of the <xref:System.Windows.Style>.</span></span> <span data-ttu-id="d3fdb-171">がリソース<xref:System.Windows.DataTemplate>セクションにある場合、型にプロパティを<xref:System.Windows.DataTemplate.DataType%2A>指定し、 を`x:Key`省略すると、その型<xref:System.Windows.DataTemplate>が表示されるたびに が適用されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-171">If your <xref:System.Windows.DataTemplate> is in the resources section, when you specify the <xref:System.Windows.DataTemplate.DataType%2A> property to a type and omit an `x:Key`, the <xref:System.Windows.DataTemplate> is applied whenever that type appears.</span></span> <span data-ttu-id="d3fdb-172">を<xref:System.Windows.DataTemplate>使用して を割り当て`x:Key`、プロパティやプロパティなどの型を`StaticResource`取得<xref:System.Windows.DataTemplate>するプロパティとして設定する<xref:System.Windows.Controls.ItemsControl.ItemTemplate%2A>オプションは常にあります。 <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A></span><span class="sxs-lookup"><span data-stu-id="d3fdb-172">You always have the option to assign the <xref:System.Windows.DataTemplate> with an `x:Key` and then set it as a `StaticResource` for properties that take <xref:System.Windows.DataTemplate> types, such as the <xref:System.Windows.Controls.ItemsControl.ItemTemplate%2A> property or the <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> property.</span></span>

<span data-ttu-id="d3fdb-173">基本的に、上<xref:System.Windows.DataTemplate>の例では、`Photo`オブジェクトがある場合は常に、 内に. <xref:System.Windows.Controls.Image> <xref:System.Windows.Controls.Border></span><span class="sxs-lookup"><span data-stu-id="d3fdb-173">Essentially, the <xref:System.Windows.DataTemplate> in the above example defines that whenever there is a `Photo` object, it should appear as an <xref:System.Windows.Controls.Image> within a <xref:System.Windows.Controls.Border>.</span></span> <span data-ttu-id="d3fdb-174">これで<xref:System.Windows.DataTemplate>、私たちのアプリは今このように見えます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-174">With this <xref:System.Windows.DataTemplate>, our app now looks like this.</span></span>

<span data-ttu-id="d3fdb-175">![フォト イメージ](./media/styles-and-templates-overview/stylingintro-photosasimages.png "StylingIntro_PhotosAsImages")</span><span class="sxs-lookup"><span data-stu-id="d3fdb-175">![Photo image](./media/styles-and-templates-overview/stylingintro-photosasimages.png "StylingIntro_PhotosAsImages")</span></span>

<span data-ttu-id="d3fdb-176">データ テンプレートのモデルでは、その他の機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-176">The data templating model provides other features.</span></span> <span data-ttu-id="d3fdb-177">たとえば<xref:System.Windows.Controls.HeaderedItemsControl>、<xref:System.Windows.Controls.Menu>や などの型を使用して、他のコレクションを含むコレクション データを<xref:System.Windows.Controls.TreeView>表示する場合は、<xref:System.Windows.HierarchicalDataTemplate>が表示されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-177">For example, if you are displaying collection data that contains other collections using a <xref:System.Windows.Controls.HeaderedItemsControl> type such as a <xref:System.Windows.Controls.Menu> or a <xref:System.Windows.Controls.TreeView>, there is the <xref:System.Windows.HierarchicalDataTemplate>.</span></span> <span data-ttu-id="d3fdb-178">もう 1 つのデータ テンプレート<xref:System.Windows.Controls.DataTemplateSelector>機能は、 で、カスタム<xref:System.Windows.DataTemplate>ロジックに基づいて を使用する を選択できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-178">Another data templating feature is the <xref:System.Windows.Controls.DataTemplateSelector>, which allows you to choose a <xref:System.Windows.DataTemplate> to use based on custom logic.</span></span> <span data-ttu-id="d3fdb-179">詳細については、「[Data Templating Overview](../../framework/wpf/data/data-templating-overview.md)」を参照してください。ここでは、さまざまなデータ テンプレート機能を詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-179">For more information, see [Data Templating Overview](../../framework/wpf/data/data-templating-overview.md), which provides a more in-depth discussion of the different data templating features.</span></span>

## <a name="triggers"></a><span data-ttu-id="d3fdb-180">トリガー</span><span class="sxs-lookup"><span data-stu-id="d3fdb-180">Triggers</span></span>

<span data-ttu-id="d3fdb-181">トリガーは、プロパティ値が変更されたときまたはイベントが発生したときに、プロパティを設定するかまたはアニメーションなどのアクションを開始します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-181">A trigger sets properties or starts actions, such as an animation, when a property value changes or when an event is raised.</span></span> <span data-ttu-id="d3fdb-182"><xref:System.Windows.Style>、、<xref:System.Windows.Controls.ControlTemplate>および<xref:System.Windows.DataTemplate>すべてのプロパティには`Triggers`、一連のトリガを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-182"><xref:System.Windows.Style>, <xref:System.Windows.Controls.ControlTemplate>, and <xref:System.Windows.DataTemplate> all have a `Triggers` property that can contain a set of triggers.</span></span> <span data-ttu-id="d3fdb-183">トリガーには、いくつかの種類があります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-183">There are several types of triggers.</span></span>

### <a name="propertytriggers"></a><span data-ttu-id="d3fdb-184">プロパティトリガー</span><span class="sxs-lookup"><span data-stu-id="d3fdb-184">PropertyTriggers</span></span>

<span data-ttu-id="d3fdb-185">プロパティ<xref:System.Windows.Trigger>値を設定する、またはプロパティの値に基づいてアクションを開始する場合は、プロパティ トリガーと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-185">A <xref:System.Windows.Trigger> that sets property values or starts actions based on the value of a property is called a property trigger.</span></span>

<span data-ttu-id="d3fdb-186">プロパティ トリガーの使用方法を示すために、選択されていない場合<xref:System.Windows.Controls.ListBoxItem>は、各部分を透明にすることができます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-186">To demonstrate how to use property triggers, you can make each <xref:System.Windows.Controls.ListBoxItem> partially transparent unless it is selected.</span></span> <span data-ttu-id="d3fdb-187">次のスタイルは、<xref:System.Windows.UIElement.Opacity%2A>の<xref:System.Windows.Controls.ListBoxItem>値を`0.5`に設定します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-187">The following style sets the <xref:System.Windows.UIElement.Opacity%2A> value of a <xref:System.Windows.Controls.ListBoxItem> to `0.5`.</span></span> <span data-ttu-id="d3fdb-188">ただし、<xref:System.Windows.Controls.ListBoxItem.IsSelected%2A>プロパティが`true`の場合は<xref:System.Windows.UIElement.Opacity%2A>、 が`1.0`に設定されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-188">When the <xref:System.Windows.Controls.ListBoxItem.IsSelected%2A> property is `true`, however, the <xref:System.Windows.UIElement.Opacity%2A> is set to `1.0`.</span></span>

[!code-xaml[PropertyTrigger](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window5.xaml#SnippetPropertyTrigger)]

<span data-ttu-id="d3fdb-189">この例では、<xref:System.Windows.Trigger>を使用してプロパティ値を設定しますが<xref:System.Windows.Trigger>、トリガーがアクション<xref:System.Windows.TriggerBase.EnterActions%2A>を<xref:System.Windows.TriggerBase.ExitActions%2A>実行できるようにする プロパティと プロパティもクラスに含まれています。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-189">This example uses a <xref:System.Windows.Trigger> to set a property value, but note that the <xref:System.Windows.Trigger> class also has the <xref:System.Windows.TriggerBase.EnterActions%2A> and <xref:System.Windows.TriggerBase.ExitActions%2A> properties that enable a trigger to perform actions.</span></span>

<span data-ttu-id="d3fdb-190">の<xref:System.Windows.FrameworkElement.MaxHeight%2A>プロパティ<xref:System.Windows.Controls.ListBoxItem>が に設定されていることに`75`注意してください。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-190">Notice that the <xref:System.Windows.FrameworkElement.MaxHeight%2A> property of the <xref:System.Windows.Controls.ListBoxItem> is set to `75`.</span></span> <span data-ttu-id="d3fdb-191">次の図では、3 番目の項目が選択された項目です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-191">In the following illustration, the third item is the selected item.</span></span>

<span data-ttu-id="d3fdb-192">![スタイル設定された ListView](./media/styles-and-templates-overview/stylingintro-triggers.png "StylingIntro_triggers")</span><span class="sxs-lookup"><span data-stu-id="d3fdb-192">![Styled ListView](./media/styles-and-templates-overview/stylingintro-triggers.png "StylingIntro_triggers")</span></span>

### <a name="eventtriggers-and-storyboards"></a><span data-ttu-id="d3fdb-193">Eventtrigger とストーリー ボード</span><span class="sxs-lookup"><span data-stu-id="d3fdb-193">EventTriggers and Storyboards</span></span>

<span data-ttu-id="d3fdb-194">別の種類のトリガは<xref:System.Windows.EventTrigger>、イベントの発生に基づいて一連のアクションを開始する です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-194">Another type of trigger is the <xref:System.Windows.EventTrigger>, which starts a set of actions based on the occurrence of an event.</span></span> <span data-ttu-id="d3fdb-195">たとえば、次<xref:System.Windows.EventTrigger>のオブジェクトは、マウス ポインターが<xref:System.Windows.Controls.ListBoxItem>を入力したときに、<xref:System.Windows.FrameworkElement.MaxHeight%2A>プロパティが`90``0.2`2 番目の期間の値にアニメーション化することを指定します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-195">For example, the following <xref:System.Windows.EventTrigger> objects specify that when the mouse pointer enters the <xref:System.Windows.Controls.ListBoxItem>, the <xref:System.Windows.FrameworkElement.MaxHeight%2A> property animates to a value of `90` over a `0.2` second period.</span></span> <span data-ttu-id="d3fdb-196">この項目からマウスを遠ざけると、`1` 秒間、元の値に戻ります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-196">When the mouse moves away from the item, the property returns to the original value over a period of `1` second.</span></span> <span data-ttu-id="d3fdb-197"><xref:System.Windows.ContentElement.MouseLeave>アニメーションの<xref:System.Windows.Media.Animation.DoubleAnimation.To%2A>値を指定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-197">Note how it is not necessary to specify a <xref:System.Windows.Media.Animation.DoubleAnimation.To%2A> value for the <xref:System.Windows.ContentElement.MouseLeave> animation.</span></span> <span data-ttu-id="d3fdb-198">これは、アニメーションが元の値を追跡できるからです。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-198">This is because the animation is able to keep track of the original value.</span></span>

[!code-xaml[StyleEventTriggers](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window6.xaml#SnippetStyleEventTriggers)]

<span data-ttu-id="d3fdb-199">詳細については、「[ストーリーボードの概要](../../framework/wpf/graphics-multimedia/storyboards-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-199">For more information, see the [Storyboards overview](../../framework/wpf/graphics-multimedia/storyboards-overview.md).</span></span>

<span data-ttu-id="d3fdb-200">次の図では、マウスが 3 番目の項目を指しています。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-200">In the following illustration, the mouse is pointing to the third item.</span></span>

<span data-ttu-id="d3fdb-201">![スタイリングサンプルスクリーンショット](./media/styles-and-templates-overview/stylingintro-eventtriggers.png "StylingIntro_EventTriggers")</span><span class="sxs-lookup"><span data-stu-id="d3fdb-201">![Styling sample screenshot](./media/styles-and-templates-overview/stylingintro-eventtriggers.png "StylingIntro_EventTriggers")</span></span>

### <a name="multitriggers-datatriggers-and-multidatatriggers"></a><span data-ttu-id="d3fdb-202">MultiTriggers、DataTriggers、および MultiDataTriggers</span><span class="sxs-lookup"><span data-stu-id="d3fdb-202">MultiTriggers, DataTriggers, and MultiDataTriggers</span></span>

<span data-ttu-id="d3fdb-203">および<xref:System.Windows.EventTrigger>のほか<xref:System.Windows.Trigger>に、他の種類のトリガーもあります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-203">In addition to <xref:System.Windows.Trigger> and <xref:System.Windows.EventTrigger>, there are other types of triggers.</span></span> <span data-ttu-id="d3fdb-204"><xref:System.Windows.MultiTrigger>では、複数の条件に基づいてプロパティ値を設定できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-204"><xref:System.Windows.MultiTrigger> allows you to set property values based on multiple conditions.</span></span> <span data-ttu-id="d3fdb-205">条件の<xref:System.Windows.DataTrigger>プロパティ<xref:System.Windows.MultiDataTrigger>がデータバインドである場合に使用します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-205">You use <xref:System.Windows.DataTrigger> and <xref:System.Windows.MultiDataTrigger> when the property of your condition is data-bound.</span></span>

## <a name="visual-states"></a><span data-ttu-id="d3fdb-206">ビジュアル状態</span><span class="sxs-lookup"><span data-stu-id="d3fdb-206">Visual States</span></span>

<span data-ttu-id="d3fdb-207">コントロールは常に特定の**状態**です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-207">Controls are always in a specific **state**.</span></span> <span data-ttu-id="d3fdb-208">たとえば、コントロールの表面上をマウスが移動すると、コントロールは一般的な状態であると見なされます`MouseOver`。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-208">For example, when the mouse moves over the surface of a control, the control is considered to be in a common state of `MouseOver`.</span></span> <span data-ttu-id="d3fdb-209">特定の状態のないコントロールは、共通`Normal`の状態であると見なされます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-209">A control without a specific state is considered to be in the common `Normal` state.</span></span> <span data-ttu-id="d3fdb-210">状態はグループに分割され、前述の状態は状態グループ`CommonStates`の一部です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-210">States are broken into groups, and the previously mentioned states are part of the state group `CommonStates`.</span></span> <span data-ttu-id="d3fdb-211">ほとんどのコントロールには、 と`CommonStates`の`FocusStates`2 つの状態グループがあります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-211">Most controls have two state groups: `CommonStates` and `FocusStates`.</span></span> <span data-ttu-id="d3fdb-212">コントロールに適用される各状態グループのうち、コントロールは常に各グループの 1 つの状態`CommonStates.MouseOver`(`FocusStates.Unfocused`および など) です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-212">Of each state group applied to a control, a control is always in one state of each group, such as `CommonStates.MouseOver` and `FocusStates.Unfocused`.</span></span> <span data-ttu-id="d3fdb-213">ただし、コントロールを同じグループ内の 2 つの異なる状態に`CommonStates.Normal`することはできません。 `CommonStates.Disabled`</span><span class="sxs-lookup"><span data-stu-id="d3fdb-213">However, a control can't be in two different states within the same group, such as `CommonStates.Normal` and `CommonStates.Disabled`.</span></span> <span data-ttu-id="d3fdb-214">ほとんどのコントロールが認識して使用する状態のテーブルを次に示します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-214">Here is a table of states most controls recognize and use.</span></span>

| <span data-ttu-id="d3fdb-215">VisualState 名</span><span class="sxs-lookup"><span data-stu-id="d3fdb-215">VisualState Name</span></span> | <span data-ttu-id="d3fdb-216">VisualStateGroup 名</span><span class="sxs-lookup"><span data-stu-id="d3fdb-216">VisualStateGroup Name</span></span> | <span data-ttu-id="d3fdb-217">説明</span><span class="sxs-lookup"><span data-stu-id="d3fdb-217">Description</span></span> |
| ---------------- | --------------------- | ----------- |
| <span data-ttu-id="d3fdb-218">Normal</span><span class="sxs-lookup"><span data-stu-id="d3fdb-218">Normal</span></span>           | <span data-ttu-id="d3fdb-219">CommonStates</span><span class="sxs-lookup"><span data-stu-id="d3fdb-219">CommonStates</span></span>          | <span data-ttu-id="d3fdb-220">既定の状態です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-220">The default state.</span></span> |
| <span data-ttu-id="d3fdb-221">MouseOver</span><span class="sxs-lookup"><span data-stu-id="d3fdb-221">MouseOver</span></span>        | <span data-ttu-id="d3fdb-222">CommonStates</span><span class="sxs-lookup"><span data-stu-id="d3fdb-222">CommonStates</span></span>          | <span data-ttu-id="d3fdb-223">マウス ポインターがコントロール上に配置されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-223">The mouse pointer is positioned over the control.</span></span> |
| <span data-ttu-id="d3fdb-224">押されている</span><span class="sxs-lookup"><span data-stu-id="d3fdb-224">Pressed</span></span>          | <span data-ttu-id="d3fdb-225">CommonStates</span><span class="sxs-lookup"><span data-stu-id="d3fdb-225">CommonStates</span></span>          | <span data-ttu-id="d3fdb-226">コントロールが押されています。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-226">The control is pressed.</span></span> |
| <span data-ttu-id="d3fdb-227">無効</span><span class="sxs-lookup"><span data-stu-id="d3fdb-227">Disabled</span></span>         | <span data-ttu-id="d3fdb-228">CommonStates</span><span class="sxs-lookup"><span data-stu-id="d3fdb-228">CommonStates</span></span>          | <span data-ttu-id="d3fdb-229">コントロールが無効になっています。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-229">The control is disabled.</span></span> |
| <span data-ttu-id="d3fdb-230">フォーカスされている</span><span class="sxs-lookup"><span data-stu-id="d3fdb-230">Focused</span></span>          | <span data-ttu-id="d3fdb-231">FocusStates</span><span class="sxs-lookup"><span data-stu-id="d3fdb-231">FocusStates</span></span>           | <span data-ttu-id="d3fdb-232">コントロールにフォーカスがあります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-232">The control has focus.</span></span> |
| <span data-ttu-id="d3fdb-233">フォーカスされていない</span><span class="sxs-lookup"><span data-stu-id="d3fdb-233">Unfocused</span></span>        | <span data-ttu-id="d3fdb-234">FocusStates</span><span class="sxs-lookup"><span data-stu-id="d3fdb-234">FocusStates</span></span>           | <span data-ttu-id="d3fdb-235">コントロールにフォーカスがありません。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-235">The control does not have focus.</span></span> |

<span data-ttu-id="d3fdb-236">コントロール テンプレートの<xref:System.Windows.VisualStateManager?displayProperty=fullName>ルート要素で を定義すると、コントロールが特定の状態になったときにアニメーションをトリガーできます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-236">By defining a <xref:System.Windows.VisualStateManager?displayProperty=fullName> on the root element of a control template, you can trigger animations when a control enters a specific state.</span></span> <span data-ttu-id="d3fdb-237">は`VisualStateManager`、どの組み合わせ<xref:System.Windows.VisualStateGroup>と<xref:System.Windows.VisualState>を見るかを宣言します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-237">The `VisualStateManager` declares which combinations of <xref:System.Windows.VisualStateGroup> and <xref:System.Windows.VisualState> to watch.</span></span> <span data-ttu-id="d3fdb-238">コントロールが監視状態になると、 で定義されたアニメーション`VisaulStateManager`が開始されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-238">When the control enters a watched state, the animation defined by the `VisaulStateManager` is started.</span></span>

<span data-ttu-id="d3fdb-239">たとえば、次の XAML コードは`CommonStates.MouseOver`、という名前`backgroundElement`の要素の塗りつぶしの色をアニメーション化する状態を監視します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-239">For example, the following XAML code watches the `CommonStates.MouseOver` state to animate the fill color of the element named `backgroundElement`.</span></span> <span data-ttu-id="d3fdb-240">コントロールが`CommonStates.Normal`状態に戻ると、名前の付いた`backgroundElement`要素の塗りつぶしの色が復元されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-240">When the control returns to the `CommonStates.Normal` state, the fill color of the element named `backgroundElement` is restored.</span></span>

```xaml
<ControlTemplate x:Key="roundbutton" TargetType="Button">
    <Grid>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup Name="CommonStates">
                <VisualState Name="Normal">
                    <ColorAnimation Storyboard.TargetName="backgroundElement"
                                    Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                    To="{TemplateBinding Background}"
                                    Duration="0:0:0.3"/>
                </VisualState>
                <VisualState Name="MouseOver">
                    <ColorAnimation Storyboard.TargetName="backgroundElement"
                                    Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                    To="Yellow"
                                    Duration="0:0:0.3"/>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        ...
```

<span data-ttu-id="d3fdb-241">ストーリーボードの詳細については、「ストーリーボードの[概要](../../framework/wpf/graphics-multimedia/storyboards-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-241">For more information about storyboards, see [Storyboards Overview](../../framework/wpf/graphics-multimedia/storyboards-overview.md).</span></span>

## <a name="shared-resources-and-themes"></a><span data-ttu-id="d3fdb-242">共有リソースとテーマ</span><span class="sxs-lookup"><span data-stu-id="d3fdb-242">Shared resources and themes</span></span>

<span data-ttu-id="d3fdb-243">一般的な WPF アプリには、アプリ全体に適用される複数の UI リソースが含まれている場合があります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-243">A typical WPF app might have multiple UI resources that are applied throughout the app.</span></span> <span data-ttu-id="d3fdb-244">このリソースのセットをまとめて、アプリのテーマと見なすことができます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-244">Collectively, this set of resources can be considered the theme for the app.</span></span> <span data-ttu-id="d3fdb-245">WPFWPF では、クラスとしてカプセル化されたリソース ディクショナリを使用して、UI リソースをテーマ<xref:System.Windows.ResourceDictionary>としてパッケージ化できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-245">WPF provides support for packaging UI resources as a theme by using a resource dictionary that is encapsulated as the <xref:System.Windows.ResourceDictionary> class.</span></span>

<span data-ttu-id="d3fdb-246">WPF テーマは、WPF が任意の要素のビジュアルをカスタマイズするために公開するスタイルとテンプレートのメカニズムを使用して定義されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-246">WPF themes are defined by using the styling and templating mechanism that WPF exposes for customizing the visuals of any element.</span></span>

<span data-ttu-id="d3fdb-247">WPF テーマ リソースは、埋め込みリソース ディクショナリに格納されます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-247">WPF theme resources are stored in embedded resource dictionaries.</span></span> <span data-ttu-id="d3fdb-248">これらのリソース ディクショナリは署名されたアセンブリ内に埋め込む必要があり、コード自体と同じアセンブリまたはサイド バイ サイド アセンブリで埋め込むことができます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-248">These resource dictionaries must be embedded within a signed assembly, and can either be embedded in the same assembly as the code itself or in a side-by-side assembly.</span></span> <span data-ttu-id="d3fdb-249">WPF コントロールを含むアセンブリである PresentationFramework.dll の場合、テーマ リソースは一連のサイド バイ サイド アセンブリに含まれます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-249">For PresentationFramework.dll, the assembly that contains WPF controls, theme resources are in a series of side-by-side assemblies.</span></span>

<span data-ttu-id="d3fdb-250">テーマは、要素のスタイルを検索するときに最後に検索する場所になります。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-250">The theme becomes the last place to look when searching for the style of an element.</span></span> <span data-ttu-id="d3fdb-251">通常、検索は要素ツリーを参照して適切なリソースを検索してから、アプリ リソース コレクションを調べ、最後にシステムにクエリを実行します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-251">Typically, the search will begin by walking up the element tree searching for an appropriate resource, then look in the app resource collection and finally query the system.</span></span> <span data-ttu-id="d3fdb-252">これにより、アプリ開発者は、テーマに到達する前に、ツリーまたはアプリ レベルで任意のオブジェクトのスタイルを再定義できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-252">This gives app developers a chance to redefine the style for any object at the tree or app level before reaching the theme.</span></span>

<span data-ttu-id="d3fdb-253">リソース ディクショナリは、複数のアプリでテーマを再利用できる個別のファイルとして定義できます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-253">You can define resource dictionaries as individual files that enable you to reuse a theme across multiple apps.</span></span> <span data-ttu-id="d3fdb-254">また、同じ種類のリソースだが値が異なる複数のリソース ディクショナリを定義して、交換できるテーマを作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-254">You can also create swappable themes by defining multiple resource dictionaries that provide the same types of resources but with different values.</span></span> <span data-ttu-id="d3fdb-255">アプリ レベルでこれらのスタイルやその他のリソースを再定義することは、アプリをスキニングするための推奨される方法です。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-255">Redefining these styles or other resources at the app level is the recommended approach for skinning an app.</span></span>

<span data-ttu-id="d3fdb-256">スタイルやテンプレートなどのリソースをアプリ間で共有するには、XAML ファイルを作成し、<xref:System.Windows.ResourceDictionary>`shared.xaml`ファイルへの参照を含む を定義します。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-256">To share a set of resources, including styles and templates, across apps, you can create a XAML file and define a <xref:System.Windows.ResourceDictionary> that includes reference to a `shared.xaml` file.</span></span>

```xaml
<ResourceDictionary.MergedDictionaries>
  <ResourceDictionary Source="Shared.xaml" />
</ResourceDictionary.MergedDictionaries>
```

<span data-ttu-id="d3fdb-257">の共有は、スタイル`shared.xaml`リソースとブラシ リソース<xref:System.Windows.ResourceDictionary>のセットを含む を定義する自体が定義されており、アプリ内のコントロールの外観を一貫させることができます。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-257">It is the sharing of `shared.xaml`, which itself defines a <xref:System.Windows.ResourceDictionary> that contains a set of style and brush resources, that enables the controls in an app to have a consistent look.</span></span>

<span data-ttu-id="d3fdb-258">詳細については、「[マージされたリソース ディクショナリ](../../framework/wpf/advanced/merged-resource-dictionaries.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-258">For more information, see [Merged resource dictionaries](../../framework/wpf/advanced/merged-resource-dictionaries.md).</span></span>

<span data-ttu-id="d3fdb-259">カスタム コントロールのテーマを作成する場合は、「[コントロールオーサリングの概要](../../framework/wpf/controls/control-authoring-overview.md#defining-resources-at-the-theme-level)」の **「テーマ レベルでのリソースの定義**」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="d3fdb-259">If you are creating a theme for your custom control, see the **Defining resources at the theme level** section of the [Control authoring overview](../../framework/wpf/controls/control-authoring-overview.md#defining-resources-at-the-theme-level).</span></span>

## <a name="see-also"></a><span data-ttu-id="d3fdb-260">関連項目</span><span class="sxs-lookup"><span data-stu-id="d3fdb-260">See also</span></span>

- [<span data-ttu-id="d3fdb-261">WPF におけるパッケージの URI</span><span class="sxs-lookup"><span data-stu-id="d3fdb-261">Pack URIs in WPF</span></span>](../../framework/wpf/app-development/pack-uris-in-wpf.md)
- [<span data-ttu-id="d3fdb-262">方法: ControlTemplate によって生成された要素を検索する</span><span class="sxs-lookup"><span data-stu-id="d3fdb-262">How to: Find ControlTemplate-Generated Elements</span></span>](../../framework/wpf/controls/how-to-find-controltemplate-generated-elements.md)
- [<span data-ttu-id="d3fdb-263">データテンプレート生成要素の検索</span><span class="sxs-lookup"><span data-stu-id="d3fdb-263">Find DataTemplate-Generated Elements</span></span>](../../framework/wpf/data/how-to-find-datatemplate-generated-elements.md)
