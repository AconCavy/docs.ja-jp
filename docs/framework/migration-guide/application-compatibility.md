---
title: .NET Framework のアプリケーションの互換性
ms.date: 05/19/2017
helpviewer_keywords:
- application compatibility
- .NET Framework application compatibility
- .NET Framework changes
ms.assetid: c4ba3ff2-fe59-4c5d-9e0b-86bba3cd865c
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 154640499e99767f73a148c6980e6a2a4cfbce2f
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/28/2019
ms.locfileid: "64623787"
---
# <a name="application-compatibility-in-the-net-framework"></a>.NET Framework のアプリケーションの互換性

## <a name="introduction"></a>はじめに
.NET の各リリースにおいて互換性は非常に重要な目標です。 各バージョンが付加的な場合は互換性が確保され、以前のバージョンも引き続き動作します。 一方、以前の機能に変更が生じた場合 (パフォーマンスの向上、セキュリティに関する問題への対処、またはバグの修正を目的として)、既存のコードまたは既存のアプリケーションを以降のバージョンで実行すると互換性に問題が発生する可能性があります。 .NET Framework では、変更の再ターゲットとランタイムの変更点を認識します。 変更の再ターゲットは、.NET Framework の特定のバージョンをターゲットとしているもののそれ以降のバージョンで実行されるアプリケーションに影響します。 ランタイムの変更点は、特定のバージョンで実行されるすべてのアプリケーションに影響します。

各アプリは .NET Framework の特定のバージョンをターゲットとします。バージョンは次の方法で指定することができます。

* Visual Studio でターゲット フレームワークを定義する。
* プロジェクト ファイルでターゲット フレームワークを指定する。
* <xref:System.Runtime.Versioning.TargetFrameworkAttribute> をソース コードに適用する。

ターゲットに指定されたバージョンより新しいバージョンでアプリが実行されると、.NET Framework は後方互換動作によって、ターゲットに指定されている古いバージョンを模倣します。 つまり、アプリは、Framework の新しいバージョンで実行されていても、古いバージョンで実行されているように機能します。 .NET Framework のバージョン間の互換性の問題の多くは、この後方互換モデルを通して対応されます。 アプリケーションがターゲットとする .NET Framework のバージョンは、コードが実行されているアプリケーション ドメインのエントリ アセンブリのターゲット バージョンによって決まります。 そのアプリケーション ドメインに読み込まれたすべての追加アセンブリは、その .NET Framework バージョンをターゲットとします。 たとえば、実行可能ファイルの場合、実行可能ファイルのターゲットとなるフレームワークは、その AppDomain 内のすべてのアセンブリが実行される互換モードになります。

## <a name="runtime-changes"></a>ランタイムの変更

ランタイムの問題とは、コンピューターに新しいランタイムを配置し前と同じバイナリを実行したが動作が異なっている場合に発生する問題です。 バイナリが .NET Framework 4.0 向けにコンパイルされている場合、そのバイナリは .NET Framework 4.5 以降のバージョンでは .NET Framework 4.0 互換モードで実行されます。 4.5 に影響する変更の多くは、4.0 向けにコンパイルされたバイナリには影響しません。 これは、AppDomain に固有のものであり、入力アセンブリの設定内容によって異なります。

## <a name="retargeting-changes"></a>変更の再ターゲット

再ターゲットの問題とは、4.0 をターゲットにしていたアセンブリが今度は 4.5 をターゲットにするように設定されたときに発生するものです。 この場合、アセンブリは新しい機能を選択するようになるので、古い機能との互換性の問題が発生する可能性があります。 繰り返しますが、これは入力アセンブリによって異なります。したがって、アセンブリを使用するコンソール アプリ、またはアセンブリを参照する Web サイトが該当します。

## <a name="net-compatibility-diagnostics"></a>.NET 互換性診断

.NET 互換性診断は、.NET Framework のバージョン間のアプリケーション互換性問題の識別に役立つ Roslyn を使用したアナライザーです。 この一覧には、使用可能なすべてのアナライザーが含まれますが、特定の移行に適用されるのは、その一部分のみです。 アナライザーは、計画的な移行に該当する問題と表面上の問題にすぎないものを判断します。

各問題には、次の情報が含まれます。

- 以前のバージョンからの変更点の説明。

- 変更が顧客に与える影響と、バージョン間で互換性を保つための回避策があるかどうかの説明。

- 変更の重要性の評価。 アプリケーション互換性問題は、次のように分類されます。

    |   |   |
    |---|---|
    |Major|多数のアプリに影響するか、コードの大幅な変更を必要とする重大な変更。|
    |マイナー|少数のアプリに影響するか、コードにわずかな変更を加える必要がある変更。|
    |エッジ ケース|非常に限られた一般的でないシナリオでアプリに影響を与える変更。|
    |透明|アプリケーションの開発者やユーザーには大きな影響を及ぼさない変更。|

- バージョンは、フレームワークで変更が最初に適用されたバージョンを示します。 変更によっては、特定のバージョンで導入され、それ以降のバージョンで元に戻されるものがあります。そのバージョンも同様に示されます。

- 変更の種類：

    |   |   |
    |---|---|
    |再ターゲット中|変更は、新しいバージョンの .NET Framework 向けに再コンパイルされるアプリに影響します。|
    |ランタイム|変更は、以前のバージョンの .NET Framework 向けだが、その後のバージョンでも実行する既存のアプリに影響します。|

- 影響を受ける API (ある場合)。

- 使用可能な診断の ID

## <a name="usage"></a>使用法
開始するには、以下の中から互換性の変更の種類を選択します。

* [変更の再ターゲット](./retargeting/index.md)
* [ランタイムの変更点](./runtime/index.md)

## <a name="see-also"></a>関連項目

- [バージョンおよび依存関係](../../../docs/framework/migration-guide/versions-and-dependencies.md)
- [新機能](../../../docs/framework/whats-new/index.md)
- [クラス ライブラリの互換性のために残されている機能](../../../docs/framework/whats-new/whats-obsolete.md)
