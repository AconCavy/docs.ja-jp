---
title: コントロールのフォーカスのスタイルと FocusVisualStyle
ms.date: 03/30/2017
helpviewer_keywords:
- keyboard focus [WPF]
- focus [WPF], visual styling
- styles [WPF], focus visual style
ms.assetid: 786ac576-011b-4d72-913b-558deccb9b35
ms.openlocfilehash: fda7ed12d232af5a7cfb8eb43cbb09eb793da171
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/12/2020
ms.locfileid: "79141200"
---
# <a name="styling-for-focus-in-controls-and-focusvisualstyle"></a><span data-ttu-id="cfa59-102">コントロールのフォーカスのスタイルと FocusVisualStyle</span><span class="sxs-lookup"><span data-stu-id="cfa59-102">Styling for Focus in Controls, and FocusVisualStyle</span></span>
[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]<span data-ttu-id="cfa59-103">には、キーボード フォーカスを受け取ったときにコントロールの外観を変更するための 2 つの並列機構が用意されています。</span><span class="sxs-lookup"><span data-stu-id="cfa59-103">provides two parallel mechanisms for changing the visual appearance of a control when it receives keyboard focus.</span></span> <span data-ttu-id="cfa59-104">1 つ目のメカニズムは、コントロールに適用されるスタイルや<xref:System.Windows.UIElement.IsKeyboardFocused%2A>テンプレート内などのプロパティにプロパティ セッターを使用する方法です。</span><span class="sxs-lookup"><span data-stu-id="cfa59-104">The first mechanism is to use property setters for properties such as <xref:System.Windows.UIElement.IsKeyboardFocused%2A> within the style or template that is applied to the control.</span></span> <span data-ttu-id="cfa59-105">2 番目のメカニズムは、プロパティの値として別のスタイル<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>を提供することです。"フォーカスの表示スタイル" は、コントロールの上に描画される装飾用の個別のビジュアル ツリーを作成します。</span><span class="sxs-lookup"><span data-stu-id="cfa59-105">The second mechanism is to provide a separate style as the value of the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property; the "focus visual style" creates a separate visual tree for an adorner that draws on top of the control, rather than changing the visual tree of the control or other UI element by replacing it.</span></span> <span data-ttu-id="cfa59-106">ここでは、これらの各メカニズムが適切なシナリオについて説明します。</span><span class="sxs-lookup"><span data-stu-id="cfa59-106">This topic discusses the scenarios where each of these mechanisms is appropriate.</span></span>  

<a name="Purpose"></a>
## <a name="the-purpose-of-focus-visual-style"></a><span data-ttu-id="cfa59-107">フォーカス表示スタイルの目的</span><span class="sxs-lookup"><span data-stu-id="cfa59-107">The Purpose of Focus Visual Style</span></span>  
 <span data-ttu-id="cfa59-108">フォーカス表示スタイル機能は、UI 要素へのキーボード ナビゲーションに基づいてユーザーの視覚的なフィードバックを紹介するための一般的な "オブジェクト モデル" を提供します。</span><span class="sxs-lookup"><span data-stu-id="cfa59-108">The focus visual style feature provides a common "object model" for introducing visual user feedback based on keyboard navigation to any UI element.</span></span> <span data-ttu-id="cfa59-109">これは、コントロールに新しいテンプレートを適用したり、特定のテンプレート構成を知らなくても可能です。</span><span class="sxs-lookup"><span data-stu-id="cfa59-109">This is possible without applying a new template to the control, or knowing the specific template composition.</span></span>  
  
 <span data-ttu-id="cfa59-110">ただし、フォーカス表示スタイル機能はコントロール テンプレートを知らなくても機能するため、フォーカス表示スタイルを使用してコントロールに表示できる視覚的フィードバックは必ずしも制限されます。</span><span class="sxs-lookup"><span data-stu-id="cfa59-110">However, precisely because the focus visual style feature works without knowing the control templates, the visual feedback that can be displayed for a control using a focus visual style is necessarily limited.</span></span> <span data-ttu-id="cfa59-111">この機能が実際に行うことは、テンプレートを通じてコントロールのレンダリングによって作成されたビジュアル ツリーの上に別のビジュアル ツリー (装飾) をオーバーレイすることです。</span><span class="sxs-lookup"><span data-stu-id="cfa59-111">What the feature actually does is to overlay a different visual tree (an adorner) on top of the visual tree as created by a control's rendering through its template.</span></span> <span data-ttu-id="cfa59-112">この別のビジュアル ツリーは、プロパティを塗りつぶす<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>スタイルを使用して定義します。</span><span class="sxs-lookup"><span data-stu-id="cfa59-112">You define this separate visual tree using a style that fills the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property.</span></span>  
  
<a name="Default"></a>
## <a name="default-focus-visual-style-behavior"></a><span data-ttu-id="cfa59-113">既定のフォーカス表示スタイルの動作</span><span class="sxs-lookup"><span data-stu-id="cfa59-113">Default Focus Visual Style Behavior</span></span>  
 <span data-ttu-id="cfa59-114">フォーカス表示スタイルは、キーボードによってフォーカスアクションが開始された場合にのみ機能します。</span><span class="sxs-lookup"><span data-stu-id="cfa59-114">Focus visual styles act only when the focus action was initiated by the keyboard.</span></span> <span data-ttu-id="cfa59-115">マウス操作やプログラムによるフォーカスの変更は、フォーカス表示スタイルのモードを無効にします。</span><span class="sxs-lookup"><span data-stu-id="cfa59-115">Any mouse action or programmatic focus change disables the mode for focus visual styles.</span></span> <span data-ttu-id="cfa59-116">フォーカス モードの違いについては、「[フォーカスの概要](focus-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cfa59-116">For more information about the distinctions between focus modes, see [Focus Overview](focus-overview.md).</span></span>  
  
 <span data-ttu-id="cfa59-117">コントロールのテーマには、テーマ内のすべてのコントロールのフォーカス表示スタイルとなる既定のフォーカス表示スタイルの動作が含まれます。</span><span class="sxs-lookup"><span data-stu-id="cfa59-117">The themes for controls include a default focus visual style behavior that becomes the focus visual style for all controls in the theme.</span></span> <span data-ttu-id="cfa59-118">このテーマ スタイルは、静的キー<xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>の値で識別されます。</span><span class="sxs-lookup"><span data-stu-id="cfa59-118">This theme style is identified by the value of the static key <xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>.</span></span> <span data-ttu-id="cfa59-119">アプリケーション レベルで独自のフォーカス表示スタイルを宣言すると、テーマからこの既定のスタイルの動作が置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="cfa59-119">When you declare your own focus visual style at the application level, you replace this default style behavior from the themes.</span></span> <span data-ttu-id="cfa59-120">または、テーマ全体を定義する場合は、同じキーを使用して、テーマ全体の既定の動作のスタイルを定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cfa59-120">Alternatively, if you define the entire theme, then you should use this same key to define the style for the default behavior for your entire theme.</span></span>  
  
 <span data-ttu-id="cfa59-121">テーマでは、既定のフォーカス表示スタイルは一般的に非常に単純です。</span><span class="sxs-lookup"><span data-stu-id="cfa59-121">In the themes, the default focus visual style is generally very simple.</span></span> <span data-ttu-id="cfa59-122">大まかな近似値を次に示します。</span><span class="sxs-lookup"><span data-stu-id="cfa59-122">The following is a rough approximation:</span></span>  
  
```xaml  
<Style x:Key="{x:Static SystemParameters.FocusVisualStyleKey}">  
  <Setter Property="Control.Template">  
    <Setter.Value>  
      <ControlTemplate>  
        <Rectangle StrokeThickness="1"  
          Stroke="Black"  
          StrokeDashArray="1 2"  
          SnapsToDevicePixels="true"/>  
      </ControlTemplate>  
    </Setter.Value>  
  </Setter>  
</Style>  
```  
  
<a name="When"></a>
## <a name="when-to-use-focus-visual-styles"></a><span data-ttu-id="cfa59-123">フォーカス表示スタイルを使用する場合</span><span class="sxs-lookup"><span data-stu-id="cfa59-123">When to Use Focus Visual Styles</span></span>  
 <span data-ttu-id="cfa59-124">概念的には、コントロールに適用されるフォーカス表示スタイルの外観は、コントロール間で一貫性のあるものにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="cfa59-124">Conceptually, the appearance of focus visual styles applied to controls should be coherent from control to control.</span></span> <span data-ttu-id="cfa59-125">一貫性を確保する 1 つの方法は、テーマ全体を構成する場合にのみフォーカス表示スタイルを変更することです。コントロール。</span><span class="sxs-lookup"><span data-stu-id="cfa59-125">One way to ensure coherence is to change the focus visual style only if you are composing an entire theme, where each control that is defined in the theme gets either the very same focus visual style, or some variation of a style that is visually related from control to control.</span></span> <span data-ttu-id="cfa59-126">または、ページまたは UI 内のすべてのキーボード フォーカス可能な要素のスタイルを同じスタイル (または類似のスタイル) を使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="cfa59-126">Alternatively, you might use the same style (or similar styles) to style every keyboard-focusable element on a page or in a UI.</span></span>  
  
 <span data-ttu-id="cfa59-127">テーマ<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>の一部ではない個々のコントロール スタイルに対して設定することは、フォーカス表示スタイルの使用目的ではありません。</span><span class="sxs-lookup"><span data-stu-id="cfa59-127">Setting <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> on individual control styles that are not part of a theme is not the intended usage of focus visual styles.</span></span> <span data-ttu-id="cfa59-128">これは、コントロール間の表示動作が一貫していないため、キーボード フォーカスに関するユーザー エクスペリエンスが混乱する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="cfa59-128">This is because an inconsistent visual behavior between controls can lead to a confusing user experience regarding keyboard focus.</span></span> <span data-ttu-id="cfa59-129">テーマ全体で意図的に一貫性のないキーボード フォーカスに対するコントロール固有の動作を意図している場合は、 や などの<xref:System.Windows.UIElement.IsFocused%2A>個々の入力状態プロパティに対して、トリガをスタイルで使用する<xref:System.Windows.UIElement.IsKeyboardFocused%2A>方がはるかに優れた方法です。</span><span class="sxs-lookup"><span data-stu-id="cfa59-129">If you are intending control-specific behaviors for keyboard focus that are deliberately not coherent across a theme, a much better approach is to use triggers in styles for individual input state properties, such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocused%2A>.</span></span>  
  
 <span data-ttu-id="cfa59-130">フォーカス表示スタイルは、キーボード フォーカス専用に機能します。</span><span class="sxs-lookup"><span data-stu-id="cfa59-130">Focus visual styles act exclusively for keyboard focus.</span></span> <span data-ttu-id="cfa59-131">そのため、フォーカス表示スタイルはアクセシビリティ機能の一種です。</span><span class="sxs-lookup"><span data-stu-id="cfa59-131">As such, focus visual styles are a type of accessibility feature.</span></span> <span data-ttu-id="cfa59-132">マウス、キーボード、プログラムのいずれを使用しても、フォーカスの種類に対する UI の変更が必要な場合は、フォーカス表示スタイルを使用<xref:System.Windows.UIElement.IsFocused%2A>しないでください。 <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A></span><span class="sxs-lookup"><span data-stu-id="cfa59-132">If you want UI changes for any type of focus, whether via mouse, keyboard, or programmatically, then you should not use focus visual styles, and should instead use setters and triggers in styles or templates that are working from the value of general focus properties such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>.</span></span>  
  
<a name="How"></a>
## <a name="how-to-create-a-focus-visual-style"></a><span data-ttu-id="cfa59-133">フォーカス表示スタイルを作成する方法</span><span class="sxs-lookup"><span data-stu-id="cfa59-133">How to Create a Focus Visual Style</span></span>  
 <span data-ttu-id="cfa59-134">フォーカス表示スタイルに対して作成するスタイルは、 の<xref:System.Windows.Style.TargetType%2A><xref:System.Windows.Controls.Control>スタイルを持つ必要があります。</span><span class="sxs-lookup"><span data-stu-id="cfa59-134">The style you create for a focus visual style should always have the <xref:System.Windows.Style.TargetType%2A> of <xref:System.Windows.Controls.Control>.</span></span> <span data-ttu-id="cfa59-135">スタイルは主に<xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="cfa59-135">The style should consist mainly of a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="cfa59-136">フォーカス表示スタイルが に割り当てられる型としてターゲット型を指定しないでください<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>。</span><span class="sxs-lookup"><span data-stu-id="cfa59-136">You do not specify the target type to be the type where the focus visual style is assigned to the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>.</span></span>  
  
 <span data-ttu-id="cfa59-137">ターゲットの型は常に<xref:System.Windows.Controls.Control>ので、すべてのコントロールに共通するプロパティを使用してスタイルを設定する必要<xref:System.Windows.Controls.Control>があります (クラスとその基本クラスのプロパティを使用)。</span><span class="sxs-lookup"><span data-stu-id="cfa59-137">Because the target type is always <xref:System.Windows.Controls.Control>, you must style by using properties that are common to all controls (using properties of the <xref:System.Windows.Controls.Control> class and its base classes).</span></span> <span data-ttu-id="cfa59-138">UI 要素のオーバーレイとして適切に機能し、コントロールの機能領域を隠さないテンプレートを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cfa59-138">You should create a template that will properly function as an overlay to a UI element and that will not obscure functional areas of the control.</span></span> <span data-ttu-id="cfa59-139">これは通常、視覚的なフィードバックがコントロールの余白の外側に表示されるか、フォーカス表示スタイルが適用されるコントロールのヒット テストをブロックしない一時的または控えめな効果として表示されることを意味します。</span><span class="sxs-lookup"><span data-stu-id="cfa59-139">Generally, this means that the visual feedback should appear outside the control margins, or as temporary or unobtrusive effects that will not block the hit testing on the control where the focus visual style is applied.</span></span> <span data-ttu-id="cfa59-140">オーバーレイ テンプレートのサイズと位置を決定するのに役立つ、テンプレート バインドで使用できるプロパティには、 <xref:System.Windows.FrameworkElement.ActualHeight%2A> <xref:System.Windows.FrameworkElement.ActualWidth%2A>、 <xref:System.Windows.FrameworkElement.Margin%2A>、<xref:System.Windows.Controls.Control.Padding%2A>および が含まれます。</span><span class="sxs-lookup"><span data-stu-id="cfa59-140">Properties that you can use in template binding that are useful for determining sizing and positioning of your overlay template include <xref:System.Windows.FrameworkElement.ActualHeight%2A>, <xref:System.Windows.FrameworkElement.ActualWidth%2A>, <xref:System.Windows.FrameworkElement.Margin%2A>, and <xref:System.Windows.Controls.Control.Padding%2A>.</span></span>  
  
<a name="Alternatives"></a>
## <a name="alternatives-to-using-a-focus-visual-style"></a><span data-ttu-id="cfa59-141">フォーカス表示スタイルを使用する代わりに</span><span class="sxs-lookup"><span data-stu-id="cfa59-141">Alternatives to Using a Focus Visual Style</span></span>  
 <span data-ttu-id="cfa59-142">フォーカス表示スタイルを使用することが適切でない状況では、単一のコントロールのスタイルを設定するだけか、コントロール テンプレートをより詳細に制御する必要があるため、ビジュアルを作成できる他の多くのアクセス可能なプロパティとテクニックがあります。フォーカスの変更に応じて動作します。</span><span class="sxs-lookup"><span data-stu-id="cfa59-142">For situations where using a focus visual style is not appropriate, either because you are only styling single controls or because you want greater control over the control template, there are many other accessible properties and techniques that can create visual behavior in response to changes in focus.</span></span>  
  
 <span data-ttu-id="cfa59-143">トリガー、セッター、およびイベントセッターについては、[すべて「スタイル設定とテンプレート](../../../desktop-wpf/fundamentals/styles-templates-overview.md)」で詳しく説明しています。</span><span class="sxs-lookup"><span data-stu-id="cfa59-143">Triggers, setters, and event setters are all discussed in detail in [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span></span> <span data-ttu-id="cfa59-144">ルーティング イベントの処理については、「[ルーティング イベントの概要](routed-events-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cfa59-144">Routed event handling is discussed in [Routed Events Overview](routed-events-overview.md).</span></span>  
  
### <a name="iskeyboardfocused"></a><span data-ttu-id="cfa59-145">フォーカスを絞った</span><span class="sxs-lookup"><span data-stu-id="cfa59-145">IsKeyboardFocused</span></span>  
 <span data-ttu-id="cfa59-146">特にキーボード フォーカスに関心がある場合は<xref:System.Windows.UIElement.IsKeyboardFocused%2A>、依存関係プロパティをプロパティ<xref:System.Windows.Trigger>に使用できます。</span><span class="sxs-lookup"><span data-stu-id="cfa59-146">If you are specifically interested in keyboard focus, the <xref:System.Windows.UIElement.IsKeyboardFocused%2A> dependency property can be used for a property <xref:System.Windows.Trigger>.</span></span> <span data-ttu-id="cfa59-147">スタイルまたはテンプレートのプロパティ トリガーは、単一のコントロールに対して非常に特別なキーボード フォーカス動作を定義する場合に、他のコントロールのキーボード フォーカスの動作と視覚的に一致しない場合に、より適切な手法です。</span><span class="sxs-lookup"><span data-stu-id="cfa59-147">A property trigger in either a style or template is a more appropriate technique for defining a keyboard focus behavior that is very specifically for a single control, and which might not visually match the keyboard focus behavior for other controls.</span></span>  
  
 <span data-ttu-id="cfa59-148">もう 1 つの<xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>同様の依存関係プロパティは、 を使用して、キーボード フォーカスがコンポジティング内またはコントロールの機能領域内にある場合に使用するのが適切な場合があります。</span><span class="sxs-lookup"><span data-stu-id="cfa59-148">Another similar dependency property is <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>, which might be appropriate to use if you want to visually call out that keyboard focus is somewhere within compositing or within the functional area of the control.</span></span> <span data-ttu-id="cfa59-149">例えば、複数のコントロールを<xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>グループ化するパネルが、そのパネル内の個々の要素に対してより正確にフォーカスされている場合でも、異なる表示方法で表示されるようにトリガーを配置できます。</span><span class="sxs-lookup"><span data-stu-id="cfa59-149">For example, you might place an <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> trigger such that a panel that groups several controls appears differently, even though keyboard focus might more precisely be on an individual element within that panel.</span></span>  
  
 <span data-ttu-id="cfa59-150">イベント<xref:System.Windows.UIElement.GotKeyboardFocus>と<xref:System.Windows.UIElement.LostKeyboardFocus>(プレビューと同等のイベント) を使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="cfa59-150">You can also use the events <xref:System.Windows.UIElement.GotKeyboardFocus> and <xref:System.Windows.UIElement.LostKeyboardFocus> (as well as their Preview equivalents).</span></span> <span data-ttu-id="cfa59-151">これらのイベントは、の基礎として使用することも、<xref:System.Windows.EventSetter>分離コード内のイベントのハンドラーを記述することもできます。</span><span class="sxs-lookup"><span data-stu-id="cfa59-151">You can use these events as the basis for an <xref:System.Windows.EventSetter>, or you can write handlers for the events in code-behind.</span></span>  
  
### <a name="other-focus-properties"></a><span data-ttu-id="cfa59-152">その他のフォーカス プロパティ</span><span class="sxs-lookup"><span data-stu-id="cfa59-152">Other Focus Properties</span></span>  
 <span data-ttu-id="cfa59-153">フォーカスを変更する考えられる原因をすべて視覚的な動作にする場合は<xref:System.Windows.UIElement.IsFocused%2A>、依存関係プロパティに基づいてセッターまたはトリガを作成するか、または に使用<xref:System.Windows.UIElement.GotFocus>される<xref:System.Windows.UIElement.LostFocus>or イベント<xref:System.Windows.EventSetter>を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cfa59-153">If you want all possible causes of changing focus to produce a visual behavior, you should base a setter or trigger on the <xref:System.Windows.UIElement.IsFocused%2A> dependency property, or alternatively on the <xref:System.Windows.UIElement.GotFocus> or <xref:System.Windows.UIElement.LostFocus> events used for an <xref:System.Windows.EventSetter>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cfa59-154">関連項目</span><span class="sxs-lookup"><span data-stu-id="cfa59-154">See also</span></span>

- <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>
- [<span data-ttu-id="cfa59-155">スタイルとテンプレート</span><span class="sxs-lookup"><span data-stu-id="cfa59-155">Styling and Templating</span></span>](../../../desktop-wpf/fundamentals/styles-templates-overview.md)
- [<span data-ttu-id="cfa59-156">フォーカスの概要</span><span class="sxs-lookup"><span data-stu-id="cfa59-156">Focus Overview</span></span>](focus-overview.md)
- [<span data-ttu-id="cfa59-157">入力の概要</span><span class="sxs-lookup"><span data-stu-id="cfa59-157">Input Overview</span></span>](input-overview.md)
