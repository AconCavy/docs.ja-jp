---
title: コントロールのフォーカスのスタイルと FocusVisualStyle
ms.date: 03/30/2017
helpviewer_keywords:
- keyboard focus [WPF]
- focus [WPF], visual styling
- styles [WPF], focus visual style
ms.assetid: 786ac576-011b-4d72-913b-558deccb9b35
ms.openlocfilehash: 988b084144532df6f7a6073184fcf035b0813bfd
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/03/2019
ms.locfileid: "73458679"
---
# <a name="styling-for-focus-in-controls-and-focusvisualstyle"></a><span data-ttu-id="b2749-102">コントロールのフォーカスのスタイルと FocusVisualStyle</span><span class="sxs-lookup"><span data-stu-id="b2749-102">Styling for Focus in Controls, and FocusVisualStyle</span></span>
[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="b2749-103">には、キーボードフォーカスを受け取ったときのコントロールの外観を変更するための2つの並列機構が用意されています。</span><span class="sxs-lookup"><span data-stu-id="b2749-103">provides two parallel mechanisms for changing the visual appearance of a control when it receives keyboard focus.</span></span> <span data-ttu-id="b2749-104">1つ目のメカニズムでは、コントロールに適用されるスタイルまたはテンプレート内の <xref:System.Windows.UIElement.IsKeyboardFocused%2A> などのプロパティのプロパティセッターを使用します。</span><span class="sxs-lookup"><span data-stu-id="b2749-104">The first mechanism is to use property setters for properties such as <xref:System.Windows.UIElement.IsKeyboardFocused%2A> within the style or template that is applied to the control.</span></span> <span data-ttu-id="b2749-105">2番目のメカニズムは、<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> プロパティの値として別のスタイルを提供することです。"focus visual スタイル" は、コントロールまたはその他の UI 要素を置き換えることで、コントロールの上に描画する装飾用の独立したビジュアルツリーを作成します。</span><span class="sxs-lookup"><span data-stu-id="b2749-105">The second mechanism is to provide a separate style as the value of the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property; the "focus visual style" creates a separate visual tree for an adorner that draws on top of the control, rather than changing the visual tree of the control or other UI element by replacing it.</span></span> <span data-ttu-id="b2749-106">このトピックでは、これらの各メカニズムが適切であるシナリオについて説明します。</span><span class="sxs-lookup"><span data-stu-id="b2749-106">This topic discusses the scenarios where each of these mechanisms is appropriate.</span></span>  

<a name="Purpose"></a>   
## <a name="the-purpose-of-focus-visual-style"></a><span data-ttu-id="b2749-107">フォーカスの視覚スタイルの目的</span><span class="sxs-lookup"><span data-stu-id="b2749-107">The Purpose of Focus Visual Style</span></span>  
 <span data-ttu-id="b2749-108">Visual スタイルのフォーカス機能は、UI 要素へのキーボードナビゲーションに基づくビジュアルユーザーフィードバックを導入するための一般的な "オブジェクトモデル" を提供します。</span><span class="sxs-lookup"><span data-stu-id="b2749-108">The focus visual style feature provides a common "object model" for introducing visual user feedback based on keyboard navigation to any UI element.</span></span> <span data-ttu-id="b2749-109">これは、新しいテンプレートをコントロールに適用したり、特定のテンプレートの構成を把握したりすることなく実行できます。</span><span class="sxs-lookup"><span data-stu-id="b2749-109">This is possible without applying a new template to the control, or knowing the specific template composition.</span></span>  
  
 <span data-ttu-id="b2749-110">ただし、visual スタイルのフォーカス機能はコントロールテンプレートを知らなくても動作するため、フォーカスのある視覚スタイルを使用しているコントロールに表示できるビジュアルフィードバックは必ずしも制限されています。</span><span class="sxs-lookup"><span data-stu-id="b2749-110">However, precisely because the focus visual style feature works without knowing the control templates, the visual feedback that can be displayed for a control using a focus visual style is necessarily limited.</span></span> <span data-ttu-id="b2749-111">この機能の実際の動作は、テンプレートを使用してコントロールのレンダリングによって作成された、ビジュアルツリーの上に別のビジュアルツリー (装飾) を重ね合わせることです。</span><span class="sxs-lookup"><span data-stu-id="b2749-111">What the feature actually does is to overlay a different visual tree (an adorner) on top of the visual tree as created by a control's rendering through its template.</span></span> <span data-ttu-id="b2749-112">この個別のビジュアルツリーは、<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> プロパティを満たすスタイルを使用して定義します。</span><span class="sxs-lookup"><span data-stu-id="b2749-112">You define this separate visual tree using a style that fills the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property.</span></span>  
  
<a name="Default"></a>   
## <a name="default-focus-visual-style-behavior"></a><span data-ttu-id="b2749-113">既定のフォーカスのビジュアルスタイル動作</span><span class="sxs-lookup"><span data-stu-id="b2749-113">Default Focus Visual Style Behavior</span></span>  
 <span data-ttu-id="b2749-114">フォーカスの visual スタイルは、フォーカスアクションがキーボードによって開始された場合にのみ機能します。</span><span class="sxs-lookup"><span data-stu-id="b2749-114">Focus visual styles act only when the focus action was initiated by the keyboard.</span></span> <span data-ttu-id="b2749-115">マウス操作またはプログラムによるフォーカスの変更により、フォーカスの視覚スタイルのモードが無効になります。</span><span class="sxs-lookup"><span data-stu-id="b2749-115">Any mouse action or programmatic focus change disables the mode for focus visual styles.</span></span> <span data-ttu-id="b2749-116">フォーカスモードの違いの詳細については、「[フォーカスの概要](focus-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b2749-116">For more information about the distinctions between focus modes, see [Focus Overview](focus-overview.md).</span></span>  
  
 <span data-ttu-id="b2749-117">コントロールのテーマには、テーマ内のすべてのコントロールのフォーカスの視覚スタイルになる、既定のフォーカスのビジュアルスタイルの動作が含まれます。</span><span class="sxs-lookup"><span data-stu-id="b2749-117">The themes for controls include a default focus visual style behavior that becomes the focus visual style for all controls in the theme.</span></span> <span data-ttu-id="b2749-118">このテーマスタイルは、静的なキー <xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>の値によって識別されます。</span><span class="sxs-lookup"><span data-stu-id="b2749-118">This theme style is identified by the value of the static key <xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>.</span></span> <span data-ttu-id="b2749-119">アプリケーションレベルで独自のフォーカスの視覚スタイルを宣言する場合は、この既定のスタイルの動作をテーマから置き換えます。</span><span class="sxs-lookup"><span data-stu-id="b2749-119">When you declare your own focus visual style at the application level, you replace this default style behavior from the themes.</span></span> <span data-ttu-id="b2749-120">または、テーマ全体を定義する場合は、この同じキーを使用して、テーマ全体の既定の動作のスタイルを定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b2749-120">Alternatively, if you define the entire theme, then you should use this same key to define the style for the default behavior for your entire theme.</span></span>  
  
 <span data-ttu-id="b2749-121">テーマでは、通常、既定のフォーカスの視覚スタイルは非常に単純です。</span><span class="sxs-lookup"><span data-stu-id="b2749-121">In the themes, the default focus visual style is generally very simple.</span></span> <span data-ttu-id="b2749-122">大まかな概算は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="b2749-122">The following is a rough approximation:</span></span>  
  
```xaml  
<Style x:Key="{x:Static SystemParameters.FocusVisualStyleKey}">  
  <Setter Property="Control.Template">  
    <Setter.Value>  
      <ControlTemplate>  
        <Rectangle StrokeThickness="1"  
          Stroke="Black"  
          StrokeDashArray="1 2"  
          SnapsToDevicePixels="true"/>  
      </ControlTemplate>  
    </Setter.Value>  
  </Setter>  
</Style>  
```  
  
<a name="When"></a>   
## <a name="when-to-use-focus-visual-styles"></a><span data-ttu-id="b2749-123">フォーカスの視覚スタイルを使用する場合</span><span class="sxs-lookup"><span data-stu-id="b2749-123">When to Use Focus Visual Styles</span></span>  
 <span data-ttu-id="b2749-124">概念的には、コントロールに適用されるフォーカスの視覚スタイルの外観は、コントロールからコントロールまで一貫している必要があります。</span><span class="sxs-lookup"><span data-stu-id="b2749-124">Conceptually, the appearance of focus visual styles applied to controls should be coherent from control to control.</span></span> <span data-ttu-id="b2749-125">一貫性を確保する方法の1つとして、テーマ全体を作成する場合にのみ、フォーカスのビジュアルスタイルを変更します。テーマに定義されている各コントロールは、非常に同じフォーカスの表示スタイルを取得します。または、コントロールから継続して表示されるスタイルのバリエーションを取得します。.</span><span class="sxs-lookup"><span data-stu-id="b2749-125">One way to ensure coherence is to change the focus visual style only if you are composing an entire theme, where each control that is defined in the theme gets either the very same focus visual style, or some variation of a style that is visually related from control to control.</span></span> <span data-ttu-id="b2749-126">また、同じスタイル (または同様のスタイル) を使用して、ページまたは UI のすべてのキーボードフォーカスがある要素のスタイルを作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="b2749-126">Alternatively, you might use the same style (or similar styles) to style every keyboard-focusable element on a page or in a UI.</span></span>  
  
 <span data-ttu-id="b2749-127">テーマの一部ではない個々のコントロールスタイルに <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> を設定することは、フォーカスの視覚スタイルの使用には適していません。</span><span class="sxs-lookup"><span data-stu-id="b2749-127">Setting <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> on individual control styles that are not part of a theme is not the intended usage of focus visual styles.</span></span> <span data-ttu-id="b2749-128">これは、コントロール間の視覚的な動作が一貫していないと、キーボードフォーカスに関してユーザーエクスペリエンスが混乱する可能性があるためです。</span><span class="sxs-lookup"><span data-stu-id="b2749-128">This is because an inconsistent visual behavior between controls can lead to a confusing user experience regarding keyboard focus.</span></span> <span data-ttu-id="b2749-129">テーマ全体で一貫していないキーボードフォーカスに対してコントロール固有の動作を行う場合は、<xref:System.Windows.UIElement.IsFocused%2A> や <xref:System.Windows.UIElement.IsKeyboardFocused%2A>など、個々の入力状態プロパティのスタイルでトリガーを使用する方がはるかに適しています。</span><span class="sxs-lookup"><span data-stu-id="b2749-129">If you are intending control-specific behaviors for keyboard focus that are deliberately not coherent across a theme, a much better approach is to use triggers in styles for individual input state properties, such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocused%2A>.</span></span>  
  
 <span data-ttu-id="b2749-130">フォーカスの visual スタイルは、キーボードフォーカス専用です。</span><span class="sxs-lookup"><span data-stu-id="b2749-130">Focus visual styles act exclusively for keyboard focus.</span></span> <span data-ttu-id="b2749-131">そのため、フォーカスの視覚的なスタイルは、ユーザー補助機能の一種です。</span><span class="sxs-lookup"><span data-stu-id="b2749-131">As such, focus visual styles are a type of accessibility feature.</span></span> <span data-ttu-id="b2749-132">マウス、キーボード、またはプログラムによってどのような種類のフォーカスにも UI を変更する場合は、フォーカスの視覚スタイルを使用しないでください。代わりに、一般的なフォーカスプロパティの値から動作するスタイルまたはテンプレートで setter とトリガーを使用する必要があります。<xref:System.Windows.UIElement.IsFocused%2A> や <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>などです。</span><span class="sxs-lookup"><span data-stu-id="b2749-132">If you want UI changes for any type of focus, whether via mouse, keyboard, or programmatically, then you should not use focus visual styles, and should instead use setters and triggers in styles or templates that are working from the value of general focus properties such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>.</span></span>  
  
<a name="How"></a>   
## <a name="how-to-create-a-focus-visual-style"></a><span data-ttu-id="b2749-133">フォーカスのある視覚スタイルを作成する方法</span><span class="sxs-lookup"><span data-stu-id="b2749-133">How to Create a Focus Visual Style</span></span>  
 <span data-ttu-id="b2749-134">フォーカスのある視覚スタイル用に作成するスタイルには、常に <xref:System.Windows.Controls.Control>の <xref:System.Windows.Style.TargetType%2A> が必要です。</span><span class="sxs-lookup"><span data-stu-id="b2749-134">The style you create for a focus visual style should always have the <xref:System.Windows.Style.TargetType%2A> of <xref:System.Windows.Controls.Control>.</span></span> <span data-ttu-id="b2749-135">このスタイルは、主に <xref:System.Windows.Controls.ControlTemplate>で構成されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="b2749-135">The style should consist mainly of a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="b2749-136">対象の型は、フォーカスの visual スタイルが <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>に割り当てられている型として指定しないでください。</span><span class="sxs-lookup"><span data-stu-id="b2749-136">You do not specify the target type to be the type where the focus visual style is assigned to the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>.</span></span>  
  
 <span data-ttu-id="b2749-137">ターゲットの型は常に <xref:System.Windows.Controls.Control>ので、すべてのコントロールに共通のプロパティを使用してスタイルを設定する必要があります (<xref:System.Windows.Controls.Control> クラスとその基本クラスのプロパティを使用します)。</span><span class="sxs-lookup"><span data-stu-id="b2749-137">Because the target type is always <xref:System.Windows.Controls.Control>, you must style by using properties that are common to all controls (using properties of the <xref:System.Windows.Controls.Control> class and its base classes).</span></span> <span data-ttu-id="b2749-138">UI 要素へのオーバーレイとして正しく機能し、コントロールの機能領域が不明瞭にならないテンプレートを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b2749-138">You should create a template that will properly function as an overlay to a UI element and that will not obscure functional areas of the control.</span></span> <span data-ttu-id="b2749-139">一般に、ビジュアルフィードバックはコントロールの余白の外側に表示されるか、またはフォーカスのある視覚スタイルが適用されているコントロールのヒットテストをブロックしない一時的または控えめな効果として表示されることを意味します。</span><span class="sxs-lookup"><span data-stu-id="b2749-139">Generally, this means that the visual feedback should appear outside the control margins, or as temporary or unobtrusive effects that will not block the hit testing on the control where the focus visual style is applied.</span></span> <span data-ttu-id="b2749-140">オーバーレイテンプレートのサイズと位置を決定するのに役立つテンプレートバインドで使用できるプロパティには、<xref:System.Windows.FrameworkElement.ActualHeight%2A>、<xref:System.Windows.FrameworkElement.ActualWidth%2A>、<xref:System.Windows.FrameworkElement.Margin%2A>、および <xref:System.Windows.Controls.Control.Padding%2A>があります。</span><span class="sxs-lookup"><span data-stu-id="b2749-140">Properties that you can use in template binding that are useful for determining sizing and positioning of your overlay template include <xref:System.Windows.FrameworkElement.ActualHeight%2A>, <xref:System.Windows.FrameworkElement.ActualWidth%2A>, <xref:System.Windows.FrameworkElement.Margin%2A>, and <xref:System.Windows.Controls.Control.Padding%2A>.</span></span>  
  
<a name="Alternatives"></a>   
## <a name="alternatives-to-using-a-focus-visual-style"></a><span data-ttu-id="b2749-141">フォーカスの視覚スタイルを使用する代替手段</span><span class="sxs-lookup"><span data-stu-id="b2749-141">Alternatives to Using a Focus Visual Style</span></span>  
 <span data-ttu-id="b2749-142">1つのコントロールのスタイルを設定するだけであるため、またはコントロールテンプレートをより細かく制御する必要があるために、フォーカスの視覚スタイルを使用することが適切でない場合は、ビジュアルを作成できる他の多くのアクセス可能なプロパティと手法があります。フォーカスの変化に応じた動作。</span><span class="sxs-lookup"><span data-stu-id="b2749-142">For situations where using a focus visual style is not appropriate, either because you are only styling single controls or because you want greater control over the control template, there are many other accessible properties and techniques that can create visual behavior in response to changes in focus.</span></span>  
  
 <span data-ttu-id="b2749-143">トリガー、セッター、およびイベントセッターの詳細については、「[スタイルとテンプレート](../../../desktop-wpf/fundamentals/styles-templates-overview.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="b2749-143">Triggers, setters, and event setters are all discussed in detail in [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span></span> <span data-ttu-id="b2749-144">ルーティングイベントの処理については、 [「ルーティングイベントの概要](routed-events-overview.md)」で説明されています。</span><span class="sxs-lookup"><span data-stu-id="b2749-144">Routed event handling is discussed in [Routed Events Overview](routed-events-overview.md).</span></span>  
  
### <a name="iskeyboardfocused"></a><span data-ttu-id="b2749-145">IsKeyboardFocused</span><span class="sxs-lookup"><span data-stu-id="b2749-145">IsKeyboardFocused</span></span>  
 <span data-ttu-id="b2749-146">特にキーボードフォーカスを知りたい場合は、プロパティ <xref:System.Windows.Trigger>に対して <xref:System.Windows.UIElement.IsKeyboardFocused%2A> 依存関係プロパティを使用できます。</span><span class="sxs-lookup"><span data-stu-id="b2749-146">If you are specifically interested in keyboard focus, the <xref:System.Windows.UIElement.IsKeyboardFocused%2A> dependency property can be used for a property <xref:System.Windows.Trigger>.</span></span> <span data-ttu-id="b2749-147">スタイルまたはテンプレートのプロパティトリガーは、キーボードフォーカスの動作を定義するためのより適切な手法であり、1つのコントロールに対してのみ使用され、他のコントロールのキーボードフォーカスの動作を視覚的に一致させることはできません。</span><span class="sxs-lookup"><span data-stu-id="b2749-147">A property trigger in either a style or template is a more appropriate technique for defining a keyboard focus behavior that is very specifically for a single control, and which might not visually match the keyboard focus behavior for other controls.</span></span>  
  
 <span data-ttu-id="b2749-148">もう1つの類似した依存関係プロパティも <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>ます。これは、キーボードフォーカスが複合内またはコントロールの機能領域内のどこかにあることを視覚的に呼び出す場合に適しています。</span><span class="sxs-lookup"><span data-stu-id="b2749-148">Another similar dependency property is <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>, which might be appropriate to use if you want to visually call out that keyboard focus is somewhere within compositing or within the functional area of the control.</span></span> <span data-ttu-id="b2749-149">たとえば、複数のコントロールをグループ化するパネルが、そのパネル内の個々の要素に対してより正確に表示される場合でも、複数のコントロールをグループ化するパネルが異なるように表示されるように <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> トリガーを配置できます。</span><span class="sxs-lookup"><span data-stu-id="b2749-149">For example, you might place an <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> trigger such that a panel that groups several controls appears differently, even though keyboard focus might more precisely be on an individual element within that panel.</span></span>  
  
 <span data-ttu-id="b2749-150">また、イベント <xref:System.Windows.UIElement.GotKeyboardFocus> と <xref:System.Windows.UIElement.LostKeyboardFocus> (およびそのプレビューに相当するもの) を使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="b2749-150">You can also use the events <xref:System.Windows.UIElement.GotKeyboardFocus> and <xref:System.Windows.UIElement.LostKeyboardFocus> (as well as their Preview equivalents).</span></span> <span data-ttu-id="b2749-151">これらのイベントは、<xref:System.Windows.EventSetter>の基礎として使用することも、分離コードでイベントのハンドラーを記述することもできます。</span><span class="sxs-lookup"><span data-stu-id="b2749-151">You can use these events as the basis for an <xref:System.Windows.EventSetter>, or you can write handlers for the events in code-behind.</span></span>  
  
### <a name="other-focus-properties"></a><span data-ttu-id="b2749-152">その他のフォーカスプロパティ</span><span class="sxs-lookup"><span data-stu-id="b2749-152">Other Focus Properties</span></span>  
 <span data-ttu-id="b2749-153">フォーカスを変更して視覚的な動作を生成する可能性のあるすべての原因を確認するには、setter または trigger を <xref:System.Windows.UIElement.IsFocused%2A> 依存関係プロパティに基づいて作成するか、<xref:System.Windows.EventSetter>に使用される <xref:System.Windows.UIElement.GotFocus> または <xref:System.Windows.UIElement.LostFocus> イベントの基にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b2749-153">If you want all possible causes of changing focus to produce a visual behavior, you should base a setter or trigger on the <xref:System.Windows.UIElement.IsFocused%2A> dependency property, or alternatively on the <xref:System.Windows.UIElement.GotFocus> or <xref:System.Windows.UIElement.LostFocus> events used for an <xref:System.Windows.EventSetter>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b2749-154">関連項目</span><span class="sxs-lookup"><span data-stu-id="b2749-154">See also</span></span>

- <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>
- [<span data-ttu-id="b2749-155">スタイルとテンプレート</span><span class="sxs-lookup"><span data-stu-id="b2749-155">Styling and Templating</span></span>](../../../desktop-wpf/fundamentals/styles-templates-overview.md)
- [<span data-ttu-id="b2749-156">フォーカスの概要</span><span class="sxs-lookup"><span data-stu-id="b2749-156">Focus Overview</span></span>](focus-overview.md)
- [<span data-ttu-id="b2749-157">入力の概要</span><span class="sxs-lookup"><span data-stu-id="b2749-157">Input Overview</span></span>](input-overview.md)
