---
title: 双方向機能の概要
ms.date: 03/30/2017
helpviewer_keywords:
- Span elements [WPF]
- bidirectional features [WPF]
ms.assetid: fd850e25-7dba-408c-b521-8873e51dc968
ms.openlocfilehash: 17167b1afa5037998d9ea8ed679a66c89babe242
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2020
ms.locfileid: "76741635"
---
# <a name="bidirectional-features-in-wpf-overview"></a><span data-ttu-id="12a40-102">WPF の双方向機能の概要</span><span class="sxs-lookup"><span data-stu-id="12a40-102">Bidirectional Features in WPF Overview</span></span>

<span data-ttu-id="12a40-103">他のどの開発プラットフォームとも異なり、[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] には双方向コンテンツ (たとえば、同じドキュメント内で左から右へ記述される情報と右から左へ記述されるデータが混在している状態) の迅速な開発をサポートする多数の機能があります。</span><span class="sxs-lookup"><span data-stu-id="12a40-103">Unlike any other development platform, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] has many features that support rapid development of bidirectional content, for example, mixed left to right and right to left data in the same document.</span></span> <span data-ttu-id="12a40-104">また、[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] は、アラビア語やヘブライ語を話すユーザーなど、双方向機能を必要とするユーザーに優れた操作性を提供します。</span><span class="sxs-lookup"><span data-stu-id="12a40-104">At the same time, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] creates an excellent experience for users who require bidirectional features such as Arabic and Hebrew speaking users.</span></span>

<span data-ttu-id="12a40-105">以降のセクションでは、多数の双方向機能と双方向コンテンツを最適に表示した例について説明します。</span><span class="sxs-lookup"><span data-stu-id="12a40-105">The following sections explain many bidirectional features together with examples illustrating how to achieve the best display of bidirectional content.</span></span> <span data-ttu-id="12a40-106">ほとんどのサンプルには XAML が使用されていますが、その概念は C# または Microsoft Visual Basic コードに簡単に適用できます。</span><span class="sxs-lookup"><span data-stu-id="12a40-106">Most of the samples use XAML, though you can easily apply the concepts to C# or Microsoft Visual Basic code.</span></span>

<a name="FlowDirection"></a>

## <a name="flowdirection"></a><span data-ttu-id="12a40-107">FlowDirection</span><span class="sxs-lookup"><span data-stu-id="12a40-107">FlowDirection</span></span>

<span data-ttu-id="12a40-108">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] アプリケーションでコンテンツのフロー方向を定義する基本的なプロパティは <xref:System.Windows.FrameworkElement.FlowDirection%2A> です。</span><span class="sxs-lookup"><span data-stu-id="12a40-108">The basic property that defines the content flow direction in a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application is <xref:System.Windows.FrameworkElement.FlowDirection%2A>.</span></span> <span data-ttu-id="12a40-109">このプロパティは、2 つの列挙値 <xref:System.Windows.FlowDirection.LeftToRight> または <xref:System.Windows.FlowDirection.RightToLeft> のいずれかに設定できます。</span><span class="sxs-lookup"><span data-stu-id="12a40-109">This property can be set to one of two enumeration values, <xref:System.Windows.FlowDirection.LeftToRight> or <xref:System.Windows.FlowDirection.RightToLeft>.</span></span> <span data-ttu-id="12a40-110">このプロパティは、<xref:System.Windows.FrameworkElement> から継承されるすべての [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 要素で使用できます。</span><span class="sxs-lookup"><span data-stu-id="12a40-110">The property is available to all [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements that inherit from <xref:System.Windows.FrameworkElement>.</span></span>

<span data-ttu-id="12a40-111">次の例では、<xref:System.Windows.Controls.TextBox> 要素のフロー方向を設定します。</span><span class="sxs-lookup"><span data-stu-id="12a40-111">The following examples set the flow direction of a <xref:System.Windows.Controls.TextBox> element.</span></span>

<span data-ttu-id="12a40-112">**左から右へ記述するフロー方向**</span><span class="sxs-lookup"><span data-stu-id="12a40-112">**Left-to-right flow direction**</span></span>

[!code-xaml[LTRRTL#LTR](~/samples/snippets/csharp/VS_Snippets_Wpf/LTRRTL/CS/Pane1.xaml#ltr)]

<span data-ttu-id="12a40-113">**右から左へ記述するフロー方向**</span><span class="sxs-lookup"><span data-stu-id="12a40-113">**Right-to-left flow direction**</span></span>

[!code-xaml[LTRRTL#RTL](~/samples/snippets/csharp/VS_Snippets_Wpf/LTRRTL/CS/Pane1.xaml#rtl)]

<span data-ttu-id="12a40-114">次の図は、前のコードがどのように表示されるのかを示します。</span><span class="sxs-lookup"><span data-stu-id="12a40-114">The following graphic shows how the previous code renders.</span></span>

![さまざまなフロー方向を示す図。](./media/bidirectional-features-in-wpf-overview/left-right-right-left.png)

<span data-ttu-id="12a40-116">[!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] ツリー内の要素には、そのコンテナーから <xref:System.Windows.FrameworkElement.FlowDirection%2A> が継承されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-116">An element within a [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] tree will inherit the <xref:System.Windows.FrameworkElement.FlowDirection%2A> from its container.</span></span> <span data-ttu-id="12a40-117">次の例では、<xref:System.Windows.Controls.TextBlock> は、<xref:System.Windows.Window> 内の <xref:System.Windows.Controls.Grid> 内にあります。</span><span class="sxs-lookup"><span data-stu-id="12a40-117">In the following example, the <xref:System.Windows.Controls.TextBlock> is inside a <xref:System.Windows.Controls.Grid>, which resides in a <xref:System.Windows.Window>.</span></span> <span data-ttu-id="12a40-118"><xref:System.Windows.Window> に <xref:System.Windows.FrameworkElement.FlowDirection%2A> を設定することは、<xref:System.Windows.Controls.Grid> と <xref:System.Windows.Controls.TextBlock> にも設定することを意味します。</span><span class="sxs-lookup"><span data-stu-id="12a40-118">Setting the <xref:System.Windows.FrameworkElement.FlowDirection%2A> for the <xref:System.Windows.Window> implies setting it for the <xref:System.Windows.Controls.Grid> and <xref:System.Windows.Controls.TextBlock> as well.</span></span>

<span data-ttu-id="12a40-119">次に <xref:System.Windows.FrameworkElement.FlowDirection%2A> の設定例を示します。</span><span class="sxs-lookup"><span data-stu-id="12a40-119">The following example demonstrates setting <xref:System.Windows.FrameworkElement.FlowDirection%2A>.</span></span>

[!code-xaml[FlowDirection#FlowDirection](~/samples/snippets/csharp/VS_Snippets_Wpf/FlowDirection/CS/Window1.xaml#flowdirection)]

<span data-ttu-id="12a40-120">最上位の <xref:System.Windows.Window> には <xref:System.Windows.FlowDirection.RightToLeft><xref:System.Windows.FlowDirection> があるため、その中に含まれるすべての要素にも同じ <xref:System.Windows.FrameworkElement.FlowDirection%2A> が継承されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-120">The top level <xref:System.Windows.Window> has a <xref:System.Windows.FlowDirection.RightToLeft><xref:System.Windows.FlowDirection>, so all elements contained within it also inherit the same <xref:System.Windows.FrameworkElement.FlowDirection%2A>.</span></span> <span data-ttu-id="12a40-121">指定された <xref:System.Windows.FrameworkElement.FlowDirection%2A> を要素でオーバーライドするには、前の例の 2 つ目の <xref:System.Windows.Controls.TextBlock> のように <xref:System.Windows.FlowDirection.LeftToRight> に変更するという明示的な方向変更を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="12a40-121">For an element to override a specified <xref:System.Windows.FrameworkElement.FlowDirection%2A> it must add an explicit direction change such as the second <xref:System.Windows.Controls.TextBlock> in the previous example which changes to <xref:System.Windows.FlowDirection.LeftToRight>.</span></span> <span data-ttu-id="12a40-122"><xref:System.Windows.FrameworkElement.FlowDirection%2A> が定義されていない場合は、既定の <xref:System.Windows.FlowDirection.LeftToRight> が適用されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-122">When no <xref:System.Windows.FrameworkElement.FlowDirection%2A> is defined, the default <xref:System.Windows.FlowDirection.LeftToRight> applies.</span></span>

<span data-ttu-id="12a40-123">次の図は、前の例の出力を示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-123">The following graphic shows the output of the previous example:</span></span>

![明示的なフロー方向の変化を示す図。](./media/bidirectional-features-in-wpf-overview/explicit-direction-change.png)

<a name="FlowDocument"></a>

## <a name="flowdocument"></a><span data-ttu-id="12a40-125">FlowDocument</span><span class="sxs-lookup"><span data-stu-id="12a40-125">FlowDocument</span></span>

<span data-ttu-id="12a40-126">HTML、Win32、Java などの多数の開発プラットフォームは、双方向コンテンツ開発を特別にサポートしています。</span><span class="sxs-lookup"><span data-stu-id="12a40-126">Many development platforms such as HTML, Win32 and Java provide special support for bidirectional content development.</span></span> <span data-ttu-id="12a40-127">HTML などのマークアップ言語では、コンテンツの作成者が任意の必要な方向にテキストを表示するために必要なマークアップを使用できます。たとえば、"rtl" または "ltr" を値として解釈する HTML 4.0 タグの "dir" などです。</span><span class="sxs-lookup"><span data-stu-id="12a40-127">Markup languages such as HTML give content writers the necessary markup to display text in any required direction, for example the HTML 4.0 tag, "dir" that takes "rtl" or "ltr" as values.</span></span> <span data-ttu-id="12a40-128">このタグは <xref:System.Windows.FrameworkElement.FlowDirection%2A> プロパティに似ていますが、<xref:System.Windows.FrameworkElement.FlowDirection%2A> プロパティはテキスト コンテンツのレイアウト時により高度な方法で動作し、テキスト以外のコンテンツに使用できます。</span><span class="sxs-lookup"><span data-stu-id="12a40-128">This tag is similar to the <xref:System.Windows.FrameworkElement.FlowDirection%2A> property, but the <xref:System.Windows.FrameworkElement.FlowDirection%2A> property works in a more advanced way to layout textual content and can be used for content other than text.</span></span>

<span data-ttu-id="12a40-129">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] の <xref:System.Windows.Documents.FlowDocument> は、テキスト、テーブル、画像、その他の要素の組み合わせをホストできる、汎用性のある [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] 要素です。</span><span class="sxs-lookup"><span data-stu-id="12a40-129">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], a <xref:System.Windows.Documents.FlowDocument> is a versatile [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] element that can host a combination of text, tables, images and other elements.</span></span> <span data-ttu-id="12a40-130">以下のセクションのサンプルでは、この要素を使用します。</span><span class="sxs-lookup"><span data-stu-id="12a40-130">The samples in the following sections use this element.</span></span>

<span data-ttu-id="12a40-131"><xref:System.Windows.Documents.FlowDocument> へのテキストの追加は、さまざまな方法で行うことができます。</span><span class="sxs-lookup"><span data-stu-id="12a40-131">Adding text to a <xref:System.Windows.Documents.FlowDocument> can be done in more that one way.</span></span> <span data-ttu-id="12a40-132">その簡単な方法は、テキストなどのコンテンツをグループ化するために使用されるブロックレベルの要素である <xref:System.Windows.Documents.Paragraph> を使用することです。</span><span class="sxs-lookup"><span data-stu-id="12a40-132">A simple way to do so is through a <xref:System.Windows.Documents.Paragraph> which is a block-level element used to group content such as text.</span></span> <span data-ttu-id="12a40-133">インラインレベルの要素にテキストを追加するために、このサンプルでは <xref:System.Windows.Documents.Span> と <xref:System.Windows.Documents.Run> を使用します。</span><span class="sxs-lookup"><span data-stu-id="12a40-133">To add text to inline-level elements the samples use <xref:System.Windows.Documents.Span> and <xref:System.Windows.Documents.Run>.</span></span> <span data-ttu-id="12a40-134"><xref:System.Windows.Documents.Span> は、他のインライン要素のグループ化に使用されるインラインレベルのフロー コンテンツ要素です。一方、<xref:System.Windows.Documents.Run> は、一連の書式設定されていないテキストを含めることを目的としたインラインレベルのフロー コンテンツ要素です。</span><span class="sxs-lookup"><span data-stu-id="12a40-134"><xref:System.Windows.Documents.Span> is an inline-level flow content element used for grouping other inline elements, while a <xref:System.Windows.Documents.Run> is an inline-level flow content element intended to contain a run of unformatted text.</span></span> <span data-ttu-id="12a40-135"><xref:System.Windows.Documents.Span> には、複数の <xref:System.Windows.Documents.Run> 要素を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="12a40-135">A <xref:System.Windows.Documents.Span> can contain multiple <xref:System.Windows.Documents.Run> elements.</span></span>

<span data-ttu-id="12a40-136">最初のドキュメント例には、いくつかのネットワーク共有名 (`\\server1\folder\file.ext` など) があるドキュメントが含まれます。</span><span class="sxs-lookup"><span data-stu-id="12a40-136">The first document example contains a document that has a number of network share names; for example `\\server1\folder\file.ext`.</span></span> <span data-ttu-id="12a40-137">このネットワーク リンクがアラビア語または英語のいずれのドキュメントにあっても、常に同じように表示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="12a40-137">Whether you have this network link in an Arabic or English document, you always want it to appear in the same way.</span></span> <span data-ttu-id="12a40-138">次の図は、Span 要素の使用方法と、アラビア語の <xref:System.Windows.FlowDirection.RightToLeft> ドキュメント内のリンクを示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-138">The following graphic illustrates using the Span element and shows the link in an Arabic <xref:System.Windows.FlowDirection.RightToLeft> document:</span></span>

<span data-ttu-id="12a40-139">![Span 要素の使用を示す図](./media/bidirectional-features-in-wpf-overview/flow-direction-span-element.png "FlowDocument")</span><span class="sxs-lookup"><span data-stu-id="12a40-139">![Graphic that illustrates using the Span element.](./media/bidirectional-features-in-wpf-overview/flow-direction-span-element.png "FlowDocument")</span></span>

<span data-ttu-id="12a40-140">テキストは <xref:System.Windows.FlowDirection.RightToLeft> であるため、"\\" などのすべての特殊文字では、右から左の順序でテキストが区切られます。</span><span class="sxs-lookup"><span data-stu-id="12a40-140">Because the text is <xref:System.Windows.FlowDirection.RightToLeft>, all special characters, such as the "\\", separate the text in a right to left order.</span></span> <span data-ttu-id="12a40-141">その結果、リンクが正しい順序で表示されなくなるため、問題を解決するには、テキストを埋め込み、フローが <xref:System.Windows.FlowDirection.LeftToRight> の <xref:System.Windows.Documents.Run> を別に保持する必要があります。</span><span class="sxs-lookup"><span data-stu-id="12a40-141">That results in the link not being shown in the correct order, therefore to solve the problem, the text must be embedded to preserve a separate <xref:System.Windows.Documents.Run> flowing <xref:System.Windows.FlowDirection.LeftToRight>.</span></span> <span data-ttu-id="12a40-142">この問題を解決するには、言語ごとに個別の <xref:System.Windows.Documents.Run> を使用するのではなく、使用頻度の低い英語のテキストをより大きなアラビア語の <xref:System.Windows.Documents.Span> に埋め込む方法が適しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-142">Instead of having a separate <xref:System.Windows.Documents.Run> for each language, a better way to solve the problem is to embed the less frequently used English text into a larger Arabic <xref:System.Windows.Documents.Span>.</span></span>

<span data-ttu-id="12a40-143">次の図は、Span 要素に埋め込まれた Run 要素を使用してこれを示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-143">The following graphic illustrates this by using the Run element embedded in a Span element:</span></span>

![Span 要素に埋め込まれた Run 要素の使用を示す図](./media/bidirectional-features-in-wpf-overview/embedded-span-element.png)

<span data-ttu-id="12a40-145">次の例は、ドキュメントでの <xref:System.Windows.Documents.Run> および <xref:System.Windows.Documents.Span> 要素の使用を示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-145">The following example demonstrates using <xref:System.Windows.Documents.Run> and <xref:System.Windows.Documents.Span> elements in documents.</span></span>

[!code-xaml[RunSpan#RunSpan](~/samples/snippets/csharp/VS_Snippets_Wpf/RunSpan/CS/Window1.xaml#runspan)]

<a name="SpanElements"></a>

## <a name="span-elements"></a><span data-ttu-id="12a40-146">Span 要素</span><span class="sxs-lookup"><span data-stu-id="12a40-146">Span Elements</span></span>

<span data-ttu-id="12a40-147"><xref:System.Windows.Documents.Span> 要素は、フロー方向が異なるテキスト間の境界区切り記号として機能します。</span><span class="sxs-lookup"><span data-stu-id="12a40-147">The <xref:System.Windows.Documents.Span> element works as a boundary separator between texts with different flow directions.</span></span>  <span data-ttu-id="12a40-148">同じフロー方向の <xref:System.Windows.Documents.Span> 要素でも、双方向のスコープが異なると見なされます。つまり、<xref:System.Windows.Documents.Span> 要素はコンテナーの <xref:System.Windows.FlowDirection> で順序付けられ、<xref:System.Windows.Documents.Span> 要素内のコンテンツのみが <xref:System.Windows.Documents.Span> の <xref:System.Windows.FlowDirection> に従います。</span><span class="sxs-lookup"><span data-stu-id="12a40-148">Even <xref:System.Windows.Documents.Span> elements with the same flow direction are considered to have different bidirectional scopes which means that the <xref:System.Windows.Documents.Span> elements are ordered in the container’s <xref:System.Windows.FlowDirection>, only the content within the <xref:System.Windows.Documents.Span> element follows the <xref:System.Windows.FlowDirection> of the <xref:System.Windows.Documents.Span>.</span></span>

<span data-ttu-id="12a40-149">次の図は、複数の <xref:System.Windows.Controls.TextBlock> 要素のフロー方向を示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-149">The following graphic shows the flow direction of several <xref:System.Windows.Controls.TextBlock> elements.</span></span>

![フロー方向が異なるテキスト ブロックを示す図。](./media/bidirectional-features-in-wpf-overview/flow-direction-text-blocks.png)

<span data-ttu-id="12a40-151">次の例は、<xref:System.Windows.Documents.Span> および <xref:System.Windows.Documents.Run> 要素を使用して、前の図に示されている結果を生成する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-151">The following example shows how to use the <xref:System.Windows.Documents.Span> and <xref:System.Windows.Documents.Run> elements to produce the results shown in the previous graphic.</span></span>

[!code-xaml[Span#Span](~/samples/snippets/csharp/VS_Snippets_Wpf/Span/CS/Window1.xaml#span)]

<span data-ttu-id="12a40-152">サンプルの <xref:System.Windows.Controls.TextBlock> 要素では、<xref:System.Windows.Documents.Span> 要素は親の <xref:System.Windows.FlowDirection>に従ってレイアウトされますが、各 <xref:System.Windows.Documents.Span> 要素内のテキストは独自の <xref:System.Windows.FlowDirection> に従ってフローします。</span><span class="sxs-lookup"><span data-stu-id="12a40-152">In the <xref:System.Windows.Controls.TextBlock> elements in the sample, the <xref:System.Windows.Documents.Span> elements are laid out according to the <xref:System.Windows.FlowDirection> of their parents, but the text within each <xref:System.Windows.Documents.Span> element flows according to its own <xref:System.Windows.FlowDirection>.</span></span> <span data-ttu-id="12a40-153">これは、ラテン語やアラビア語だけでなく、他のどの言語にも当てはまります。</span><span class="sxs-lookup"><span data-stu-id="12a40-153">This is applicable to Latin and Arabic – or any other language.</span></span>

### <a name="adding-xmllang"></a><span data-ttu-id="12a40-154">xml:lang の追加</span><span class="sxs-lookup"><span data-stu-id="12a40-154">Adding xml:lang</span></span>

<span data-ttu-id="12a40-155">次の図は、`"200.0+21.4=221.4"` などの番号と算術式を使用する別の例を示します。</span><span class="sxs-lookup"><span data-stu-id="12a40-155">The following graphic shows another example that uses numbers and arithmetic expressions, such as `"200.0+21.4=221.4"`.</span></span> <span data-ttu-id="12a40-156"><xref:System.Windows.FlowDirection> のみが設定されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="12a40-156">Notice that only the <xref:System.Windows.FlowDirection> is set.</span></span>

![FlowDirection のみを使用して数値を表示する図](./media/bidirectional-features-in-wpf-overview/numbers-flow-right-left.png)

<span data-ttu-id="12a40-158">このアプリケーションのユーザーは出力に失望するでしょう。<xref:System.Windows.FlowDirection> が正しいにもかかわらず、数字の形状がアラビア数字の本来の形状ではないからです。</span><span class="sxs-lookup"><span data-stu-id="12a40-158">Users of this application will be disappointed by the output, even though the <xref:System.Windows.FlowDirection> is correct the numbers are not shaped as Arabic numbers should be shaped.</span></span>

<span data-ttu-id="12a40-159">XAML 要素には、各要素の言語を定義する XML 属性 (`xml:lang`) を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="12a40-159">XAML elements can include an XML attribute (`xml:lang`) that defines the language of each element.</span></span> <span data-ttu-id="12a40-160">また、XAML では、ツリーの親要素に XML 値を適用すると、子要素にもその属性が適用されるという `xml:lang` 言語の原則も遵守されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-160">XAML also supports a XML language principle whereby `xml:lang` values applied to parent elements in the tree are used by child elements.</span></span> <span data-ttu-id="12a40-161">前の例では、<xref:System.Windows.Documents.Run> 要素またはその最上位要素に言語が定義されていないため、既定の `xml:lang` (XAML の場合は `en-US`) が使用されました。</span><span class="sxs-lookup"><span data-stu-id="12a40-161">In the previous example, because a language was not defined for the <xref:System.Windows.Documents.Run> element or any of its top level elements, the default `xml:lang` was used, which is `en-US` for XAML.</span></span> <span data-ttu-id="12a40-162">また、[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] の内部数字形成アルゴリズムによって、対応する言語 (この場合は英語) の数字が選択されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-162">The internal number shaping algorithm of [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] selects numbers in the corresponding language – in this case English.</span></span> <span data-ttu-id="12a40-163">アラビア数字を正しく表示するためには、`xml:lang` を設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="12a40-163">To make the Arabic numbers render correctly `xml:lang` needs to be set.</span></span>

<span data-ttu-id="12a40-164">次の図は、`xml:lang` を追加した例を示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-164">The following graphic shows the example with `xml:lang` added.</span></span>

![右から左にフローするアラビア数字を示すグラフィック。](./media/bidirectional-features-in-wpf-overview/arabic-numbers-flow-right-left.png)

<span data-ttu-id="12a40-166">次の例では、アプリケーションに `xml:lang` が追加されています。</span><span class="sxs-lookup"><span data-stu-id="12a40-166">The following example adds `xml:lang` to the application.</span></span>

[!code-xaml[LangAttribute#LangAttribute](~/samples/snippets/csharp/VS_Snippets_Wpf/LangAttribute/CS/Window1.xaml#langattribute)]

<span data-ttu-id="12a40-167">多くの言語では、対象となる地域に応じて異なる `xml:lang` 値があります。たとえば、`"ar-SA"` と `"ar-EG"` はアラビア語の 2 つのバリエーションです。</span><span class="sxs-lookup"><span data-stu-id="12a40-167">Be aware that many languages have different `xml:lang` values depending on the targeted region, for example, `"ar-SA"` and `"ar-EG"` represent two variations of Arabic.</span></span> <span data-ttu-id="12a40-168">前の例は、`xml:lang` と <xref:System.Windows.FlowDirection> の両方の値を定義する必要があることを示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-168">The previous examples illustrate that you need to define both the `xml:lang` and <xref:System.Windows.FlowDirection> values.</span></span>

<a name="FlowDirectionNontext"></a>

## <a name="flowdirection-with-non-text-elements"></a><span data-ttu-id="12a40-169">非テキスト要素のある FlowDirection</span><span class="sxs-lookup"><span data-stu-id="12a40-169">FlowDirection with Non-text Elements</span></span>

<span data-ttu-id="12a40-170"><xref:System.Windows.FlowDirection> を使用すると、テキスト要素内のテキストのフローだけでなく、他のほとんどすべての [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] 要素のフロー方向も定義できます。</span><span class="sxs-lookup"><span data-stu-id="12a40-170"><xref:System.Windows.FlowDirection> defines not only how text flows in a textual element but also the flow direction of almost every other [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] element.</span></span> <span data-ttu-id="12a40-171">次の図は、水平方向の <xref:System.Windows.Media.LinearGradientBrush> を使用して、左から右へのグラデーションを付けて背景を描画する <xref:System.Windows.Controls.ToolBar> を示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-171">The following graphic shows a <xref:System.Windows.Controls.ToolBar> that uses a horizontal <xref:System.Windows.Media.LinearGradientBrush> to draw its background with a left to right gradient.</span></span>

![左から右へのグラデーションを付けたツール バーを示す図](./media/bidirectional-features-in-wpf-overview/toolbar-left-right-gradient.png)

<span data-ttu-id="12a40-173"><xref:System.Windows.FlowDirection> を <xref:System.Windows.FlowDirection.RightToLeft> に設定すると、<xref:System.Windows.Controls.ToolBar> ボタンが右から左に配置されるだけでなく、<xref:System.Windows.Media.LinearGradientBrush> でもオフセットが右から左にフローするように再配置されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-173">After setting the <xref:System.Windows.FlowDirection> to <xref:System.Windows.FlowDirection.RightToLeft>, not only the <xref:System.Windows.Controls.ToolBar> buttons are arranged from right to left, but even the <xref:System.Windows.Media.LinearGradientBrush> realigns its offsets to flow from right to left.</span></span>

<span data-ttu-id="12a40-174">次の図は、<xref:System.Windows.Media.LinearGradientBrush> の再配置を示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-174">The following graphic shows the realignment of the <xref:System.Windows.Media.LinearGradientBrush>.</span></span>

![右から左へのグラデーションを付けたツール バーを示す図](./media/bidirectional-features-in-wpf-overview/toolbar-right-left-gradient.png)

<span data-ttu-id="12a40-176">次の例では、<xref:System.Windows.FlowDirection.RightToLeft><xref:System.Windows.Controls.ToolBar> を描画します</span><span class="sxs-lookup"><span data-stu-id="12a40-176">The following example draws a <xref:System.Windows.FlowDirection.RightToLeft><xref:System.Windows.Controls.ToolBar>.</span></span> <span data-ttu-id="12a40-177">(左から右に描画するには、<xref:System.Windows.Controls.ToolBar> の <xref:System.Windows.FlowDirection> 属性を削除します)。</span><span class="sxs-lookup"><span data-stu-id="12a40-177">(To draw it left to right, remove the <xref:System.Windows.FlowDirection> attribute on the <xref:System.Windows.Controls.ToolBar>.</span></span>

[!code-xaml[Gradient#Gradient](~/samples/snippets/csharp/VS_Snippets_Wpf/Gradient/CS/Window1.xaml#gradient)]

<a name="FlowDirectionExceptions"></a>

### <a name="flowdirection-exceptions"></a><span data-ttu-id="12a40-178">FlowDirection の例外</span><span class="sxs-lookup"><span data-stu-id="12a40-178">FlowDirection Exceptions</span></span>

<span data-ttu-id="12a40-179"><xref:System.Windows.FlowDirection> が想定どおりに動作しない場合がいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="12a40-179">There are a few cases where <xref:System.Windows.FlowDirection> does not behave as expected.</span></span> <span data-ttu-id="12a40-180">ここでは、そのような例外を 2 つ取り上げて説明します。</span><span class="sxs-lookup"><span data-stu-id="12a40-180">This section covers two of these exceptions.</span></span>

<span data-ttu-id="12a40-181">**イメージ**</span><span class="sxs-lookup"><span data-stu-id="12a40-181">**Image**</span></span>

<span data-ttu-id="12a40-182"><xref:System.Windows.Controls.Image> は、画像を表示するコントロールを表します。</span><span class="sxs-lookup"><span data-stu-id="12a40-182">An <xref:System.Windows.Controls.Image> represents a control that displays an image.</span></span> <span data-ttu-id="12a40-183">XAML では、表示する <xref:System.Windows.Controls.Image> の Uniform Resource Identifier (URI) を定義する <xref:System.Windows.Controls.Image.Source%2A> プロパティでこれを使用できます。</span><span class="sxs-lookup"><span data-stu-id="12a40-183">In XAML it can be used with a <xref:System.Windows.Controls.Image.Source%2A> property that defines the uniform resource identifier (URI) of the <xref:System.Windows.Controls.Image> to display.</span></span>

<span data-ttu-id="12a40-184">他の [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] 要素とは異なり、<xref:System.Windows.Controls.Image> はコンテナーから <xref:System.Windows.FlowDirection> を継承しません。</span><span class="sxs-lookup"><span data-stu-id="12a40-184">Unlike other [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] elements, an <xref:System.Windows.Controls.Image> does not inherit the <xref:System.Windows.FlowDirection> from the container.</span></span> <span data-ttu-id="12a40-185">ただし、<xref:System.Windows.FlowDirection> が明示的に <xref:System.Windows.FlowDirection.RightToLeft> に設定されている場合、<xref:System.Windows.Controls.Image> は左右反転して表示されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-185">However, if the <xref:System.Windows.FlowDirection> is set explicitly to <xref:System.Windows.FlowDirection.RightToLeft>, an <xref:System.Windows.Controls.Image> is displayed flipped horizontally.</span></span> <span data-ttu-id="12a40-186">これは、双方向コンテンツの開発者にとって便利な機能として実装されています。場合によっては、イメージを左右反転して表示することで必要な効果が得られるためです。</span><span class="sxs-lookup"><span data-stu-id="12a40-186">This is implemented as a convenient feature for developers of bidirectional content; because in some cases, horizontally flipping the image produces the desired effect.</span></span>

<span data-ttu-id="12a40-187">次の図は、反転された <xref:System.Windows.Controls.Image> を示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-187">The following graphic shows a flipped <xref:System.Windows.Controls.Image>.</span></span>

![反転された画像を示す図](./media/bidirectional-features-in-wpf-overview/flipped-image-example.png)

<span data-ttu-id="12a40-189">次の例は、<xref:System.Windows.Controls.Image> で、それを含む <xref:System.Windows.Controls.StackPanel> から <xref:System.Windows.FlowDirection> を継承できないことを示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-189">The following example demonstrates that the <xref:System.Windows.Controls.Image> fails to inherit the <xref:System.Windows.FlowDirection> from the <xref:System.Windows.Controls.StackPanel> that contains it.</span></span>

> [!NOTE]
> <span data-ttu-id="12a40-190">この例を実行するには、C:\ ドライブに **ms_logo.jpg** という名前のファイルが必要です。</span><span class="sxs-lookup"><span data-stu-id="12a40-190">You must have a file named **ms_logo.jpg** on your C:\ drive to run this example.</span></span>

[!code-xaml[Image#Image](~/samples/snippets/csharp/VS_Snippets_Wpf/Image/CS/Window1.xaml#image)]

> [!NOTE]
> <span data-ttu-id="12a40-191">ダウンロード ファイルには、**ms_logo.jpg** ファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="12a40-191">Included in the download files is an **ms_logo.jpg** file.</span></span> <span data-ttu-id="12a40-192">コードは、この .jpg ファイルがプロジェクト内ではなく、C:\ ドライブ上にあることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="12a40-192">The code assumes that the .jpg file is not inside your project but somewhere on the C:\ drive.</span></span> <span data-ttu-id="12a40-193">プロジェクト内のファイルを検索するためには、プロジェクト ファイルから C:\ドライブに .jpg をコピーするかコードを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="12a40-193">You must copy the .jpg from the project files to your C:\ drive or change the code to look for the file inside the project.</span></span> <span data-ttu-id="12a40-194">これを行うには、`Source="file://c:/ms_logo.jpg"` を `Source="ms_logo.jpg"` に変更します。</span><span class="sxs-lookup"><span data-stu-id="12a40-194">To do this change `Source="file://c:/ms_logo.jpg"` to `Source="ms_logo.jpg"`.</span></span>

<span data-ttu-id="12a40-195">**パス**</span><span class="sxs-lookup"><span data-stu-id="12a40-195">**Paths**</span></span>

<span data-ttu-id="12a40-196"><xref:System.Windows.Controls.Image> に加えて、もう 1 つの興味深い要素は <xref:System.Windows.Shapes.Path> です。</span><span class="sxs-lookup"><span data-stu-id="12a40-196">In addition to an <xref:System.Windows.Controls.Image>, another interesting element is <xref:System.Windows.Shapes.Path>.</span></span> <span data-ttu-id="12a40-197">パスは、接続された一連の線と曲線を描画できるオブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="12a40-197">A Path is an object that can draw a series of connected lines and curves.</span></span> <span data-ttu-id="12a40-198"><xref:System.Windows.FlowDirection> に関しては、<xref:System.Windows.Controls.Image> と同様に動作します。たとえば、<xref:System.Windows.FlowDirection.RightToLeft><xref:System.Windows.FlowDirection> は <xref:System.Windows.FlowDirection.LeftToRight> の水平方向のミラーです。</span><span class="sxs-lookup"><span data-stu-id="12a40-198">It behaves in a manner similar to an <xref:System.Windows.Controls.Image> regarding its <xref:System.Windows.FlowDirection>; for example its <xref:System.Windows.FlowDirection.RightToLeft><xref:System.Windows.FlowDirection> is a horizontal mirror of its <xref:System.Windows.FlowDirection.LeftToRight> one.</span></span> <span data-ttu-id="12a40-199">ただし、<xref:System.Windows.Controls.Image> とは異なり、<xref:System.Windows.Shapes.Path> ではコンテナーから <xref:System.Windows.FlowDirection> が継承されるので、明示的に指定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="12a40-199">However, unlike an <xref:System.Windows.Controls.Image>, <xref:System.Windows.Shapes.Path> inherits its <xref:System.Windows.FlowDirection> from the container and one does not need to specify it explicitly.</span></span>

<span data-ttu-id="12a40-200">次の例では、3 本の線を使用して単純な矢印を描画します。</span><span class="sxs-lookup"><span data-stu-id="12a40-200">The following example draws a simple arrow using 3 lines.</span></span> <span data-ttu-id="12a40-201">最初の矢印では、<xref:System.Windows.FlowDirection.RightToLeft> のフロー方向が <xref:System.Windows.Controls.StackPanel> から継承されているため、その始点と終点は右側のルートから測定されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-201">The first arrow inherits the <xref:System.Windows.FlowDirection.RightToLeft> flow direction from the <xref:System.Windows.Controls.StackPanel> so that its start and end points are measured from a root on the right side.</span></span> <span data-ttu-id="12a40-202">また、明示的な <xref:System.Windows.FlowDirection.RightToLeft><xref:System.Windows.FlowDirection> がある 2 つ目の矢印も右側から始まります。</span><span class="sxs-lookup"><span data-stu-id="12a40-202">The second arrow which has an explicit <xref:System.Windows.FlowDirection.RightToLeft><xref:System.Windows.FlowDirection> also starts on the right side.</span></span> <span data-ttu-id="12a40-203">ただし、3 番目の矢印の起点は左側です。</span><span class="sxs-lookup"><span data-stu-id="12a40-203">However, the third arrow has its starting root on the left side.</span></span> <span data-ttu-id="12a40-204">描画の詳細については、<xref:System.Windows.Media.LineGeometry> と <xref:System.Windows.Media.GeometryGroup> を参照してください。</span><span class="sxs-lookup"><span data-stu-id="12a40-204">For more information on drawing see <xref:System.Windows.Media.LineGeometry> and <xref:System.Windows.Media.GeometryGroup>.</span></span>

[!code-xaml[Paths#Paths](~/samples/snippets/csharp/VS_Snippets_Wpf/Paths/CS/Window1.xaml#paths)]

<span data-ttu-id="12a40-205">次の図は、`Path` 要素を使用して矢印が描画された前の例の出力を示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-205">The following graphic shows the output of the previous example with arrows drawn using the `Path` element:</span></span>

![Path 要素を使用して描画された矢印を示す図](./media/bidirectional-features-in-wpf-overview/arrows-drawn-path-element.png)

<span data-ttu-id="12a40-207"><xref:System.Windows.Controls.Image> と <xref:System.Windows.Shapes.Path> は、[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] に <xref:System.Windows.FlowDirection> を使用する方法の 2 つの例です。</span><span class="sxs-lookup"><span data-stu-id="12a40-207">The <xref:System.Windows.Controls.Image> and <xref:System.Windows.Shapes.Path> are two examples of a how [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] uses <xref:System.Windows.FlowDirection>.</span></span> <span data-ttu-id="12a40-208">コンテナー内の特定の方向に [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] 要素をレイアウトする以外に、<xref:System.Windows.FlowDirection> は、サーフェイスにインクをレンダリングする <xref:System.Windows.Controls.InkPresenter>、<xref:System.Windows.Media.LinearGradientBrush>、<xref:System.Windows.Media.RadialGradientBrush> などの要素と共に使用できます。</span><span class="sxs-lookup"><span data-stu-id="12a40-208">Beside laying out [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] elements in a specific direction within a container, <xref:System.Windows.FlowDirection> can be used with elements such as <xref:System.Windows.Controls.InkPresenter> which renders ink on a surface, <xref:System.Windows.Media.LinearGradientBrush>, <xref:System.Windows.Media.RadialGradientBrush>.</span></span> <span data-ttu-id="12a40-209">左から右への動作を模したコンテンツに対して右から左への動作が必要な場合、またはその逆の場合には、[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] を使用すればその動作が可能になります。</span><span class="sxs-lookup"><span data-stu-id="12a40-209">Whenever you need a right to left behavior for your content that mimics a left to right behavior, or vice versa, [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] provides that capability.</span></span>

<a name="NumberSubstitution"></a>

## <a name="number-substitution"></a><span data-ttu-id="12a40-210">数字の置換</span><span class="sxs-lookup"><span data-stu-id="12a40-210">Number Substitution</span></span>

<span data-ttu-id="12a40-211">従来から、Windows は、同じ数字をカルチャによって異なる形状で表現できるようにすると同時に、ロケールが異なってもこれらの数字の内部ストレージを統一する (たとえば、数字をごく一般的な 16 進値である 0x40 や 0x41 で格納しながら、表示は選択された言語で行う) ことによって、数字の置換をサポートしてきました。</span><span class="sxs-lookup"><span data-stu-id="12a40-211">Historically, Windows has supported number substitution by allowing the representation of different cultural shapes for the same digits while keeping the internal storage of these digits unified among different locales, for example numbers are stored in their well known hexadecimal values, 0x40, 0x41, but displayed according to the selected language.</span></span>

<span data-ttu-id="12a40-212">これによって、言語間での変換を行わなくてもアプリケーションが数値を処理することができます。たとえば、ローカライズされたアラビア語 Windows の Microsoft Excel スプレッドシートを開いて、アラビア語の形状の数字を表示することができますが、このスプレッドシートを Windows のヨーロッパ言語バージョンで開き、同じ数字のヨーロッパ語表現を表示することもできます。</span><span class="sxs-lookup"><span data-stu-id="12a40-212">This has allowed applications to process numerical values without the need to convert them from one language to another, for example a user can open an Microsoft Excel spreadsheet in a localized Arabic Windows and see the numbers shaped in Arabic, but open it in a European version of Windows and see European representation of the same numbers.</span></span> <span data-ttu-id="12a40-213">これは、コンマ区切りやパーセント記号などの他の記号でも必要です。これらの記号は、通常同じドキュメント内で数字を伴っているからです。</span><span class="sxs-lookup"><span data-stu-id="12a40-213">This is also necessary for other symbols such as comma separators and percentage symbol because they usually accompany numbers in the same document.</span></span>

[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="12a40-214">は引き続きこの機能を備え、置換を使用するタイミングと方法をユーザーがさらに制御できるようにこの機能のサポートが強化されています。</span><span class="sxs-lookup"><span data-stu-id="12a40-214">continues the same tradition, and adds further support for this feature that allows more user control over when and how substitution is used.</span></span> <span data-ttu-id="12a40-215">この機能はすべての言語向けに設計されていますが、アプリケーションが実行される可能性のあるカルチャが多岐にわたるために特定の言語に合わせて数字の形状を設定することがアプリケーション開発者にとって通常は問題となる双方向コンテンツに対して特に有用です。</span><span class="sxs-lookup"><span data-stu-id="12a40-215">While this feature is designed for any language, it is particularly useful in bidirectional content where shaping digits for a specific language is usually a challenge for application developers because of the various cultures an application might run on.</span></span>

<span data-ttu-id="12a40-216">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] での数字の置換動作を制御するコア プロパティは、<xref:System.Windows.Media.NumberSubstitution.Substitution%2A> 依存関係プロパティです。</span><span class="sxs-lookup"><span data-stu-id="12a40-216">The core property controlling how number substitution works in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] is the <xref:System.Windows.Media.NumberSubstitution.Substitution%2A> dependency property.</span></span> <span data-ttu-id="12a40-217"><xref:System.Windows.Media.NumberSubstitution> クラスには、テキスト内の数値の表示方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="12a40-217">The <xref:System.Windows.Media.NumberSubstitution> class specifies how numbers in text are to be displayed.</span></span> <span data-ttu-id="12a40-218">その動作を定義する 3 つのパブリック プロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="12a40-218">It has three public properties that define its behavior.</span></span> <span data-ttu-id="12a40-219">以下は、各プロパティの概要です。</span><span class="sxs-lookup"><span data-stu-id="12a40-219">The following is a summary of each of the properties:</span></span>

<span data-ttu-id="12a40-220">**CultureSource:**</span><span class="sxs-lookup"><span data-stu-id="12a40-220">**CultureSource:**</span></span>

<span data-ttu-id="12a40-221">このプロパティは、数字のカルチャを決定する方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="12a40-221">This property specifies how the culture for numbers is determined.</span></span> <span data-ttu-id="12a40-222">これは、3 つの <xref:System.Windows.Media.NumberCultureSource> 列挙値のいずれかを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="12a40-222">It takes one of three <xref:System.Windows.Media.NumberCultureSource> enumeration values.</span></span>

- <span data-ttu-id="12a40-223">オーバーライド:数値カルチャは、<xref:System.Windows.Media.NumberSubstitution.CultureOverride%2A> プロパティのカルチャです。</span><span class="sxs-lookup"><span data-stu-id="12a40-223">Override: Number culture is that of <xref:System.Windows.Media.NumberSubstitution.CultureOverride%2A> property.</span></span>

- <span data-ttu-id="12a40-224">テキスト:数字カルチャは、テキスト ランのカルチャです。</span><span class="sxs-lookup"><span data-stu-id="12a40-224">Text: Number culture is the culture of the text run.</span></span> <span data-ttu-id="12a40-225">マークアップでは、これは `xml:lang` またはそのエイリアス `Language` プロパティ (<xref:System.Windows.FrameworkElement.Language%2A> または <xref:System.Windows.FrameworkContentElement.Language%2A>) になります。</span><span class="sxs-lookup"><span data-stu-id="12a40-225">In markup, this would be `xml:lang`, or its alias `Language` property (<xref:System.Windows.FrameworkElement.Language%2A> or <xref:System.Windows.FrameworkContentElement.Language%2A>).</span></span> <span data-ttu-id="12a40-226">また、これは <xref:System.Windows.FrameworkContentElement> から派生したクラスの既定値です。</span><span class="sxs-lookup"><span data-stu-id="12a40-226">Also, it is the default for classes deriving from <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="12a40-227">このようなクラスには、<xref:System.Windows.Documents.Paragraph?displayProperty=nameWithType>、<xref:System.Windows.Documents.Table?displayProperty=nameWithType>、<xref:System.Windows.Documents.TableCell?displayProperty=nameWithType> などがあります。</span><span class="sxs-lookup"><span data-stu-id="12a40-227">Such classes include <xref:System.Windows.Documents.Paragraph?displayProperty=nameWithType>, <xref:System.Windows.Documents.Table?displayProperty=nameWithType>, <xref:System.Windows.Documents.TableCell?displayProperty=nameWithType> and so forth.</span></span>

- <span data-ttu-id="12a40-228">ユーザー:数値カルチャは、現在のスレッドのカルチャです。</span><span class="sxs-lookup"><span data-stu-id="12a40-228">User: Number culture is the culture of the current thread.</span></span> <span data-ttu-id="12a40-229">このプロパティは、<xref:System.Windows.Controls.Page>、<xref:System.Windows.Window>、<xref:System.Windows.Controls.TextBlock> などの <xref:System.Windows.FrameworkElement> のすべてのサブクラスの既定値です。</span><span class="sxs-lookup"><span data-stu-id="12a40-229">This property is the default for all subclasses of <xref:System.Windows.FrameworkElement> such as <xref:System.Windows.Controls.Page>, <xref:System.Windows.Window> and <xref:System.Windows.Controls.TextBlock>.</span></span>

<span data-ttu-id="12a40-230">**CultureOverride**:</span><span class="sxs-lookup"><span data-stu-id="12a40-230">**CultureOverride**:</span></span>

<span data-ttu-id="12a40-231"><xref:System.Windows.Media.NumberSubstitution.CultureOverride%2A> プロパティは、<xref:System.Windows.Media.NumberSubstitution.CultureSource%2A> プロパティが <xref:System.Windows.Media.NumberCultureSource.Override> に設定されている場合にのみ使用され、それ以外の場合は無視されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-231">The <xref:System.Windows.Media.NumberSubstitution.CultureOverride%2A> property is used only if the <xref:System.Windows.Media.NumberSubstitution.CultureSource%2A> property is set to <xref:System.Windows.Media.NumberCultureSource.Override> and is ignored otherwise.</span></span> <span data-ttu-id="12a40-232">このプロパティは数字カルチャを指定します。</span><span class="sxs-lookup"><span data-stu-id="12a40-232">It specifies the number culture.</span></span> <span data-ttu-id="12a40-233">既定値である `null` の値は、en-US として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-233">A value of `null`, the default value, is interpreted as en-US.</span></span>

<span data-ttu-id="12a40-234">**Substitution**:</span><span class="sxs-lookup"><span data-stu-id="12a40-234">**Substitution**:</span></span>

<span data-ttu-id="12a40-235">このプロパティは、実行する数字の置換の種類を指定します。</span><span class="sxs-lookup"><span data-stu-id="12a40-235">This property specifies the type of number substitution to perform.</span></span> <span data-ttu-id="12a40-236">次の <xref:System.Windows.Media.NumberSubstitutionMethod> 列挙値のいずれかを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="12a40-236">It takes one of the following <xref:System.Windows.Media.NumberSubstitutionMethod> enumeration values:</span></span>

- <span data-ttu-id="12a40-237"><xref:System.Windows.Media.NumberSubstitutionMethod.AsCulture>:置換方法は、数字カルチャの <xref:System.Globalization.NumberFormatInfo.DigitSubstitution%2A?displayProperty=nameWithType> プロパティに基づいて決まります。</span><span class="sxs-lookup"><span data-stu-id="12a40-237"><xref:System.Windows.Media.NumberSubstitutionMethod.AsCulture>: The substitution method is determined based on the number culture's <xref:System.Globalization.NumberFormatInfo.DigitSubstitution%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="12a40-238">既定値です。</span><span class="sxs-lookup"><span data-stu-id="12a40-238">This is the default.</span></span>

- <span data-ttu-id="12a40-239"><xref:System.Windows.Media.NumberSubstitutionMethod.Context>:数字カルチャがアラビアまたはペルシャのカルチャである場合に、数字がコンテキストによって異なるように指定します。</span><span class="sxs-lookup"><span data-stu-id="12a40-239"><xref:System.Windows.Media.NumberSubstitutionMethod.Context>: If the number culture is an Arabic or Persian culture, it specifies that the digits depend on the context.</span></span>

- <span data-ttu-id="12a40-240"><xref:System.Windows.Media.NumberSubstitutionMethod.European>:数字は常にヨーロッパの数字としてレンダリングされます。</span><span class="sxs-lookup"><span data-stu-id="12a40-240"><xref:System.Windows.Media.NumberSubstitutionMethod.European>: Numbers are always rendered as European digits.</span></span>

- <span data-ttu-id="12a40-241"><xref:System.Windows.Media.NumberSubstitutionMethod.NativeNational>:数字は、カルチャの <xref:System.Globalization.CultureInfo.NumberFormat%2A> で指定されているように、数字カルチャの国番号を使用してレンダリングされます。</span><span class="sxs-lookup"><span data-stu-id="12a40-241"><xref:System.Windows.Media.NumberSubstitutionMethod.NativeNational>: Numbers are rendered using the national digits for the number culture, as specified by the culture's <xref:System.Globalization.CultureInfo.NumberFormat%2A>.</span></span>

- <span data-ttu-id="12a40-242"><xref:System.Windows.Media.NumberSubstitutionMethod.Traditional>:数字は、数字カルチャの通常の数字を使用してレンダリングされます。</span><span class="sxs-lookup"><span data-stu-id="12a40-242"><xref:System.Windows.Media.NumberSubstitutionMethod.Traditional>: Numbers are rendered using the traditional digits for the number culture.</span></span> <span data-ttu-id="12a40-243">ほとんどのカルチャでは、これは <xref:System.Windows.Media.NumberSubstitutionMethod.NativeNational> と同じです。</span><span class="sxs-lookup"><span data-stu-id="12a40-243">For most cultures, this is the same as <xref:System.Windows.Media.NumberSubstitutionMethod.NativeNational>.</span></span> <span data-ttu-id="12a40-244">ただし、<xref:System.Windows.Media.NumberSubstitutionMethod.NativeNational> の結果は、一部のアラビア カルチャではラテン数字になりますが、この値の結果は、すべてのアラビア カルチャでアラビア数字になります。</span><span class="sxs-lookup"><span data-stu-id="12a40-244">However, <xref:System.Windows.Media.NumberSubstitutionMethod.NativeNational> results in Latin digits for some Arabic cultures, whereas this value results in Arabic digits for all Arabic cultures.</span></span>

<span data-ttu-id="12a40-245">これらの値は双方向コンテンツ開発者にとってどういった意味があるのでしょうか。</span><span class="sxs-lookup"><span data-stu-id="12a40-245">What do those values mean for a bidirectional content developer?</span></span> <span data-ttu-id="12a40-246">ほとんどの場合、開発者は <xref:System.Windows.FlowDirection> と各テキストの [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] 要素の言語を定義するだけで済みます。たとえば、`Language="ar-SA"` と <xref:System.Windows.Media.NumberSubstitution> ロジックは、正しい [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] に従って数字を表示します。</span><span class="sxs-lookup"><span data-stu-id="12a40-246">In most cases, the developer might need only to define <xref:System.Windows.FlowDirection> and the language of each textual [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] element, for example `Language="ar-SA"` and the <xref:System.Windows.Media.NumberSubstitution> logic takes care of displaying the numbers according to the correct [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)].</span></span> <span data-ttu-id="12a40-247">次の例は、Windows のアラビア語版で実行されている [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] アプリケーションでアラビア数字と英語数字を使用する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="12a40-247">The following example demonstrates using Arabic and English numbers in a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] application running in an Arabic version of Windows.</span></span>

[!code-xaml[Numbers#Numbers](~/samples/snippets/csharp/VS_Snippets_Wpf/Numbers/CS/Window1.xaml#numbers)]

<span data-ttu-id="12a40-248">次の図は、アラビア語と英語の数字が表示されるアラビア語バージョンの Windows で、前のサンプルを実行した場合の出力を示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-248">The following graphic shows the output of the previous sample if you're running in an Arabic version of Windows with Arabic and English numbers displayed:</span></span>

![アラビア語と英語の数字を示す図](./media/bidirectional-features-in-wpf-overview/arabic-english-numbers.png)

<span data-ttu-id="12a40-250">この場合は <xref:System.Windows.FlowDirection> を <xref:System.Windows.FlowDirection.LeftToRight> に設定するとヨーロッパの数字が得られるため、<xref:System.Windows.FlowDirection> が重要でした。</span><span class="sxs-lookup"><span data-stu-id="12a40-250">The <xref:System.Windows.FlowDirection> was important in this case because setting the <xref:System.Windows.FlowDirection> to <xref:System.Windows.FlowDirection.LeftToRight> instead would have yielded European digits.</span></span> <span data-ttu-id="12a40-251">以下のセクションでは、ドキュメント全体で数字の表示を統一する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="12a40-251">The following sections discuss how to have a unified display of digits throughout your document.</span></span> <span data-ttu-id="12a40-252">この例では、アラビア語版 Windows で実行されていなければ、すべての数字がヨーロッパ数字として表示されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-252">If this example is not running on Arabic Windows, all the digits display as European digits.</span></span>

<span data-ttu-id="12a40-253">**置換ルールの定義**</span><span class="sxs-lookup"><span data-stu-id="12a40-253">**Defining Substitution Rules**</span></span>

<span data-ttu-id="12a40-254">実際のアプリケーションでは、プログラムでの言語設定が必要となる場合があります。</span><span class="sxs-lookup"><span data-stu-id="12a40-254">In a real application you might need to set the Language programmatically.</span></span> <span data-ttu-id="12a40-255">たとえば、`xml:lang` 属性をシステムの [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] により使用されている属性と同じものに設定する場合もあり、アプリケーション状態に応じて言語を変更する場合もあります。</span><span class="sxs-lookup"><span data-stu-id="12a40-255">For example, you want to set the `xml:lang` attribute to be the same as the one used by the system’s [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)], or maybe change the language depending on the application state.</span></span>

<span data-ttu-id="12a40-256">アプリケーションの状態に基づいて変更を行う場合には、[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] で提供される他の機能を使用してください。</span><span class="sxs-lookup"><span data-stu-id="12a40-256">If you want to make changes based on the application's state, make use of other features provided by [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span></span>

<span data-ttu-id="12a40-257">アプリケーション コンポーネントの `NumberSubstitution.CultureSource="Text"` を最初に設定します。</span><span class="sxs-lookup"><span data-stu-id="12a40-257">First, set the application component’s `NumberSubstitution.CultureSource="Text"`.</span></span> <span data-ttu-id="12a40-258">この設定を使用すると、<xref:System.Windows.Controls.TextBlock> など、既定値として "User" を持つテキスト要素の設定が [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] から取得されないようになります。</span><span class="sxs-lookup"><span data-stu-id="12a40-258">Using this setting makes sure that the settings do not come from the [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] for text elements that have "User" as the default, such as <xref:System.Windows.Controls.TextBlock>.</span></span>

<span data-ttu-id="12a40-259">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="12a40-259">For example:</span></span>

```xaml
<TextBlock
   Name="text1" NumberSubstitution.CultureSource="Text">
   1234+5679=6913
</TextBlock>
```

<span data-ttu-id="12a40-260">対応する C# コードで、たとえば `Language` プロパティを `"ar-SA"` に設定します。</span><span class="sxs-lookup"><span data-stu-id="12a40-260">In the corresponding C# code, set the `Language` property, for example, to `"ar-SA"`.</span></span>

```csharp
text1.Language = System.Windows.Markup.XmlLanguage.GetLanguage("ar-SA");
```

<span data-ttu-id="12a40-261">`Language` プロパティを現在のユーザーの UI 言語に設定する必要がある場合は、次のコードを使用します。</span><span class="sxs-lookup"><span data-stu-id="12a40-261">If you need to set the `Language` property to the current user’s UI language use the following code.</span></span>

```csharp
text1.Language = System.Windows.Markup.XmlLanguage.GetLanguage(System.Globalization.CultureInfo.CurrentUICulture.IetfLanguageTag);
```

<span data-ttu-id="12a40-262"><xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> は、実行時にその時点のスレッドによって使用されているその時点のカルチャを表します。</span><span class="sxs-lookup"><span data-stu-id="12a40-262"><xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> represents the current culture used by the current thread at run time.</span></span>

<span data-ttu-id="12a40-263">最終的な XAML 例は次の例のようになります。</span><span class="sxs-lookup"><span data-stu-id="12a40-263">Your final XAML example should be similar to the following example.</span></span>

[!code-xaml[Numbers2#Numbers2](~/samples/snippets/csharp/VS_Snippets_Wpf/Numbers2/CS/Window1.xaml#numbers2)]

<span data-ttu-id="12a40-264">最終的な C# 例は次のようなものになります。</span><span class="sxs-lookup"><span data-stu-id="12a40-264">Your final C# example should be similar to the following.</span></span>

[!code-csharp[NumbersCSharp#NumbersCSharp](~/samples/snippets/csharp/VS_Snippets_Wpf/NumbersCSharp/CSharp/Window1.xaml.cs#numberscsharp)]

<span data-ttu-id="12a40-265">次の図は、いずれのプログラミング言語でも、アラビア数字がウィンドウにどのように表示されるかを示しています。</span><span class="sxs-lookup"><span data-stu-id="12a40-265">The following graphic shows what the window looks like for either programming language, displaying Arabic numbers:</span></span>

![アラビア数字を表示した図](./media/bidirectional-features-in-wpf-overview/displays-arabic-numbers.png)

<span data-ttu-id="12a40-267">**Substitution プロパティの使用**</span><span class="sxs-lookup"><span data-stu-id="12a40-267">**Using the Substitution Property**</span></span>

<span data-ttu-id="12a40-268">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] での数字の置換動作は、テキスト要素の言語とその <xref:System.Windows.FlowDirection> の両方によって変わります。</span><span class="sxs-lookup"><span data-stu-id="12a40-268">The way number substitution works in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] depends on both the Language of the text element and its <xref:System.Windows.FlowDirection>.</span></span> <span data-ttu-id="12a40-269"><xref:System.Windows.FlowDirection> が左から右の場合、ヨーロッパの数字がレンダリングされます。</span><span class="sxs-lookup"><span data-stu-id="12a40-269">If the <xref:System.Windows.FlowDirection> is left to right, then European digits are rendered.</span></span> <span data-ttu-id="12a40-270">ただし、前にアラビア語のテキストがある場合、または言語が "ar" に設定されていて <xref:System.Windows.FlowDirection> が <xref:System.Windows.FlowDirection.RightToLeft> の場合は、代わりにアラビア数字が表示されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-270">However if it is preceded by Arabic text, or has the language set to "ar" and the <xref:System.Windows.FlowDirection> is <xref:System.Windows.FlowDirection.RightToLeft>, Arabic digits are rendered instead.</span></span>

<span data-ttu-id="12a40-271">ただし、たとえば、すべてのユーザーに対してヨーロッパ数字を表示するなどの、統一されたアプリケーションを作成する必要がある場合もあります。</span><span class="sxs-lookup"><span data-stu-id="12a40-271">In some cases, however, you might want to create a unified application, for example European digits for all users.</span></span> <span data-ttu-id="12a40-272">または、特定の <xref:System.Windows.Style> を持つ <xref:System.Windows.Documents.Table> セルにアラビア数字を使用します。</span><span class="sxs-lookup"><span data-stu-id="12a40-272">Or Arabic digits in <xref:System.Windows.Documents.Table> cells with a specific <xref:System.Windows.Style>.</span></span> <span data-ttu-id="12a40-273">これを行う簡単な方法の 1 つは、<xref:System.Windows.Media.NumberSubstitution.Substitution%2A> プロパティを使用することです。</span><span class="sxs-lookup"><span data-stu-id="12a40-273">One easy way to do that is using the <xref:System.Windows.Media.NumberSubstitution.Substitution%2A> property.</span></span>

<span data-ttu-id="12a40-274">次の例では、最初の <xref:System.Windows.Controls.TextBlock> には <xref:System.Windows.Media.NumberSubstitution.Substitution%2A> プロパティが設定されていないため、アルゴリズムによって想定どおりにアラビア数字が表示されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-274">In the following example, the first <xref:System.Windows.Controls.TextBlock> does not have the <xref:System.Windows.Media.NumberSubstitution.Substitution%2A> property set, so the algorithm displays Arabic digits as expected.</span></span> <span data-ttu-id="12a40-275">ただし、2 つ目の <xref:System.Windows.Controls.TextBlock> では、置換はヨーロッパに設定され、アラビア数字の既定の置換がオーバーライドされているため、ヨーロッパ数字が表示されます。</span><span class="sxs-lookup"><span data-stu-id="12a40-275">However in the second <xref:System.Windows.Controls.TextBlock>, the substitution is set to European overriding the default substitution for Arabic numbers, and European digits are displayed.</span></span>

[!code-xaml[Numbers3#Numbers3](~/samples/snippets/csharp/VS_Snippets_Wpf/Numbers3/CS/Window1.xaml#numbers3)]
