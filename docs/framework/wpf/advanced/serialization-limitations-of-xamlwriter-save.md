---
title: XamlWriter.Save のシリアル化の制限
ms.date: 03/30/2017
helpviewer_keywords:
- XamlWriter.Save [WPF], serialization limitations of
- limitations of XamlWriter.Save
- serialization limitations of XamlWriter.Save
ms.assetid: f86acc91-2b67-4039-8555-505734491d36
ms.openlocfilehash: 5b9141d5df40d74c4682f418a8fb089fddcfcaa9
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/07/2019
ms.locfileid: "73740742"
---
# <a name="serialization-limitations-of-xamlwritersave"></a><span data-ttu-id="de3d6-102">XamlWriter.Save のシリアル化の制限</span><span class="sxs-lookup"><span data-stu-id="de3d6-102">Serialization Limitations of XamlWriter.Save</span></span>
<span data-ttu-id="de3d6-103">API <xref:System.Windows.Markup.XamlWriter.Save%2A> は、[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] アプリケーションの内容を [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] ファイルとしてシリアル化するために使用できます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-103">The API <xref:System.Windows.Markup.XamlWriter.Save%2A> can be used to serialize the contents of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] application as a [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] file.</span></span> <span data-ttu-id="de3d6-104">ただし、シリアル化される内容にはいくつかの注目すべき制限があります。</span><span class="sxs-lookup"><span data-stu-id="de3d6-104">However, there are some notable limitations in exactly what is serialized.</span></span> <span data-ttu-id="de3d6-105">これらの制限といくつかの一般的な考慮事項については、このトピックで説明します。</span><span class="sxs-lookup"><span data-stu-id="de3d6-105">These limitations and some general considerations are documented in this topic.</span></span>  

<a name="Run_Time__Not_Design_Time_Representation"></a>   
## <a name="run-time-not-design-time-representation"></a><span data-ttu-id="de3d6-106">実行時 (デザイン時の表現ではありません)</span><span class="sxs-lookup"><span data-stu-id="de3d6-106">Run-Time, Not Design-Time Representation</span></span>  
 <span data-ttu-id="de3d6-107"><xref:System.Windows.Markup.XamlWriter.Save%2A> の呼び出しによってシリアル化されるのは、実行時にシリアル化されるオブジェクトの表現になるという考え方です。</span><span class="sxs-lookup"><span data-stu-id="de3d6-107">The basic philosophy of what is serialized by a call to <xref:System.Windows.Markup.XamlWriter.Save%2A> is that the result will be a representation of the object being serialized, at run-time.</span></span> <span data-ttu-id="de3d6-108">元の [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイルの多くのデザイン時プロパティは、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] がメモリ内オブジェクトとして読み込まれる時間によって既に最適化されているか、または失われている可能性があり、シリアル化するために <xref:System.Windows.Markup.XamlWriter.Save%2A> を呼び出すと保持されません。</span><span class="sxs-lookup"><span data-stu-id="de3d6-108">Many design-time properties of the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file may already be optimized or lost by the time that the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is loaded as in-memory objects, and are not preserved when you call <xref:System.Windows.Markup.XamlWriter.Save%2A> to serialize.</span></span> <span data-ttu-id="de3d6-109">シリアル化された結果は、アプリケーションの構築された論理ツリーを効果的に表現したものですが、それを生成した元の [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] であるとは限りません。</span><span class="sxs-lookup"><span data-stu-id="de3d6-109">The serialized result is an effective representation of the constructed logical tree of the application, but not necessarily of the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] that produced it.</span></span> <span data-ttu-id="de3d6-110">これらの問題により、広範な [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] デザインサーフェイスの一部として <xref:System.Windows.Markup.XamlWriter.Save%2A> シリアル化を使用することが非常に困難になります。</span><span class="sxs-lookup"><span data-stu-id="de3d6-110">These issues make it extremely difficult to use the <xref:System.Windows.Markup.XamlWriter.Save%2A> serialization as part of an extensive [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] design surface.</span></span>  
  
<a name="Serialization_is_Self_Contained"></a>   
## <a name="serialization-is-self-contained"></a><span data-ttu-id="de3d6-111">シリアル化は自己完結型です</span><span class="sxs-lookup"><span data-stu-id="de3d6-111">Serialization is Self-Contained</span></span>  
 <span data-ttu-id="de3d6-112"><xref:System.Windows.Markup.XamlWriter.Save%2A> のシリアル化された出力は自己完結しています。シリアル化されるすべてのものは、1つのルート要素を持つ [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] の単一ページに含まれ、Uri 以外の外部参照は含まれません。</span><span class="sxs-lookup"><span data-stu-id="de3d6-112">The serialized output of <xref:System.Windows.Markup.XamlWriter.Save%2A> is self-contained; everything that is serialized is contained inside a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] single page, with a single root element, and no external references other than URIs.</span></span> <span data-ttu-id="de3d6-113">たとえば、ページがアプリケーションリソースからリソースを参照している場合、これらは、シリアル化されているページのコンポーネントであるかのように表示されます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-113">For instance, if your page referenced resources from application resources, these will appear as if they were a component of the page being serialized.</span></span>  
  
<a name="Extension_References_are_Dereferenced"></a>   
## <a name="extension-references-are-dereferenced"></a><span data-ttu-id="de3d6-114">拡張機能の参照が逆参照されています</span><span class="sxs-lookup"><span data-stu-id="de3d6-114">Extension References are Dereferenced</span></span>  
 <span data-ttu-id="de3d6-115">`StaticResource` や `Binding`など、さまざまなマークアップ拡張形式によって行われるオブジェクトへの一般的な参照は、シリアル化プロセスによって逆参照されます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-115">Common references to objects made by various markup extension formats, such as `StaticResource` or `Binding`, will be dereferenced by the serialization process.</span></span> <span data-ttu-id="de3d6-116">これらは、メモリ内のオブジェクトがアプリケーションランタイムによって作成された時点で既に逆参照されており、<xref:System.Windows.Markup.XamlWriter.Save%2A> ロジックは元の [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] を再参照して、シリアル化された出力への参照を復元しません。</span><span class="sxs-lookup"><span data-stu-id="de3d6-116">These were already dereferenced at the time that in-memory objects were created by the application runtime, and the <xref:System.Windows.Markup.XamlWriter.Save%2A> logic does not revisit the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] to restore such references to the serialized output.</span></span> <span data-ttu-id="de3d6-117">これにより、データを取得した値が、実行時の表現によって最後に使用された値になる可能性があります。これにより、ローカルで他の値が設定された値を区別することができます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-117">This potentially freezes any databound or resource obtained value to be the value last used by the run-time representation, with only limited or indirect ability to distinguish such a value from any other value set locally.</span></span> <span data-ttu-id="de3d6-118">また、イメージは、元のソース参照としてではなく、プロジェクトに存在するイメージへのオブジェクト参照としてシリアル化され、元に参照されたファイル名や URI が失われます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-118">Images are also serialized as object references to images as they exist in the project, rather than as original source references, losing whatever filename or URI was originally referenced.</span></span> <span data-ttu-id="de3d6-119">同じページ内で宣言されたリソースも、リソースコレクションのキーとして保存されるのではなく、参照先のポイントにシリアル化されます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-119">Even resources declared within the same page are seen serialized into the point where they were referenced, rather than being preserved as a key of a resource collection.</span></span>  
  
<a name="Event_Handling_is_Not_Preserved"></a>   
## <a name="event-handling-is-not-preserved"></a><span data-ttu-id="de3d6-120">イベント処理は保持されません</span><span class="sxs-lookup"><span data-stu-id="de3d6-120">Event Handling is Not Preserved</span></span>  
 <span data-ttu-id="de3d6-121">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] によって追加されたイベントハンドラーは、シリアル化されても保持されません。</span><span class="sxs-lookup"><span data-stu-id="de3d6-121">When event handlers that are added through [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] are serialized, they are not preserved.</span></span> <span data-ttu-id="de3d6-122">分離コードを使用せずに [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] (また、関連する x:Code 機構も含まない)、ランタイム手続き型のロジックをシリアル化する方法がありません。</span><span class="sxs-lookup"><span data-stu-id="de3d6-122">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] without code-behind (and also without the related x:Code mechanism) has no way of serializing runtime procedural logic.</span></span> <span data-ttu-id="de3d6-123">シリアル化は自己完結型であり、論理ツリーに限定されているため、イベントハンドラーを格納する機能はありません。</span><span class="sxs-lookup"><span data-stu-id="de3d6-123">Because serialization is self-contained and limited to the logical tree, there is no facility for storing the event handlers.</span></span> <span data-ttu-id="de3d6-124">その結果、イベントハンドラー属性は、属性自体とハンドラーに名前を付けた文字列値の両方を出力 [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]から削除されます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-124">As a result, event handler attributes, both the attribute itself and the string value that names the handler, are removed from the output [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>  
  
<a name="Realistic_Scenarios_for_Use_of_XAMLWriter_Save"></a>   
## <a name="realistic-scenarios-for-use-of-xamlwritersave"></a><span data-ttu-id="de3d6-125">XAMLWriter を使用するための現実的なシナリオ</span><span class="sxs-lookup"><span data-stu-id="de3d6-125">Realistic Scenarios for Use of XAMLWriter.Save</span></span>  
 <span data-ttu-id="de3d6-126">ここに記載されている制限はかなり大きくなりますが、シリアル化に <xref:System.Windows.Markup.XamlWriter.Save%2A> を使用するための適切なシナリオもいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="de3d6-126">While the limitations listed here are fairly substantial, there are still several appropriate scenarios for using <xref:System.Windows.Markup.XamlWriter.Save%2A> for serialization.</span></span>  
  
- <span data-ttu-id="de3d6-127">ベクターまたはグラフィカル出力: レンダリングされた領域の出力を使用して、再読み込み時に同じベクターまたはグラフィックスを再現できます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-127">Vector or graphical output: The output of the rendered area can be used to reproduce the same vector or graphics when reloaded.</span></span>  
  
- <span data-ttu-id="de3d6-128">リッチテキストおよびフロードキュメント: テキストおよびすべての要素の書式設定と要素の含有は、出力に保持されます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-128">Rich text and flow documents: Text and all element formatting and element containment within it is preserved in the output.</span></span> <span data-ttu-id="de3d6-129">これは、クリップボードの機能を推定するメカニズムに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-129">This can be useful for mechanisms that approximate a clipboard functionality.</span></span>  
  
- <span data-ttu-id="de3d6-130">ビジネスオブジェクトデータの保持: XML データなどのカスタム要素にデータを格納している場合は、ビジネスオブジェクトが、参照渡しのプロパティ値のためのカスタムコンストラクターと変換の提供などの基本的な [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] 規則に従う必要があります。オブジェクトは、シリアル化によってこれらできます。</span><span class="sxs-lookup"><span data-stu-id="de3d6-130">Preserving business object data: If you have stored data in custom elements, such as XML data, so long as your business objects follow basic [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] rules such as providing custom constructors and conversion for by-reference property values, these business objects can be perpetuated through serialization.</span></span>
