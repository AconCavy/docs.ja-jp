---
title: プロパティ変更イベント
ms.date: 03/30/2017
helpviewer_keywords:
- dependency properties [WPF], change events
- property value changes [WPF]
- change events [WPF], property
- events [WPF], change in property values
- creating property triggers [WPF]
- property change events [WPF], types of
- property change events [WPF]
- property triggers [WPF]
- identifying changed property events [WPF]
- property triggers [WPF], definition of
ms.assetid: 0a7989df-9674-4cc1-bc50-5d8ef5d9c055
ms.openlocfilehash: 68be4c6bf7cce8a3aeb928e1f0b0e8131263320c
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/03/2019
ms.locfileid: "73459340"
---
# <a name="property-change-events"></a><span data-ttu-id="afd07-102">プロパティ変更イベント</span><span class="sxs-lookup"><span data-stu-id="afd07-102">Property Change Events</span></span>
[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="afd07-103">では、プロパティ値の変更に応答して発生するさまざまなイベントが定義されています。</span><span class="sxs-lookup"><span data-stu-id="afd07-103">defines several events that are raised in response to a change in the value of a property.</span></span> <span data-ttu-id="afd07-104">通常、プロパティは依存関係プロパティです。</span><span class="sxs-lookup"><span data-stu-id="afd07-104">Often the property is a dependency property.</span></span> <span data-ttu-id="afd07-105">イベント自体は、ルーティング イベントのこともあれば、標準の共通言語ランタイム (CLR) イベントのこともあります。</span><span class="sxs-lookup"><span data-stu-id="afd07-105">The event itself is sometimes a routed event and is sometimes a standard common language runtime (CLR) event.</span></span> <span data-ttu-id="afd07-106">要素ツリーを通じて適切にルーティングされるプロパティ変更もあれば、プロパティが変更されたオブジェクトにのみ関係するプロパティ変更もあるため、イベントの定義はシナリオによって異なります。</span><span class="sxs-lookup"><span data-stu-id="afd07-106">The definition of the event varies depending on the scenario, because some property changes are more appropriately routed through an element tree, whereas other property changes are generally only of concern to the object where the property changed.</span></span>  
  
## <a name="identifying-a-property-change-event"></a><span data-ttu-id="afd07-107">プロパティ変更イベントの識別</span><span class="sxs-lookup"><span data-stu-id="afd07-107">Identifying a Property Change Event</span></span>  
 <span data-ttu-id="afd07-108">シグネチャ パターンまたは名前付けパターンに基づいてプロパティ変更を報告するすべてのイベントが、プロパティ変更イベントとして明示的に識別されるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="afd07-108">Not all events that report a property change are explicitly identified as a property changed event, either by virtue of a signature pattern or a naming pattern.</span></span> <span data-ttu-id="afd07-109">通常、SDK ドキュメント内のイベントの説明では、イベントがプロパティ値の変更に直接結び付くものであるかどうかが示されており、プロパティとイベントのクロス リファレンスが提供されます。</span><span class="sxs-lookup"><span data-stu-id="afd07-109">Generally, the description of the event in the SDK documentation indicates whether the event is directly tied to a property value change and provides cross-references between the property and event.</span></span>  
  
### <a name="routedpropertychanged-events"></a><span data-ttu-id="afd07-110">RoutedPropertyChanged イベント</span><span class="sxs-lookup"><span data-stu-id="afd07-110">RoutedPropertyChanged Events</span></span>  
 <span data-ttu-id="afd07-111">特定のイベントでは、プロパティ変更イベントで明示的に使用されるイベント データ型とデリゲートを使用します。</span><span class="sxs-lookup"><span data-stu-id="afd07-111">Certain events use an event data type and delegate that are explicitly used for property change events.</span></span> <span data-ttu-id="afd07-112">イベント データ型は <xref:System.Windows.RoutedPropertyChangedEventArgs%601> で、デリゲートは <xref:System.Windows.RoutedPropertyChangedEventHandler%601> です。</span><span class="sxs-lookup"><span data-stu-id="afd07-112">The event data type is <xref:System.Windows.RoutedPropertyChangedEventArgs%601>, and the delegate is <xref:System.Windows.RoutedPropertyChangedEventHandler%601>.</span></span> <span data-ttu-id="afd07-113">イベント データもデリゲートも、ジェネリック型パラメーターを使用します。これは、ハンドラーを定義するときに、変更するプロパティの実際の型を指定するために使用されるものです。</span><span class="sxs-lookup"><span data-stu-id="afd07-113">The event data and delegate both have a generic type parameter that is used to specify the actual type of the changing property when you define the handler.</span></span> <span data-ttu-id="afd07-114">イベント データには、<xref:System.Windows.RoutedPropertyChangedEventArgs%601.OldValue%2A> と <xref:System.Windows.RoutedPropertyChangedEventArgs%601.NewValue%2A> という 2 つのプロパティが含まれています。これらは両方ともイベント データの型引数として渡されます。</span><span class="sxs-lookup"><span data-stu-id="afd07-114">The event data contains two properties, <xref:System.Windows.RoutedPropertyChangedEventArgs%601.OldValue%2A> and <xref:System.Windows.RoutedPropertyChangedEventArgs%601.NewValue%2A>, which are both then passed as the type argument in the event data.</span></span>  
  
 <span data-ttu-id="afd07-115">名前の "Routed" 部分は、プロパティ変更イベントがルーティング イベントして登録されていることを示しています。</span><span class="sxs-lookup"><span data-stu-id="afd07-115">The "Routed" part of the name indicates that the property changed event is registered as a routed event.</span></span> <span data-ttu-id="afd07-116">プロパティ変更イベントのルーティングには、子要素 (コントロールの複合部分) のプロパティが値を変更した場合に、コントロールのトップ レベルがプロパティ変更イベントを受信できるというメリットがあります。</span><span class="sxs-lookup"><span data-stu-id="afd07-116">The advantage of routing a property changed event is that the top level of a control can receive property changed events if properties on the child elements (the control's composite parts) change values.</span></span> <span data-ttu-id="afd07-117">たとえば、<xref:System.Windows.Controls.Slider> などの <xref:System.Windows.Controls.Primitives.RangeBase> コントロールを組み込むコントロールを作成できます。</span><span class="sxs-lookup"><span data-stu-id="afd07-117">For instance, you might create a control that incorporates a <xref:System.Windows.Controls.Primitives.RangeBase> control such as a <xref:System.Windows.Controls.Slider>.</span></span> <span data-ttu-id="afd07-118">スライダー部分で <xref:System.Windows.Controls.Primitives.RangeBase.Value%2A> プロパティの値が変わった場合、その部分ではなく親コントロールでその変更を処理する必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="afd07-118">If the value of the <xref:System.Windows.Controls.Primitives.RangeBase.Value%2A> property changes on the slider part, you might want to handle that change on the parent control rather than on the part.</span></span>  
  
 <span data-ttu-id="afd07-119">古い値と新しい値があるため、このイベント ハンドラーがプロパティ値の検証コントロールとして使用される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="afd07-119">Because you have an old value and a new value, it might be tempting to use this event handler as a validator for the property value.</span></span> <span data-ttu-id="afd07-120">しかし、プロパティ変更イベントの多くは、このような目的で設計されているわけではありません。</span><span class="sxs-lookup"><span data-stu-id="afd07-120">However, that is not the design intention of most property changed events.</span></span> <span data-ttu-id="afd07-121">通常、値の提供は、他のロジック領域のコードでその値を処理するために行われますが、イベント ハンドラー内から値を実際に変更することはお勧めできません。また、ハンドラーの実装方法によっては、意図しない再帰が生じることもあります。</span><span class="sxs-lookup"><span data-stu-id="afd07-121">Generally, the values are provided so that you can act on those values in other logic areas of your code, but actually changing the values from within the event handler is not advisable, and may cause unintentional recursion depending on how your handler is implemented.</span></span>  
  
 <span data-ttu-id="afd07-122">プロパティがカスタム依存関係プロパティの場合、または、インスタンス化コードを定義した派生クラスで操作している場合、[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] プロパティ システムには、プロパティ変更を追跡する優れたメカニズムが組み込まれています。それは、<xref:System.Windows.CoerceValueCallback> と <xref:System.Windows.PropertyChangedCallback> というプロパティ システム コールバックです。</span><span class="sxs-lookup"><span data-stu-id="afd07-122">If your property is a custom dependency property, or if you are working with a derived class where you have defined the instantiation code, there is a much better mechanism for tracking property changes that is built in to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system: the property system callbacks <xref:System.Windows.CoerceValueCallback> and <xref:System.Windows.PropertyChangedCallback>.</span></span> <span data-ttu-id="afd07-123">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] プロパティ システムを使用して検証および強制型変換を行う方法の詳細については、「[依存関係プロパティのコールバックと検証](dependency-property-callbacks-and-validation.md)」および「[カスタム依存関係プロパティ](custom-dependency-properties.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="afd07-123">For more details about how you can use the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system for validation and coercion, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md) and [Custom Dependency Properties](custom-dependency-properties.md).</span></span>  
  
### <a name="dependencypropertychanged-events"></a><span data-ttu-id="afd07-124">DependencyPropertyChanged イベント</span><span class="sxs-lookup"><span data-stu-id="afd07-124">DependencyPropertyChanged Events</span></span>  
 <span data-ttu-id="afd07-125">プロパティ変更イベントのシナリオの一部である型のもう 1 つのペアは、<xref:System.Windows.DependencyPropertyChangedEventArgs> と <xref:System.Windows.DependencyPropertyChangedEventHandler> です。</span><span class="sxs-lookup"><span data-stu-id="afd07-125">Another pair of types that are part of a property changed event scenario is <xref:System.Windows.DependencyPropertyChangedEventArgs> and <xref:System.Windows.DependencyPropertyChangedEventHandler>.</span></span> <span data-ttu-id="afd07-126">これらのプロパティ変更イベントはルーティングされません。これらは、標準の CLR イベントです。</span><span class="sxs-lookup"><span data-stu-id="afd07-126">Events for these property changes are not routed; they are standard CLR events.</span></span> <span data-ttu-id="afd07-127"><xref:System.Windows.DependencyPropertyChangedEventArgs> は、<xref:System.EventArgs> から派生したものではなく、特殊なイベント データ レポート型です。<xref:System.Windows.DependencyPropertyChangedEventArgs> は構造体であり、クラスではありません。</span><span class="sxs-lookup"><span data-stu-id="afd07-127"><xref:System.Windows.DependencyPropertyChangedEventArgs> is an unusual event data reporting type because it does not derive from <xref:System.EventArgs>; <xref:System.Windows.DependencyPropertyChangedEventArgs> is a structure, not a class.</span></span>  
  
 <span data-ttu-id="afd07-128"><xref:System.Windows.DependencyPropertyChangedEventArgs> と <xref:System.Windows.DependencyPropertyChangedEventHandler> を使用するイベントは、`RoutedPropertyChanged` イベントよりも多少一般的です。</span><span class="sxs-lookup"><span data-stu-id="afd07-128">Events that use <xref:System.Windows.DependencyPropertyChangedEventArgs> and <xref:System.Windows.DependencyPropertyChangedEventHandler> are slightly more common than `RoutedPropertyChanged` events.</span></span> <span data-ttu-id="afd07-129"><xref:System.Windows.UIElement.IsMouseCapturedChanged> は、これらの型を使用するイベントの例です。</span><span class="sxs-lookup"><span data-stu-id="afd07-129">An example of an event that uses these types is <xref:System.Windows.UIElement.IsMouseCapturedChanged>.</span></span>  
  
 <span data-ttu-id="afd07-130"><xref:System.Windows.RoutedPropertyChangedEventArgs%601> と同様、<xref:System.Windows.DependencyPropertyChangedEventArgs> でも、プロパティの古い値と新しい値が報告されます。</span><span class="sxs-lookup"><span data-stu-id="afd07-130">Like <xref:System.Windows.RoutedPropertyChangedEventArgs%601>, <xref:System.Windows.DependencyPropertyChangedEventArgs> also reports an old and new value for the property.</span></span> <span data-ttu-id="afd07-131">そのため、値を適用して行う操作に関して同じ注意が当てはまります。イベントに応答して送信元で値を再度変更することは、一般的にはお勧めできません。</span><span class="sxs-lookup"><span data-stu-id="afd07-131">Also, the same considerations about what you can do with the values apply; it is generally not recommended that you attempt to change the values again on the sender in response to the event.</span></span>  
  
## <a name="property-triggers"></a><span data-ttu-id="afd07-132">プロパティ トリガー</span><span class="sxs-lookup"><span data-stu-id="afd07-132">Property Triggers</span></span>  
 <span data-ttu-id="afd07-133">プロパティ変更イベントに密接に関係する概念がプロパティ トリガーです。</span><span class="sxs-lookup"><span data-stu-id="afd07-133">A closely related concept to a property changed event is a property trigger.</span></span> <span data-ttu-id="afd07-134">プロパティ トリガーはスタイルまたはテンプレート内に作成され、プロパティ トリガーが割り当てられるプロパティの値に基づく条件付きの動作を作成できます。</span><span class="sxs-lookup"><span data-stu-id="afd07-134">A property trigger is created within a style or template and enables you to create a conditional behavior based on the value of the property where the property trigger is assigned.</span></span>  
  
 <span data-ttu-id="afd07-135">プロパティ トリガーのプロパティは、依存関係プロパティでなければなりません。</span><span class="sxs-lookup"><span data-stu-id="afd07-135">The property for a property trigger must be a dependency property.</span></span> <span data-ttu-id="afd07-136">これは、読み取り専用の依存関係プロパティにすることができます (多くの場合そのようになっています)。</span><span class="sxs-lookup"><span data-stu-id="afd07-136">It can be (and frequently is) a read-only dependency property.</span></span> <span data-ttu-id="afd07-137">コントロールによって公開される依存関係プロパティが、プロパティ トリガーになるように部分的に設計されている場合、プロパティ名が "Is" で始まっていることで見分けられます。</span><span class="sxs-lookup"><span data-stu-id="afd07-137">A good indicator for when a dependency property exposed by a control is at least partially designed to be a property trigger is if the property name begins with "Is".</span></span> <span data-ttu-id="afd07-138">この名前付けがされたプロパティは、多くの場合、読み取り専用のブール型の依存関係プロパティです。このプロパティの主要なシナリオは、リアルタイム UI に影響を及ぼす可能性があるためにプロパティ トリガーの候補である、レポート コントロール ステートです。</span><span class="sxs-lookup"><span data-stu-id="afd07-138">Properties that have this naming are often a read-only Boolean dependency property where the primary scenario for the property is reporting control state that might have consequences to the real-time UI and is thus a property trigger candidate.</span></span>  
  
 <span data-ttu-id="afd07-139">これらのプロパティの一部は、専用のプロパティ変更イベントも持ちます。</span><span class="sxs-lookup"><span data-stu-id="afd07-139">Some of these properties also have a dedicated property changed event.</span></span> <span data-ttu-id="afd07-140">たとえば、プロパティ <xref:System.Windows.UIElement.IsMouseCaptured%2A> には、プロパティ変更イベント <xref:System.Windows.UIElement.IsMouseCapturedChanged> があります。</span><span class="sxs-lookup"><span data-stu-id="afd07-140">For instance, the property <xref:System.Windows.UIElement.IsMouseCaptured%2A> has a property changed event <xref:System.Windows.UIElement.IsMouseCapturedChanged>.</span></span> <span data-ttu-id="afd07-141">プロパティ自体は読み取り専用であり、その値は入力システムによって調整され、リアルタイムの変更のたびに、入力システムで <xref:System.Windows.UIElement.IsMouseCapturedChanged> が発生します。</span><span class="sxs-lookup"><span data-stu-id="afd07-141">The property itself is read-only, with its value adjusted by the input system, and the input system raises <xref:System.Windows.UIElement.IsMouseCapturedChanged> on each real-time change.</span></span>  
  
 <span data-ttu-id="afd07-142">プロパティ トリガーを使用してプロパティの変更に対処する場合は、本当のプロパティ変更イベントに比べ、いくつかの制限があります。</span><span class="sxs-lookup"><span data-stu-id="afd07-142">Compared to a true property changed event, using a property trigger to act on a property change has some limitations.</span></span>  
  
 <span data-ttu-id="afd07-143">プロパティ トリガーは、完全一致ロジックを通じて動作します。</span><span class="sxs-lookup"><span data-stu-id="afd07-143">Property triggers work through an exact match logic.</span></span> <span data-ttu-id="afd07-144">プロパティと、トリガーが処理する特定の値を示す値を指定します。次に例を示します: `<Setter Property="IsMouseCaptured" Value="true"> ... </Setter>`。</span><span class="sxs-lookup"><span data-stu-id="afd07-144">You specify a property and a value that indicates the specific value for which the trigger will act. For instance: `<Setter Property="IsMouseCaptured" Value="true"> ... </Setter>`.</span></span> <span data-ttu-id="afd07-145">この制限のため、ほとんどのプロパティ トリガーの使用は、ブール型のプロパティか、専用の列挙値を使用するプロパティが対象です。この場合、有効な値の範囲は、各ケースに対応するトリガーを定義するために十分な程度管理することができます。</span><span class="sxs-lookup"><span data-stu-id="afd07-145">Because of this limitation, the majority of property trigger usages will be for Boolean properties, or properties that take a dedicated enumeration value, where the possible value range is manageable enough to define a trigger for each case.</span></span> <span data-ttu-id="afd07-146">または、プロパティ トリガーは、項目のカウントがゼロに達した場合など、特別な値に対してのみ存在する可能性があります。プロパティ値がゼロから再び変更するケースに対処するトリガーはありません (すべてのケースに対応するトリガーではなく、コード イベント ハンドラー、または、値がゼロ以外のときにトリガー状態を再び元に戻す既定の動作が必要です)。</span><span class="sxs-lookup"><span data-stu-id="afd07-146">Or property triggers might exist only for special values, such as when an items count reaches zero, and there would be no trigger that accounts for the cases when the property value changes away from zero again (instead of triggers for all cases, you might need a code event handler here, or a default behavior that toggles back from the trigger state again when the value is nonzero).</span></span>  
  
 <span data-ttu-id="afd07-147">プロパティ トリガーの構文は、プログラミングの "if" ステートメントに似ています。</span><span class="sxs-lookup"><span data-stu-id="afd07-147">The property trigger syntax is analogous to an "if" statement in programming.</span></span> <span data-ttu-id="afd07-148">トリガー条件が true の場合、プロパティ トリガーの "本体" が "実行" されます。</span><span class="sxs-lookup"><span data-stu-id="afd07-148">If the trigger condition is true, then the "body" of the property trigger is "executed".</span></span> <span data-ttu-id="afd07-149">プロパティ トリガーの "本体" はコードではなく、マークアップです。</span><span class="sxs-lookup"><span data-stu-id="afd07-149">The "body" of a property trigger is not code, it is markup.</span></span> <span data-ttu-id="afd07-150">そのマークアップは、1 つ以上の <xref:System.Windows.Setter> 要素を使用して、スタイルやテンプレートが適用されているオブジェクトの他のプロパティを設定するように制限されています。</span><span class="sxs-lookup"><span data-stu-id="afd07-150">That markup is limited to using one or more <xref:System.Windows.Setter> elements to set other properties of the object where the style or template is being applied.</span></span>  
  
 <span data-ttu-id="afd07-151">さまざまな有効値から成るプロパティ トリガーの "if" 条件をオフセットするには、一般には、<xref:System.Windows.Setter> を使用して同じプロパティ値を既定値に設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="afd07-151">To offset the "if" condition of a property trigger that has a wide variety of possible values, it is generally advisable to set that same property value to a default by using a <xref:System.Windows.Setter>.</span></span> <span data-ttu-id="afd07-152">こうすることで、トリガー条件が true の場合は、<xref:System.Windows.Trigger> に含まれる setter が優先され、トリガー条件が false の場合は、<xref:System.Windows.Trigger> 内にない <xref:System.Windows.Setter> が優先されます。</span><span class="sxs-lookup"><span data-stu-id="afd07-152">This way, the <xref:System.Windows.Trigger> contained setter will have precedence when the trigger condition is true, and the <xref:System.Windows.Setter> that is not within a <xref:System.Windows.Trigger> will have precedence whenever the trigger condition is false.</span></span>  
  
 <span data-ttu-id="afd07-153">プロパティ トリガーは、通常、1 つ以上の外観プロパティが、同じ要素の別のプロパティの状態に基づいて変更されるシナリオに適しています。</span><span class="sxs-lookup"><span data-stu-id="afd07-153">Property triggers are generally appropriate for scenarios where one or more appearance properties should change, based on the state of another property on the same element.</span></span>  
  
 <span data-ttu-id="afd07-154">プロパティ トリガーの詳細については、「[スタイルとテンプレート](../../../desktop-wpf/fundamentals/styles-templates-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="afd07-154">To learn more about property triggers, see [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="afd07-155">関連項目</span><span class="sxs-lookup"><span data-stu-id="afd07-155">See also</span></span>

- [<span data-ttu-id="afd07-156">ルーティング イベントの概要</span><span class="sxs-lookup"><span data-stu-id="afd07-156">Routed Events Overview</span></span>](routed-events-overview.md)
- [<span data-ttu-id="afd07-157">依存関係プロパティの概要</span><span class="sxs-lookup"><span data-stu-id="afd07-157">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
