---
title: コードビハインドと XAML
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [WPF], code-behind
- code-behind files [WPF], XAML
ms.assetid: 9df6d3c9-aed3-471c-af36-6859b19d999f
ms.openlocfilehash: 32283d5b81bf92999a97711ded13a8b533ae3028
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/12/2020
ms.locfileid: "79145346"
---
# <a name="code-behind-and-xaml-in-wpf"></a><span data-ttu-id="e2865-102">WPF における分離コードと XAML</span><span class="sxs-lookup"><span data-stu-id="e2865-102">Code-Behind and XAML in WPF</span></span>
<a name="introduction"></a> <span data-ttu-id="e2865-103">コードビハインドとは、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ページがマークアップ コンパイルされる際に、マークアップ定義オブジェクトと結合されるコードを表すために使用される用語です。</span><span class="sxs-lookup"><span data-stu-id="e2865-103">Code-behind is a term used to describe the code that is joined with markup-defined objects, when a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] page is markup-compiled.</span></span> <span data-ttu-id="e2865-104">このトピックでは、コードビハインドの要件と、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] のコードの代替インライン コード メカニズムについて説明します。</span><span class="sxs-lookup"><span data-stu-id="e2865-104">This topic describes requirements for code-behind as well as an alternative inline code mechanism for code in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>  
  
 <span data-ttu-id="e2865-105">このトピックは、次のセクションで構成されています。</span><span class="sxs-lookup"><span data-stu-id="e2865-105">This topic contains the following sections:</span></span>  
  
- [<span data-ttu-id="e2865-106">必須コンポーネント</span><span class="sxs-lookup"><span data-stu-id="e2865-106">Prerequisites</span></span>](#Prerequisites)  
  
- [<span data-ttu-id="e2865-107">コードビハインドと XAML 言語</span><span class="sxs-lookup"><span data-stu-id="e2865-107">Code-Behind and the XAML Language</span></span>](#codebehind_and_the_xaml_language)  
  
- [<span data-ttu-id="e2865-108">WPF のコードビハインド、イベント ハンドラー、および部分クラスの要件</span><span class="sxs-lookup"><span data-stu-id="e2865-108">Code-behind, Event Handler, and Partial Class Requirements in WPF</span></span>](#Code_behind__Event_Handler__and_Partial_Class)  
  
- [<span data-ttu-id="e2865-109">x:Code</span><span class="sxs-lookup"><span data-stu-id="e2865-109">x:Code</span></span>](#x_Code)  
  
- [<span data-ttu-id="e2865-110">インライン コードの制限事項</span><span class="sxs-lookup"><span data-stu-id="e2865-110">Inline Code Limitations</span></span>](#Inline_Code_Limitations)  
  
<a name="Prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="e2865-111">必須コンポーネント</span><span class="sxs-lookup"><span data-stu-id="e2865-111">Prerequisites</span></span>  
 <span data-ttu-id="e2865-112">このトピックは、[XAML の概要 (WPF)](../../../desktop-wpf/fundamentals/xaml.md) に関するページを読み、CLR とオブジェクト指向プログラミングの基本的な知識があることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="e2865-112">This topic assumes that you have read the [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md) and have some basic knowledge of the CLR and object-oriented programming.</span></span>  
  
<a name="codebehind_and_the_xaml_language"></a>
## <a name="code-behind-and-the-xaml-language"></a><span data-ttu-id="e2865-113">コードビハインドと XAML 言語</span><span class="sxs-lookup"><span data-stu-id="e2865-113">Code-Behind and the XAML Language</span></span>  
 <span data-ttu-id="e2865-114">XAML 言語には、コード ファイルをマークアップ ファイル側からマークアップ ファイルに関連付けることができるようになる言語レベルの機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="e2865-114">The XAML language includes language-level features that make it possible to associate code files with markup files, from the markup file side.</span></span> <span data-ttu-id="e2865-115">具体的には、XAML 言語には言語機能 [x:Class Directive](../../../desktop-wpf/xaml-services/xclass-directive.md)、[x:Subclass Directive](../../../desktop-wpf/xaml-services/xsubclass-directive.md)、および [x:ClassModifier Directive](../../../desktop-wpf/xaml-services/xclassmodifier-directive.md) が定義されています。</span><span class="sxs-lookup"><span data-stu-id="e2865-115">Specifically, the XAML language defines the language features [x:Class Directive](../../../desktop-wpf/xaml-services/xclass-directive.md), [x:Subclass Directive](../../../desktop-wpf/xaml-services/xsubclass-directive.md), and [x:ClassModifier Directive](../../../desktop-wpf/xaml-services/xclassmodifier-directive.md).</span></span> <span data-ttu-id="e2865-116">コードを生成する詳細な方法と、マークアップとコードを統合する方法は、XAML 言語には規定されていません。</span><span class="sxs-lookup"><span data-stu-id="e2865-116">Exactly how the code should be produced, and how to integrate markup and code, is not part of what the XAML language specifies.</span></span> <span data-ttu-id="e2865-117">コードの統合方法、アプリケーションおよびプログラミング モデルでの XAML の使用方法、ビルド アクション、またはこれらすべてに必要なその他のサポートを決定するのは、WPF などのフレームワークの役割です。</span><span class="sxs-lookup"><span data-stu-id="e2865-117">It is left up to frameworks such as WPF to determine how to integrate the code, how to use XAML in the application and programming models, and the build actions or other support that all this requires.</span></span>  
  
<a name="Code_behind__Event_Handler__and_Partial_Class"></a>
## <a name="code-behind-event-handler-and-partial-class-requirements-in-wpf"></a><span data-ttu-id="e2865-118">WPF のコードビハインド、イベント ハンドラー、および部分クラスの要件</span><span class="sxs-lookup"><span data-stu-id="e2865-118">Code-behind, Event Handler, and Partial Class Requirements in WPF</span></span>  
  
- <span data-ttu-id="e2865-119">部分クラスは、ルート要素をバッキングする型から派生する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2865-119">The partial class must derive from the type that backs the root element.</span></span>  
  
- <span data-ttu-id="e2865-120">マークアップ コンパイル ビルド アクションの既定の動作では、コードビハインド側の部分クラス定義で派生を空白のままにすることができる点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="e2865-120">Note that under the default behavior of the markup compile build actions, you can leave the derivation blank in the partial class definition on the code-behind side.</span></span> <span data-ttu-id="e2865-121">コンパイルされた結果では、たとえ指定されていなくても、ページ ルートのバッキングの種類が部分クラスの基礎であると想定されます。</span><span class="sxs-lookup"><span data-stu-id="e2865-121">The compiled result will assume the page root's backing type to be the basis for the partial class, even if it not specified.</span></span> <span data-ttu-id="e2865-122">ただし、この動作に依存することはベスト プラクティスではありません。</span><span class="sxs-lookup"><span data-stu-id="e2865-122">However, relying on this behavior is not a best practice.</span></span>  
  
- <span data-ttu-id="e2865-123">コードビハインドで記述するイベント ハンドラーはインスタンス メソッドにする必要があります。また、静的メソッドにすることはできません。</span><span class="sxs-lookup"><span data-stu-id="e2865-123">The event handlers you write in the code-behind must be instance methods and cannot be static methods.</span></span> <span data-ttu-id="e2865-124">これらのメソッドは、`x:Class` で識別される CLR 名前空間内の部分クラスによって定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2865-124">These methods must be defined by the partial class within the CLR namespace identified by `x:Class`.</span></span> <span data-ttu-id="e2865-125">イベント ハンドラーの名前を修飾して、別のクラス スコープでイベント ワイヤリング用のイベント ハンドラーを探すように [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] プロセッサに指示することはできません。</span><span class="sxs-lookup"><span data-stu-id="e2865-125">You cannot qualify the name of an event handler to instruct a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor to look for an event handler for event wiring in a different class scope.</span></span>  
  
- <span data-ttu-id="e2865-126">このハンドラーは、バッキング型システムの適切なイベントのデリゲートと一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2865-126">The handler must match the delegate for the appropriate event in the backing type system.</span></span>  
  
- <span data-ttu-id="e2865-127">特に Microsoft Visual Basic 言語の場合は、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] の属性を使用してハンドラーをアタッチするのではなく、言語固有の `Handles` キーワードを使用して、ハンドラーをハンドラー宣言のインスタンスとイベントに関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="e2865-127">For the Microsoft Visual Basic language specifically, you can use the language-specific `Handles` keyword to associate handlers with instances and events in the handler declaration, instead of attaching handlers with attributes in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="e2865-128">ただし、この手法にはいくつかの制限事項があります。`Handles` キーワードでは、特定のルーティング イベント シナリオや添付イベントなどの [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] イベント システムの特定の機能のすべてをサポートできないためです。</span><span class="sxs-lookup"><span data-stu-id="e2865-128">However, this technique does have some limitations because the `Handles` keyword cannot support all of the specific features of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system, such as certain routed event scenarios or attached events.</span></span> <span data-ttu-id="e2865-129">詳細については、「[Visual Basic と WPF のイベント処理](visual-basic-and-wpf-event-handling.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e2865-129">For details, see [Visual Basic and WPF Event Handling](visual-basic-and-wpf-event-handling.md).</span></span>  
  
<a name="x_Code"></a>
## <a name="xcode"></a><span data-ttu-id="e2865-130">x:Code</span><span class="sxs-lookup"><span data-stu-id="e2865-130">x:Code</span></span>  
 <span data-ttu-id="e2865-131">[x:Code](../../../desktop-wpf/xaml-services/xcode-intrinsic-xaml-type.md) は、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] に定義されているディレクティブ要素です。</span><span class="sxs-lookup"><span data-stu-id="e2865-131">[x:Code](../../../desktop-wpf/xaml-services/xcode-intrinsic-xaml-type.md) is a directive element defined in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="e2865-132">`x:Code` ディレクティブ要素には、インライン プログラミング コードを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="e2865-132">An `x:Code` directive element can contain inline programming code.</span></span> <span data-ttu-id="e2865-133">インラインで定義されたコードからは、同じページ上の [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] と対話できます。</span><span class="sxs-lookup"><span data-stu-id="e2865-133">The code that is defined inline can interact with the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] on the same page.</span></span> <span data-ttu-id="e2865-134">インライン C# コードの例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="e2865-134">The following example illustrates inline C# code.</span></span> <span data-ttu-id="e2865-135">コードが `x:Code` 要素内にあり、XML のコンテンツをエスケープするには `<CDATA[`...`]]>` でコードを囲む必要があることに注意してください。これにより、([!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] スキーマまたは [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] スキーマを解釈する) [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] プロセッサでは、コンテンツは文字どおり XML として解釈されません。</span><span class="sxs-lookup"><span data-stu-id="e2865-135">Notice that the code is inside the `x:Code` element and that the code must be surrounded by `<CDATA[`...`]]>` to escape the contents for XML, so that a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor (interpreting either the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] schema or the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] schema) will not try to interpret the contents literally as XML.</span></span>  
  
 [!code-xaml[XAMLOvwSupport#ButtonWithInlineCode](~/samples/snippets/csharp/VS_Snippets_Wpf/XAMLOvwSupport/CSharp/page4.xaml#buttonwithinlinecode)]  
  
<a name="Inline_Code_Limitations"></a>
## <a name="inline-code-limitations"></a><span data-ttu-id="e2865-136">インライン コードの制限事項</span><span class="sxs-lookup"><span data-stu-id="e2865-136">Inline Code Limitations</span></span>  
 <span data-ttu-id="e2865-137">インライン コードの使用を回避または制限することを検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2865-137">You should consider avoiding or limiting the use of inline code.</span></span> <span data-ttu-id="e2865-138">アーキテクチャとコーディングの理念という観点から、マークアップとコードビハインドの分離を維持することで、デザイナーと開発者の役割がより明確になります。</span><span class="sxs-lookup"><span data-stu-id="e2865-138">In terms of architecture and coding philosophy, maintaining a separation between markup and code-behind keeps the designer and developer roles much more distinct.</span></span> <span data-ttu-id="e2865-139">より技術的なレベルで言うと、インライン コード用に作成するコードは作成しづらい場合があります。常に [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] で生成された部分クラスに書き込み、既定の XML 名前空間マッピングしか使用できないためです。</span><span class="sxs-lookup"><span data-stu-id="e2865-139">On a more technical level, the code that you write for inline code can be awkward to write, because you are always writing into the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] generated partial class, and can only use the default XML namespace mappings.</span></span> <span data-ttu-id="e2865-140">`using` ステートメントを追加できないため、実行する API 呼び出しの多くを完全に修飾する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2865-140">Because you cannot add `using` statements, you must fully qualify many of the API calls that you make.</span></span> <span data-ttu-id="e2865-141">既定の [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] マッピングには、[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] アセンブリに存在する CLR 名前空間のほとんどが含まれていますが、すべてではありません。他の CLR 名前空間に含まれる型とメンバーへの呼び出しは完全に修飾する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2865-141">The default [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mappings include most but not all CLR namespaces that are present in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] assemblies; you will have to fully qualify calls to types and members contained within the other CLR namespaces.</span></span> <span data-ttu-id="e2865-142">また、インライン コードで部分クラス以外のものを定義することはできません。また、参照するすべてのユーザー コード エンティティは、生成元の部分クラス内のメンバーまたは変数として存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2865-142">You also cannot define anything beyond the partial class in the inline code, and all user code entities you reference must exist as a member or variable within the generated partial class.</span></span> <span data-ttu-id="e2865-143">グローバル変数またはビルド変数に対するマクロや `#ifdef` など、他の言語固有のプログラミング機能も使用できません。</span><span class="sxs-lookup"><span data-stu-id="e2865-143">Other language specific programming features, such as macros or `#ifdef` against global variables or build variables, are also not available.</span></span> <span data-ttu-id="e2865-144">詳細については、「[x:Code 組み込み XAML 型](../../../desktop-wpf/xaml-services/xcode-intrinsic-xaml-type.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e2865-144">For more information, see [x:Code Intrinsic XAML Type](../../../desktop-wpf/xaml-services/xcode-intrinsic-xaml-type.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e2865-145">関連項目</span><span class="sxs-lookup"><span data-stu-id="e2865-145">See also</span></span>

- [<span data-ttu-id="e2865-146">XAML の概要 (WPF)</span><span class="sxs-lookup"><span data-stu-id="e2865-146">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="e2865-147">x:Code 組み込み XAML 型 </span><span class="sxs-lookup"><span data-stu-id="e2865-147">x:Code Intrinsic XAML Type</span></span>](../../../desktop-wpf/xaml-services/xcode-intrinsic-xaml-type.md)
- [<span data-ttu-id="e2865-148">WPF アプリケーションのビルド</span><span class="sxs-lookup"><span data-stu-id="e2865-148">Building a WPF Application</span></span>](../app-development/building-a-wpf-application-wpf.md)
- [<span data-ttu-id="e2865-149">XAML 構文の詳細</span><span class="sxs-lookup"><span data-stu-id="e2865-149">XAML Syntax In Detail</span></span>](xaml-syntax-in-detail.md)
