---
title: ナビゲーションの概要
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- loose XAML files [WPF]
- windows [WPF]
- Start page [WPF]
- HTML files [WPF]
- structured navigation [WPF]
- fragment navigation [WPF]
- URIs (Uniform Resource Identifiers)
- custom objects [WPF]
- Uniform Resource Identifiers (URIs)
- pages [WPF]
- frames [WPF]
- navigation hosts [WPF]
- journals [WPF]
- lifetimes [WPF]
- retaining content state [WPF]
- content state [WPF]
- programmatic navigation [WPF]
- hyperlinks [WPF]
ms.assetid: 86ad2143-606a-4e34-bf7e-51a2594248b8
ms.openlocfilehash: 619dc101cd8851cee24651b7e3098ae12ef46259
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/03/2019
ms.locfileid: "73459771"
---
# <a name="navigation-overview"></a><span data-ttu-id="073a4-102">ナビゲーションの概要</span><span class="sxs-lookup"><span data-stu-id="073a4-102">Navigation Overview</span></span>

<span data-ttu-id="073a4-103">Windows Presentation Foundation (WPF) では、スタンドアロンアプリケーションと XAML ブラウザーアプリケーション (Xbap) の2種類のアプリケーションで使用できるブラウザースタイルのナビゲーションがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="073a4-103">Windows Presentation Foundation (WPF) supports browser-style navigation that can be used in two types of applications: standalone applications and XAML browser applications (XBAPs).</span></span> <span data-ttu-id="073a4-104">コンテンツをナビゲーション用にパッケージ化するために、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] には <xref:System.Windows.Controls.Page> クラスが用意されています。</span><span class="sxs-lookup"><span data-stu-id="073a4-104">To package content for navigation, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] provides the <xref:System.Windows.Controls.Page> class.</span></span> <span data-ttu-id="073a4-105"><xref:System.Windows.Documents.Hyperlink>を使用するか、プログラムによって <xref:System.Windows.Navigation.NavigationService>を使用して、<xref:System.Windows.Controls.Page> 間を宣言によって相互に移動できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-105">You can navigate from one <xref:System.Windows.Controls.Page> to another declaratively, by using a <xref:System.Windows.Documents.Hyperlink>, or programmatically, by using the <xref:System.Windows.Navigation.NavigationService>.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] <span data-ttu-id="073a4-106">は、ナビゲート元のページを記憶し、それらのページに戻るために、履歴を使用します。</span><span class="sxs-lookup"><span data-stu-id="073a4-106">uses the journal to remember pages that have been navigated from and to navigate back to them.</span></span>

<span data-ttu-id="073a4-107"><xref:System.Windows.Controls.Page>、<xref:System.Windows.Documents.Hyperlink>、<xref:System.Windows.Navigation.NavigationService>、およびジャーナルは、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]によって提供されるナビゲーションサポートの中核を形成します。</span><span class="sxs-lookup"><span data-stu-id="073a4-107"><xref:System.Windows.Controls.Page>, <xref:System.Windows.Documents.Hyperlink>, <xref:System.Windows.Navigation.NavigationService>, and the journal form the core of the navigation support offered by [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="073a4-108">この概要では、これらの機能について詳しく説明してから、緩やかな [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] ファイル、HTML ファイル、およびオブジェクトへの移動を含む高度なナビゲーションサポートについて説明します。</span><span class="sxs-lookup"><span data-stu-id="073a4-108">This overview explores these features in detail before covering advanced navigation support that includes navigation to loose [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] files, HTML files, and objects.</span></span>

> [!NOTE]
> <span data-ttu-id="073a4-109">このトピックでは、"browser" という用語は、現在 Microsoft Internet Explorer および Firefox を含む [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] アプリケーションをホストできるブラウザーのみを指します。</span><span class="sxs-lookup"><span data-stu-id="073a4-109">In this topic, the term "browser" refers only to browsers that can host [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications, which currently includes Microsoft Internet Explorer and Firefox.</span></span> <span data-ttu-id="073a4-110">特定の [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] 機能が特定のブラウザーでのみサポートされている場合は、ブラウザーのバージョンが参照されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-110">Where specific [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] features are supported only by a particular browser, the browser version is referred to.</span></span>

## <a name="navigation-in-wpf-applications"></a><span data-ttu-id="073a4-111">WPF アプリケーションでのナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-111">Navigation in WPF Applications</span></span>

<span data-ttu-id="073a4-112">このトピックでは、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]の主要なナビゲーション機能の概要について説明します。</span><span class="sxs-lookup"><span data-stu-id="073a4-112">This topic provides an overview of the key navigation capabilities in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="073a4-113">これらの機能は、スタンドアロンアプリケーションと Xbap の両方で使用できます。ただし、このトピックでは、XBAP のコンテキスト内でこれらの機能を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-113">These capabilities are available to both standalone applications and XBAPs, although this topic presents them within the context of an XBAP.</span></span>

> [!NOTE]
> <span data-ttu-id="073a4-114">このトピックでは、Xbap をビルドおよび配置する方法については説明しません。</span><span class="sxs-lookup"><span data-stu-id="073a4-114">This topic doesn't discuss how to build and deploy XBAPs.</span></span> <span data-ttu-id="073a4-115">Xbap の詳細については、「 [WPF XAML ブラウザーアプリケーションの概要](wpf-xaml-browser-applications-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-115">For more information on XBAPs, see [WPF XAML Browser Applications Overview](wpf-xaml-browser-applications-overview.md).</span></span>

<span data-ttu-id="073a4-116">このセクションでは、ナビゲーションの次の側面について説明し、例を示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-116">This section explains and demonstrates the following aspects of navigation:</span></span>

- [<span data-ttu-id="073a4-117">ページの実装</span><span class="sxs-lookup"><span data-stu-id="073a4-117">Implementing a Page</span></span>](#CreatingAXAMLPage)

- [<span data-ttu-id="073a4-118">スタート ページの構成</span><span class="sxs-lookup"><span data-stu-id="073a4-118">Configuring a Start Page</span></span>](#Configuring_a_Start_Page)

- [<span data-ttu-id="073a4-119">ホスト ウィンドウのタイトル、幅、および高さの構成</span><span class="sxs-lookup"><span data-stu-id="073a4-119">Configuring the Host Window's Title, Width, and Height</span></span>](#ConfiguringAXAMLPage)

- [<span data-ttu-id="073a4-120">ハイパーリンクのナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-120">Hyperlink Navigation</span></span>](#NavigatingBetweenXAMLPages)

- [<span data-ttu-id="073a4-121">フラグメント ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-121">Fragment Navigation</span></span>](#FragmentNavigation)

- [<span data-ttu-id="073a4-122">ナビゲーション サービス</span><span class="sxs-lookup"><span data-stu-id="073a4-122">Navigation Service</span></span>](#NavigationService)

- [<span data-ttu-id="073a4-123">ナビゲーション サービスによるプログラム ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-123">Programmatic Navigation with the Navigation Service</span></span>](#Programmatic_Navigation_with_the_Navigation_Service)

- [<span data-ttu-id="073a4-124">ナビゲーションの有効期間</span><span class="sxs-lookup"><span data-stu-id="073a4-124">Navigation Lifetime</span></span>](#Navigation_Lifetime)

- [<span data-ttu-id="073a4-125">履歴によるナビゲーションの記憶</span><span class="sxs-lookup"><span data-stu-id="073a4-125">Remembering Navigation with the Journal</span></span>](#NavigationHistory)

- [<span data-ttu-id="073a4-126">ページの有効期間と履歴</span><span class="sxs-lookup"><span data-stu-id="073a4-126">Page Lifetime and the Journal</span></span>](#PageLifetime)

- [<span data-ttu-id="073a4-127">ナビゲーション履歴によるコンテンツの状態の保持</span><span class="sxs-lookup"><span data-stu-id="073a4-127">Retaining Content State with Navigation History</span></span>](#RetainingContentStateWithNavigationHistory)

- [<span data-ttu-id="073a4-128">クッキー</span><span class="sxs-lookup"><span data-stu-id="073a4-128">Cookies</span></span>](#Cookies)

- [<span data-ttu-id="073a4-129">構造化ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-129">Structured Navigation</span></span>](#Structured_Navigation)

<a name="CreatingAXAMLPage"></a>

### <a name="implementing-a-page"></a><span data-ttu-id="073a4-130">ページの実装</span><span class="sxs-lookup"><span data-stu-id="073a4-130">Implementing a Page</span></span>

<span data-ttu-id="073a4-131">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]では、.NET Framework オブジェクト、カスタムオブジェクト、列挙値、ユーザーコントロール、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイル、HTML ファイルなど、いくつかのコンテンツの種類に移動できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-131">In [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], you can navigate to several content types that include .NET Framework objects, custom objects, enumeration values, user controls, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files, and HTML files.</span></span> <span data-ttu-id="073a4-132">ただし、コンテンツをパッケージ化する最も一般的で便利な方法は、<xref:System.Windows.Controls.Page> を使用することです。</span><span class="sxs-lookup"><span data-stu-id="073a4-132">However, you'll find that the most common and convenient way to package content is by using <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-133">さらに、<xref:System.Windows.Controls.Page> はナビゲーション固有の機能を実装して、外観を向上させ、開発を簡素化します。</span><span class="sxs-lookup"><span data-stu-id="073a4-133">Furthermore, <xref:System.Windows.Controls.Page> implements navigation-specific features to enhance their appearance and simplify development.</span></span>

<span data-ttu-id="073a4-134"><xref:System.Windows.Controls.Page>を使用すると、次のようなマークアップを使用して、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] コンテンツのナビゲート可能なページを宣言によって実装できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-134">Using <xref:System.Windows.Controls.Page>, you can declaratively implement a navigable page of [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] content by using markup like the following.</span></span>

[!code-xaml[NavigationOverviewSnippets#Page1XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/Page1.xaml#page1xaml)]

<span data-ttu-id="073a4-135">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] マークアップに実装されている <xref:System.Windows.Controls.Page> は、ルート要素として `Page`、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)][!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)] 名前空間宣言を必要とします。</span><span class="sxs-lookup"><span data-stu-id="073a4-135">A <xref:System.Windows.Controls.Page> that is implemented in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] markup has `Page` as its root element and requires the [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)][!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)] namespace declaration.</span></span> <span data-ttu-id="073a4-136">`Page` 要素には、移動して表示するコンテンツが含まれています。</span><span class="sxs-lookup"><span data-stu-id="073a4-136">The `Page` element contains the content that you want to navigate to and display.</span></span> <span data-ttu-id="073a4-137">コンテンツを追加するには、次のマークアップに示すように、`Page.Content` property 要素を設定します。</span><span class="sxs-lookup"><span data-stu-id="073a4-137">You add content by setting the `Page.Content` property element, as shown in the following markup.</span></span>

[!code-xaml[NavigationOverviewSnippets#Page2XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/Page2.xaml#page2xaml)]

<span data-ttu-id="073a4-138">`Page.Content` には、1 つの子要素のみを含めることができます。前の例では、コンテンツは単一の文字列「Hello, Page!」です。</span><span class="sxs-lookup"><span data-stu-id="073a4-138">`Page.Content` can only contain one child element; in the preceding example, the content is a single string, "Hello, Page!"</span></span> <span data-ttu-id="073a4-139">実際には、通常はレイアウトコントロールを子要素として使用し (「[レイアウト](../advanced/layout.md)」を参照)、コンテンツを格納して構成します。</span><span class="sxs-lookup"><span data-stu-id="073a4-139">In practice, you will usually use a layout control as the child element (see [Layout](../advanced/layout.md)) to contain and compose your content.</span></span>

<span data-ttu-id="073a4-140">`Page` 要素の子要素は <xref:System.Windows.Controls.Page> のコンテンツと見なされるため、明示的な `Page.Content` 宣言を使用する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="073a4-140">The child elements of a `Page` element are considered to be the content of a <xref:System.Windows.Controls.Page> and, consequently, you don't need to use the explicit `Page.Content` declaration.</span></span> <span data-ttu-id="073a4-141">次のマークアップは、前のサンプルの宣言と同等です。</span><span class="sxs-lookup"><span data-stu-id="073a4-141">The following markup is the declarative equivalent to the preceding sample.</span></span>

[!code-xaml[NavigationOverviewSnippets#Page3XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/Page3.xaml#page3xaml)]

<span data-ttu-id="073a4-142">この場合、`Page.Content` は `Page` 要素の子要素を使用して自動的に設定されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-142">In this case, `Page.Content` is automatically set with the child elements of the `Page` element.</span></span> <span data-ttu-id="073a4-143">詳細については、「[WPF のコンテンツ モデル](../controls/wpf-content-model.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-143">For more information, see [WPF Content Model](../controls/wpf-content-model.md).</span></span>

<span data-ttu-id="073a4-144">マークアップのみの <xref:System.Windows.Controls.Page> は、コンテンツを表示する場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="073a4-144">A markup-only <xref:System.Windows.Controls.Page> is useful for displaying content.</span></span> <span data-ttu-id="073a4-145">ただし、<xref:System.Windows.Controls.Page> は、ユーザーがページと対話できるようにするコントロールを表示することもできます。また、イベントを処理し、アプリケーションロジックを呼び出すことによって、ユーザーの操作に応答できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-145">However, a <xref:System.Windows.Controls.Page> can also display controls that allow users to interact with the page, and it can respond to user interaction by handling events and calling application logic.</span></span> <span data-ttu-id="073a4-146">次の例に示すように、マークアップと分離コードの組み合わせを使用して、対話型の <xref:System.Windows.Controls.Page> を実装します。</span><span class="sxs-lookup"><span data-stu-id="073a4-146">An interactive <xref:System.Windows.Controls.Page> is implemented by using a combination of markup and code-behind, as shown in the following example.</span></span>

[!code-xaml[XBAPAppDefSnippets#HomePageMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/XBAPAppDefSnippets/CSharp/HomePage.xaml#homepagemarkup)]

[!code-csharp[XBAPAppDefSnippets#HomePageCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/XBAPAppDefSnippets/CSharp/HomePage.xaml.cs#homepagecodebehind)]
[!code-vb[XBAPAppDefSnippets#HomePageCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/XBAPAppDefSnippets/VisualBasic/HomePage.xaml.vb#homepagecodebehind)]

<span data-ttu-id="073a4-147">マークアップ ファイルと分離コード ファイルを連携させるには、次の構成が必要です。</span><span class="sxs-lookup"><span data-stu-id="073a4-147">To allow a markup file and code-behind file to work together, the following configuration is required:</span></span>

- <span data-ttu-id="073a4-148">マークアップでは、`Page` 要素に `x:Class` 属性が含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-148">In markup, the `Page` element must include the `x:Class` attribute.</span></span> <span data-ttu-id="073a4-149">アプリケーションがビルドされると、マークアップファイルに `x:Class` が存在することにより、Microsoft build engine (MSBuild) によって <xref:System.Windows.Controls.Page> から派生した `partial` クラスが作成され、`x:Class` 属性によって指定された名前になります。</span><span class="sxs-lookup"><span data-stu-id="073a4-149">When the application is built, the existence of `x:Class` in the markup file causes Microsoft build engine (MSBuild) to create a `partial` class that derives from <xref:System.Windows.Controls.Page> and has the name that is specified by the `x:Class` attribute.</span></span> <span data-ttu-id="073a4-150">そのためには、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] スキーマ (`xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"`) に [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)] 名前空間宣言を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-150">This requires the addition of an [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)] namespace declaration for the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] schema ( `xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"` ).</span></span> <span data-ttu-id="073a4-151">生成された `partial` クラスは `InitializeComponent` を実装します。これは、イベントを登録し、マークアップで実装されるプロパティを設定するために呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-151">The generated `partial` class implements `InitializeComponent`, which is called to register the events and set the properties that are implemented in markup.</span></span>

- <span data-ttu-id="073a4-152">分離コードでは、クラスは、マークアップで `x:Class` 属性によって指定された名前と同じ名前を持つ `partial` クラスである必要があり、<xref:System.Windows.Controls.Page> から派生する必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-152">In code-behind, the class must be a `partial` class with the same name that is specified by the `x:Class` attribute in markup, and it must derive from <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-153">これにより、分離コードファイルは、アプリケーションのビルド時にマークアップファイル用に生成される `partial` クラスに関連付けられます (「 [WPF アプリケーションのビルド](building-a-wpf-application-wpf.md)」を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="073a4-153">This allows the code-behind file to be associated with the `partial` class that is generated for the markup file when the application is built (see [Building a WPF Application](building-a-wpf-application-wpf.md)).</span></span>

- <span data-ttu-id="073a4-154">分離コードでは、<xref:System.Windows.Controls.Page> クラスは、`InitializeComponent` メソッドを呼び出すコンストラクターを実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-154">In code-behind, the <xref:System.Windows.Controls.Page> class must implement a constructor that calls the `InitializeComponent` method.</span></span> <span data-ttu-id="073a4-155">`InitializeComponent` は、マークアップファイルによって生成される `partial` クラスによって実装され、イベントを登録したり、マークアップで定義されているプロパティを設定したりします。</span><span class="sxs-lookup"><span data-stu-id="073a4-155">`InitializeComponent` is implemented by the markup file's generated `partial` class to register events and set properties that are defined in markup.</span></span>

> [!NOTE]
> <span data-ttu-id="073a4-156">Visual Studio を使用して新しい <xref:System.Windows.Controls.Page> をプロジェクトに追加すると、<xref:System.Windows.Controls.Page> はマークアップと分離コードの両方を使用して実装されます。ここで説明するように、マークアップファイルと分離コードファイルの関連付けを作成するために必要な構成が含まれます。</span><span class="sxs-lookup"><span data-stu-id="073a4-156">When you add a new <xref:System.Windows.Controls.Page> to your project using Visual Studio, the <xref:System.Windows.Controls.Page> is implemented using both markup and code-behind, and it includes the necessary configuration to create the association between the markup and code-behind files as described here.</span></span>

<span data-ttu-id="073a4-157"><xref:System.Windows.Controls.Page>が完了したら、そこに移動できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-157">Once you have a <xref:System.Windows.Controls.Page>, you can navigate to it.</span></span> <span data-ttu-id="073a4-158">アプリケーションが移動する最初の <xref:System.Windows.Controls.Page> を指定するには、開始 <xref:System.Windows.Controls.Page> を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-158">To specify the first <xref:System.Windows.Controls.Page> that an application navigates to, you need to configure the start <xref:System.Windows.Controls.Page>.</span></span>

<a name="Configuring_a_Start_Page"></a>

### <a name="configuring-a-start-page"></a><span data-ttu-id="073a4-159">スタート ページの構成</span><span class="sxs-lookup"><span data-stu-id="073a4-159">Configuring a Start Page</span></span>

<span data-ttu-id="073a4-160">Xbap では、特定の量のアプリケーションインフラストラクチャがブラウザーでホストされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-160">XBAPs require a certain amount of application infrastructure to be hosted in a browser.</span></span> <span data-ttu-id="073a4-161">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]では、<xref:System.Windows.Application> クラスは、必要なアプリケーションインフラストラクチャを確立するアプリケーション定義の一部です (「[アプリケーション管理の概要](application-management-overview.md)」を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="073a4-161">In [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], the <xref:System.Windows.Application> class is part of an application definition that establishes the required application infrastructure (see [Application Management Overview](application-management-overview.md)).</span></span>

<span data-ttu-id="073a4-162">アプリケーション定義は通常、マークアップと分離コードの両方を使用して実装され、マークアップファイルは MSBuild `ApplicationDefinition` 項目として構成されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-162">An application definition is usually implemented using both markup and code-behind, with the markup file configured as an MSBuild`ApplicationDefinition` item.</span></span> <span data-ttu-id="073a4-163">XBAP のアプリケーション定義を次に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-163">The following is an application definition for an XBAP.</span></span>

[!code-xaml[XBAPAppDefSnippets#XBAPApplicationDefinitionMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/XBAPAppDefSnippets/CSharp/App.xaml#xbapapplicationdefinitionmarkup)]

[!code-csharp[XBAPAppDefSnippets#XBAPApplicationDefinitionCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/XBAPAppDefSnippets/CSharp/App.xaml.cs#xbapapplicationdefinitioncodebehind)]
[!code-vb[XBAPAppDefSnippets#XBAPApplicationDefinitionCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/XBAPAppDefSnippets/VisualBasic/Application.xaml.vb#xbapapplicationdefinitioncodebehind)]

<span data-ttu-id="073a4-164">XBAP は、アプリケーション定義を使用して開始 <xref:System.Windows.Controls.Page>を指定できます。これは、XBAP の起動時に自動的に読み込まれる <xref:System.Windows.Controls.Page> です。</span><span class="sxs-lookup"><span data-stu-id="073a4-164">An XBAP can use its application definition to specify a start <xref:System.Windows.Controls.Page>, which is the <xref:System.Windows.Controls.Page> that is automatically loaded when the XBAP is launched.</span></span> <span data-ttu-id="073a4-165">これを行うには、目的の <xref:System.Windows.Controls.Page>の URI (uniform resource identifier) を使用して <xref:System.Windows.Application.StartupUri%2A> プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="073a4-165">You do this by setting the <xref:System.Windows.Application.StartupUri%2A> property with the uniform resource identifier (URI) for the desired <xref:System.Windows.Controls.Page>.</span></span>

> [!NOTE]
> <span data-ttu-id="073a4-166">ほとんどの場合、<xref:System.Windows.Controls.Page> は、アプリケーションにコンパイルされるか、アプリケーションと共に配置されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-166">In most cases, the <xref:System.Windows.Controls.Page> is either compiled into or deployed with an application.</span></span> <span data-ttu-id="073a4-167">このような場合、<xref:System.Windows.Controls.Page> を識別する URI はパック URI です。これは、*パック*スキームに準拠した uri です。</span><span class="sxs-lookup"><span data-stu-id="073a4-167">In these cases, the URI that identifies a <xref:System.Windows.Controls.Page> is a pack URI, which is a URI that conforms to the *pack* scheme.</span></span> <span data-ttu-id="073a4-168">パック Uri については、「 [WPF のパック uri](pack-uris-in-wpf.md)」で詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="073a4-168">Pack URIs are discussed further in     [Pack URIs in WPF](pack-uris-in-wpf.md).</span></span> <span data-ttu-id="073a4-169">以下で説明する http スキームを使用してコンテンツにナビゲートすることもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-169">You can also navigate to content using the http scheme, which is discussed below.</span></span>

<span data-ttu-id="073a4-170"><xref:System.Windows.Application.StartupUri%2A> は、次の例に示すように、マークアップで宣言によって設定できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-170">You can set <xref:System.Windows.Application.StartupUri%2A> declaratively in markup, as shown in the following example.</span></span>

[!code-xaml[NavigationOverviewSnippets#XBAPApplicationDefinitionMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/App.xaml#xbapapplicationdefinitionmarkup)]

<span data-ttu-id="073a4-171">この例では、`StartupUri` 属性は、ホームページを識別する相対パック URI で設定されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-171">In this example, the `StartupUri` attribute is set with a relative pack URI that identifies HomePage.xaml.</span></span> <span data-ttu-id="073a4-172">XBAP が起動すると、ホームページに自動的に移動して表示されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-172">When the XBAP is launched, HomePage.xaml is automatically navigated to and displayed.</span></span> <span data-ttu-id="073a4-173">これは、次の図に示すように、Web サーバーから起動された XBAP を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-173">This is demonstrated by the following figure, which shows an XBAP that was launched from a Web server.</span></span>

<span data-ttu-id="073a4-174">![XBAP ページ](./media/navigation-overview/xbap-launched-from-a-web-server.png "これは、Web サーバーから起動された XBAP を示しています。")</span><span class="sxs-lookup"><span data-stu-id="073a4-174">![XBAP page](./media/navigation-overview/xbap-launched-from-a-web-server.png "This shows an XBAP launched from a Web server.")</span></span>

> [!NOTE]
> <span data-ttu-id="073a4-175">Xbap の開発と配置の詳細については、「 [WPF XAML ブラウザーアプリケーションの概要](wpf-xaml-browser-applications-overview.md)」および「 [Wpf アプリケーションの配置](deploying-a-wpf-application-wpf.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-175">For more information regarding the development and deployment of XBAPs, see [WPF XAML Browser Applications Overview](wpf-xaml-browser-applications-overview.md) and     [Deploying a WPF Application](deploying-a-wpf-application-wpf.md).</span></span>

<a name="ConfiguringAXAMLPage"></a>

### <a name="configuring-the-host-windows-title-width-and-height"></a><span data-ttu-id="073a4-176">ホスト ウィンドウのタイトル、幅、および高さの構成</span><span class="sxs-lookup"><span data-stu-id="073a4-176">Configuring the Host Window's Title, Width, and Height</span></span>

<span data-ttu-id="073a4-177">前の図から、ブラウザーとタブパネルの両方のタイトルが XBAP の URI であることがわかりました。</span><span class="sxs-lookup"><span data-stu-id="073a4-177">One thing you may have noticed from the previous figure is that the title of both the browser and the tab panel is the URI for the XBAP.</span></span> <span data-ttu-id="073a4-178">このタイトルは、長いだけでなく、見た目が良いわけでも、有益な情報になっているわけでもありません。</span><span class="sxs-lookup"><span data-stu-id="073a4-178">Besides being long, the title is neither attractive nor informative.</span></span> <span data-ttu-id="073a4-179">このため、<xref:System.Windows.Controls.Page> には、<xref:System.Windows.Controls.Page.WindowTitle%2A> プロパティを設定してタイトルを変更する方法が用意されています。</span><span class="sxs-lookup"><span data-stu-id="073a4-179">For this reason, <xref:System.Windows.Controls.Page> offers a way for you to change the title by setting the <xref:System.Windows.Controls.Page.WindowTitle%2A> property.</span></span> <span data-ttu-id="073a4-180">さらに、<xref:System.Windows.Controls.Page.WindowWidth%2A> と <xref:System.Windows.Controls.Page.WindowHeight%2A>をそれぞれ設定して、ブラウザーウィンドウの幅と高さを構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-180">Furthermore, you can configure the width and height of the browser window by setting <xref:System.Windows.Controls.Page.WindowWidth%2A> and <xref:System.Windows.Controls.Page.WindowHeight%2A>, respectively.</span></span>

<span data-ttu-id="073a4-181"><xref:System.Windows.Controls.Page.WindowTitle%2A>、<xref:System.Windows.Controls.Page.WindowWidth%2A>、および <xref:System.Windows.Controls.Page.WindowHeight%2A> は、次の例に示すように、マークアップで宣言によって設定できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-181"><xref:System.Windows.Controls.Page.WindowTitle%2A>, <xref:System.Windows.Controls.Page.WindowWidth%2A>, and <xref:System.Windows.Controls.Page.WindowHeight%2A> can be set declaratively in markup, as shown in the following example.</span></span>

[!code-xaml[NavigationOverviewSnippets#HomePageMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/HomePage.xaml#homepagemarkup)]

<span data-ttu-id="073a4-182">結果を次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-182">The result is shown in the following figure.</span></span>

<span data-ttu-id="073a4-183">![ウィンドウのタイトル、高さ、幅](./media/navigation-overview/window-title-width-height.png "これにより、構成できるウィンドウのタイトル、高さ、および幅が表示されます。")</span><span class="sxs-lookup"><span data-stu-id="073a4-183">![Window title, height, width](./media/navigation-overview/window-title-width-height.png "This shows the window title, height, and width you can configure.")</span></span>

<a name="NavigatingBetweenXAMLPages"></a>

### <a name="hyperlink-navigation"></a><span data-ttu-id="073a4-184">ハイパーリンクのナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-184">Hyperlink Navigation</span></span>

<span data-ttu-id="073a4-185">一般的な XBAP は複数のページで構成します。</span><span class="sxs-lookup"><span data-stu-id="073a4-185">A typical XBAP comprises several pages.</span></span> <span data-ttu-id="073a4-186">あるページから別のページに移動する最も簡単な方法は、<xref:System.Windows.Documents.Hyperlink> を使用することです。</span><span class="sxs-lookup"><span data-stu-id="073a4-186">The simplest way to navigate from one page to another is to use a <xref:System.Windows.Documents.Hyperlink>.</span></span> <span data-ttu-id="073a4-187">次のマークアップに示されている `Hyperlink` 要素を使用して、<xref:System.Windows.Controls.Page> に <xref:System.Windows.Documents.Hyperlink> を宣言によって追加できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-187">You can declaratively add a <xref:System.Windows.Documents.Hyperlink> to a <xref:System.Windows.Controls.Page> by using the `Hyperlink` element, which is shown in the following markup.</span></span>

[!code-xaml[NavigationOverviewSnippets#HyperlinkXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithHyperlink.xaml#hyperlinkxaml1)]
[!code-xaml[NavigationOverviewSnippets#HyperlinkXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithHyperlink.xaml#hyperlinkxaml2)]
[!code-xaml[NavigationOverviewSnippets#HyperlinkXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithHyperlink.xaml#hyperlinkxaml3)]

<span data-ttu-id="073a4-188">`Hyperlink` 要素には、次のものが必要です。</span><span class="sxs-lookup"><span data-stu-id="073a4-188">A `Hyperlink` element requires the following:</span></span>

- <span data-ttu-id="073a4-189">`NavigateUri` 属性によって指定された移動先の <xref:System.Windows.Controls.Page> のパック URI。</span><span class="sxs-lookup"><span data-stu-id="073a4-189">The pack URI of the <xref:System.Windows.Controls.Page> to navigate to, as specified by the `NavigateUri` attribute.</span></span>

- <span data-ttu-id="073a4-190">ユーザーがクリックしてナビゲーションを開始できるコンテンツ (`Hyperlink` 要素に含めることができるコンテンツについては、「<xref:System.Windows.Documents.Hyperlink>」を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="073a4-190">Content that a user can click to initiate the navigation, such as text and images (for the content that the `Hyperlink` element can contain, see <xref:System.Windows.Documents.Hyperlink>).</span></span>

<span data-ttu-id="073a4-191">次の図は、<xref:System.Windows.Documents.Hyperlink>を持つ <xref:System.Windows.Controls.Page> を持つ XBAP を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-191">The following figure shows an XBAP with a <xref:System.Windows.Controls.Page> that has a <xref:System.Windows.Documents.Hyperlink>.</span></span>

<span data-ttu-id="073a4-192">![ハイパーリンクがあるページ](./media/navigation-overview/xbap-with-a-page-with-a-hyperlink.png "これは、ページとハイパーリンクを持つ XBAP を示しています。")</span><span class="sxs-lookup"><span data-stu-id="073a4-192">![Page with Hyperlink](./media/navigation-overview/xbap-with-a-page-with-a-hyperlink.png "This shows an XBAP with a page with a hyperlink.")</span></span>

<span data-ttu-id="073a4-193">ご想像のとおり、<xref:System.Windows.Documents.Hyperlink> をクリックすると、XBAP は `NavigateUri` 属性によって識別される <xref:System.Windows.Controls.Page> に移動します。</span><span class="sxs-lookup"><span data-stu-id="073a4-193">As you would expect, clicking the <xref:System.Windows.Documents.Hyperlink> causes the XBAP to navigate to the <xref:System.Windows.Controls.Page> that is identified by the `NavigateUri` attribute.</span></span> <span data-ttu-id="073a4-194">また、XBAP は、Internet Explorer の [最近使ったページ] の一覧に、前の <xref:System.Windows.Controls.Page> のエントリを追加します。</span><span class="sxs-lookup"><span data-stu-id="073a4-194">Additionally, the XBAP adds an entry for the previous <xref:System.Windows.Controls.Page> to the Recent Pages list in Internet Explorer.</span></span> <span data-ttu-id="073a4-195">これを次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-195">This is shown in the following figure.</span></span>

<span data-ttu-id="073a4-196">![[戻る] ボタンと [進む] ボタン](./media/navigation-overview/back-and-forward-navigation.png "[戻る] ボタンと [進む] ボタンを使用して移動します。")</span><span class="sxs-lookup"><span data-stu-id="073a4-196">![Back and Forward buttons](./media/navigation-overview/back-and-forward-navigation.png "Navigate with the back and forward buttons.")</span></span>

<span data-ttu-id="073a4-197">また、ある <xref:System.Windows.Controls.Page> から別のへのナビゲーションをサポートすると、<xref:System.Windows.Documents.Hyperlink> フラグメントナビゲーションもサポートされます。</span><span class="sxs-lookup"><span data-stu-id="073a4-197">As well as supporting navigation from one <xref:System.Windows.Controls.Page> to another, <xref:System.Windows.Documents.Hyperlink> also supports fragment navigation.</span></span>

<a name="FragmentNavigation"></a>

### <a name="fragment-navigation"></a><span data-ttu-id="073a4-198">フラグメント ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-198">Fragment Navigation</span></span>

<span data-ttu-id="073a4-199">*フラグメントナビゲーション*は、現在の <xref:System.Windows.Controls.Page> または別の <xref:System.Windows.Controls.Page> のコンテンツフラグメントへのナビゲーションです。</span><span class="sxs-lookup"><span data-stu-id="073a4-199">*Fragment navigation* is the navigation to a content fragment in either the current <xref:System.Windows.Controls.Page> or another <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-200">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]では、コンテンツフラグメントは名前付き要素に含まれるコンテンツです。</span><span class="sxs-lookup"><span data-stu-id="073a4-200">In [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], a content fragment is the content that is contained by a named element.</span></span> <span data-ttu-id="073a4-201">名前付き要素は、`Name` 属性が設定されている要素です。</span><span class="sxs-lookup"><span data-stu-id="073a4-201">A named element is an element that has its `Name` attribute set.</span></span> <span data-ttu-id="073a4-202">次のマークアップは、コンテンツフラグメントを含む名前付きの `TextBlock` 要素を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-202">The following markup shows a named `TextBlock` element that contains a content fragment.</span></span>

[!code-xaml[NavigationOverviewSnippets#PageWithContentFragmentsMARKUP1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithFragments.xaml#pagewithcontentfragmentsmarkup1)]
[!code-xaml[NavigationOverviewSnippets#PageWithContentFragmentsMARKUP2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithFragments.xaml#pagewithcontentfragmentsmarkup2)]
[!code-xaml[NavigationOverviewSnippets#PageWithContentFragmentsMARKUP3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithFragments.xaml#pagewithcontentfragmentsmarkup3)]

<span data-ttu-id="073a4-203"><xref:System.Windows.Documents.Hyperlink> がコンテンツフラグメントに移動するには、`NavigateUri` 属性に次のものが含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-203">For a <xref:System.Windows.Documents.Hyperlink> to navigate to a content fragment, the `NavigateUri` attribute must include the following:</span></span>

- <span data-ttu-id="073a4-204">移動先のコンテンツフラグメントを持つ <xref:System.Windows.Controls.Page> の URI。</span><span class="sxs-lookup"><span data-stu-id="073a4-204">The URI of the <xref:System.Windows.Controls.Page> with the content fragment to navigate to.</span></span>

- <span data-ttu-id="073a4-205">「#」文字。</span><span class="sxs-lookup"><span data-stu-id="073a4-205">A "#" character.</span></span>

- <span data-ttu-id="073a4-206">コンテンツフラグメントを含む <xref:System.Windows.Controls.Page> 上の要素の名前。</span><span class="sxs-lookup"><span data-stu-id="073a4-206">The name of the element on the <xref:System.Windows.Controls.Page> that contains the content fragment.</span></span>

<span data-ttu-id="073a4-207">フラグメント URI の形式は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="073a4-207">A fragment URI has the following format.</span></span>

<span data-ttu-id="073a4-208">*PageURI* `#` *ElementName*</span><span class="sxs-lookup"><span data-stu-id="073a4-208">*PageURI* `#` *ElementName*</span></span>

<span data-ttu-id="073a4-209">コンテンツフラグメントに移動するように構成されている `Hyperlink` の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-209">The following shows an example of a `Hyperlink` that is configured to navigate to a content fragment.</span></span>

[!code-xaml[NavigationOverviewSnippets#PageThatNavigatesXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageThatNavigatesToFragment.xaml#pagethatnavigatesxaml1)]
[!code-xaml[NavigationOverviewSnippets#PageThatNavigatesXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageThatNavigatesToFragment.xaml#pagethatnavigatesxaml2)]
[!code-xaml[NavigationOverviewSnippets#PageThatNavigatesXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageThatNavigatesToFragment.xaml#pagethatnavigatesxaml3)]

> [!NOTE]
> <span data-ttu-id="073a4-210">ここでは、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]での既定のフラグメントナビゲーション実装について説明します。</span><span class="sxs-lookup"><span data-stu-id="073a4-210">This section describes the default fragment navigation implementation in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="073a4-211">また [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] では、<xref:System.Windows.Navigation.NavigationService.FragmentNavigation?displayProperty=nameWithType> イベントの処理を必要とする独自のフラグメントナビゲーションスキームを実装することもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-211">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] also allows you to implement your own fragment navigation scheme which, in part, requires handling the <xref:System.Windows.Navigation.NavigationService.FragmentNavigation?displayProperty=nameWithType> event.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="073a4-212">ページを HTTP で参照できる場合に限り、ルース [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ページ (`Page` がルート要素として設定されている [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイル) 内のフラグメントに移動できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-212">You can navigate to fragments in loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages (markup-only [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files with `Page` as the root element) only if the pages can be browsed via HTTP.</span></span>
>
> <span data-ttu-id="073a4-213">ただし、緩やかな [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ページは、独自のフラグメントに移動できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-213">However, a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] page can navigate to its own fragments.</span></span>

<a name="NavigationService"></a>

### <a name="navigation-service"></a><span data-ttu-id="073a4-214">ナビゲーション サービス</span><span class="sxs-lookup"><span data-stu-id="073a4-214">Navigation Service</span></span>

<span data-ttu-id="073a4-215"><xref:System.Windows.Documents.Hyperlink> では、ユーザーは特定の <xref:System.Windows.Controls.Page>へのナビゲーションを開始できますが、ページの検索とダウンロードの作業は <xref:System.Windows.Navigation.NavigationService> クラスによって実行されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-215">While <xref:System.Windows.Documents.Hyperlink> allows a user to initiate navigation to a particular <xref:System.Windows.Controls.Page>, the work of locating and downloading the page is performed by the <xref:System.Windows.Navigation.NavigationService> class.</span></span> <span data-ttu-id="073a4-216">基本的に、<xref:System.Windows.Navigation.NavigationService> は、<xref:System.Windows.Documents.Hyperlink> などのクライアントコードに代わってナビゲーション要求を処理する機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="073a4-216">Essentially, <xref:System.Windows.Navigation.NavigationService> provides the ability to process a navigation request on behalf of client code, such as the <xref:System.Windows.Documents.Hyperlink>.</span></span> <span data-ttu-id="073a4-217">さらに、<xref:System.Windows.Navigation.NavigationService> は、ナビゲーション要求を追跡して影響を与える上位レベルのサポートを実装します。</span><span class="sxs-lookup"><span data-stu-id="073a4-217">Additionally, <xref:System.Windows.Navigation.NavigationService> implements higher-level support for tracking and influencing a navigation request.</span></span>

<span data-ttu-id="073a4-218"><xref:System.Windows.Documents.Hyperlink> がクリックされると、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] <xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> を呼び出して、指定されたパック URI にある <xref:System.Windows.Controls.Page> を検索してダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="073a4-218">When a <xref:System.Windows.Documents.Hyperlink> is clicked, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] calls <xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> to locate and download the <xref:System.Windows.Controls.Page> at the specified pack URI.</span></span> <span data-ttu-id="073a4-219">ダウンロードした <xref:System.Windows.Controls.Page> は、ルートオブジェクトがダウンロードされた <xref:System.Windows.Controls.Page> のインスタンスであるオブジェクトのツリーに変換されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-219">The downloaded <xref:System.Windows.Controls.Page> is converted to a tree of objects whose root object is an instance of the downloaded <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-220">ルート <xref:System.Windows.Controls.Page> オブジェクトへの参照は、<xref:System.Windows.Navigation.NavigationService.Content%2A?displayProperty=nameWithType> プロパティに格納されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-220">A reference to the root <xref:System.Windows.Controls.Page> object is stored in the <xref:System.Windows.Navigation.NavigationService.Content%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="073a4-221">移動先のコンテンツのパック URI は <xref:System.Windows.Navigation.NavigationService.Source%2A?displayProperty=nameWithType> プロパティに格納され、<xref:System.Windows.Navigation.NavigationService.CurrentSource%2A?displayProperty=nameWithType> は移動先の最後のページのパック URI を格納します。</span><span class="sxs-lookup"><span data-stu-id="073a4-221">The pack URI for the content that was navigated to is stored in the <xref:System.Windows.Navigation.NavigationService.Source%2A?displayProperty=nameWithType> property, while the <xref:System.Windows.Navigation.NavigationService.CurrentSource%2A?displayProperty=nameWithType> stores the pack URI for the last page that was navigated to.</span></span>

> [!NOTE]
> <span data-ttu-id="073a4-222">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] アプリケーションは、現在アクティブな <xref:System.Windows.Navigation.NavigationService>を複数持つことができます。</span><span class="sxs-lookup"><span data-stu-id="073a4-222">It is possible for a [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] application to have more than one currently active <xref:System.Windows.Navigation.NavigationService>.</span></span> <span data-ttu-id="073a4-223">詳細については、このトピックで後述する「[ナビゲーションホスト](#Navigation_Hosts)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-223">For more information, see [Navigation Hosts](#Navigation_Hosts) later in this topic.</span></span>

<a name="Programmatic_Navigation_with_the_Navigation_Service"></a>

### <a name="programmatic-navigation-with-the-navigation-service"></a><span data-ttu-id="073a4-224">ナビゲーション サービスによるプログラム ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-224">Programmatic Navigation with the Navigation Service</span></span>

<span data-ttu-id="073a4-225"><xref:System.Windows.Documents.Hyperlink>を使用してマークアップで宣言的にナビゲーションが実装されている場合、<xref:System.Windows.Navigation.NavigationService> について知る必要はありません。 <xref:System.Windows.Documents.Hyperlink> では <xref:System.Windows.Navigation.NavigationService> が使用されるためです。</span><span class="sxs-lookup"><span data-stu-id="073a4-225">You don't need to know about <xref:System.Windows.Navigation.NavigationService> if navigation is implemented declaratively in markup using <xref:System.Windows.Documents.Hyperlink>, because <xref:System.Windows.Documents.Hyperlink> uses the <xref:System.Windows.Navigation.NavigationService> on your behalf.</span></span> <span data-ttu-id="073a4-226">つまり、<xref:System.Windows.Documents.Hyperlink> の直接または間接の親がナビゲーションホスト (「[ナビゲーション](#Navigation_Hosts)ホスト」を参照) である限り、<xref:System.Windows.Documents.Hyperlink> はナビゲーションホストのナビゲーションサービスを検索して使用し、ナビゲーション要求を処理することができます。</span><span class="sxs-lookup"><span data-stu-id="073a4-226">This means that, as long as either the direct or indirect parent of a <xref:System.Windows.Documents.Hyperlink> is a navigation host (see [Navigation Hosts](#Navigation_Hosts)), <xref:System.Windows.Documents.Hyperlink> will be able to find and use the navigation host's navigation service to process a navigation request.</span></span>

<span data-ttu-id="073a4-227">ただし、次のように <xref:System.Windows.Navigation.NavigationService> を直接使用する必要がある場合もあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-227">However, there are situations when you need to use <xref:System.Windows.Navigation.NavigationService> directly, including the following:</span></span>

- <span data-ttu-id="073a4-228">パラメーター化されていないコンストラクターを使用して <xref:System.Windows.Controls.Page> をインスタンス化する必要がある場合。</span><span class="sxs-lookup"><span data-stu-id="073a4-228">When you need to instantiate a <xref:System.Windows.Controls.Page> using a non-parameterless constructor.</span></span>

- <span data-ttu-id="073a4-229"><xref:System.Windows.Controls.Page> に移動する前に、プロパティを設定する必要がある場合。</span><span class="sxs-lookup"><span data-stu-id="073a4-229">When you need to set properties on the <xref:System.Windows.Controls.Page> before you navigate to it.</span></span>

- <span data-ttu-id="073a4-230">移動する必要がある <xref:System.Windows.Controls.Page> を実行時にのみ決定できる場合。</span><span class="sxs-lookup"><span data-stu-id="073a4-230">When the <xref:System.Windows.Controls.Page> that needs to be navigated to can only be determined at run time.</span></span>

<span data-ttu-id="073a4-231">このような状況では、<xref:System.Windows.Navigation.NavigationService> オブジェクトの <xref:System.Windows.Navigation.NavigationService.Navigate%2A> メソッドを呼び出すことによって、プログラムによってナビゲーションを開始するコードを記述する必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-231">In these situations, you need to write code to programmatically initiate navigation by calling the <xref:System.Windows.Navigation.NavigationService.Navigate%2A> method of the <xref:System.Windows.Navigation.NavigationService> object.</span></span> <span data-ttu-id="073a4-232">これには、<xref:System.Windows.Navigation.NavigationService> への参照を取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-232">That requires getting a reference to a <xref:System.Windows.Navigation.NavigationService>.</span></span>

#### <a name="getting-a-reference-to-the-navigationservice"></a><span data-ttu-id="073a4-233">NavigationService への参照の取得</span><span class="sxs-lookup"><span data-stu-id="073a4-233">Getting a Reference to the NavigationService</span></span>

<span data-ttu-id="073a4-234">「[ナビゲーションホスト](#Navigation_Hosts)」セクションで説明されている理由により、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] アプリケーションは複数の <xref:System.Windows.Navigation.NavigationService>を持つことができます。</span><span class="sxs-lookup"><span data-stu-id="073a4-234">For reasons that are covered in the [Navigation Hosts](#Navigation_Hosts) section, a [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] application can have more than one <xref:System.Windows.Navigation.NavigationService>.</span></span> <span data-ttu-id="073a4-235">つまり、コードには <xref:System.Windows.Navigation.NavigationService> を検索する方法が必要です。これは通常、現在の <xref:System.Windows.Controls.Page> に移動した <xref:System.Windows.Navigation.NavigationService> です。</span><span class="sxs-lookup"><span data-stu-id="073a4-235">This means that your code needs a way to find a <xref:System.Windows.Navigation.NavigationService>, which is usually the <xref:System.Windows.Navigation.NavigationService> that navigated to the current <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-236">`static`<xref:System.Windows.Navigation.NavigationService.GetNavigationService%2A?displayProperty=nameWithType> メソッドを呼び出すことによって、<xref:System.Windows.Navigation.NavigationService> への参照を取得できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-236">You can get a reference to a <xref:System.Windows.Navigation.NavigationService> by calling the `static`<xref:System.Windows.Navigation.NavigationService.GetNavigationService%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="073a4-237">特定の <xref:System.Windows.Controls.Page>に移動した <xref:System.Windows.Navigation.NavigationService> を取得するには、<xref:System.Windows.Controls.Page> への参照を <xref:System.Windows.Navigation.NavigationService.GetNavigationService%2A> メソッドの引数として渡します。</span><span class="sxs-lookup"><span data-stu-id="073a4-237">To get the <xref:System.Windows.Navigation.NavigationService> that navigated to a particular <xref:System.Windows.Controls.Page>, you pass a reference to the <xref:System.Windows.Controls.Page> as the argument of the <xref:System.Windows.Navigation.NavigationService.GetNavigationService%2A> method.</span></span> <span data-ttu-id="073a4-238">次のコードは、現在の <xref:System.Windows.Controls.Page> の <xref:System.Windows.Navigation.NavigationService> を取得する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-238">The following code shows how to get the <xref:System.Windows.Navigation.NavigationService> for the current <xref:System.Windows.Controls.Page>.</span></span>

[!code-csharp[NavigationOverviewSnippets#GetNSCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/GetNSPage.xaml.cs#getnscodebehind1)]
[!code-csharp[NavigationOverviewSnippets#GetNSCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/GetNSPage.xaml.cs#getnscodebehind2)]
[!code-vb[NavigationOverviewSnippets#GetNSCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/GetNSPage.xaml.vb#getnscodebehind2)]

<span data-ttu-id="073a4-239"><xref:System.Windows.Controls.Page>の <xref:System.Windows.Navigation.NavigationService> を見つけるためのショートカットとして、<xref:System.Windows.Controls.Page> は <xref:System.Windows.Controls.Page.NavigationService%2A> プロパティを実装します。</span><span class="sxs-lookup"><span data-stu-id="073a4-239">As a shortcut for finding the <xref:System.Windows.Navigation.NavigationService> for a <xref:System.Windows.Controls.Page>, <xref:System.Windows.Controls.Page> implements the <xref:System.Windows.Controls.Page.NavigationService%2A> property.</span></span> <span data-ttu-id="073a4-240">これを次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-240">This is shown in the following example.</span></span>

[!code-csharp[NavigationOverviewSnippets#GetNSShortcutCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/GetNSPageShortCut.xaml.cs#getnsshortcutcodebehind1)]
[!code-csharp[NavigationOverviewSnippets#GetNSShortcutCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/GetNSPageShortCut.xaml.cs#getnsshortcutcodebehind2)]
[!code-vb[NavigationOverviewSnippets#GetNSShortcutCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/GetNSPageShortCut.xaml.vb#getnsshortcutcodebehind2)]

> [!NOTE]
> <span data-ttu-id="073a4-241"><xref:System.Windows.Controls.Page> は、<xref:System.Windows.FrameworkElement.Loaded> イベント <xref:System.Windows.Controls.Page> 発生した場合にのみ、その <xref:System.Windows.Navigation.NavigationService> への参照を取得できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-241">A <xref:System.Windows.Controls.Page> can only get a reference to its <xref:System.Windows.Navigation.NavigationService> when <xref:System.Windows.Controls.Page> raises the <xref:System.Windows.FrameworkElement.Loaded> event.</span></span>

#### <a name="programmatic-navigation-to-a-page-object"></a><span data-ttu-id="073a4-242">ページ オブジェクトへのプログラム ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-242">Programmatic Navigation to a Page Object</span></span>

<span data-ttu-id="073a4-243">次の例では、<xref:System.Windows.Navigation.NavigationService> を使用して、プログラムで <xref:System.Windows.Controls.Page> に移動する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-243">The following example shows how to use the <xref:System.Windows.Navigation.NavigationService> to programmatically navigate to a <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-244">移動先の <xref:System.Windows.Controls.Page> は、単一のパラメーターなしのコンストラクターを使用してのみインスタンス化できるため、プログラムによるナビゲーションが必要です。</span><span class="sxs-lookup"><span data-stu-id="073a4-244">Programmatic navigation is required because the <xref:System.Windows.Controls.Page> that is being navigated to can only be instantiated using a single, non-parameterless constructor.</span></span> <span data-ttu-id="073a4-245">パラメーターなしのコンストラクターを使用した <xref:System.Windows.Controls.Page> は、次のマークアップとコードに示されています。</span><span class="sxs-lookup"><span data-stu-id="073a4-245">The <xref:System.Windows.Controls.Page> with the non-parameterless constructor is shown in the following markup and code.</span></span>

[!code-xaml[NavigationOverviewSnippets#PageWithNonDefaultConstructorXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithNonDefaultConstructor.xaml#pagewithnondefaultconstructorxaml)]

[!code-csharp[NavigationOverviewSnippets#PageWithNonDefaultConstructorCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithNonDefaultConstructor.xaml.cs#pagewithnondefaultconstructorcodebehind)]
[!code-vb[NavigationOverviewSnippets#PageWithNonDefaultConstructorCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/PageWithNonDefaultConstructor.xaml.vb#pagewithnondefaultconstructorcodebehind)]

<span data-ttu-id="073a4-246">パラメーターなしのコンストラクターを使用して <xref:System.Windows.Controls.Page> に移動する <xref:System.Windows.Controls.Page> は、次のマークアップとコードに示されています。</span><span class="sxs-lookup"><span data-stu-id="073a4-246">The <xref:System.Windows.Controls.Page> that navigates to the <xref:System.Windows.Controls.Page> with the non-parameterless constructor is shown in the following markup and code.</span></span>

[!code-xaml[NavigationOverviewSnippets#NSNavigationPageXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSNavigationPage.xaml#nsnavigationpagexaml)]

[!code-csharp[NavigationOverviewSnippets#NSNavigationPageCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSNavigationPage.xaml.cs#nsnavigationpagecodebehind)]
[!code-vb[NavigationOverviewSnippets#NSNavigationPageCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/NSNavigationPage.xaml.vb#nsnavigationpagecodebehind)]

<span data-ttu-id="073a4-247">この <xref:System.Windows.Controls.Page> の <xref:System.Windows.Documents.Hyperlink> をクリックすると、<xref:System.Windows.Controls.Page> をインスタンス化して、パラメーター化されていないコンストラクターを使用し、<xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> メソッドを呼び出すことによって、ナビゲーションが開始されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-247">When the <xref:System.Windows.Documents.Hyperlink> on this <xref:System.Windows.Controls.Page> is clicked, navigation is initiated by instantiating the <xref:System.Windows.Controls.Page> to navigate to using the non-parameterless constructor and calling the <xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="073a4-248"><xref:System.Windows.Navigation.NavigationService.Navigate%2A> は、パック URI ではなく、<xref:System.Windows.Navigation.NavigationService> が移動するオブジェクトへの参照を受け入れます。</span><span class="sxs-lookup"><span data-stu-id="073a4-248"><xref:System.Windows.Navigation.NavigationService.Navigate%2A> accepts a reference to the object that the <xref:System.Windows.Navigation.NavigationService> will navigate to, rather than a pack URI.</span></span>

#### <a name="programmatic-navigation-with-a-pack-uri"></a><span data-ttu-id="073a4-249">パック URI によるプログラム ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-249">Programmatic Navigation with a Pack URI</span></span>

<span data-ttu-id="073a4-250">プログラムによってパック URI を構築する必要がある場合 (実行時にパック URI を特定できる場合など) は、<xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> メソッドを使用できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-250">If you need to construct a pack URI programmatically (when you can only determine the pack URI at run time, for example), you can use the <xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="073a4-251">これを次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-251">This is shown in the following example.</span></span>

[!code-xaml[NavigationOverviewSnippets#NSUriNavigationPageXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSUriNavigationPage.xaml#nsurinavigationpagexaml)]

[!code-csharp[NavigationOverviewSnippets#NSUriNavigationPageCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSUriNavigationPage.xaml.cs#nsurinavigationpagecodebehind)]
[!code-vb[NavigationOverviewSnippets#NSUriNavigationPageCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/NSUriNavigationPage.xaml.vb#nsurinavigationpagecodebehind)]

#### <a name="refreshing-the-current-page"></a><span data-ttu-id="073a4-252">現在のページの更新</span><span class="sxs-lookup"><span data-stu-id="073a4-252">Refreshing the Current Page</span></span>

<span data-ttu-id="073a4-253"><xref:System.Windows.Controls.Page> は、<xref:System.Windows.Navigation.NavigationService.Source%2A?displayProperty=nameWithType> プロパティに格納されているパック URI と同じパック URI がある場合はダウンロードされません。</span><span class="sxs-lookup"><span data-stu-id="073a4-253">A <xref:System.Windows.Controls.Page> is not downloaded if it has the same pack URI as the pack URI that is stored in the <xref:System.Windows.Navigation.NavigationService.Source%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="073a4-254">現在のページを再びダウンロードするように [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] を強制するには、次の例に示すように、<xref:System.Windows.Navigation.NavigationService.Refresh%2A?displayProperty=nameWithType> メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="073a4-254">To force [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] to download the current page again, you can call the <xref:System.Windows.Navigation.NavigationService.Refresh%2A?displayProperty=nameWithType> method, as shown in the following example.</span></span>

[!code-xaml[NavigationOverviewSnippets#NSRefreshNavigationPageXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSRefreshNavigationPage.xaml#nsrefreshnavigationpagexaml1)]

[!code-csharp[NavigationOverviewSnippets#NSRefreshNavigationPageCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSRefreshNavigationPage.xaml.cs#nsrefreshnavigationpagecodebehind1)]
[!code-vb[NavigationOverviewSnippets#NSRefreshNavigationPageCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/NSRefreshNavigationPage.xaml.vb#nsrefreshnavigationpagecodebehind1)]
[!code-csharp[NavigationOverviewSnippets#NSRefreshNavigationPageCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSRefreshNavigationPage.xaml.cs#nsrefreshnavigationpagecodebehind2)]
[!code-vb[NavigationOverviewSnippets#NSRefreshNavigationPageCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/NSRefreshNavigationPage.xaml.vb#nsrefreshnavigationpagecodebehind2)]

<a name="Navigation_Lifetime"></a>

### <a name="navigation-lifetime"></a><span data-ttu-id="073a4-255">ナビゲーションの有効期間</span><span class="sxs-lookup"><span data-stu-id="073a4-255">Navigation Lifetime</span></span>

<span data-ttu-id="073a4-256">これまでに説明したように、ナビゲーションを開始するには多くの方法があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-256">There are many ways to initiate navigation, as you've seen.</span></span> <span data-ttu-id="073a4-257">ナビゲーションが開始されている間にナビゲーションが進行しているときに、<xref:System.Windows.Navigation.NavigationService> によって実装された次のイベントを使用して、ナビゲーションを追跡し、影響を与えることができます。</span><span class="sxs-lookup"><span data-stu-id="073a4-257">When navigation is initiated, and while navigation is in progress, you can track and influence the navigation using the following events that are implemented by <xref:System.Windows.Navigation.NavigationService>:</span></span>

- <span data-ttu-id="073a4-258"><xref:System.Windows.Navigation.NavigationService.Navigating>.</span><span class="sxs-lookup"><span data-stu-id="073a4-258"><xref:System.Windows.Navigation.NavigationService.Navigating>.</span></span> <span data-ttu-id="073a4-259">新しいナビゲーションが要求されたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-259">Occurs when a new navigation is requested.</span></span> <span data-ttu-id="073a4-260">ナビゲーションのキャンセルに使用できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-260">Can be used to cancel the navigation.</span></span>

- <span data-ttu-id="073a4-261"><xref:System.Windows.Navigation.NavigationService.NavigationProgress>.</span><span class="sxs-lookup"><span data-stu-id="073a4-261"><xref:System.Windows.Navigation.NavigationService.NavigationProgress>.</span></span> <span data-ttu-id="073a4-262">ナビゲーション進行状況の情報提供を目的として、ダウンロード中に定期的に発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-262">Occurs periodically during a download to provide navigation progress information.</span></span>

- <span data-ttu-id="073a4-263"><xref:System.Windows.Navigation.NavigationService.Navigated>.</span><span class="sxs-lookup"><span data-stu-id="073a4-263"><xref:System.Windows.Navigation.NavigationService.Navigated>.</span></span> <span data-ttu-id="073a4-264">ページの位置が特定され、ダウンロードされたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-264">Occurs when the page has been located and downloaded.</span></span>

- <span data-ttu-id="073a4-265"><xref:System.Windows.Navigation.NavigationService.NavigationStopped>.</span><span class="sxs-lookup"><span data-stu-id="073a4-265"><xref:System.Windows.Navigation.NavigationService.NavigationStopped>.</span></span> <span data-ttu-id="073a4-266"><xref:System.Windows.Navigation.NavigationService.StopLoading%2A>を呼び出すことによって) ナビゲーションが停止したとき、または現在のナビゲーションの進行中に新しいナビゲーションが要求されたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-266">Occurs when the navigation is stopped (by calling <xref:System.Windows.Navigation.NavigationService.StopLoading%2A>), or when a new navigation is requested while a current navigation is in progress.</span></span>

- <span data-ttu-id="073a4-267"><xref:System.Windows.Navigation.NavigationService.NavigationFailed>.</span><span class="sxs-lookup"><span data-stu-id="073a4-267"><xref:System.Windows.Navigation.NavigationService.NavigationFailed>.</span></span> <span data-ttu-id="073a4-268">要求されたコンテンツにナビゲートするときにエラーが発生したときに発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-268">Occurs when an error is raised while navigating to the requested content.</span></span>

- <span data-ttu-id="073a4-269"><xref:System.Windows.Navigation.NavigationService.LoadCompleted>.</span><span class="sxs-lookup"><span data-stu-id="073a4-269"><xref:System.Windows.Navigation.NavigationService.LoadCompleted>.</span></span> <span data-ttu-id="073a4-270">ナビゲート先のコンテンツが読み込まれ、解析されて、レンダリングが開始されたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-270">Occurs when content that was navigated to is loaded and parsed, and has begun rendering.</span></span>

- <span data-ttu-id="073a4-271"><xref:System.Windows.Navigation.NavigationService.FragmentNavigation>.</span><span class="sxs-lookup"><span data-stu-id="073a4-271"><xref:System.Windows.Navigation.NavigationService.FragmentNavigation>.</span></span> <span data-ttu-id="073a4-272">コンテンツ フラグメントへのナビゲーションが開始されたときに、次のタイミングで発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-272">Occurs when navigation to a content fragment begins, which happens:</span></span>

  - <span data-ttu-id="073a4-273">目的のフラグメントが現在のコンテンツの場合は、すぐに発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-273">Immediately, if the desired fragment is in the current content.</span></span>

  - <span data-ttu-id="073a4-274">目的のフラグメントが別のコンテンツにある場合は、ソース コンテンツが読み込まれた後で発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-274">After the source content has been loaded, if the desired fragment is in different content.</span></span>

<span data-ttu-id="073a4-275">ナビゲーション イベントは、次の図に示されている順序で発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-275">The navigation events are raised in the order that is illustrated by the following figure.</span></span>

<span data-ttu-id="073a4-276">![ページナビゲーションのフローチャート](./media/navigation-overview/order-of-navigation-events.png "ページナビゲーションイベントのフローチャート")</span><span class="sxs-lookup"><span data-stu-id="073a4-276">![Page navigation flow chart](./media/navigation-overview/order-of-navigation-events.png "Page navigation event flow chart")</span></span>

<span data-ttu-id="073a4-277">一般に、<xref:System.Windows.Controls.Page> では、これらのイベントについて心配することはありません。</span><span class="sxs-lookup"><span data-stu-id="073a4-277">In general, a <xref:System.Windows.Controls.Page> isn't concerned about these events.</span></span> <span data-ttu-id="073a4-278">多くの場合、アプリケーションで問題が発生する可能性があります。そのため、これらのイベントは <xref:System.Windows.Application> クラスによっても発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-278">It is more likely that an application is concerned with them and, for that reason, these events are also raised by the <xref:System.Windows.Application> class:</span></span>

- <xref:System.Windows.Application.Navigating?displayProperty=nameWithType>

- <xref:System.Windows.Application.NavigationProgress?displayProperty=nameWithType>

- <xref:System.Windows.Application.Navigated?displayProperty=nameWithType>

- <xref:System.Windows.Application.NavigationFailed?displayProperty=nameWithType>

- <xref:System.Windows.Application.NavigationStopped?displayProperty=nameWithType>

- <xref:System.Windows.Application.LoadCompleted?displayProperty=nameWithType>

- <xref:System.Windows.Application.FragmentNavigation?displayProperty=nameWithType>

<span data-ttu-id="073a4-279"><xref:System.Windows.Navigation.NavigationService> によってイベントが発生するたびに、<xref:System.Windows.Application> クラスによって対応するイベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-279">Every time <xref:System.Windows.Navigation.NavigationService> raises an event, the <xref:System.Windows.Application> class raises the corresponding event.</span></span> <span data-ttu-id="073a4-280"><xref:System.Windows.Controls.Frame> と <xref:System.Windows.Navigation.NavigationWindow> は、それぞれのスコープ内のナビゲーションを検出するために同じイベントを提供します。</span><span class="sxs-lookup"><span data-stu-id="073a4-280"><xref:System.Windows.Controls.Frame> and <xref:System.Windows.Navigation.NavigationWindow> offer the same events to detect navigation within their respective scopes.</span></span>

<span data-ttu-id="073a4-281">場合によっては、<xref:System.Windows.Controls.Page> がこれらのイベントに関心を持つことがあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-281">In some cases, a <xref:System.Windows.Controls.Page> might be interested in these events.</span></span> <span data-ttu-id="073a4-282">たとえば、<xref:System.Windows.Controls.Page> は、ナビゲーションをキャンセルするかどうかを決定するために <xref:System.Windows.Navigation.NavigationService.Navigating?displayProperty=nameWithType> イベントを処理することがあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-282">For example, a <xref:System.Windows.Controls.Page> might handle the <xref:System.Windows.Navigation.NavigationService.Navigating?displayProperty=nameWithType> event to determine whether or not to cancel navigation away from itself.</span></span> <span data-ttu-id="073a4-283">これを次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-283">This is shown in the following example.</span></span>

[!code-xaml[NavigationOverviewSnippets#CancelNavigationPageXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/CancelNavigationPage.xaml#cancelnavigationpagexaml)]

[!code-csharp[NavigationOverviewSnippets#CancelNavigationPageCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/CancelNavigationPage.xaml.cs#cancelnavigationpagecodebehind)]
[!code-vb[NavigationOverviewSnippets#CancelNavigationPageCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/CancelNavigationPage.xaml.vb#cancelnavigationpagecodebehind)]

<span data-ttu-id="073a4-284">前の例のように、<xref:System.Windows.Controls.Page> からナビゲーションイベントを使用してハンドラーを登録する場合は、イベントハンドラーの登録を解除する必要もあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-284">If you register a handler with a navigation event from a <xref:System.Windows.Controls.Page>, as the preceding example does, you must also unregister the event handler.</span></span> <span data-ttu-id="073a4-285">そうしないと、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] ナビゲーションによって履歴を使用した <xref:System.Windows.Controls.Page> ナビゲーションが記憶される方法に関して副作用が生じる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-285">If you don't, there may be side effects with respect to how [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] navigation remembers <xref:System.Windows.Controls.Page> navigation using the journal.</span></span>

<a name="NavigationHistory"></a>

### <a name="remembering-navigation-with-the-journal"></a><span data-ttu-id="073a4-286">履歴によるナビゲーションの記憶</span><span class="sxs-lookup"><span data-stu-id="073a4-286">Remembering Navigation with the Journal</span></span>

[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] <span data-ttu-id="073a4-287">は、戻るスタックと進むスタックの 2 つのスタックを使用して、ナビゲート元のページを記憶します。</span><span class="sxs-lookup"><span data-stu-id="073a4-287">uses two stacks to remember the pages that you have navigated from: a back stack and a forward stack.</span></span> <span data-ttu-id="073a4-288">現在の <xref:System.Windows.Controls.Page> から新しい <xref:System.Windows.Controls.Page> に移動するか、既存の <xref:System.Windows.Controls.Page> に進むと、現在の <xref:System.Windows.Controls.Page> が*バックスタック*に追加されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-288">When you navigate from the current <xref:System.Windows.Controls.Page> to a new <xref:System.Windows.Controls.Page> or forward to an existing <xref:System.Windows.Controls.Page>, the current <xref:System.Windows.Controls.Page> is added to the *back stack*.</span></span> <span data-ttu-id="073a4-289">現在の <xref:System.Windows.Controls.Page> から前の <xref:System.Windows.Controls.Page> に移動すると、現在の <xref:System.Windows.Controls.Page> が*前方スタック*に追加されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-289">When you navigate from the current <xref:System.Windows.Controls.Page> back to the previous <xref:System.Windows.Controls.Page>, the current <xref:System.Windows.Controls.Page> is added to the *forward stack*.</span></span> <span data-ttu-id="073a4-290">戻るスタック、進むスタック、およびそれらを管理する機能を、まとめて履歴と呼びます。</span><span class="sxs-lookup"><span data-stu-id="073a4-290">The back stack, the forward stack, and the functionality to manage them, are collectively referred to as the journal.</span></span> <span data-ttu-id="073a4-291">バックスタックと転送スタックの各項目は <xref:System.Windows.Navigation.JournalEntry> クラスのインスタンスであり、*履歴エントリ*と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="073a4-291">Each item in the back stack and the forward stack is an instance of the <xref:System.Windows.Navigation.JournalEntry> class, and is referred to as a *journal entry*.</span></span>

#### <a name="navigating-the-journal-from-internet-explorer"></a><span data-ttu-id="073a4-292">Internet Explorer からの履歴のナビゲート</span><span class="sxs-lookup"><span data-stu-id="073a4-292">Navigating the Journal from Internet Explorer</span></span>

<span data-ttu-id="073a4-293">概念的には、journal は Internet Explorer の **[戻る]** ボタンと **[進む]** ボタンと同じ方法で動作します。</span><span class="sxs-lookup"><span data-stu-id="073a4-293">Conceptually, the journal operates the same way that the **Back** and **Forward** buttons in Internet Explorer do.</span></span> <span data-ttu-id="073a4-294">これを次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-294">These are shown in the following figure.</span></span>

<span data-ttu-id="073a4-295">![[戻る] ボタンと [進む] ボタン](./media/navigation-overview/back-and-forward-navigation.png "[戻る] ボタンと [進む] ボタンを使用して移動します。")</span><span class="sxs-lookup"><span data-stu-id="073a4-295">![Back and Forward buttons](./media/navigation-overview/back-and-forward-navigation.png "Navigate with the back and forward buttons.")</span></span>

<span data-ttu-id="073a4-296">Internet Explorer でホストされている Xbap の場合、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] は、journal を Internet Explorer のナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] に統合します。</span><span class="sxs-lookup"><span data-stu-id="073a4-296">For XBAPs that are hosted by Internet Explorer, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] integrates the journal into the navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] of Internet Explorer.</span></span> <span data-ttu-id="073a4-297">これにより、ユーザーは Internet Explorer の **[戻る]** 、 **[進む]** 、 **[最近使ったページ]** の各ボタンを使用して、XBAP 内のページを移動できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-297">This allows users to navigate pages in an XBAP by using the **Back**, **Forward**, and **Recent Pages** buttons in Internet Explorer.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="073a4-298">Internet Explorer では、ユーザーが XBAP との間を移動したときに、保持されていないページの履歴項目だけが履歴に保持されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-298">In Internet Explorer, when a user navigates away from and back to an XBAP, only the journal entries for pages that were not kept alive are retained in the journal.</span></span> <span data-ttu-id="073a4-299">ページを維持したままにする方法については、このトピックで後述する「[ページの有効期間と履歴](#PageLifetime)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-299">For discussion on keeping pages alive, see [Page Lifetime and the Journal](#PageLifetime) later in this topic.</span></span>

<span data-ttu-id="073a4-300">既定では、Internet Explorer の **[最近使ったページ]** の一覧に表示される各 <xref:System.Windows.Controls.Page> のテキストは、<xref:System.Windows.Controls.Page> の URI です。</span><span class="sxs-lookup"><span data-stu-id="073a4-300">By default, the text for each <xref:System.Windows.Controls.Page> that appears in the **Recent Pages** list of Internet Explorer is the URI for the <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-301">多くの場合、これは、ユーザーにとって特に意味がありません。</span><span class="sxs-lookup"><span data-stu-id="073a4-301">In many cases, this is not particularly meaningful to the user.</span></span> <span data-ttu-id="073a4-302">幸い、次のオプションのいずれかを使用して、テキストを変更できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-302">Fortunately, you can change the text using one the following options:</span></span>

1. <span data-ttu-id="073a4-303">アタッチされた `JournalEntry.Name` 属性値。</span><span class="sxs-lookup"><span data-stu-id="073a4-303">The attached `JournalEntry.Name` attribute value.</span></span>

2. <span data-ttu-id="073a4-304">`Page.Title` 属性値。</span><span class="sxs-lookup"><span data-stu-id="073a4-304">The `Page.Title` attribute value.</span></span>

3. <span data-ttu-id="073a4-305">現在の <xref:System.Windows.Controls.Page> の `Page.WindowTitle` 属性値と URI。</span><span class="sxs-lookup"><span data-stu-id="073a4-305">The `Page.WindowTitle` attribute value and the URI for the current <xref:System.Windows.Controls.Page>.</span></span>

4. <span data-ttu-id="073a4-306">現在の <xref:System.Windows.Controls.Page> の URI。</span><span class="sxs-lookup"><span data-stu-id="073a4-306">The URI for the current <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-307">(既定)</span><span class="sxs-lookup"><span data-stu-id="073a4-307">(Default)</span></span>

<span data-ttu-id="073a4-308">これらのオプションの順序は、テキスト検索の優先順位と一致します。</span><span class="sxs-lookup"><span data-stu-id="073a4-308">The order in which the options are listed matches the order of precedence for finding the text.</span></span> <span data-ttu-id="073a4-309">たとえば、`JournalEntry.Name` が設定されている場合、他の値は無視されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-309">For example, if `JournalEntry.Name` is set, the other values are ignored.</span></span>

<span data-ttu-id="073a4-310">次の例では、`Page.Title` 属性を使用して、journal エントリに対して表示されるテキストを変更します。</span><span class="sxs-lookup"><span data-stu-id="073a4-310">The following example uses the `Page.Title` attribute to change the text that appears for a journal entry.</span></span>

[!code-xaml[NavigationOverviewSnippets#PageTitleMARKUP1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithTitle.xaml#pagetitlemarkup1)]
[!code-xaml[NavigationOverviewSnippets#PageTitleMARKUP2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithTitle.xaml#pagetitlemarkup2)]

[!code-csharp[NavigationOverviewSnippets#PageTitleCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithTitle.xaml.cs#pagetitlecodebehind1)]
[!code-vb[NavigationOverviewSnippets#PageTitleCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/PageWithTitle.xaml.vb#pagetitlecodebehind1)]
[!code-csharp[NavigationOverviewSnippets#PageTitleCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithTitle.xaml.cs#pagetitlecodebehind2)]
[!code-vb[NavigationOverviewSnippets#PageTitleCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/PageWithTitle.xaml.vb#pagetitlecodebehind2)]

#### <a name="navigating-the-journal-using-wpf"></a><span data-ttu-id="073a4-311">WPF を使用する履歴のナビゲート</span><span class="sxs-lookup"><span data-stu-id="073a4-311">Navigating the Journal Using WPF</span></span>

<span data-ttu-id="073a4-312">ユーザーは、Internet Explorer の **[戻る]** 、 **[進む]** 、および 最近 の各**ページ**を使用して履歴内を移動できますが、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]によって提供される宣言型とプログラム用の両方のメカニズムを使用して、履歴内を移動することもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-312">Although a user can navigate the journal by using the **Back**, **Forward**, and **Recent Pages** in Internet Explorer, you can also navigate the journal using both declarative and programmatic mechanisms provided by [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="073a4-313">これを行う理由の1つは、ページにカスタムナビゲーション Ui を提供することです。</span><span class="sxs-lookup"><span data-stu-id="073a4-313">One reason to do this is to provide custom navigation UIs in your pages.</span></span>

<span data-ttu-id="073a4-314"><xref:System.Windows.Input.NavigationCommands>によって公開されているナビゲーションコマンドを使用して、journal ナビゲーションサポートを宣言によって追加できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-314">You can declaratively add journal navigation support by using the navigation commands exposed by <xref:System.Windows.Input.NavigationCommands>.</span></span> <span data-ttu-id="073a4-315">次の例は、`BrowseBack` ナビゲーションコマンドの使用方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-315">The following example demonstrates how to use the `BrowseBack` navigation command.</span></span>

[!code-xaml[NavigationOverviewSnippets#NavigationCommandsPageXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NavigationCommandsPage.xaml#navigationcommandspagexaml1)]
[!code-xaml[NavigationOverviewSnippets#NavigationCommandsPageXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NavigationCommandsPage.xaml#navigationcommandspagexaml2)]
[!code-xaml[NavigationOverviewSnippets#NavigationCommandsPageXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NavigationCommandsPage.xaml#navigationcommandspagexaml3)]
[!code-xaml[NavigationOverviewSnippets#NavigationCommandsPageXAML4](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NavigationCommandsPage.xaml#navigationcommandspagexaml4)]

<span data-ttu-id="073a4-316"><xref:System.Windows.Navigation.NavigationService> クラスの次のいずれかのメンバーを使用して、プログラムを使用して履歴をナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-316">You can programmatically navigate the journal by using one of the following members of the <xref:System.Windows.Navigation.NavigationService> class:</span></span>

- <xref:System.Windows.Navigation.NavigationService.GoBack%2A>

- <xref:System.Windows.Navigation.NavigationService.GoForward%2A>

- <xref:System.Windows.Navigation.NavigationService.CanGoBack%2A>

- <xref:System.Windows.Navigation.NavigationService.CanGoForward%2A>

<span data-ttu-id="073a4-317">このトピックの「[ナビゲーション履歴によるコンテンツの状態の保持](#RetainingContentStateWithNavigationHistory)」で説明されているように、履歴はプログラムによって操作することもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-317">The journal can also be manipulated programmatically, as discussed in [Retaining Content State with Navigation History](#RetainingContentStateWithNavigationHistory) later in this topic.</span></span>

<a name="PageLifetime"></a>

### <a name="page-lifetime-and-the-journal"></a><span data-ttu-id="073a4-318">ページの有効期間と履歴</span><span class="sxs-lookup"><span data-stu-id="073a4-318">Page Lifetime and the Journal</span></span>

<span data-ttu-id="073a4-319">グラフィックス、アニメーション、メディアなどのリッチコンテンツを含むいくつかのページを含む XBAP を考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="073a4-319">Consider an XBAP with several pages that contain rich content, including graphics, animations, and media.</span></span> <span data-ttu-id="073a4-320">このようなページのメモリ使用量は、特にビデオやオーディオ メディアが使用されている場合、非常に大きくなることがあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-320">The memory footprint for pages like these could be quite large, particularly if video and audio media are used.</span></span> <span data-ttu-id="073a4-321">ジャーナルは移動先のページを "記憶" しているので、このような XBAP は、大量のメモリを迅速に消費する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-321">Given that the journal "remembers" pages that have been navigated to, such an XBAP could quickly consume a large and noticeable amount of memory.</span></span>

<span data-ttu-id="073a4-322">このため、履歴の既定の動作では、<xref:System.Windows.Controls.Page> オブジェクトへの参照ではなく、各履歴エントリに <xref:System.Windows.Controls.Page> メタデータが格納されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-322">For this reason, the default behavior of the journal is to store <xref:System.Windows.Controls.Page> metadata in each journal entry rather than a reference to a <xref:System.Windows.Controls.Page> object.</span></span> <span data-ttu-id="073a4-323">履歴項目に移動すると、その <xref:System.Windows.Controls.Page> メタデータを使用して、指定された <xref:System.Windows.Controls.Page> の新しいインスタンスが作成されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-323">When a journal entry is navigated to, its <xref:System.Windows.Controls.Page> metadata is used to create a new instance of the specified <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-324">その結果、移動される各 <xref:System.Windows.Controls.Page> には、次の図に示す有効期間があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-324">As a consequence, each <xref:System.Windows.Controls.Page> that is navigated has the lifetime that is illustrated by the following figure.</span></span>

<span data-ttu-id="073a4-325">![ページの有効期間](./media/navigation-overview/navigated-page-lifetime.png "これは、ページが移動されたときの有効期間を示します。")</span><span class="sxs-lookup"><span data-stu-id="073a4-325">![Page lifetime](./media/navigation-overview/navigated-page-lifetime.png "This shows the lifetime when a page is navigated.")</span></span>

<span data-ttu-id="073a4-326">既定のジャーナル動作を使用すると、メモリ使用量を節約できますが、ページごとのレンダリングのパフォーマンスが低下する可能性があります。特に大量のコンテンツがある場合は、<xref:System.Windows.Controls.Page> を再インスタンス化すると時間がかかることがあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-326">Although using the default journaling behavior can save on memory consumption, per-page rendering performance might be reduced; reinstantiating a <xref:System.Windows.Controls.Page> can be time-intensive, particularly if it has a lot of content.</span></span> <span data-ttu-id="073a4-327"><xref:System.Windows.Controls.Page> インスタンスをジャーナルに保持する必要がある場合は、2つの方法を使用して作成できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-327">If you need to retain a <xref:System.Windows.Controls.Page> instance in the journal, you can draw on two techniques for doing so.</span></span> <span data-ttu-id="073a4-328">まず、<xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> メソッドを呼び出すことによって、プログラムを使用して <xref:System.Windows.Controls.Page> オブジェクトに移動できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-328">First, you can programmatically navigate to a <xref:System.Windows.Controls.Page> object by calling the <xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="073a4-329">次に、<xref:System.Windows.Controls.Page.KeepAlive%2A> プロパティを `true` に設定することによって、<xref:System.Windows.Controls.Page> のインスタンスをジャーナルに保持 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] ことを指定できます (既定値は `false`)。</span><span class="sxs-lookup"><span data-stu-id="073a4-329">Second, you can specify that [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] retain an instance of a <xref:System.Windows.Controls.Page> in the journal by setting the <xref:System.Windows.Controls.Page.KeepAlive%2A> property to `true` (the default is `false`).</span></span> <span data-ttu-id="073a4-330">次の例に示すように、マークアップで宣言によって <xref:System.Windows.Controls.Page.KeepAlive%2A> を設定できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-330">As shown in the following example, you can set <xref:System.Windows.Controls.Page.KeepAlive%2A> declaratively in markup.</span></span>

[!code-xaml[NavigationOverviewSnippets#KeepAlivePageXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/KeepAlivePage.xaml#keepalivepagexaml)]

<span data-ttu-id="073a4-331">保持されている <xref:System.Windows.Controls.Page> の有効期間は、それとは異なるものとはわずかに異なります。</span><span class="sxs-lookup"><span data-stu-id="073a4-331">The lifetime of a <xref:System.Windows.Controls.Page> that is kept alive is subtly different from one that is not.</span></span> <span data-ttu-id="073a4-332">保持されている <xref:System.Windows.Controls.Page> が最初に移動されたときには、保持されていない <xref:System.Windows.Controls.Page> と同じようにインスタンス化されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-332">The first time a <xref:System.Windows.Controls.Page> that is kept alive is navigated to, it is instantiated just like a <xref:System.Windows.Controls.Page> that is not kept alive.</span></span> <span data-ttu-id="073a4-333">ただし、<xref:System.Windows.Controls.Page> のインスタンスはジャーナルに保持されるため、ジャーナルに残っている限り、再インスタンス化されることはありません。</span><span class="sxs-lookup"><span data-stu-id="073a4-333">However, because an instance of the <xref:System.Windows.Controls.Page> is retained in the journal, it is never instantiated again for as long as it remains in the journal.</span></span> <span data-ttu-id="073a4-334">その結果、<xref:System.Windows.Controls.Page> がナビゲートされるたびに呼び出される必要がある初期化ロジックが <xref:System.Windows.Controls.Page> にある場合は、コンストラクターから <xref:System.Windows.FrameworkElement.Loaded> イベントのハンドラーに移動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-334">Consequently, if a <xref:System.Windows.Controls.Page> has initialization logic that needs to be called every time the <xref:System.Windows.Controls.Page> is navigated to, you should move it from the constructor into a handler for the <xref:System.Windows.FrameworkElement.Loaded> event.</span></span> <span data-ttu-id="073a4-335">次の図に示すように、<xref:System.Windows.FrameworkElement.Loaded> イベントと <xref:System.Windows.FrameworkElement.Unloaded> イベントは、それぞれ <xref:System.Windows.Controls.Page> に移動するたびに発生します。</span><span class="sxs-lookup"><span data-stu-id="073a4-335">As shown in the following figure, the <xref:System.Windows.FrameworkElement.Loaded> and <xref:System.Windows.FrameworkElement.Unloaded> events are still raised each time a <xref:System.Windows.Controls.Page> is navigated to and from, respectively.</span></span>

<span data-ttu-id="073a4-336">![読み込みイベントとアンロードイベントが発生したとき](./media/navigation-overview/loaded-and-unloaded-events.png "読み込まれたイベントとアンロードされたイベントは、ページに移動したり、ページを移動したりすると発生します。")</span><span class="sxs-lookup"><span data-stu-id="073a4-336">![When the Loaded and Unloaded events are raised](./media/navigation-overview/loaded-and-unloaded-events.png "Loaded and unloaded events are raised when a page is navigated to and from.")</span></span>

<span data-ttu-id="073a4-337"><xref:System.Windows.Controls.Page> が維持されていない場合は、次のいずれの操作も実行しないでください。</span><span class="sxs-lookup"><span data-stu-id="073a4-337">When a <xref:System.Windows.Controls.Page> is not kept alive, you should not do either of the following:</span></span>

- <span data-ttu-id="073a4-338">ページへの参照、またはその一部への参照を格納する。</span><span class="sxs-lookup"><span data-stu-id="073a4-338">Store a reference to it, or any part of it.</span></span>

- <span data-ttu-id="073a4-339">ページによって実装されていないイベントのイベント ハンドラーを登録する。</span><span class="sxs-lookup"><span data-stu-id="073a4-339">Register event handlers with events that are not implemented by it.</span></span>

<span data-ttu-id="073a4-340">これらのいずれかを実行すると、履歴から削除された後でも、<xref:System.Windows.Controls.Page> を強制的にメモリに保持する参照が作成されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-340">Doing either of these will create references that force the <xref:System.Windows.Controls.Page> to be retained in memory, even after it has been removed from the journal.</span></span>

<span data-ttu-id="073a4-341">一般に、<xref:System.Windows.Controls.Page> を使用しないようにする場合は、既定の <xref:System.Windows.Controls.Page> 動作を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="073a4-341">In general, you should prefer the default <xref:System.Windows.Controls.Page> behavior of not keeping a <xref:System.Windows.Controls.Page> alive.</span></span> <span data-ttu-id="073a4-342">ただし、これには、次のセクションで説明されている状態も関係します。</span><span class="sxs-lookup"><span data-stu-id="073a4-342">However, this has state implications that are discussed in the next section.</span></span>

<a name="RetainingContentStateWithNavigationHistory"></a>

### <a name="retaining-content-state-with-navigation-history"></a><span data-ttu-id="073a4-343">ナビゲーション履歴によるコンテンツの状態の保持</span><span class="sxs-lookup"><span data-stu-id="073a4-343">Retaining Content State with Navigation History</span></span>

<span data-ttu-id="073a4-344"><xref:System.Windows.Controls.Page> が維持されていない状態で、ユーザーからデータを収集するコントロールがある場合、ユーザーが <xref:System.Windows.Controls.Page>に移動して戻ると、データはどうなりますか。</span><span class="sxs-lookup"><span data-stu-id="073a4-344">If a <xref:System.Windows.Controls.Page> is not kept alive, and it has controls that collect data from the user, what happens to the data if a user navigates away from and back to the <xref:System.Windows.Controls.Page>?</span></span> <span data-ttu-id="073a4-345">ユーザー エクスペリエンスの観点から見ると、ユーザーは以前に入力したデータが表示されることを期待します。</span><span class="sxs-lookup"><span data-stu-id="073a4-345">From a user experience perspective, the user should expect to see the data they entered previously.</span></span> <span data-ttu-id="073a4-346">残念ながら、各ナビゲーションを使用して <xref:System.Windows.Controls.Page> の新しいインスタンスが作成されるため、データを収集したコントロールは再インスタンス化され、データは失われます。</span><span class="sxs-lookup"><span data-stu-id="073a4-346">Unfortunately, because a new instance of the <xref:System.Windows.Controls.Page> is created with each navigation, the controls that collected the data are reinstantiated and the data is lost.</span></span>

<span data-ttu-id="073a4-347">幸いにも、この履歴では、制御データを含む <xref:System.Windows.Controls.Page> ナビゲーション全体でデータを記憶することがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="073a4-347">Fortunately, the journal provides support for remembering data across <xref:System.Windows.Controls.Page> navigations, including control data.</span></span> <span data-ttu-id="073a4-348">具体的には、各 <xref:System.Windows.Controls.Page> の履歴エントリは、関連付けられた <xref:System.Windows.Controls.Page> 状態の一時コンテナーとして機能します。</span><span class="sxs-lookup"><span data-stu-id="073a4-348">Specifically, the journal entry for each <xref:System.Windows.Controls.Page> acts as a temporary container for the associated <xref:System.Windows.Controls.Page> state.</span></span> <span data-ttu-id="073a4-349">次の手順では、<xref:System.Windows.Controls.Page> を移動するときに、このサポートを使用する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="073a4-349">The following steps outline how this support is used when a <xref:System.Windows.Controls.Page> is navigated from:</span></span>

1. <span data-ttu-id="073a4-350">現在の <xref:System.Windows.Controls.Page> のエントリが履歴に追加されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-350">An entry for the current <xref:System.Windows.Controls.Page> is added to the journal.</span></span>

2. <span data-ttu-id="073a4-351"><xref:System.Windows.Controls.Page> の状態は、そのページの履歴エントリと共に保存され、バックスタックに追加されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-351">The state of the <xref:System.Windows.Controls.Page> is stored with the journal entry for that page, which is added to the back stack.</span></span>

3. <span data-ttu-id="073a4-352">新しい <xref:System.Windows.Controls.Page> に移動します。</span><span class="sxs-lookup"><span data-stu-id="073a4-352">The new <xref:System.Windows.Controls.Page> is navigated to.</span></span>

<span data-ttu-id="073a4-353">ページ <xref:System.Windows.Controls.Page> がに戻ると、ジャーナルを使用して次の手順が実行されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-353">When the page <xref:System.Windows.Controls.Page> is navigated back to, using the journal, the following steps take place:</span></span>

1. <span data-ttu-id="073a4-354"><xref:System.Windows.Controls.Page> (バックスタックの一番上のジャーナルエントリ) がインスタンス化されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-354">The <xref:System.Windows.Controls.Page> (the top journal entry on the back stack) is instantiated.</span></span>

2. <span data-ttu-id="073a4-355"><xref:System.Windows.Controls.Page> は、<xref:System.Windows.Controls.Page>の履歴エントリと共に保存された状態で更新されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-355">The <xref:System.Windows.Controls.Page> is refreshed with the state that was stored with the journal entry for the <xref:System.Windows.Controls.Page>.</span></span>

3. <span data-ttu-id="073a4-356"><xref:System.Windows.Controls.Page> がに戻ります。</span><span class="sxs-lookup"><span data-stu-id="073a4-356">The <xref:System.Windows.Controls.Page> is navigated back to.</span></span>

<span data-ttu-id="073a4-357"><xref:System.Windows.Controls.Page>で次のコントロールが使用されている場合、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] はこのサポートを自動的に使用します。</span><span class="sxs-lookup"><span data-stu-id="073a4-357">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] automatically uses this support when the following controls are used on a <xref:System.Windows.Controls.Page>:</span></span>

- <xref:System.Windows.Controls.CheckBox>

- <xref:System.Windows.Controls.ComboBox>

- <xref:System.Windows.Controls.Expander>

- <xref:System.Windows.Controls.Frame>

- <xref:System.Windows.Controls.ListBox>

- <xref:System.Windows.Controls.ListBoxItem>

- <xref:System.Windows.Controls.MenuItem>

- <xref:System.Windows.Controls.ProgressBar>

- <xref:System.Windows.Controls.RadioButton>

- <xref:System.Windows.Controls.Slider>

- <xref:System.Windows.Controls.TabControl>

- <xref:System.Windows.Controls.TabItem>

- <xref:System.Windows.Controls.TextBox>

<span data-ttu-id="073a4-358"><xref:System.Windows.Controls.Page> がこれらのコントロールを使用している場合、次の図に示すように、**お気に入りの色**<xref:System.Windows.Controls.ListBox> に示されているように、これらのコントロールに入力されたデータは <xref:System.Windows.Controls.Page> ナビゲーション全体で記憶されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-358">If a <xref:System.Windows.Controls.Page> uses these controls, data entered into them is remembered across <xref:System.Windows.Controls.Page> navigations, as demonstrated by the **Favorite Color**<xref:System.Windows.Controls.ListBox> in the following figure.</span></span>

<span data-ttu-id="073a4-359">![状態を記憶するコントロールを含むページ](./media/navigation-overview/data-remembered-across-page-navigations.png "入力したデータはページナビゲーション間で記憶されます。")</span><span class="sxs-lookup"><span data-stu-id="073a4-359">![Page with controls that remember state](./media/navigation-overview/data-remembered-across-page-navigations.png "Data entered is remembered across page navigations.")</span></span>

<span data-ttu-id="073a4-360"><xref:System.Windows.Controls.Page> に上記のリスト以外のコントロールが含まれている場合、または状態がカスタムオブジェクトに格納されている場合は、<xref:System.Windows.Controls.Page> ナビゲーション全体で履歴を記憶するようにコードを記述する必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-360">When a <xref:System.Windows.Controls.Page> has controls other than those in the preceding list, or when state is stored in custom objects, you need to write code to cause the journal to remember state across <xref:System.Windows.Controls.Page> navigations.</span></span>

<span data-ttu-id="073a4-361"><xref:System.Windows.Controls.Page> ナビゲーション全体で小さな状態を記憶する必要がある場合は、<xref:System.Windows.FrameworkPropertyMetadata.Journal%2A?displayProperty=nameWithType> メタデータフラグで構成されている依存関係プロパティ (<xref:System.Windows.DependencyProperty>を参照) を使用できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-361">If you need to remember small pieces of state across <xref:System.Windows.Controls.Page> navigations, you can use dependency properties (see <xref:System.Windows.DependencyProperty>) that are configured with the <xref:System.Windows.FrameworkPropertyMetadata.Journal%2A?displayProperty=nameWithType> metadata flag.</span></span>

<span data-ttu-id="073a4-362">ナビゲーション間で <xref:System.Windows.Controls.Page> が記憶する必要のある状態が複数のデータで構成されている場合は、1つのクラスで状態をカプセル化して <xref:System.Windows.Navigation.IProvideCustomContentState> インターフェイスを実装することで、コードの負担が少なくなることがあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-362">If the state that your <xref:System.Windows.Controls.Page> needs to remember across navigations comprises multiple pieces of data, you may find it less code intensive to encapsulate your state in a single class and implement the <xref:System.Windows.Navigation.IProvideCustomContentState> interface.</span></span>

<span data-ttu-id="073a4-363"><xref:System.Windows.Controls.Page> 自体から移動せずに、1つの <xref:System.Windows.Controls.Page>のさまざまな状態を移動する必要がある場合は、<xref:System.Windows.Navigation.IProvideCustomContentState> と <xref:System.Windows.Navigation.NavigationService.AddBackEntry%2A?displayProperty=nameWithType>を使用できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-363">If you need to navigate through various states of a single <xref:System.Windows.Controls.Page>, without navigating from the <xref:System.Windows.Controls.Page> itself, you can use <xref:System.Windows.Navigation.IProvideCustomContentState> and <xref:System.Windows.Navigation.NavigationService.AddBackEntry%2A?displayProperty=nameWithType>.</span></span>

<a name="Cookies"></a>

### <a name="cookies"></a><span data-ttu-id="073a4-364">クッキー</span><span class="sxs-lookup"><span data-stu-id="073a4-364">Cookies</span></span>

<span data-ttu-id="073a4-365">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] アプリケーションがデータを格納できるもう1つの方法は、<xref:System.Windows.Application.SetCookie%2A> メソッドと <xref:System.Windows.Application.GetCookie%2A> メソッドを使用して作成、更新、および削除される cookie を使用することです。</span><span class="sxs-lookup"><span data-stu-id="073a4-365">Another way that [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications can store data is with cookies, which are created, updated, and deleted by using the <xref:System.Windows.Application.SetCookie%2A> and <xref:System.Windows.Application.GetCookie%2A> methods.</span></span> <span data-ttu-id="073a4-366">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] で作成できる cookie は、他の種類の Web アプリケーションが使用する cookie と同じです。cookie は、アプリケーションセッション中またはアプリケーションセッション間でクライアントコンピューター上のアプリケーションによって保存される任意のデータです。</span><span class="sxs-lookup"><span data-stu-id="073a4-366">The cookies that you can create in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] are the same cookies that other types of Web applications use; cookies are arbitrary pieces of data that are stored by an application on a client machine either during or across application sessions.</span></span> <span data-ttu-id="073a4-367">クッキー データは、通常、次の形式の名前と値のペアです。</span><span class="sxs-lookup"><span data-stu-id="073a4-367">Cookie data typically takes the form of a name/value pair in the following format.</span></span>

<span data-ttu-id="073a4-368">*Name* `=` *Value*</span><span class="sxs-lookup"><span data-stu-id="073a4-368">*Name* `=` *Value*</span></span>

<span data-ttu-id="073a4-369">クッキーが設定される場所の <xref:System.Uri> と共に <xref:System.Windows.Application.SetCookie%2A>にデータが渡されると、cookie はメモリ内に作成され、現在のアプリケーションセッションの間のみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-369">When the data is passed to <xref:System.Windows.Application.SetCookie%2A>, along with the <xref:System.Uri> of the location for which the cookie should be set, a cookie is created in-memory, and it is only available for the duration of the current application session.</span></span> <span data-ttu-id="073a4-370">この種類の cookie は、*セッション cookie*と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="073a4-370">This type of cookie is referred to as a *session cookie*.</span></span>

<span data-ttu-id="073a4-371">複数のアプリケーション セッションにまたがってクッキーを格納するには、次の形式を使用して、有効期限をクッキーに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-371">To store a cookie across application sessions, an expiration date must be added to the cookie, using the following format.</span></span>

<span data-ttu-id="073a4-372">*NAME* `=` *VALUE* `; expires=DAY, DD-MMM-YYYY HH:MM:SS GMT`</span><span class="sxs-lookup"><span data-stu-id="073a4-372">*NAME* `=` *VALUE* `; expires=DAY, DD-MMM-YYYY HH:MM:SS GMT`</span></span>

<span data-ttu-id="073a4-373">有効期限が切れたクッキーは、cookie の有効期限が切れるまで、現在の Windows インストールのインターネット一時ファイルフォルダーに格納されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-373">A cookie with an expiration date is stored in the current Windows installation's Temporary Internet Files folder until the cookie expires.</span></span> <span data-ttu-id="073a4-374">このような cookie は、アプリケーションセッション間で保持されるため、*永続的なクッキー*と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="073a4-374">Such a cookie is known as a *persistent cookie* because it persists across application sessions.</span></span>

<span data-ttu-id="073a4-375"><xref:System.Windows.Application.GetCookie%2A> メソッドを呼び出して、セッションと永続的な cookie の両方を取得し、<xref:System.Windows.Application.SetCookie%2A> メソッドを使用して cookie が設定されている場所の <xref:System.Uri> を渡します。</span><span class="sxs-lookup"><span data-stu-id="073a4-375">You retrieve both session and persistent cookies by calling the <xref:System.Windows.Application.GetCookie%2A> method, passing the <xref:System.Uri> of the location where the cookie was set with the <xref:System.Windows.Application.SetCookie%2A> method.</span></span>

<span data-ttu-id="073a4-376">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]でクッキーがサポートされるいくつかの方法を次に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-376">The following are some of the ways that cookies are supported in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]:</span></span>

- [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] <span data-ttu-id="073a4-377">スタンドアロンアプリケーションと Xbap では、cookie の作成と管理の両方を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="073a4-377">standalone applications and XBAPs can both create and manage cookies.</span></span>

- <span data-ttu-id="073a4-378">XBAP によって作成された cookie は、ブラウザーからアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-378">Cookies that are created by an XBAP can be accessed from the browser.</span></span>

- <span data-ttu-id="073a4-379">同じドメインの Xbap は、cookie を作成および共有できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-379">XBAPs from the same domain can create and share cookies.</span></span>

- <span data-ttu-id="073a4-380">Xbap と同じドメインの HTML ページでは、cookie を作成して共有できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-380">XBAPs and HTML pages from the same domain can create and share cookies.</span></span>

- <span data-ttu-id="073a4-381">Xbap およびルース [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ページが Web 要求を行うときに、cookie がディスパッチされます。</span><span class="sxs-lookup"><span data-stu-id="073a4-381">Cookies are dispatched when XBAPs and loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages make Web requests.</span></span>

- <span data-ttu-id="073a4-382">IFRAME でホストされているトップレベルの Xbap と Xbap は、どちらもクッキーにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-382">Both top-level XBAPs and XBAPs hosted in IFRAMES can access cookies.</span></span>

- <span data-ttu-id="073a4-383">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] での Cookie のサポートは、サポートされているすべてのブラウザーで同じです。</span><span class="sxs-lookup"><span data-stu-id="073a4-383">Cookie support in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] is the same for all supported browsers.</span></span>

- <span data-ttu-id="073a4-384">Internet Explorer では、cookie に関連する P3P ポリシーは、特にファーストパーティおよびサードパーティの Xbap に関して [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]によって受け入れられます。</span><span class="sxs-lookup"><span data-stu-id="073a4-384">In Internet Explorer, P3P policy that pertains to cookies is honored by [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], particularly with respect to first-party and third-party XBAPs.</span></span>

<a name="Structured_Navigation"></a>

### <a name="structured-navigation"></a><span data-ttu-id="073a4-385">構造化ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="073a4-385">Structured Navigation</span></span>

<span data-ttu-id="073a4-386">ある <xref:System.Windows.Controls.Page> から別のにデータを渡す必要がある場合は、<xref:System.Windows.Controls.Page> のパラメーターなしのコンストラクターにデータを引数として渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="073a4-386">If you need to pass data from one <xref:System.Windows.Controls.Page> to another, you can pass the data as arguments to a non-parameterless constructor of the <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-387">この手法を使用する場合は、<xref:System.Windows.Controls.Page> を有効な状態に保つ必要があることに注意してください。それ以外の場合は、次に <xref:System.Windows.Controls.Page>に移動するときに、パラメーターなしのコンストラクターを使用して <xref:System.Windows.Controls.Page> を再インスタンス化 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="073a4-387">Note that if you use this technique, you must keep the <xref:System.Windows.Controls.Page> alive; if not, the next time you navigate to the <xref:System.Windows.Controls.Page>, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] reinstantiates the <xref:System.Windows.Controls.Page> by using the parameterless constructor.</span></span>

<span data-ttu-id="073a4-388">または、<xref:System.Windows.Controls.Page> に渡す必要があるデータで設定されたプロパティを実装できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-388">Alternatively, your <xref:System.Windows.Controls.Page> can implement properties that are set with the data that needs to be passed.</span></span> <span data-ttu-id="073a4-389">ただし、<xref:System.Windows.Controls.Page> がデータを移動する <xref:System.Windows.Controls.Page> にデータを渡す必要がある場合は、注意が必要です。</span><span class="sxs-lookup"><span data-stu-id="073a4-389">Things become tricky, however, when a <xref:System.Windows.Controls.Page> needs to pass data back to the <xref:System.Windows.Controls.Page> that navigated to it.</span></span> <span data-ttu-id="073a4-390">問題は、ナビゲーションによって、移動後に <xref:System.Windows.Controls.Page> が返されることを保証するメカニズムがネイティブでサポートされないことです。</span><span class="sxs-lookup"><span data-stu-id="073a4-390">The problem is that navigation doesn't natively support mechanisms for guaranteeing that a <xref:System.Windows.Controls.Page> will be returned to after it is navigated from.</span></span> <span data-ttu-id="073a4-391">基本的に、ナビゲーションは、"呼び出す/戻る" というセマンティクスをサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="073a4-391">Essentially, navigation doesn't support call/return semantics.</span></span> <span data-ttu-id="073a4-392">この問題を解決するために、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] には、予測可能で構造化された方法で <xref:System.Windows.Controls.Page> が返されるようにするために使用できる <xref:System.Windows.Navigation.PageFunction%601> クラスが用意されています。</span><span class="sxs-lookup"><span data-stu-id="073a4-392">To solve this problem, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] provides the <xref:System.Windows.Navigation.PageFunction%601> class that you can use to ensure that a <xref:System.Windows.Controls.Page> is returned to in a predictable and structured fashion.</span></span> <span data-ttu-id="073a4-393">詳細については、「[構造化ナビゲーションの概要](structured-navigation-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-393">For more information, see [Structured Navigation Overview](structured-navigation-overview.md).</span></span>

<a name="The_NavigationWindow_Class"></a>

## <a name="the-navigationwindow-class"></a><span data-ttu-id="073a4-394">NavigationWindow クラス</span><span class="sxs-lookup"><span data-stu-id="073a4-394">The NavigationWindow Class</span></span>

<span data-ttu-id="073a4-395">ここまでで、ナビゲート可能なコンテンツを含むアプリケーションをビルドするために使用する可能性が最も高いナビゲーション サービスの全容を説明しました。</span><span class="sxs-lookup"><span data-stu-id="073a4-395">To this point, you've seen the gamut of navigation services that you are most likely to use to build applications with navigable content.</span></span> <span data-ttu-id="073a4-396">Xbap に限定されませんが、これらのサービスについては Xbap のコンテキストで説明しました。</span><span class="sxs-lookup"><span data-stu-id="073a4-396">These services were discussed in the context of XBAPs, although they are not limited to XBAPs.</span></span> <span data-ttu-id="073a4-397">最新のオペレーティングシステムと Windows アプリケーションでは、最新のユーザーのブラウザーエクスペリエンスを利用して、ブラウザー形式のナビゲーションをスタンドアロンアプリケーションに組み込むことができます。</span><span class="sxs-lookup"><span data-stu-id="073a4-397">Modern operating systems and Windows applications take advantage of the browser experience of modern users to incorporate browser-style navigation into standalone applications.</span></span> <span data-ttu-id="073a4-398">一般的な例は、次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="073a4-398">Common examples include:</span></span>

- <span data-ttu-id="073a4-399">**Word の類義語辞典**: 選択可能な単語をナビゲートします。</span><span class="sxs-lookup"><span data-stu-id="073a4-399">**Word Thesaurus**: Navigate word choices.</span></span>

- <span data-ttu-id="073a4-400">**ファイル エクスプ ローラー**: ファイルとフォルダーをナビゲートします。</span><span class="sxs-lookup"><span data-stu-id="073a4-400">**File Explorer**: Navigate files and folders.</span></span>

- <span data-ttu-id="073a4-401">**ウィザード**: 複雑なタスクを複数のページに分割し、ページ間をナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-401">**Wizards**: Breaking down a complex task into multiple pages that can be navigated between.</span></span> <span data-ttu-id="073a4-402">例として、windows の機能の追加と削除を処理する Windows コンポーネントウィザードがあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-402">An example is the Windows Components Wizard that handles adding and removing Windows features.</span></span>

<span data-ttu-id="073a4-403">スタンドアロンアプリケーションにブラウザースタイルのナビゲーションを組み込むには、<xref:System.Windows.Navigation.NavigationWindow> クラスを使用できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-403">To incorporate browser-style navigation into your standalone applications, you can use the <xref:System.Windows.Navigation.NavigationWindow> class.</span></span> <span data-ttu-id="073a4-404"><xref:System.Windows.Navigation.NavigationWindow> は <xref:System.Windows.Window> から派生し、Xbap が提供するナビゲーションと同じサポートを使用して拡張します。</span><span class="sxs-lookup"><span data-stu-id="073a4-404"><xref:System.Windows.Navigation.NavigationWindow> derives from <xref:System.Windows.Window> and extends it with the same support for navigation that XBAPs provide.</span></span> <span data-ttu-id="073a4-405"><xref:System.Windows.Navigation.NavigationWindow> は、スタンドアロンアプリケーションのメインウィンドウとして使用することも、ダイアログボックスなどのセカンダリウィンドウとして使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-405">You can use <xref:System.Windows.Navigation.NavigationWindow> as either the main window of your standalone application or as a secondary window such as a dialog box.</span></span>

<span data-ttu-id="073a4-406">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] (<xref:System.Windows.Window>、<xref:System.Windows.Controls.Page>など) の最上位レベルのクラスと同様に <xref:System.Windows.Navigation.NavigationWindow>を実装するには、マークアップと分離コードの組み合わせを使用します。</span><span class="sxs-lookup"><span data-stu-id="073a4-406">To implement a <xref:System.Windows.Navigation.NavigationWindow>, as with most top-level classes in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] (<xref:System.Windows.Window>, <xref:System.Windows.Controls.Page>, and so on), you use a combination of markup and code-behind.</span></span> <span data-ttu-id="073a4-407">これを次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-407">This is shown in the following example.</span></span>

[!code-xaml[IntroToNavNavigationWindowSnippets#NavigationWindowMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/MainWindow.xaml#navigationwindowmarkup)]

[!code-csharp[IntroToNavNavigationWindowSnippets#NavigationWindowCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/MainWindow.xaml.cs#navigationwindowcodebehind)]
[!code-vb[IntroToNavNavigationWindowSnippets#NavigationWindowCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/VisualBasic/MainWindow.xaml.vb#navigationwindowcodebehind)]

<span data-ttu-id="073a4-408">このコードは、<xref:System.Windows.Navigation.NavigationWindow> を開いたときに <xref:System.Windows.Controls.Page> (ホームページ) に自動的に移動する <xref:System.Windows.Navigation.NavigationWindow> を作成します。</span><span class="sxs-lookup"><span data-stu-id="073a4-408">This code creates a <xref:System.Windows.Navigation.NavigationWindow> that automatically navigates to a <xref:System.Windows.Controls.Page> (HomePage.xaml) when the <xref:System.Windows.Navigation.NavigationWindow> is opened.</span></span> <span data-ttu-id="073a4-409"><xref:System.Windows.Navigation.NavigationWindow> がメインアプリケーションウィンドウである場合は、`StartupUri` 属性を使用して起動できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-409">If the <xref:System.Windows.Navigation.NavigationWindow> is the main application window, you can use the `StartupUri` attribute to launch it.</span></span> <span data-ttu-id="073a4-410">これを次のマークアップに示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-410">This is shown in the following markup.</span></span>

[!code-xaml[IntroToNavNavigationWindowSnippets#AppLaunchNavWindow](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/App.xaml#applaunchnavwindow)]

<span data-ttu-id="073a4-411">次の図は、スタンドアロンアプリケーションのメインウィンドウとして <xref:System.Windows.Navigation.NavigationWindow> を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-411">The following figure shows the <xref:System.Windows.Navigation.NavigationWindow> as the main window of a standalone application.</span></span>

<span data-ttu-id="073a4-412">![メインウィンドウ](./media/navigation-overview/navigation-window-as-main-window.png "メインウィンドウとしてのナビゲーションウィンドウ")</span><span class="sxs-lookup"><span data-stu-id="073a4-412">![A main window](./media/navigation-overview/navigation-window-as-main-window.png "Navigation window as the main window")</span></span>

<span data-ttu-id="073a4-413">この図からは、前の例の <xref:System.Windows.Navigation.NavigationWindow> の実装コードで設定されていなくても、<xref:System.Windows.Navigation.NavigationWindow> にタイトルがあることがわかります。</span><span class="sxs-lookup"><span data-stu-id="073a4-413">From the figure, you can see that the <xref:System.Windows.Navigation.NavigationWindow> has a title, even though it wasn't set in the <xref:System.Windows.Navigation.NavigationWindow> implementation code from the preceding example.</span></span> <span data-ttu-id="073a4-414">代わりに、次のコードに示すように、<xref:System.Windows.Controls.Page.WindowTitle%2A> プロパティを使用してタイトルを設定します。</span><span class="sxs-lookup"><span data-stu-id="073a4-414">Instead, the title is set using the <xref:System.Windows.Controls.Page.WindowTitle%2A> property, which is shown in the following code.</span></span>

[!code-xaml[IntroToNavNavigationWindowSnippets#HomePageMARKUP1](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/HomePage.xaml#homepagemarkup1)]
[!code-xaml[IntroToNavNavigationWindowSnippets#HomePageMARKUP2](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/HomePage.xaml#homepagemarkup2)]

<span data-ttu-id="073a4-415"><xref:System.Windows.Controls.Page.WindowWidth%2A> と <xref:System.Windows.Controls.Page.WindowHeight%2A> のプロパティを設定すると、<xref:System.Windows.Navigation.NavigationWindow>も影響を及ぼします。</span><span class="sxs-lookup"><span data-stu-id="073a4-415">Setting the <xref:System.Windows.Controls.Page.WindowWidth%2A> and <xref:System.Windows.Controls.Page.WindowHeight%2A> properties also affects the <xref:System.Windows.Navigation.NavigationWindow>.</span></span>

<span data-ttu-id="073a4-416">通常、動作または外観をカスタマイズする必要がある場合は、独自の <xref:System.Windows.Navigation.NavigationWindow> を実装します。</span><span class="sxs-lookup"><span data-stu-id="073a4-416">Usually, you implement your own <xref:System.Windows.Navigation.NavigationWindow> when you need to customize either its behavior or its appearance.</span></span> <span data-ttu-id="073a4-417">どちらも行わない場合は、ショートカットを使用できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-417">If you do neither, you can use a shortcut.</span></span> <span data-ttu-id="073a4-418">スタンドアロンアプリケーションの <xref:System.Windows.Application.StartupUri%2A> として <xref:System.Windows.Controls.Page> のパック URI を指定すると、<xref:System.Windows.Application> によって、<xref:System.Windows.Controls.Page>をホストするための <xref:System.Windows.Navigation.NavigationWindow> が自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-418">If you specify the pack URI of a <xref:System.Windows.Controls.Page> as the <xref:System.Windows.Application.StartupUri%2A> in a standalone application, <xref:System.Windows.Application> automatically creates a <xref:System.Windows.Navigation.NavigationWindow> to host the <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-419">次のマークアップは、この方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-419">The following markup shows how to enable this.</span></span>

[!code-xaml[IntroToNavNavigationWindowSnippets#AppLaunchPage](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/AnotherApp.xaml#applaunchpage)]

<span data-ttu-id="073a4-420">ダイアログボックスなどのセカンダリアプリケーションウィンドウを <xref:System.Windows.Navigation.NavigationWindow> にする場合は、次の例のコードを使用して開くことができます。</span><span class="sxs-lookup"><span data-stu-id="073a4-420">If you want a secondary application window such as a dialog box to be a <xref:System.Windows.Navigation.NavigationWindow>, you can use the code in the following example to open it.</span></span>

[!code-csharp[IntroToNavNavigationWindowSnippets#CreateNWDialogBox](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/DialogOwnerWindow.xaml.cs#createnwdialogbox)]
[!code-vb[IntroToNavNavigationWindowSnippets#CreateNWDialogBox](~/samples/snippets/visualbasic/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/VisualBasic/DialogOwnerWindow.xaml.vb#createnwdialogbox)]

<span data-ttu-id="073a4-421">次の図に、結果を示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-421">The following figure shows the result.</span></span>

<span data-ttu-id="073a4-422">![ダイアログボックス](./media/navigation-overview/navigation-window-as-dialog-box.png "ダイアログボックスとしてのナビゲーションウィンドウ")</span><span class="sxs-lookup"><span data-stu-id="073a4-422">![A dialog box](./media/navigation-overview/navigation-window-as-dialog-box.png "Navigation window as a dialog box")</span></span>

<span data-ttu-id="073a4-423">ご覧のように、<xref:System.Windows.Navigation.NavigationWindow> には、ユーザーが journal を操作できるようにする Internet Explorer スタイルの **[戻る]** ボタンと **[進む]** ボタンが表示されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-423">As you can see, <xref:System.Windows.Navigation.NavigationWindow> displays Internet Explorer-style **Back** and **Forward** buttons that allow users to navigate the journal.</span></span> <span data-ttu-id="073a4-424">これらのボタンは、次の図に示されているように、同じユーザー エクスペリエンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="073a4-424">These buttons provide the same user experience, as shown in the following figure.</span></span>

<span data-ttu-id="073a4-425">![NavigationWindow の [戻る] ボタンと [進む] ボタン](./media/navigation-overview/back-and-forward-buttons-in-navigation-window.png "ナビゲーションウィンドウの [戻る] ボタンと [進む] ボタン")</span><span class="sxs-lookup"><span data-stu-id="073a4-425">![Back and Forward buttons in a NavigationWindow](./media/navigation-overview/back-and-forward-buttons-in-navigation-window.png "Back and Forward buttons in a Navigation window")</span></span>

<span data-ttu-id="073a4-426">ページに独自のジャーナルナビゲーションサポートと UI が用意されている場合は、[<xref:System.Windows.Navigation.NavigationWindow.ShowsNavigationUI%2A>] プロパティの値を `false`に設定することによって、<xref:System.Windows.Navigation.NavigationWindow> によって表示される **[戻る]** ボタンと **[進む]** ボタンを非表示にすることができます。</span><span class="sxs-lookup"><span data-stu-id="073a4-426">If your pages provide their own journal navigation support and UI, you can hide the **Back** and **Forward** buttons displayed by <xref:System.Windows.Navigation.NavigationWindow> by setting the value of the <xref:System.Windows.Navigation.NavigationWindow.ShowsNavigationUI%2A> property to `false`.</span></span>

<span data-ttu-id="073a4-427">または、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] でカスタマイズサポートを使用して、<xref:System.Windows.Navigation.NavigationWindow> 自体の [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] を置き換えることもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-427">Alternatively, you can use customization support in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] to replace the [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] of the <xref:System.Windows.Navigation.NavigationWindow> itself.</span></span>

<a name="Frame_in_Standalone_Applications"></a>

## <a name="the-frame-class"></a><span data-ttu-id="073a4-428">Frame クラス</span><span class="sxs-lookup"><span data-stu-id="073a4-428">The Frame Class</span></span>

<span data-ttu-id="073a4-429">ブラウザーと <xref:System.Windows.Navigation.NavigationWindow> はどちらも、誘導可能なコンテンツをホストするウィンドウです。</span><span class="sxs-lookup"><span data-stu-id="073a4-429">Both the browser and <xref:System.Windows.Navigation.NavigationWindow> are windows that host navigable content.</span></span> <span data-ttu-id="073a4-430">場合によっては、アプリケーションには、ウィンドウ全体でホストする必要のないコンテンツがあることもあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-430">In some cases, applications have content that does not need to be hosted by an entire window.</span></span> <span data-ttu-id="073a4-431">このようなコンテンツは、代わりに、他のコンテンツ内でホストされます。</span><span class="sxs-lookup"><span data-stu-id="073a4-431">Instead, such content be hosted inside other content.</span></span> <span data-ttu-id="073a4-432"><xref:System.Windows.Controls.Frame> クラスを使用して、他のコンテンツに誘導可能なコンテンツを挿入できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-432">You can insert navigable content into other content by using the <xref:System.Windows.Controls.Frame> class.</span></span> <span data-ttu-id="073a4-433"><xref:System.Windows.Controls.Frame> は <xref:System.Windows.Navigation.NavigationWindow> と Xbap と同じサポートを提供します。</span><span class="sxs-lookup"><span data-stu-id="073a4-433"><xref:System.Windows.Controls.Frame> provides the same support as <xref:System.Windows.Navigation.NavigationWindow> and XBAPs.</span></span>

<span data-ttu-id="073a4-434">次の例は、`Frame` 要素を使用して <xref:System.Windows.Controls.Page> に宣言によって <xref:System.Windows.Controls.Frame> を追加する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-434">The following example shows how to add a <xref:System.Windows.Controls.Frame> to a <xref:System.Windows.Controls.Page> declaratively by using the `Frame` element.</span></span>

[!code-xaml[NavigationOverviewSnippets#FrameHostPageXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPage.xaml#framehostpagexaml1)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPage.xaml#framehostpagexaml2)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPage.xaml#framehostpagexaml3)]

<span data-ttu-id="073a4-435">このマークアップは、`Frame` 要素の `Source` 属性に、<xref:System.Windows.Controls.Frame> が最初に移動する <xref:System.Windows.Controls.Page> のパック URI を設定します。</span><span class="sxs-lookup"><span data-stu-id="073a4-435">This markup sets the `Source` attribute of the `Frame` element with a pack URI for the <xref:System.Windows.Controls.Page> that the <xref:System.Windows.Controls.Frame> should initially navigate to.</span></span> <span data-ttu-id="073a4-436">次の図は、複数のページ間を移動する <xref:System.Windows.Controls.Frame> を持つ <xref:System.Windows.Controls.Page> を持つ XBAP を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-436">The following figure shows an XBAP with a <xref:System.Windows.Controls.Page> that has a <xref:System.Windows.Controls.Frame> that has navigated between several pages.</span></span>

<span data-ttu-id="073a4-437">![複数のページ間を移動するフレーム](./media/navigation-overview/frame-navigation-between-multiple-pages.png "これは、複数のページ間のフレームナビゲーションを示しています。")</span><span class="sxs-lookup"><span data-stu-id="073a4-437">![A frame that has navigated between multiple pages](./media/navigation-overview/frame-navigation-between-multiple-pages.png "This shows a frame navigation between multiple pages.")</span></span>

<span data-ttu-id="073a4-438"><xref:System.Windows.Controls.Page>のコンテンツ内で <xref:System.Windows.Controls.Frame> を使用する必要があるだけではありません。</span><span class="sxs-lookup"><span data-stu-id="073a4-438">You don't only have to use <xref:System.Windows.Controls.Frame> inside the content of a <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="073a4-439">また、<xref:System.Windows.Window> のコンテンツ内の <xref:System.Windows.Controls.Frame> をホストすることもよくあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-439">It is also common to host a <xref:System.Windows.Controls.Frame> inside the content of a <xref:System.Windows.Window>.</span></span>

<span data-ttu-id="073a4-440">既定では、<xref:System.Windows.Controls.Frame> は、別の履歴がない場合にのみ独自の履歴を使用します。</span><span class="sxs-lookup"><span data-stu-id="073a4-440">By default, <xref:System.Windows.Controls.Frame> only uses its own journal in the absence of another journal.</span></span> <span data-ttu-id="073a4-441"><xref:System.Windows.Controls.Frame> が <xref:System.Windows.Navigation.NavigationWindow> または XBAP の内部でホストされているコンテンツの一部である場合、<xref:System.Windows.Controls.Frame> は <xref:System.Windows.Navigation.NavigationWindow> または XBAP に属するジャーナルを使用します。</span><span class="sxs-lookup"><span data-stu-id="073a4-441">If a <xref:System.Windows.Controls.Frame> is part of content that is hosted inside either a <xref:System.Windows.Navigation.NavigationWindow> or an XBAP, <xref:System.Windows.Controls.Frame> uses the journal that belongs to the <xref:System.Windows.Navigation.NavigationWindow> or XBAP.</span></span> <span data-ttu-id="073a4-442">ただし、場合によっては、<xref:System.Windows.Controls.Frame> が独自のジャーナルを担当する必要があります。</span><span class="sxs-lookup"><span data-stu-id="073a4-442">Sometimes, though, a <xref:System.Windows.Controls.Frame> might need to be responsible for its own journal.</span></span> <span data-ttu-id="073a4-443">その理由の1つは、<xref:System.Windows.Controls.Frame> でホストされているページ内での journal ナビゲーションを許可することです。</span><span class="sxs-lookup"><span data-stu-id="073a4-443">One reason to do so is to allow journal navigation within the pages that are hosted by a <xref:System.Windows.Controls.Frame>.</span></span> <span data-ttu-id="073a4-444">これを次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-444">This is illustrated by the following figure.</span></span>

<span data-ttu-id="073a4-445">![フレームとページのダイアグラム](./media/navigation-overview/journal-navigation-within-pages-hosted-by-a-frame.png "これは、フレームによってホストされるページ内の journal ナビゲーションを示しています。")</span><span class="sxs-lookup"><span data-stu-id="073a4-445">![Frame and Page diagram](./media/navigation-overview/journal-navigation-within-pages-hosted-by-a-frame.png "This shows journal navigation within pages hosted by a frame.")</span></span>

<span data-ttu-id="073a4-446">この場合、<xref:System.Windows.Controls.Frame> の <xref:System.Windows.Controls.Frame.JournalOwnership%2A> プロパティを <xref:System.Windows.Navigation.JournalOwnership.OwnsJournal>に設定することによって、独自のジャーナルを使用するように <xref:System.Windows.Controls.Frame> を構成できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-446">In this case, you can configure the <xref:System.Windows.Controls.Frame> to use its own journal by setting the <xref:System.Windows.Controls.Frame.JournalOwnership%2A> property of the <xref:System.Windows.Controls.Frame> to <xref:System.Windows.Navigation.JournalOwnership.OwnsJournal>.</span></span> <span data-ttu-id="073a4-447">これを次のマークアップに示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-447">This is shown in the following markup.</span></span>

[!code-xaml[NavigationOverviewSnippets#FrameHostPageOwnJournalXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnJournal.xaml#framehostpageownjournalxaml1)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageOwnJournalXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnJournal.xaml#framehostpageownjournalxaml2)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageOwnJournalXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnJournal.xaml#framehostpageownjournalxaml3)]

<span data-ttu-id="073a4-448">次の図は、独自の履歴を使用する <xref:System.Windows.Controls.Frame> 内で移動した場合の影響を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-448">The following figure illustrates the effect of navigating within a <xref:System.Windows.Controls.Frame> that uses its own journal.</span></span>

<span data-ttu-id="073a4-449">![独自の履歴を使用するフレーム](./media/navigation-overview/frame-uses-its-own-journal.png "これは、独自の履歴を使用するフレーム内で移動した場合の効果を示しています。")</span><span class="sxs-lookup"><span data-stu-id="073a4-449">![A frame that uses its own journal](./media/navigation-overview/frame-uses-its-own-journal.png "This shows the effect of navigating within a frame that uses its own journal.")</span></span>

<span data-ttu-id="073a4-450">履歴エントリは、Internet Explorer ではなく <xref:System.Windows.Controls.Frame>のナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] によって表示されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-450">Notice that the journal entries are shown by the navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] in the <xref:System.Windows.Controls.Frame>, rather than by Internet Explorer.</span></span>

> [!NOTE]
> <span data-ttu-id="073a4-451"><xref:System.Windows.Controls.Frame> が <xref:System.Windows.Window>でホストされているコンテンツの一部である場合、<xref:System.Windows.Controls.Frame> は独自の履歴を使用します。その結果、独自のナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]が表示されます。</span><span class="sxs-lookup"><span data-stu-id="073a4-451">If a <xref:System.Windows.Controls.Frame> is part of content that is hosted in a <xref:System.Windows.Window>, <xref:System.Windows.Controls.Frame> uses its own journal and, consequently, displays its own navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)].</span></span>

<span data-ttu-id="073a4-452">ユーザーエクスペリエンスで、ナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]を表示せずに独自の履歴を提供するために <xref:System.Windows.Controls.Frame> が必要な場合は、<xref:System.Windows.Controls.Frame.NavigationUIVisibility%2A> を <xref:System.Windows.Visibility.Hidden>に設定することにより、ナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] を非表示にすることができます。</span><span class="sxs-lookup"><span data-stu-id="073a4-452">If your user experience requires a <xref:System.Windows.Controls.Frame> to provide its own journal without showing the navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)], you can hide the navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] by setting the <xref:System.Windows.Controls.Frame.NavigationUIVisibility%2A> to <xref:System.Windows.Visibility.Hidden>.</span></span> <span data-ttu-id="073a4-453">これを次のマークアップに示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-453">This is shown in the following markup.</span></span>

[!code-xaml[NavigationOverviewSnippets#FrameHostPageHidesUIXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnHiddenJournal.xaml#framehostpagehidesuixaml1)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageHidesUIXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnHiddenJournal.xaml#framehostpagehidesuixaml2)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageHidesUIXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnHiddenJournal.xaml#framehostpagehidesuixaml3)]

<a name="Navigation_Hosts"></a>

## <a name="navigation-hosts"></a><span data-ttu-id="073a4-454">ナビゲーション ホスト</span><span class="sxs-lookup"><span data-stu-id="073a4-454">Navigation Hosts</span></span>

<span data-ttu-id="073a4-455"><xref:System.Windows.Controls.Frame> と <xref:System.Windows.Navigation.NavigationWindow> は、ナビゲーションホストと呼ばれるクラスです。</span><span class="sxs-lookup"><span data-stu-id="073a4-455"><xref:System.Windows.Controls.Frame> and <xref:System.Windows.Navigation.NavigationWindow> are classes that are known as navigation hosts.</span></span> <span data-ttu-id="073a4-456">*ナビゲーションホスト*は、コンテンツに移動して表示できるクラスです。</span><span class="sxs-lookup"><span data-stu-id="073a4-456">A *navigation host* is a class that can navigate to and display content.</span></span> <span data-ttu-id="073a4-457">これを実現するために、各ナビゲーションホストは独自の <xref:System.Windows.Navigation.NavigationService> とジャーナルを使用します。</span><span class="sxs-lookup"><span data-stu-id="073a4-457">To accomplish this, each navigation host uses its own <xref:System.Windows.Navigation.NavigationService> and journal.</span></span> <span data-ttu-id="073a4-458">ナビゲーション ホストの基本的な構造を次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-458">The basic construction of a navigation host is shown in the following figure.</span></span>

<span data-ttu-id="073a4-459">![ナビゲーターの図](./media/navigation-overview/navigation-host-construction.png "ナビゲーションホストの基本的な構築")</span><span class="sxs-lookup"><span data-stu-id="073a4-459">![Navigator diagrams](./media/navigation-overview/navigation-host-construction.png "Basic construction of a navigation host")</span></span>

<span data-ttu-id="073a4-460">基本的に、これにより、<xref:System.Windows.Navigation.NavigationWindow> と <xref:System.Windows.Controls.Frame> は、ブラウザーでホストされるときに XBAP と同じナビゲーションサポートを提供できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-460">Essentially, this allows <xref:System.Windows.Navigation.NavigationWindow> and <xref:System.Windows.Controls.Frame> to provide the same navigation support that an XBAP provides when hosted in the browser.</span></span>

<span data-ttu-id="073a4-461"><xref:System.Windows.Navigation.NavigationService> とジャーナルを使用するだけでなく、ナビゲーションホストは、を実装 <xref:System.Windows.Navigation.NavigationService> 同じメンバーを実装します。</span><span class="sxs-lookup"><span data-stu-id="073a4-461">Besides using <xref:System.Windows.Navigation.NavigationService> and a journal, navigation hosts implement the same members that <xref:System.Windows.Navigation.NavigationService> implements.</span></span> <span data-ttu-id="073a4-462">これを次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-462">This is illustrated by the following figure.</span></span>

<span data-ttu-id="073a4-463">![フレーム内および NavigationWindow 内のジャーナル](./media/navigation-overview/navigation-window-and-frame.png "ナビゲーションウィンドウとフレーム")</span><span class="sxs-lookup"><span data-stu-id="073a4-463">![A journal in a Frame and in a NavigationWindow](./media/navigation-overview/navigation-window-and-frame.png "Navigation Window and Frame")</span></span>

<span data-ttu-id="073a4-464">これにより、これらのメンバーに対して直接、ナビゲーション サポートをプログラミングできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-464">This allows you to program navigation support directly against them.</span></span> <span data-ttu-id="073a4-465"><xref:System.Windows.Window>でホストされている <xref:System.Windows.Controls.Frame> にカスタムナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] を提供する必要がある場合は、この点を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-465">You may consider this if you need to provide a custom navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] for a <xref:System.Windows.Controls.Frame> that is hosted in a <xref:System.Windows.Window>.</span></span> <span data-ttu-id="073a4-466">さらに、どちらの種類も、`BackStack` (<xref:System.Windows.Navigation.NavigationWindow.BackStack%2A?displayProperty=nameWithType>、<xref:System.Windows.Controls.Frame.BackStack%2A?displayProperty=nameWithType>) と `ForwardStack` (<xref:System.Windows.Navigation.NavigationWindow.ForwardStack%2A?displayProperty=nameWithType>、<xref:System.Windows.Controls.Frame.ForwardStack%2A?displayProperty=nameWithType>) を含む追加のナビゲーション関連のメンバーを実装します。これにより、バックスタックと転送スタックの履歴エントリをそれぞれ列挙できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-466">Furthermore, both types implement additional, navigation-related members, including `BackStack` (<xref:System.Windows.Navigation.NavigationWindow.BackStack%2A?displayProperty=nameWithType>, <xref:System.Windows.Controls.Frame.BackStack%2A?displayProperty=nameWithType>) and `ForwardStack` (<xref:System.Windows.Navigation.NavigationWindow.ForwardStack%2A?displayProperty=nameWithType>, <xref:System.Windows.Controls.Frame.ForwardStack%2A?displayProperty=nameWithType>), which allow you to enumerate the journal entries in the back stack and forward stack, respectively.</span></span>

<span data-ttu-id="073a4-467">前に述べたように、アプリケーション内に複数の履歴が存在することがあります。</span><span class="sxs-lookup"><span data-stu-id="073a4-467">As mentioned earlier, more than one journal can exist within an application.</span></span> <span data-ttu-id="073a4-468">次の図は、この例を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-468">The following figure provides an example of when this can happen.</span></span>

<span data-ttu-id="073a4-469">![1つのアプリケーション内の複数のジャーナル](./media/navigation-overview/multiple-journals-in-one-application.png "アプリケーション内の複数のジャーナルの例を次に示します。")</span><span class="sxs-lookup"><span data-stu-id="073a4-469">![Multiple journals within one application](./media/navigation-overview/multiple-journals-in-one-application.png "This is an example of more than one journal in an application.")</span></span>

<a name="Navigating_to_Content_Other_than_Pages"></a>

## <a name="navigating-to-content-other-than-xaml-pages"></a><span data-ttu-id="073a4-470">XAML ページ以外のコンテンツへのナビゲート</span><span class="sxs-lookup"><span data-stu-id="073a4-470">Navigating to Content Other than XAML Pages</span></span>

<span data-ttu-id="073a4-471">このトピックでは、<xref:System.Windows.Controls.Page> とパック Xbap を使用して、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]のさまざまなナビゲーション機能を示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-471">Throughout this topic, <xref:System.Windows.Controls.Page> and pack XBAPs have been used to demonstrate the various navigation capabilities of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="073a4-472">ただし、アプリケーションにコンパイルされた <xref:System.Windows.Controls.Page> は、移動できる唯一の種類のコンテンツではなく、パック Xbap がコンテンツを識別する唯一の方法ではありません。</span><span class="sxs-lookup"><span data-stu-id="073a4-472">However, a <xref:System.Windows.Controls.Page> that is compiled into an application is not the only type of content that can be navigated to, and pack XBAPs aren't the only way to identify content.</span></span>

<span data-ttu-id="073a4-473">このセクションで示すように、ルース [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイル、HTML ファイル、およびオブジェクトに移動することもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-473">As this section demonstrates, you can also navigate to loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files, HTML files, and objects.</span></span>

<a name="Navigating_to_Loose_XAML_Files"></a>

### <a name="navigating-to-loose-xaml-files"></a><span data-ttu-id="073a4-474">Loose XAML ファイルへのナビゲート</span><span class="sxs-lookup"><span data-stu-id="073a4-474">Navigating to Loose XAML Files</span></span>

<span data-ttu-id="073a4-475">疎 [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイルは、次の特性を持つファイルです。</span><span class="sxs-lookup"><span data-stu-id="073a4-475">A loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file is a file with the following characteristics:</span></span>

- <span data-ttu-id="073a4-476">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] のみが含まれています (つまり、コードがありません)。</span><span class="sxs-lookup"><span data-stu-id="073a4-476">Contains only [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] (that is, no code).</span></span>

- <span data-ttu-id="073a4-477">適切な名前空間宣言がある。</span><span class="sxs-lookup"><span data-stu-id="073a4-477">Has an appropriate namespace declaration.</span></span>

- <span data-ttu-id="073a4-478">.xaml ファイル名拡張子を持つ。</span><span class="sxs-lookup"><span data-stu-id="073a4-478">Has the .xaml file name extension.</span></span>

<span data-ttu-id="073a4-479">たとえば、次のコンテンツは、ルース [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイルとして保存されているとします。</span><span class="sxs-lookup"><span data-stu-id="073a4-479">For example, consider the following content that is stored as a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file, Person.xaml.</span></span>

[!code-xaml[NavigationOverviewSnippets#LooseXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/Person.xaml#loosexaml)]

<span data-ttu-id="073a4-480">ファイルをダブルクリックすると、ブラウザーが開き、コンテンツにナビゲートして、コンテンツを表示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-480">When you double-click the file, the browser opens and navigates to and displays the content.</span></span> <span data-ttu-id="073a4-481">これを次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-481">This is shown in the following figure.</span></span>

<span data-ttu-id="073a4-482">![ユーザー .XAML ファイルの内容の表示](./media/navigation-overview/contents-of-person-xaml-file.png "ユーザーの .XAML ファイルの内容を表示します。")</span><span class="sxs-lookup"><span data-stu-id="073a4-482">![Display of the content in the Person.XAML file](./media/navigation-overview/contents-of-person-xaml-file.png "Shows the contents of the Person.XAML file.")</span></span>

<span data-ttu-id="073a4-483">次のものから、疎な [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイルを表示できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-483">You can display a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file from the following:</span></span>

- <span data-ttu-id="073a4-484">ローカル コンピューター、イントラネット、またはインターネット上の Web サイト。</span><span class="sxs-lookup"><span data-stu-id="073a4-484">A Web site on the local machine, the intranet, or the Internet.</span></span>

- <span data-ttu-id="073a4-485">UNC (汎用名前付け規則) ファイル共有。</span><span class="sxs-lookup"><span data-stu-id="073a4-485">A Universal Naming Convention (UNC) file share.</span></span>

- <span data-ttu-id="073a4-486">ローカル ディスク。</span><span class="sxs-lookup"><span data-stu-id="073a4-486">The local disk.</span></span>

<span data-ttu-id="073a4-487">圧縮されていない [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイルは、ブラウザーのお気に入りに追加することも、ブラウザーのホームページに追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-487">A loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file can be added to the browser's favorites, or be the browser's home page.</span></span>

> [!NOTE]
> <span data-ttu-id="073a4-488">疎 [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ページのパブリッシュと起動の詳細については、「 [WPF アプリケーションの配置](deploying-a-wpf-application-wpf.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-488">For more information about publishing and launching loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages, see [Deploying a WPF Application](deploying-a-wpf-application-wpf.md).</span></span>

<span data-ttu-id="073a4-489">緩い [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] に対する1つの制限は、部分信頼で実行しても安全なコンテンツのみをホストできることです。</span><span class="sxs-lookup"><span data-stu-id="073a4-489">One limitation with respect to loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is that you can only host content that is safe to run in partial trust.</span></span> <span data-ttu-id="073a4-490">たとえば、`Window` は、ルース [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイルのルート要素にすることはできません。</span><span class="sxs-lookup"><span data-stu-id="073a4-490">For example, `Window` cannot be the root element of a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span> <span data-ttu-id="073a4-491">詳細については、「 [WPF 部分信頼セキュリティ](../wpf-partial-trust-security.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-491">For more information, see [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>

<a name="Navigating_to_HTML_Files_Using_Frame"></a>

### <a name="navigating-to-html-files-by-using-frame"></a><span data-ttu-id="073a4-492">フレームを使用した HTML ファイルへのナビゲート</span><span class="sxs-lookup"><span data-stu-id="073a4-492">Navigating to HTML Files by Using Frame</span></span>

<span data-ttu-id="073a4-493">ご想像のとおり、HTML に移動することもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-493">As you might expect, you can also navigate to HTML.</span></span> <span data-ttu-id="073a4-494">Http スキームを使用する URI を指定するだけで済みます。</span><span class="sxs-lookup"><span data-stu-id="073a4-494">You simply need to provide a URI that uses the http scheme.</span></span> <span data-ttu-id="073a4-495">たとえば、次の [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] は、HTML ページに移動する <xref:System.Windows.Controls.Frame> を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-495">For example, the following [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] shows a <xref:System.Windows.Controls.Frame> that navigates to an HTML page.</span></span>

[!code-xaml[NavigationOverviewSnippets#FrameHtmlNavMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHTMLNavPage.xaml#framehtmlnavmarkup)]

<span data-ttu-id="073a4-496">HTML に移動するには、特殊なアクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="073a4-496">Navigating to HTML requires special permissions.</span></span> <span data-ttu-id="073a4-497">たとえば、インターネットゾーン部分信頼セキュリティサンドボックスで実行されている XBAP から移動することはできません。</span><span class="sxs-lookup"><span data-stu-id="073a4-497">For example, you can't navigate from an XBAP that is running in the Internet zone partial trust security sandbox.</span></span> <span data-ttu-id="073a4-498">詳細については、「 [WPF 部分信頼セキュリティ](../wpf-partial-trust-security.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-498">For more information, see [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>

<a name="Navigating_to_HTML_Files_Using_WebBrowser"></a>

### <a name="navigating-to-html-files-by-using-the-webbrowser-control"></a><span data-ttu-id="073a4-499">WebBrowser コントロールを使用した HTML ファイルへのナビゲート</span><span class="sxs-lookup"><span data-stu-id="073a4-499">Navigating to HTML Files by Using the WebBrowser Control</span></span>

<span data-ttu-id="073a4-500"><xref:System.Windows.Controls.WebBrowser> コントロールは、HTML ドキュメントのホスト、ナビゲーション、スクリプト/マネージコードの相互運用性をサポートします。</span><span class="sxs-lookup"><span data-stu-id="073a4-500">The <xref:System.Windows.Controls.WebBrowser> control supports HTML document hosting, navigation and script/managed code interoperability.</span></span> <span data-ttu-id="073a4-501"><xref:System.Windows.Controls.WebBrowser> コントロールの詳細については、「<xref:System.Windows.Controls.WebBrowser>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-501">For detailed information regarding the <xref:System.Windows.Controls.WebBrowser> control, see <xref:System.Windows.Controls.WebBrowser>.</span></span>

<span data-ttu-id="073a4-502"><xref:System.Windows.Controls.Frame>と同様に、<xref:System.Windows.Controls.WebBrowser> を使用して HTML に移動するには、特別なアクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="073a4-502">Like <xref:System.Windows.Controls.Frame>, navigating to HTML using <xref:System.Windows.Controls.WebBrowser> requires special permissions.</span></span> <span data-ttu-id="073a4-503">たとえば、部分信頼アプリケーションでは、元のサイトにある HTML にのみ移動できます。</span><span class="sxs-lookup"><span data-stu-id="073a4-503">For example, from a partial-trust application, you can navigate only to HTML located at the site of origin.</span></span> <span data-ttu-id="073a4-504">詳細については、「 [WPF 部分信頼セキュリティ](../wpf-partial-trust-security.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-504">For more information, see [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>

<a name="Navigating_to_Objects"></a>

### <a name="navigating-to-custom-objects"></a><span data-ttu-id="073a4-505">カスタム オブジェクトへのナビゲート</span><span class="sxs-lookup"><span data-stu-id="073a4-505">Navigating to Custom Objects</span></span>

<span data-ttu-id="073a4-506">カスタムオブジェクトとして格納されているデータがある場合、そのデータを表示する方法の1つとして、それらのオブジェクトにバインドされたコンテンツを含む <xref:System.Windows.Controls.Page> を作成します (「[データバインディングの概要](../../../desktop-wpf/data/data-binding-overview.md)」を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="073a4-506">If you have data that is stored as custom objects, one way to display that data is to create a <xref:System.Windows.Controls.Page> with content that is bound to those objects (see [Data Binding Overview](../../../desktop-wpf/data/data-binding-overview.md)).</span></span> <span data-ttu-id="073a4-507">オブジェクトを表示するためだけにページ全体を作成するオーバーヘッドが必要ない場合には、代わりに、オブジェクトに直接ナビゲートすることもできます。</span><span class="sxs-lookup"><span data-stu-id="073a4-507">If you don't need the overhead of creating an entire page just to display the objects, you can navigate directly to them instead.</span></span>

<span data-ttu-id="073a4-508">次のコードに実装されている `Person` クラスを考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="073a4-508">Consider the `Person` class that is implemented in the following code.</span></span>

[!code-csharp[NavigateToObjectSnippets#PersonClassCODE](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/Person.cs#personclasscode)]
[!code-vb[NavigateToObjectSnippets#PersonClassCODE](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigateToObjectSnippets/VisualBasic/Person.vb#personclasscode)]

<span data-ttu-id="073a4-509">このファイルに移動するには、次のコードに示すように、<xref:System.Windows.Navigation.NavigationWindow.Navigate%2A?displayProperty=nameWithType> メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="073a4-509">To navigate to it, you call the <xref:System.Windows.Navigation.NavigationWindow.Navigate%2A?displayProperty=nameWithType> method, as demonstrated by the following code.</span></span>

[!code-xaml[NavigateToObjectSnippets#PageThatNavsToObject1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/HomePage.xaml#pagethatnavstoobject1)]
[!code-xaml[NavigateToObjectSnippets#PageThatNavsToObject2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/HomePage.xaml#pagethatnavstoobject2)]
[!code-xaml[NavigateToObjectSnippets#PageThatNavsToObject3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/HomePage.xaml#pagethatnavstoobject3)]

[!code-csharp[NavigateToObjectSnippets#PageThatNavsToObjectCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/HomePage.xaml.cs#pagethatnavstoobjectcodebehind)]
[!code-vb[NavigateToObjectSnippets#PageThatNavsToObjectCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigateToObjectSnippets/VisualBasic/HomePage.xaml.vb#pagethatnavstoobjectcodebehind)]

<span data-ttu-id="073a4-510">次の図に、結果を示します。</span><span class="sxs-lookup"><span data-stu-id="073a4-510">The following figure shows the result.</span></span>

<span data-ttu-id="073a4-511">![クラスに移動するページ](./media/navigation-overview/page-navigates-to-an-object.png "これは、オブジェクトに移動するページの例です。")</span><span class="sxs-lookup"><span data-stu-id="073a4-511">![A page that navigates to a class](./media/navigation-overview/page-navigates-to-an-object.png "This is an example of a page that navigates to an object.")</span></span>

<span data-ttu-id="073a4-512">この図には、役立つものが何も表示されていません。</span><span class="sxs-lookup"><span data-stu-id="073a4-512">From this figure, you can see that nothing useful is displayed.</span></span> <span data-ttu-id="073a4-513">実際に表示される値は、 **Person**オブジェクトの `ToString` メソッドの戻り値です。既定では、これは [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] がオブジェクトを表すために使用できる唯一の値です。</span><span class="sxs-lookup"><span data-stu-id="073a4-513">In fact, the value that is displayed is the return value of the `ToString` method for the **Person** object; by default, this is the only value that [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] can use to represent your object.</span></span> <span data-ttu-id="073a4-514">`ToString` メソッドをオーバーライドして、より意味のある情報を返すこともできますが、それでも文字列値になります。</span><span class="sxs-lookup"><span data-stu-id="073a4-514">You could override the `ToString` method to return more meaningful information, although it will still only be a string value.</span></span> <span data-ttu-id="073a4-515">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] のプレゼンテーション機能を利用する1つの手法は、データテンプレートを使用することです。</span><span class="sxs-lookup"><span data-stu-id="073a4-515">One technique you can use that takes advantage of the presentation capabilities of [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] is to use a data template.</span></span> <span data-ttu-id="073a4-516">特定の種類のオブジェクトに関連付けることのできるデータテンプレートを実装でき [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="073a4-516">You can implement a data template that [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] can associate with an object of a particular type.</span></span> <span data-ttu-id="073a4-517">次のコードは、`Person` オブジェクトのデータテンプレートを示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-517">The following code shows a data template for the `Person` object.</span></span>

[!code-xaml[NavigateToObjectSnippets#DataTemplateMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/App.xaml#datatemplatemarkup)]

<span data-ttu-id="073a4-518">ここでは、データテンプレートは、`DataType` 属性の `x:Type` マークアップ拡張機能を使用して、`Person` 型に関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="073a4-518">Here, the data template is associated with the `Person` type by using the `x:Type` markup extension in the `DataType` attribute.</span></span> <span data-ttu-id="073a4-519">次に、データテンプレートは `TextBlock` 要素 (<xref:System.Windows.Controls.TextBlock> を参照) を `Person` クラスのプロパティにバインドします。</span><span class="sxs-lookup"><span data-stu-id="073a4-519">The data template then binds `TextBlock` elements (see <xref:System.Windows.Controls.TextBlock>) to the properties of the `Person` class.</span></span> <span data-ttu-id="073a4-520">次の図は、`Person` オブジェクトの更新された外観を示しています。</span><span class="sxs-lookup"><span data-stu-id="073a4-520">The following figure shows the updated appearance of the `Person` object.</span></span>

<span data-ttu-id="073a4-521">![データテンプレートを持つクラスへの移動](./media/navigation-overview/navigating-to-a-class.png "データテンプレートを持つクラスへの移動。")</span><span class="sxs-lookup"><span data-stu-id="073a4-521">![Navigating to a class that has a data template](./media/navigation-overview/navigating-to-a-class.png "Navigating to a class that has a data template.")</span></span>

<span data-ttu-id="073a4-522">この方法の利点は、データ テンプレートを再利用して、アプリケーションの任意の場所で オブジェクトを一貫して表示できることによって得られる一貫性です。</span><span class="sxs-lookup"><span data-stu-id="073a4-522">An advantage of this technique is the consistency you gain by being able to reuse the data template to display your objects consistently anywhere in your application.</span></span>

<span data-ttu-id="073a4-523">データテンプレートの詳細については、「データテンプレートの[概要](../data/data-templating-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="073a4-523">For more information on data templates, see [Data Templating Overview](../data/data-templating-overview.md).</span></span>

<a name="Security"></a>

## <a name="security"></a><span data-ttu-id="073a4-524">セキュリティ</span><span class="sxs-lookup"><span data-stu-id="073a4-524">Security</span></span>

[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] <span data-ttu-id="073a4-525">ナビゲーションサポートにより、Xbap をインターネット経由で移動できるようになり、アプリケーションでサードパーティのコンテンツをホストできるようになります。</span><span class="sxs-lookup"><span data-stu-id="073a4-525">navigation support allows XBAPs to be navigated to across the Internet, and it allows applications to host third-party content.</span></span> <span data-ttu-id="073a4-526">アプリケーションとユーザーの両方を有害な動作から保護するために、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] には、[セキュリティ](../security-wpf.md)と[WPF 部分信頼セキュリティ](../wpf-partial-trust-security.md)について説明されているさまざまなセキュリティ機能が用意されています。</span><span class="sxs-lookup"><span data-stu-id="073a4-526">To protect both applications and users from harmful behavior, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] provides a variety of security features that are discussed in [Security](../security-wpf.md) and [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="073a4-527">関連項目</span><span class="sxs-lookup"><span data-stu-id="073a4-527">See also</span></span>

- <xref:System.Windows.Application.SetCookie%2A>
- <xref:System.Windows.Application.GetCookie%2A>
- [<span data-ttu-id="073a4-528">アプリケーション管理の概要</span><span class="sxs-lookup"><span data-stu-id="073a4-528">Application Management Overview</span></span>](application-management-overview.md)
- [<span data-ttu-id="073a4-529">WPF におけるパッケージの URI</span><span class="sxs-lookup"><span data-stu-id="073a4-529">Pack URIs in WPF</span></span>](pack-uris-in-wpf.md)
- [<span data-ttu-id="073a4-530">構造化ナビゲーションの概要</span><span class="sxs-lookup"><span data-stu-id="073a4-530">Structured Navigation Overview</span></span>](structured-navigation-overview.md)
- [<span data-ttu-id="073a4-531">ナビゲーション トポロジの概要</span><span class="sxs-lookup"><span data-stu-id="073a4-531">Navigation Topologies Overview</span></span>](navigation-topologies-overview.md)
- [<span data-ttu-id="073a4-532">方法トピック</span><span class="sxs-lookup"><span data-stu-id="073a4-532">How-to Topics</span></span>](navigation-how-to-topics.md)
- [<span data-ttu-id="073a4-533">WPF アプリケーションの配置</span><span class="sxs-lookup"><span data-stu-id="073a4-533">Deploying a WPF Application</span></span>](deploying-a-wpf-application-wpf.md)
