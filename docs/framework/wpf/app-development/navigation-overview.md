---
title: ナビゲーションの概要
description: Windows Presentation Foundation (WPF) のスタンドアロン アプリケーションと XAML ブラウザー アプリケーションで使用されるブラウザー スタイルのナビゲーションに対するサポートについて説明します。
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- loose XAML files [WPF]
- windows [WPF]
- Start page [WPF]
- HTML files [WPF]
- structured navigation [WPF]
- fragment navigation [WPF]
- URIs (Uniform Resource Identifiers)
- custom objects [WPF]
- Uniform Resource Identifiers (URIs)
- pages [WPF]
- frames [WPF]
- navigation hosts [WPF]
- journals [WPF]
- lifetimes [WPF]
- retaining content state [WPF]
- content state [WPF]
- programmatic navigation [WPF]
- hyperlinks [WPF]
ms.assetid: 86ad2143-606a-4e34-bf7e-51a2594248b8
ms.openlocfilehash: 2aac1b3a38b6240bfba1b90983fd9cbd18b31b6f
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.contentlocale: ja-JP
ms.lasthandoff: 07/01/2020
ms.locfileid: "85621705"
---
# <a name="navigation-overview"></a><span data-ttu-id="103ed-103">ナビゲーションの概要</span><span class="sxs-lookup"><span data-stu-id="103ed-103">Navigation Overview</span></span>

<span data-ttu-id="103ed-104">Windows Presentation Foundation (WPF) では、2 種類のアプリケーション (スタンドアロン アプリケーションと XAML ブラウザー アプリケーション (XBAP)) で使用できるブラウザー スタイルのナビゲーションがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="103ed-104">Windows Presentation Foundation (WPF) supports browser-style navigation that can be used in two types of applications: standalone applications and XAML browser applications (XBAPs).</span></span> <span data-ttu-id="103ed-105">ナビゲーション用にコンテンツをパッケージ化するため、WPF では <xref:System.Windows.Controls.Page> クラスが提供されています。</span><span class="sxs-lookup"><span data-stu-id="103ed-105">To package content for navigation, WPF provides the <xref:System.Windows.Controls.Page> class.</span></span> <span data-ttu-id="103ed-106"><xref:System.Windows.Controls.Page> 間は、<xref:System.Windows.Documents.Hyperlink> を使用して宣言により、または <xref:System.Windows.Navigation.NavigationService> を使用してプログラムにより、ナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-106">You can navigate from one <xref:System.Windows.Controls.Page> to another declaratively, by using a <xref:System.Windows.Documents.Hyperlink>, or programmatically, by using the <xref:System.Windows.Navigation.NavigationService>.</span></span> <span data-ttu-id="103ed-107">WPF では、ナビゲート元のページを記憶し、それらのページに戻るために、履歴が使用されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-107">WPF uses the journal to remember pages that have been navigated from and to navigate back to them.</span></span>

<span data-ttu-id="103ed-108"><xref:System.Windows.Controls.Page>、<xref:System.Windows.Documents.Hyperlink>、<xref:System.Windows.Navigation.NavigationService>、および履歴は、WPF によって提供されるナビゲーション サポートの中核を形成しています。</span><span class="sxs-lookup"><span data-stu-id="103ed-108"><xref:System.Windows.Controls.Page>, <xref:System.Windows.Documents.Hyperlink>, <xref:System.Windows.Navigation.NavigationService>, and the journal form the core of the navigation support offered by WPF.</span></span> <span data-ttu-id="103ed-109">この概要では、これらの機能を詳しく説明してから、[!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] ファイル、HTML ファイル、およびオブジェクトへのナビゲーションなど、高度なナビゲーション サポートについて説明します。</span><span class="sxs-lookup"><span data-stu-id="103ed-109">This overview explores these features in detail before covering advanced navigation support that includes navigation to loose [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] files, HTML files, and objects.</span></span>

> [!NOTE]
> <span data-ttu-id="103ed-110">このトピックでは、"ブラウザー" という用語は、WPF アプリケーションをホストできるブラウザーのみを指し、現時点では、Microsoft Internet Explorer と Firefox が含まれます。</span><span class="sxs-lookup"><span data-stu-id="103ed-110">In this topic, the term "browser" refers only to browsers that can host WPF applications, which currently includes Microsoft Internet Explorer and Firefox.</span></span> <span data-ttu-id="103ed-111">特定の WPF 機能が特定のブラウザーによってのみサポートされる場合は、ブラウザーのバージョンを示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-111">Where specific WPF features are supported only by a particular browser, the browser version is referred to.</span></span>

## <a name="navigation-in-wpf-applications"></a><span data-ttu-id="103ed-112">WPF アプリケーションでのナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-112">Navigation in WPF Applications</span></span>

<span data-ttu-id="103ed-113">このトピックでは、WPF における主なナビゲーション機能の概要を説明します。</span><span class="sxs-lookup"><span data-stu-id="103ed-113">This topic provides an overview of the key navigation capabilities in WPF.</span></span> <span data-ttu-id="103ed-114">これらの機能は、スタンドアロン アプリケーションと XBAP の両方で使用できますが、このトピックでは XBAP のコンテキストで説明します。</span><span class="sxs-lookup"><span data-stu-id="103ed-114">These capabilities are available to both standalone applications and XBAPs, although this topic presents them within the context of an XBAP.</span></span>

> [!NOTE]
> <span data-ttu-id="103ed-115">このトピックは、XBAP のビルドと配置の方法については説明しません。</span><span class="sxs-lookup"><span data-stu-id="103ed-115">This topic doesn't discuss how to build and deploy XBAPs.</span></span> <span data-ttu-id="103ed-116">XBAP の詳細については、「[WPF XAML ブラウザー アプリケーションの概要](wpf-xaml-browser-applications-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-116">For more information on XBAPs, see [WPF XAML Browser Applications Overview](wpf-xaml-browser-applications-overview.md).</span></span>

<span data-ttu-id="103ed-117">このセクションでは、ナビゲーションの次の側面について説明し、例を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-117">This section explains and demonstrates the following aspects of navigation:</span></span>

- [<span data-ttu-id="103ed-118">ページの実装</span><span class="sxs-lookup"><span data-stu-id="103ed-118">Implementing a Page</span></span>](#CreatingAXAMLPage)

- [<span data-ttu-id="103ed-119">スタート ページの構成</span><span class="sxs-lookup"><span data-stu-id="103ed-119">Configuring a Start Page</span></span>](#Configuring_a_Start_Page)

- [<span data-ttu-id="103ed-120">ホスト ウィンドウのタイトル、幅、および高さの構成</span><span class="sxs-lookup"><span data-stu-id="103ed-120">Configuring the Host Window's Title, Width, and Height</span></span>](#ConfiguringAXAMLPage)

- [<span data-ttu-id="103ed-121">ハイパーリンクのナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-121">Hyperlink Navigation</span></span>](#NavigatingBetweenXAMLPages)

- [<span data-ttu-id="103ed-122">フラグメント ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-122">Fragment Navigation</span></span>](#FragmentNavigation)

- [<span data-ttu-id="103ed-123">ナビゲーション サービス</span><span class="sxs-lookup"><span data-stu-id="103ed-123">Navigation Service</span></span>](#NavigationService)

- [<span data-ttu-id="103ed-124">ナビゲーション サービスによるプログラム ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-124">Programmatic Navigation with the Navigation Service</span></span>](#Programmatic_Navigation_with_the_Navigation_Service)

- [<span data-ttu-id="103ed-125">ナビゲーションの有効期間</span><span class="sxs-lookup"><span data-stu-id="103ed-125">Navigation Lifetime</span></span>](#Navigation_Lifetime)

- [<span data-ttu-id="103ed-126">履歴によるナビゲーションの記憶</span><span class="sxs-lookup"><span data-stu-id="103ed-126">Remembering Navigation with the Journal</span></span>](#NavigationHistory)

- [<span data-ttu-id="103ed-127">ページの有効期間と履歴</span><span class="sxs-lookup"><span data-stu-id="103ed-127">Page Lifetime and the Journal</span></span>](#PageLifetime)

- [<span data-ttu-id="103ed-128">ナビゲーション履歴によるコンテンツの状態の保持</span><span class="sxs-lookup"><span data-stu-id="103ed-128">Retaining Content State with Navigation History</span></span>](#RetainingContentStateWithNavigationHistory)

- [<span data-ttu-id="103ed-129">Cookie</span><span class="sxs-lookup"><span data-stu-id="103ed-129">Cookies</span></span>](#Cookies)

- [<span data-ttu-id="103ed-130">構造化ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-130">Structured Navigation</span></span>](#Structured_Navigation)

<a name="CreatingAXAMLPage"></a>

### <a name="implementing-a-page"></a><span data-ttu-id="103ed-131">ページの実装</span><span class="sxs-lookup"><span data-stu-id="103ed-131">Implementing a Page</span></span>

<span data-ttu-id="103ed-132">WPF では、.NET Framework オブジェクト、カスタム オブジェクト、列挙値、ユーザー コントロール、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイル、HTML ファイルなど、いくつかのコンテンツ タイプにナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-132">In WPF, you can navigate to several content types that include .NET Framework objects, custom objects, enumeration values, user controls, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files, and HTML files.</span></span> <span data-ttu-id="103ed-133">ただし、コンテンツをパッケージ化する最も一般的で便利な方法は、<xref:System.Windows.Controls.Page> を使用することです。</span><span class="sxs-lookup"><span data-stu-id="103ed-133">However, you'll find that the most common and convenient way to package content is by using <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-134">さらに、<xref:System.Windows.Controls.Page> では、ナビゲーション固有の機能が実装されており、それらの外観が強化され、開発が単純化されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-134">Furthermore, <xref:System.Windows.Controls.Page> implements navigation-specific features to enhance their appearance and simplify development.</span></span>

<span data-ttu-id="103ed-135"><xref:System.Windows.Controls.Page> を使用すると、次のようなマークアップを使用して、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] のコンテンツのナビゲート可能なページを宣言によって実装できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-135">Using <xref:System.Windows.Controls.Page>, you can declaratively implement a navigable page of [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] content by using markup like the following.</span></span>

[!code-xaml[NavigationOverviewSnippets#Page1XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/Page1.xaml#page1xaml)]

<span data-ttu-id="103ed-136">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] マークアップで実装される <xref:System.Windows.Controls.Page> には、ルート要素として `Page` があり、WPF XML 名前空間の宣言が必要です。</span><span class="sxs-lookup"><span data-stu-id="103ed-136">A <xref:System.Windows.Controls.Page> that is implemented in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] markup has `Page` as its root element and requires the WPF XML namespace declaration.</span></span> <span data-ttu-id="103ed-137">`Page` 要素には、ナビゲートして表示するコンテンツが格納されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-137">The `Page` element contains the content that you want to navigate to and display.</span></span> <span data-ttu-id="103ed-138">コンテンツは、次のマークアップに示されているように、`Page.Content` プロパティ要素を設定することによって追加します。</span><span class="sxs-lookup"><span data-stu-id="103ed-138">You add content by setting the `Page.Content` property element, as shown in the following markup.</span></span>

[!code-xaml[NavigationOverviewSnippets#Page2XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/Page2.xaml#page2xaml)]

<span data-ttu-id="103ed-139">`Page.Content` には、1 つの子要素のみを含めることができます。前の例では、コンテンツは単一の文字列「Hello, Page!」です。</span><span class="sxs-lookup"><span data-stu-id="103ed-139">`Page.Content` can only contain one child element; in the preceding example, the content is a single string, "Hello, Page!"</span></span> <span data-ttu-id="103ed-140">実際には、通常、レイアウト コントロールを子要素として使用して (「[レイアウト](../advanced/layout.md)」を参照)、コンテンツを格納し、構成します。</span><span class="sxs-lookup"><span data-stu-id="103ed-140">In practice, you will usually use a layout control as the child element (see [Layout](../advanced/layout.md)) to contain and compose your content.</span></span>

<span data-ttu-id="103ed-141">`Page` 要素の子要素は、<xref:System.Windows.Controls.Page> のコンテンツとみなされるため、明示的な `Page.Content` 宣言を使用する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="103ed-141">The child elements of a `Page` element are considered to be the content of a <xref:System.Windows.Controls.Page> and, consequently, you don't need to use the explicit `Page.Content` declaration.</span></span> <span data-ttu-id="103ed-142">次のマークアップは、前のサンプルの宣言と同等です。</span><span class="sxs-lookup"><span data-stu-id="103ed-142">The following markup is the declarative equivalent to the preceding sample.</span></span>

[!code-xaml[NavigationOverviewSnippets#Page3XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/Page3.xaml#page3xaml)]

<span data-ttu-id="103ed-143">この場合、`Page.Content` は、`Page` 要素の子要素を使用して自動的に設定されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-143">In this case, `Page.Content` is automatically set with the child elements of the `Page` element.</span></span> <span data-ttu-id="103ed-144">詳細については、「[WPF のコンテンツ モデル](../controls/wpf-content-model.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-144">For more information, see [WPF Content Model](../controls/wpf-content-model.md).</span></span>

<span data-ttu-id="103ed-145">マークアップのみの <xref:System.Windows.Controls.Page> は、コンテンツの表示に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="103ed-145">A markup-only <xref:System.Windows.Controls.Page> is useful for displaying content.</span></span> <span data-ttu-id="103ed-146">ただし、<xref:System.Windows.Controls.Page> では、ユーザーがページと対話するためのコントロールも表示でき、イベントを処理し、アプリケーション ロジックを呼び出すことによって、ユーザーの操作に応答できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-146">However, a <xref:System.Windows.Controls.Page> can also display controls that allow users to interact with the page, and it can respond to user interaction by handling events and calling application logic.</span></span> <span data-ttu-id="103ed-147">対話形式の <xref:System.Windows.Controls.Page> は、次の例に示されているように、マークアップと分離コードの組み合わせを使用して実装されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-147">An interactive <xref:System.Windows.Controls.Page> is implemented by using a combination of markup and code-behind, as shown in the following example.</span></span>

[!code-xaml[XBAPAppDefSnippets#HomePageMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/XBAPAppDefSnippets/CSharp/HomePage.xaml#homepagemarkup)]

[!code-csharp[XBAPAppDefSnippets#HomePageCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/XBAPAppDefSnippets/CSharp/HomePage.xaml.cs#homepagecodebehind)]
[!code-vb[XBAPAppDefSnippets#HomePageCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/XBAPAppDefSnippets/VisualBasic/HomePage.xaml.vb#homepagecodebehind)]

<span data-ttu-id="103ed-148">マークアップ ファイルと分離コード ファイルを連携させるには、次の構成が必要です。</span><span class="sxs-lookup"><span data-stu-id="103ed-148">To allow a markup file and code-behind file to work together, the following configuration is required:</span></span>

- <span data-ttu-id="103ed-149">マークアップでは、`Page` 要素に `x:Class` 属性を含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-149">In markup, the `Page` element must include the `x:Class` attribute.</span></span> <span data-ttu-id="103ed-150">アプリケーションのビルド時にマークアップ ファイルに `x:Class` が含まれていると、Microsoft Build Engine (MSBuild) により、`x:Class` 属性で指定された名前を持つ、<xref:System.Windows.Controls.Page> から派生した `partial` クラスが作成されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-150">When the application is built, the existence of `x:Class` in the markup file causes Microsoft build engine (MSBuild) to create a `partial` class that derives from <xref:System.Windows.Controls.Page> and has the name that is specified by the `x:Class` attribute.</span></span> <span data-ttu-id="103ed-151">そのためには、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] スキーマ (`xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"`) に XML 名前空間宣言を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-151">This requires the addition of an XML namespace declaration for the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] schema ( `xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"` ).</span></span> <span data-ttu-id="103ed-152">生成された `partial` クラスでは、`InitializeComponent` メソッドが実装されています。このメソッドを呼び出すと、イベントが登録され、マークアップで実装されるプロパティが設定されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-152">The generated `partial` class implements `InitializeComponent`, which is called to register the events and set the properties that are implemented in markup.</span></span>

- <span data-ttu-id="103ed-153">分離コードでは、クラスは、マークアップ内の `x:Class` 属性で指定されている名前を持つ `partial` クラスでなければなりません。また、<xref:System.Windows.Controls.Page> から派生する必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-153">In code-behind, the class must be a `partial` class with the same name that is specified by the `x:Class` attribute in markup, and it must derive from <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-154">これによって、分離コード ファイルと、アプリケーションのビルド時にマークアップ ファイル用に生成される `partial` クラスとが関連付けられます (「[WPF アプリケーションのビルド](building-a-wpf-application-wpf.md)」を参照)。</span><span class="sxs-lookup"><span data-stu-id="103ed-154">This allows the code-behind file to be associated with the `partial` class that is generated for the markup file when the application is built (see [Building a WPF Application](building-a-wpf-application-wpf.md)).</span></span>

- <span data-ttu-id="103ed-155">分離コードでは、<xref:System.Windows.Controls.Page> クラスによって実装されるコンストラクターで `InitializeComponent` メソッドが呼び出される必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-155">In code-behind, the <xref:System.Windows.Controls.Page> class must implement a constructor that calls the `InitializeComponent` method.</span></span> <span data-ttu-id="103ed-156">`InitializeComponent` は、マークアップ ファイル用に生成された `partial` クラスによって実装されるもので、マークアップで定義されているイベントの登録と、プロパティの設定を行います。</span><span class="sxs-lookup"><span data-stu-id="103ed-156">`InitializeComponent` is implemented by the markup file's generated `partial` class to register events and set properties that are defined in markup.</span></span>

> [!NOTE]
> <span data-ttu-id="103ed-157">Visual Studio を使用してプロジェクトに新しい <xref:System.Windows.Controls.Page> を追加すると、ここで説明したように、マークアップと分離コードの両方を使用して <xref:System.Windows.Controls.Page> が実装され、マークアップ ファイルと分離コード ファイル間の関連付けの作成に必要な構成が組み込まれます。</span><span class="sxs-lookup"><span data-stu-id="103ed-157">When you add a new <xref:System.Windows.Controls.Page> to your project using Visual Studio, the <xref:System.Windows.Controls.Page> is implemented using both markup and code-behind, and it includes the necessary configuration to create the association between the markup and code-behind files as described here.</span></span>

<span data-ttu-id="103ed-158"><xref:System.Windows.Controls.Page> を作成したら、そこにナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-158">Once you have a <xref:System.Windows.Controls.Page>, you can navigate to it.</span></span> <span data-ttu-id="103ed-159">アプリケーションが最初にナビゲートする <xref:System.Windows.Controls.Page> を指定するには、スタート <xref:System.Windows.Controls.Page> を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-159">To specify the first <xref:System.Windows.Controls.Page> that an application navigates to, you need to configure the start <xref:System.Windows.Controls.Page>.</span></span>

<a name="Configuring_a_Start_Page"></a>

### <a name="configuring-a-start-page"></a><span data-ttu-id="103ed-160">スタート ページの構成</span><span class="sxs-lookup"><span data-stu-id="103ed-160">Configuring a Start Page</span></span>

<span data-ttu-id="103ed-161">XBAP では、一定の量のアプリケーション インフラストラクチャをブラウザーでホストする必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-161">XBAPs require a certain amount of application infrastructure to be hosted in a browser.</span></span> <span data-ttu-id="103ed-162">WPF では、<xref:System.Windows.Application> クラスは、必要なアプリケーション インフラストラクチャを確立するアプリケーション定義の一部です (「[アプリケーション管理の概要](application-management-overview.md)」を参照)。</span><span class="sxs-lookup"><span data-stu-id="103ed-162">In WPF, the <xref:System.Windows.Application> class is part of an application definition that establishes the required application infrastructure (see [Application Management Overview](application-management-overview.md)).</span></span>

<span data-ttu-id="103ed-163">アプリケーション定義は、通常、MSBuild の `ApplicationDefinition` 項目として構成されたマークアップ ファイルで、マークアップとコードビハインドの両方を使用して実装されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-163">An application definition is usually implemented using both markup and code-behind, with the markup file configured as an MSBuild`ApplicationDefinition` item.</span></span> <span data-ttu-id="103ed-164">XBAP のアプリケーション定義を次に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-164">The following is an application definition for an XBAP.</span></span>

[!code-xaml[XBAPAppDefSnippets#XBAPApplicationDefinitionMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/XBAPAppDefSnippets/CSharp/App.xaml#xbapapplicationdefinitionmarkup)]

[!code-csharp[XBAPAppDefSnippets#XBAPApplicationDefinitionCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/XBAPAppDefSnippets/CSharp/App.xaml.cs#xbapapplicationdefinitioncodebehind)]
[!code-vb[XBAPAppDefSnippets#XBAPApplicationDefinitionCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/XBAPAppDefSnippets/VisualBasic/Application.xaml.vb#xbapapplicationdefinitioncodebehind)]

<span data-ttu-id="103ed-165">XBAP では、アプリケーション定義を使用して、スタート <xref:System.Windows.Controls.Page> を指定でき、これは、XBAP が起動されたときに自動的に呼び出される <xref:System.Windows.Controls.Page> です。</span><span class="sxs-lookup"><span data-stu-id="103ed-165">An XBAP can use its application definition to specify a start <xref:System.Windows.Controls.Page>, which is the <xref:System.Windows.Controls.Page> that is automatically loaded when the XBAP is launched.</span></span> <span data-ttu-id="103ed-166">このためには、目的の <xref:System.Windows.Controls.Page> の Uniform Resource Identifier (URI) を <xref:System.Windows.Application.StartupUri%2A> プロパティに設定します。</span><span class="sxs-lookup"><span data-stu-id="103ed-166">You do this by setting the <xref:System.Windows.Application.StartupUri%2A> property with the uniform resource identifier (URI) for the desired <xref:System.Windows.Controls.Page>.</span></span>

> [!NOTE]
> <span data-ttu-id="103ed-167">ほとんどの場合、<xref:System.Windows.Controls.Page> は、アプリケーションにコンパイルされるか、アプリケーションと共に配置されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-167">In most cases, the <xref:System.Windows.Controls.Page> is either compiled into or deployed with an application.</span></span> <span data-ttu-id="103ed-168">このような場合、<xref:System.Windows.Controls.Page> を識別する URI はパック URI であり、これは、"*パック*" スキームに準拠した URI です。</span><span class="sxs-lookup"><span data-stu-id="103ed-168">In these cases, the URI that identifies a <xref:System.Windows.Controls.Page> is a pack URI, which is a URI that conforms to the *pack* scheme.</span></span> <span data-ttu-id="103ed-169">パック URI については、「[WPF におけるパック URI](pack-uris-in-wpf.md)」で詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="103ed-169">Pack URIs are discussed further in     [Pack URIs in WPF](pack-uris-in-wpf.md).</span></span> <span data-ttu-id="103ed-170">以下で説明する http スキームを使用してコンテンツにナビゲートすることもできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-170">You can also navigate to content using the http scheme, which is discussed below.</span></span>

<span data-ttu-id="103ed-171">次の例に示されているように、マークアップで宣言することによって、<xref:System.Windows.Application.StartupUri%2A> を設定することができます。</span><span class="sxs-lookup"><span data-stu-id="103ed-171">You can set <xref:System.Windows.Application.StartupUri%2A> declaratively in markup, as shown in the following example.</span></span>

[!code-xaml[NavigationOverviewSnippets#XBAPApplicationDefinitionMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/App.xaml#xbapapplicationdefinitionmarkup)]

<span data-ttu-id="103ed-172">この例では、`StartupUri` 属性は、HomePage.xaml を識別する相対パック URI で設定されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-172">In this example, the `StartupUri` attribute is set with a relative pack URI that identifies HomePage.xaml.</span></span> <span data-ttu-id="103ed-173">XBAP が起動されると、HomePage.xaml に自動的にナビゲートして、それが表示されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-173">When the XBAP is launched, HomePage.xaml is automatically navigated to and displayed.</span></span> <span data-ttu-id="103ed-174">これを次の図に示します。これは、Web サーバーから起動された XBAP を示しています。</span><span class="sxs-lookup"><span data-stu-id="103ed-174">This is demonstrated by the following figure, which shows an XBAP that was launched from a Web server.</span></span>

<span data-ttu-id="103ed-175">![XBAP ページ](./media/navigation-overview/xbap-launched-from-a-web-server.png "これは、Web サーバーから起動された XBAP を示してす。")</span><span class="sxs-lookup"><span data-stu-id="103ed-175">![XBAP page](./media/navigation-overview/xbap-launched-from-a-web-server.png "This shows an XBAP launched from a Web server.")</span></span>

> [!NOTE]
> <span data-ttu-id="103ed-176">XBAP の開発および配置の詳細については、「[WPF XAML ブラウザー アプリケーションの概要](wpf-xaml-browser-applications-overview.md)」および「[WPF アプリケーションの配置](deploying-a-wpf-application-wpf.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-176">For more information regarding the development and deployment of XBAPs, see [WPF XAML Browser Applications Overview](wpf-xaml-browser-applications-overview.md) and     [Deploying a WPF Application](deploying-a-wpf-application-wpf.md).</span></span>

<a name="ConfiguringAXAMLPage"></a>

### <a name="configuring-the-host-windows-title-width-and-height"></a><span data-ttu-id="103ed-177">ホスト ウィンドウのタイトル、幅、および高さの構成</span><span class="sxs-lookup"><span data-stu-id="103ed-177">Configuring the Host Window's Title, Width, and Height</span></span>

<span data-ttu-id="103ed-178">前の図を見て気付くことは、ブラウザーとタブのパネルのタイトルがどちらも XBAP の URI になっていることです。</span><span class="sxs-lookup"><span data-stu-id="103ed-178">One thing you may have noticed from the previous figure is that the title of both the browser and the tab panel is the URI for the XBAP.</span></span> <span data-ttu-id="103ed-179">このタイトルは、長いだけでなく、見た目が良いわけでも、有益な情報になっているわけでもありません。</span><span class="sxs-lookup"><span data-stu-id="103ed-179">Besides being long, the title is neither attractive nor informative.</span></span> <span data-ttu-id="103ed-180">このため、<xref:System.Windows.Controls.Page> には、<xref:System.Windows.Controls.Page.WindowTitle%2A> プロパティを設定することによってタイトルを変更する方法が用意されています。</span><span class="sxs-lookup"><span data-stu-id="103ed-180">For this reason, <xref:System.Windows.Controls.Page> offers a way for you to change the title by setting the <xref:System.Windows.Controls.Page.WindowTitle%2A> property.</span></span> <span data-ttu-id="103ed-181">さらに、<xref:System.Windows.Controls.Page.WindowWidth%2A> と <xref:System.Windows.Controls.Page.WindowHeight%2A> を設定することによって、ブラウザー ウィンドウの幅と高さをそれぞれ構成することができます。</span><span class="sxs-lookup"><span data-stu-id="103ed-181">Furthermore, you can configure the width and height of the browser window by setting <xref:System.Windows.Controls.Page.WindowWidth%2A> and <xref:System.Windows.Controls.Page.WindowHeight%2A>, respectively.</span></span>

<span data-ttu-id="103ed-182"><xref:System.Windows.Controls.Page.WindowTitle%2A>、<xref:System.Windows.Controls.Page.WindowWidth%2A>、および <xref:System.Windows.Controls.Page.WindowHeight%2A> は、次の例に示されているように、マークアップで宣言して設定できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-182"><xref:System.Windows.Controls.Page.WindowTitle%2A>, <xref:System.Windows.Controls.Page.WindowWidth%2A>, and <xref:System.Windows.Controls.Page.WindowHeight%2A> can be set declaratively in markup, as shown in the following example.</span></span>

[!code-xaml[NavigationOverviewSnippets#HomePageMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/HomePage.xaml#homepagemarkup)]

<span data-ttu-id="103ed-183">結果を次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-183">The result is shown in the following figure.</span></span>

<span data-ttu-id="103ed-184">![ウィンドウのタイトル、高さ、幅](./media/navigation-overview/window-title-width-height.png "これは、構成できるウィンドウのタイトル、高さ、幅を示します。")</span><span class="sxs-lookup"><span data-stu-id="103ed-184">![Window title, height, width](./media/navigation-overview/window-title-width-height.png "This shows the window title, height, and width you can configure.")</span></span>

<a name="NavigatingBetweenXAMLPages"></a>

### <a name="hyperlink-navigation"></a><span data-ttu-id="103ed-185">ハイパーリンクのナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-185">Hyperlink Navigation</span></span>

<span data-ttu-id="103ed-186">一般的な XBAP は、複数のページで構成されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-186">A typical XBAP comprises several pages.</span></span> <span data-ttu-id="103ed-187">あるページから別のページにナビゲートする最も簡単な方法は、<xref:System.Windows.Documents.Hyperlink> を使用することです。</span><span class="sxs-lookup"><span data-stu-id="103ed-187">The simplest way to navigate from one page to another is to use a <xref:System.Windows.Documents.Hyperlink>.</span></span> <span data-ttu-id="103ed-188">次のマークアップに示されているように、`Hyperlink` 要素を使用することによって、<xref:System.Windows.Documents.Hyperlink> を <xref:System.Windows.Controls.Page> に宣言によって追加できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-188">You can declaratively add a <xref:System.Windows.Documents.Hyperlink> to a <xref:System.Windows.Controls.Page> by using the `Hyperlink` element, which is shown in the following markup.</span></span>

[!code-xaml[NavigationOverviewSnippets#HyperlinkXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithHyperlink.xaml#hyperlinkxaml1)]
[!code-xaml[NavigationOverviewSnippets#HyperlinkXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithHyperlink.xaml#hyperlinkxaml2)]
[!code-xaml[NavigationOverviewSnippets#HyperlinkXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithHyperlink.xaml#hyperlinkxaml3)]

<span data-ttu-id="103ed-189">`Hyperlink` 要素には、次のものが必要です。</span><span class="sxs-lookup"><span data-stu-id="103ed-189">A `Hyperlink` element requires the following:</span></span>

- <span data-ttu-id="103ed-190">`NavigateUri` 属性によって使用される、ナビゲート先の <xref:System.Windows.Controls.Page> のパック URI。</span><span class="sxs-lookup"><span data-stu-id="103ed-190">The pack URI of the <xref:System.Windows.Controls.Page> to navigate to, as specified by the `NavigateUri` attribute.</span></span>

- <span data-ttu-id="103ed-191">テキストやイメージなど、ユーザーがナビゲーションを開始するためにクリックできるコンテンツ (`Hyperlink` 要素に格納できるコンテンツについては、<xref:System.Windows.Documents.Hyperlink> を参照)。</span><span class="sxs-lookup"><span data-stu-id="103ed-191">Content that a user can click to initiate the navigation, such as text and images (for the content that the `Hyperlink` element can contain, see <xref:System.Windows.Documents.Hyperlink>).</span></span>

<span data-ttu-id="103ed-192">次の図では、<xref:System.Windows.Documents.Hyperlink> がある <xref:System.Windows.Controls.Page> を持つ XBAP を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-192">The following figure shows an XBAP with a <xref:System.Windows.Controls.Page> that has a <xref:System.Windows.Documents.Hyperlink>.</span></span>

<span data-ttu-id="103ed-193">![ハイパーリンクを含むページ](./media/navigation-overview/xbap-with-a-page-with-a-hyperlink.png "これは、ハイパーリンクのあるページが含まれる XBAP を示します。")</span><span class="sxs-lookup"><span data-stu-id="103ed-193">![Page with Hyperlink](./media/navigation-overview/xbap-with-a-page-with-a-hyperlink.png "This shows an XBAP with a page with a hyperlink.")</span></span>

<span data-ttu-id="103ed-194">想定されるとおり、<xref:System.Windows.Documents.Hyperlink> をクリックすると、XBAP は `NavigateUri` 属性によって識別される <xref:System.Windows.Controls.Page> にナビゲートします。</span><span class="sxs-lookup"><span data-stu-id="103ed-194">As you would expect, clicking the <xref:System.Windows.Documents.Hyperlink> causes the XBAP to navigate to the <xref:System.Windows.Controls.Page> that is identified by the `NavigateUri` attribute.</span></span> <span data-ttu-id="103ed-195">さらに、XBAP により、前の <xref:System.Windows.Controls.Page> のエントリが、Internet Explorer の [最近表示したページ] の一覧に追加されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-195">Additionally, the XBAP adds an entry for the previous <xref:System.Windows.Controls.Page> to the Recent Pages list in Internet Explorer.</span></span> <span data-ttu-id="103ed-196">これを次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-196">This is shown in the following figure.</span></span>

<span data-ttu-id="103ed-197">![[戻る] ボタンと [次に進む] ボタン](./media/navigation-overview/back-and-forward-navigation.png "[戻る] ボタンと [進む] ボタンでナビゲートします。")</span><span class="sxs-lookup"><span data-stu-id="103ed-197">![Back and Forward buttons](./media/navigation-overview/back-and-forward-navigation.png "Navigate with the back and forward buttons.")</span></span>

<span data-ttu-id="103ed-198"><xref:System.Windows.Controls.Page> 間のナビゲーションのサポートだけでなく、<xref:System.Windows.Documents.Hyperlink> ではフラグメント ナビゲーションもサポートされます。</span><span class="sxs-lookup"><span data-stu-id="103ed-198">As well as supporting navigation from one <xref:System.Windows.Controls.Page> to another, <xref:System.Windows.Documents.Hyperlink> also supports fragment navigation.</span></span>

<a name="FragmentNavigation"></a>

### <a name="fragment-navigation"></a><span data-ttu-id="103ed-199">フラグメント ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-199">Fragment Navigation</span></span>

<span data-ttu-id="103ed-200">"*フラグメント ナビゲーション*" は、現在の <xref:System.Windows.Controls.Page> または別の <xref:System.Windows.Controls.Page> にあるコンテンツ フラグメントへのナビゲーションです。</span><span class="sxs-lookup"><span data-stu-id="103ed-200">*Fragment navigation* is the navigation to a content fragment in either the current <xref:System.Windows.Controls.Page> or another <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-201">WPF では、コンテンツ フラグメントは、名前付き要素に格納されるコンテンツです。</span><span class="sxs-lookup"><span data-stu-id="103ed-201">In WPF, a content fragment is the content that is contained by a named element.</span></span> <span data-ttu-id="103ed-202">名前付き要素とは、`Name` 属性が設定されている要素です。</span><span class="sxs-lookup"><span data-stu-id="103ed-202">A named element is an element that has its `Name` attribute set.</span></span> <span data-ttu-id="103ed-203">次のマークアップは、コンテンツ フラグメントを含む名前付き `TextBlock` 要素を示しています。</span><span class="sxs-lookup"><span data-stu-id="103ed-203">The following markup shows a named `TextBlock` element that contains a content fragment.</span></span>

[!code-xaml[NavigationOverviewSnippets#PageWithContentFragmentsMARKUP1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithFragments.xaml#pagewithcontentfragmentsmarkup1)]
[!code-xaml[NavigationOverviewSnippets#PageWithContentFragmentsMARKUP2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithFragments.xaml#pagewithcontentfragmentsmarkup2)]
[!code-xaml[NavigationOverviewSnippets#PageWithContentFragmentsMARKUP3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithFragments.xaml#pagewithcontentfragmentsmarkup3)]

<span data-ttu-id="103ed-204">コンテンツ フラグメントにナビゲートする <xref:System.Windows.Documents.Hyperlink> の場合、`NavigateUri` 属性に次のものを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-204">For a <xref:System.Windows.Documents.Hyperlink> to navigate to a content fragment, the `NavigateUri` attribute must include the following:</span></span>

- <span data-ttu-id="103ed-205">ナビゲート先のコンテンツ フラグメントがある <xref:System.Windows.Controls.Page> の URI。</span><span class="sxs-lookup"><span data-stu-id="103ed-205">The URI of the <xref:System.Windows.Controls.Page> with the content fragment to navigate to.</span></span>

- <span data-ttu-id="103ed-206">「#」文字。</span><span class="sxs-lookup"><span data-stu-id="103ed-206">A "#" character.</span></span>

- <span data-ttu-id="103ed-207">コンテンツ フラグメントがある <xref:System.Windows.Controls.Page> 上の要素の名前。</span><span class="sxs-lookup"><span data-stu-id="103ed-207">The name of the element on the <xref:System.Windows.Controls.Page> that contains the content fragment.</span></span>

<span data-ttu-id="103ed-208">フラグメント URI の形式は、次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="103ed-208">A fragment URI has the following format.</span></span>

<span data-ttu-id="103ed-209">*PageURI* `#` *ElementName*</span><span class="sxs-lookup"><span data-stu-id="103ed-209">*PageURI* `#` *ElementName*</span></span>

<span data-ttu-id="103ed-210">コンテンツ フラグメントにナビゲートするように構成された `Hyperlink` の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-210">The following shows an example of a `Hyperlink` that is configured to navigate to a content fragment.</span></span>

[!code-xaml[NavigationOverviewSnippets#PageThatNavigatesXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageThatNavigatesToFragment.xaml#pagethatnavigatesxaml1)]
[!code-xaml[NavigationOverviewSnippets#PageThatNavigatesXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageThatNavigatesToFragment.xaml#pagethatnavigatesxaml2)]
[!code-xaml[NavigationOverviewSnippets#PageThatNavigatesXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageThatNavigatesToFragment.xaml#pagethatnavigatesxaml3)]

> [!NOTE]
> <span data-ttu-id="103ed-211">このセクションでは、WPF での既定のフラグメント ナビゲーション実装について説明します。</span><span class="sxs-lookup"><span data-stu-id="103ed-211">This section describes the default fragment navigation implementation in WPF.</span></span> <span data-ttu-id="103ed-212">WPF では、部分的に <xref:System.Windows.Navigation.NavigationService.FragmentNavigation?displayProperty=nameWithType> イベントの処理が必要な、独自のフラグメント ナビゲーション スキームを実装することもできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-212">WPF also allows you to implement your own fragment navigation scheme which, in part, requires handling the <xref:System.Windows.Navigation.NavigationService.FragmentNavigation?displayProperty=nameWithType> event.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="103ed-213">Loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ページ (ルート要素として `Page` を持つマークアップのみの [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイル) 内のフラグメントにナビゲートできるのは、HTTP でページを参照できる場合に限られます。</span><span class="sxs-lookup"><span data-stu-id="103ed-213">You can navigate to fragments in loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages (markup-only [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files with `Page` as the root element) only if the pages can be browsed via HTTP.</span></span>
>
> <span data-ttu-id="103ed-214">ただし、Loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ページは、自身のフラグメントにナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-214">However, a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] page can navigate to its own fragments.</span></span>

<a name="NavigationService"></a>

### <a name="navigation-service"></a><span data-ttu-id="103ed-215">ナビゲーション サービス</span><span class="sxs-lookup"><span data-stu-id="103ed-215">Navigation Service</span></span>

<span data-ttu-id="103ed-216"><xref:System.Windows.Documents.Hyperlink> を使用すると、ユーザーは特定の <xref:System.Windows.Controls.Page> へのナビゲーションを開始できますが、ページの位置を特定し、ダウンロードする作業は、<xref:System.Windows.Navigation.NavigationService> クラスによって実行されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-216">While <xref:System.Windows.Documents.Hyperlink> allows a user to initiate navigation to a particular <xref:System.Windows.Controls.Page>, the work of locating and downloading the page is performed by the <xref:System.Windows.Navigation.NavigationService> class.</span></span> <span data-ttu-id="103ed-217">基本的に、<xref:System.Windows.Navigation.NavigationService> では、<xref:System.Windows.Documents.Hyperlink> などのクライアント コードの代わりに、ナビゲーション要求を処理できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-217">Essentially, <xref:System.Windows.Navigation.NavigationService> provides the ability to process a navigation request on behalf of client code, such as the <xref:System.Windows.Documents.Hyperlink>.</span></span> <span data-ttu-id="103ed-218">さらに、<xref:System.Windows.Navigation.NavigationService> では、ナビゲーション要求の追跡と制御のための高レベルのサポートが実装されています。</span><span class="sxs-lookup"><span data-stu-id="103ed-218">Additionally, <xref:System.Windows.Navigation.NavigationService> implements higher-level support for tracking and influencing a navigation request.</span></span>

<span data-ttu-id="103ed-219"><xref:System.Windows.Documents.Hyperlink> がクリックされると、WPF で <xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> が呼び出され、指定されたパック URI にある <xref:System.Windows.Controls.Page> が特定されて、ダウンロードされます。</span><span class="sxs-lookup"><span data-stu-id="103ed-219">When a <xref:System.Windows.Documents.Hyperlink> is clicked, WPF calls <xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> to locate and download the <xref:System.Windows.Controls.Page> at the specified pack URI.</span></span> <span data-ttu-id="103ed-220">ダウンロードされた <xref:System.Windows.Controls.Page> は、ルート オブジェクトが、ダウンロードされた <xref:System.Windows.Controls.Page> のインスタンスであるオブジェクト ツリーに変換されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-220">The downloaded <xref:System.Windows.Controls.Page> is converted to a tree of objects whose root object is an instance of the downloaded <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-221">ルート <xref:System.Windows.Controls.Page> オブジェクトへの参照は、<xref:System.Windows.Navigation.NavigationService.Content%2A?displayProperty=nameWithType> プロパティに格納されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-221">A reference to the root <xref:System.Windows.Controls.Page> object is stored in the <xref:System.Windows.Navigation.NavigationService.Content%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="103ed-222">ナビゲート先のコンテンツのパック URI は、<xref:System.Windows.Navigation.NavigationService.Source%2A?displayProperty=nameWithType> プロパティに格納されますが、<xref:System.Windows.Navigation.NavigationService.CurrentSource%2A?displayProperty=nameWithType> には、ナビゲート先の最後のページのパック URI が格納されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-222">The pack URI for the content that was navigated to is stored in the <xref:System.Windows.Navigation.NavigationService.Source%2A?displayProperty=nameWithType> property, while the <xref:System.Windows.Navigation.NavigationService.CurrentSource%2A?displayProperty=nameWithType> stores the pack URI for the last page that was navigated to.</span></span>

> [!NOTE]
> <span data-ttu-id="103ed-223">WPF アプリケーションでは、現在アクティブな <xref:System.Windows.Navigation.NavigationService> を複数持つことが可能です。</span><span class="sxs-lookup"><span data-stu-id="103ed-223">It is possible for a WPF application to have more than one currently active <xref:System.Windows.Navigation.NavigationService>.</span></span> <span data-ttu-id="103ed-224">詳細については、このトピックで後述する「[ナビゲーション ホスト](#Navigation_Hosts)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-224">For more information, see [Navigation Hosts](#Navigation_Hosts) later in this topic.</span></span>

<a name="Programmatic_Navigation_with_the_Navigation_Service"></a>

### <a name="programmatic-navigation-with-the-navigation-service"></a><span data-ttu-id="103ed-225">ナビゲーション サービスによるプログラム ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-225">Programmatic Navigation with the Navigation Service</span></span>

<span data-ttu-id="103ed-226">ナビゲーションが <xref:System.Windows.Documents.Hyperlink> を使用してマークアップで宣言として実装される場合、開発者は <xref:System.Windows.Navigation.NavigationService> について知る必要はありません。<xref:System.Windows.Documents.Hyperlink> では <xref:System.Windows.Navigation.NavigationService> が自動的に使用されるためです。</span><span class="sxs-lookup"><span data-stu-id="103ed-226">You don't need to know about <xref:System.Windows.Navigation.NavigationService> if navigation is implemented declaratively in markup using <xref:System.Windows.Documents.Hyperlink>, because <xref:System.Windows.Documents.Hyperlink> uses the <xref:System.Windows.Navigation.NavigationService> on your behalf.</span></span> <span data-ttu-id="103ed-227">つまり、<xref:System.Windows.Documents.Hyperlink> の直接的または間接的な親がナビゲーション ホストである限り (「[ナビゲーション ホスト](#Navigation_Hosts)」を参照)、<xref:System.Windows.Documents.Hyperlink> では、ナビゲーション ホストのナビゲーション サービスを発見および使用して、ナビゲーション要求を処理できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-227">This means that, as long as either the direct or indirect parent of a <xref:System.Windows.Documents.Hyperlink> is a navigation host (see [Navigation Hosts](#Navigation_Hosts)), <xref:System.Windows.Documents.Hyperlink> will be able to find and use the navigation host's navigation service to process a navigation request.</span></span>

<span data-ttu-id="103ed-228">ただし、次のような場合は、<xref:System.Windows.Navigation.NavigationService> を直接使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-228">However, there are situations when you need to use <xref:System.Windows.Navigation.NavigationService> directly, including the following:</span></span>

- <span data-ttu-id="103ed-229">パラメーターなしではないコンストラクターを使用して <xref:System.Windows.Controls.Page> をインスタンス化する必要がある場合。</span><span class="sxs-lookup"><span data-stu-id="103ed-229">When you need to instantiate a <xref:System.Windows.Controls.Page> using a non-parameterless constructor.</span></span>

- <span data-ttu-id="103ed-230">ナビゲートする前に、<xref:System.Windows.Controls.Page> のプロパティを設定する必要がある場合。</span><span class="sxs-lookup"><span data-stu-id="103ed-230">When you need to set properties on the <xref:System.Windows.Controls.Page> before you navigate to it.</span></span>

- <span data-ttu-id="103ed-231">どの <xref:System.Windows.Controls.Page> にナビゲートするかが、実行時まで決定できない場合。</span><span class="sxs-lookup"><span data-stu-id="103ed-231">When the <xref:System.Windows.Controls.Page> that needs to be navigated to can only be determined at run time.</span></span>

<span data-ttu-id="103ed-232">このような場合は、<xref:System.Windows.Navigation.NavigationService> オブジェクトの <xref:System.Windows.Navigation.NavigationService.Navigate%2A> メソッドを呼び出すことによって、プログラムでナビゲーションを開始するコードを記述する必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-232">In these situations, you need to write code to programmatically initiate navigation by calling the <xref:System.Windows.Navigation.NavigationService.Navigate%2A> method of the <xref:System.Windows.Navigation.NavigationService> object.</span></span> <span data-ttu-id="103ed-233">そのためには、<xref:System.Windows.Navigation.NavigationService> への参照を取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-233">That requires getting a reference to a <xref:System.Windows.Navigation.NavigationService>.</span></span>

#### <a name="getting-a-reference-to-the-navigationservice"></a><span data-ttu-id="103ed-234">NavigationService への参照の取得</span><span class="sxs-lookup"><span data-stu-id="103ed-234">Getting a Reference to the NavigationService</span></span>

<span data-ttu-id="103ed-235">「[ナビゲーション ホスト](#Navigation_Hosts)」のセクションで説明した理由から、WPF アプリケーションでは複数の <xref:System.Windows.Navigation.NavigationService> を持つことができます。</span><span class="sxs-lookup"><span data-stu-id="103ed-235">For reasons that are covered in the [Navigation Hosts](#Navigation_Hosts) section, a WPF application can have more than one <xref:System.Windows.Navigation.NavigationService>.</span></span> <span data-ttu-id="103ed-236">これは、<xref:System.Windows.Navigation.NavigationService> (通常は、現在の <xref:System.Windows.Controls.Page> にナビゲートした <xref:System.Windows.Navigation.NavigationService>) を検索する手段がコードに必要なことを意味します。</span><span class="sxs-lookup"><span data-stu-id="103ed-236">This means that your code needs a way to find a <xref:System.Windows.Navigation.NavigationService>, which is usually the <xref:System.Windows.Navigation.NavigationService> that navigated to the current <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-237"><xref:System.Windows.Navigation.NavigationService> への参照は、`static` <xref:System.Windows.Navigation.NavigationService.GetNavigationService%2A?displayProperty=nameWithType> メソッドを呼び出すことによって取得できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-237">You can get a reference to a <xref:System.Windows.Navigation.NavigationService> by calling the `static`<xref:System.Windows.Navigation.NavigationService.GetNavigationService%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="103ed-238">特定の <xref:System.Windows.Controls.Page> にナビゲートした <xref:System.Windows.Navigation.NavigationService> を取得するには、<xref:System.Windows.Controls.Page> への参照を <xref:System.Windows.Navigation.NavigationService.GetNavigationService%2A> メソッドの引数として渡します。</span><span class="sxs-lookup"><span data-stu-id="103ed-238">To get the <xref:System.Windows.Navigation.NavigationService> that navigated to a particular <xref:System.Windows.Controls.Page>, you pass a reference to the <xref:System.Windows.Controls.Page> as the argument of the <xref:System.Windows.Navigation.NavigationService.GetNavigationService%2A> method.</span></span> <span data-ttu-id="103ed-239">次のコードでは、現在の <xref:System.Windows.Controls.Page> に対する <xref:System.Windows.Navigation.NavigationService> を取得する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-239">The following code shows how to get the <xref:System.Windows.Navigation.NavigationService> for the current <xref:System.Windows.Controls.Page>.</span></span>

[!code-csharp[NavigationOverviewSnippets#GetNSCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/GetNSPage.xaml.cs#getnscodebehind1)]
[!code-csharp[NavigationOverviewSnippets#GetNSCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/GetNSPage.xaml.cs#getnscodebehind2)]
[!code-vb[NavigationOverviewSnippets#GetNSCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/GetNSPage.xaml.vb#getnscodebehind2)]

<span data-ttu-id="103ed-240"><xref:System.Windows.Controls.Page> に対する <xref:System.Windows.Navigation.NavigationService> を検索するショートカットとして、<xref:System.Windows.Controls.Page> では <xref:System.Windows.Controls.Page.NavigationService%2A> プロパティが実装されています。</span><span class="sxs-lookup"><span data-stu-id="103ed-240">As a shortcut for finding the <xref:System.Windows.Navigation.NavigationService> for a <xref:System.Windows.Controls.Page>, <xref:System.Windows.Controls.Page> implements the <xref:System.Windows.Controls.Page.NavigationService%2A> property.</span></span> <span data-ttu-id="103ed-241">これを次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-241">This is shown in the following example.</span></span>

[!code-csharp[NavigationOverviewSnippets#GetNSShortcutCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/GetNSPageShortCut.xaml.cs#getnsshortcutcodebehind1)]
[!code-csharp[NavigationOverviewSnippets#GetNSShortcutCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/GetNSPageShortCut.xaml.cs#getnsshortcutcodebehind2)]
[!code-vb[NavigationOverviewSnippets#GetNSShortcutCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/GetNSPageShortCut.xaml.vb#getnsshortcutcodebehind2)]

> [!NOTE]
> <span data-ttu-id="103ed-242"><xref:System.Windows.Controls.Page> で <xref:System.Windows.FrameworkElement.Loaded> イベントが発生したとき、<xref:System.Windows.Controls.Page> ではその <xref:System.Windows.Navigation.NavigationService> に対する参照だけを取得できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-242">A <xref:System.Windows.Controls.Page> can only get a reference to its <xref:System.Windows.Navigation.NavigationService> when <xref:System.Windows.Controls.Page> raises the <xref:System.Windows.FrameworkElement.Loaded> event.</span></span>

#### <a name="programmatic-navigation-to-a-page-object"></a><span data-ttu-id="103ed-243">ページ オブジェクトへのプログラム ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-243">Programmatic Navigation to a Page Object</span></span>

<span data-ttu-id="103ed-244">次の例では、<xref:System.Windows.Navigation.NavigationService> を使用して、<xref:System.Windows.Controls.Page> にプログラムによってナビゲートする方法を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-244">The following example shows how to use the <xref:System.Windows.Navigation.NavigationService> to programmatically navigate to a <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-245">ナビゲート先の <xref:System.Windows.Controls.Page> は単一のパラメーターなしではないコンストラクターを使用しなければインスタンス化できないため、プログラム ナビゲーションが必要になります。</span><span class="sxs-lookup"><span data-stu-id="103ed-245">Programmatic navigation is required because the <xref:System.Windows.Controls.Page> that is being navigated to can only be instantiated using a single, non-parameterless constructor.</span></span> <span data-ttu-id="103ed-246">次のマークアップとコードでは、パラメーターなしではないコンストラクターを持つ <xref:System.Windows.Controls.Page> を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-246">The <xref:System.Windows.Controls.Page> with the non-parameterless constructor is shown in the following markup and code.</span></span>

[!code-xaml[NavigationOverviewSnippets#PageWithNonDefaultConstructorXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithNonDefaultConstructor.xaml#pagewithnondefaultconstructorxaml)]

[!code-csharp[NavigationOverviewSnippets#PageWithNonDefaultConstructorCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithNonDefaultConstructor.xaml.cs#pagewithnondefaultconstructorcodebehind)]
[!code-vb[NavigationOverviewSnippets#PageWithNonDefaultConstructorCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/PageWithNonDefaultConstructor.xaml.vb#pagewithnondefaultconstructorcodebehind)]

<span data-ttu-id="103ed-247">次のマークアップとコードでは、パラメーターなしではないコンストラクターを持つ <xref:System.Windows.Controls.Page> にナビゲートする <xref:System.Windows.Controls.Page> を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-247">The <xref:System.Windows.Controls.Page> that navigates to the <xref:System.Windows.Controls.Page> with the non-parameterless constructor is shown in the following markup and code.</span></span>

[!code-xaml[NavigationOverviewSnippets#NSNavigationPageXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSNavigationPage.xaml#nsnavigationpagexaml)]

[!code-csharp[NavigationOverviewSnippets#NSNavigationPageCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSNavigationPage.xaml.cs#nsnavigationpagecodebehind)]
[!code-vb[NavigationOverviewSnippets#NSNavigationPageCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/NSNavigationPage.xaml.vb#nsnavigationpagecodebehind)]

<span data-ttu-id="103ed-248">この <xref:System.Windows.Controls.Page> 上の <xref:System.Windows.Documents.Hyperlink> がクリックされると、パラメーターなしではないコンストラクターを使用し、<xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> メソッドを呼び出して、ナビゲート先の <xref:System.Windows.Controls.Page> をインスタンス化することによって、ナビゲーションが開始されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-248">When the <xref:System.Windows.Documents.Hyperlink> on this <xref:System.Windows.Controls.Page> is clicked, navigation is initiated by instantiating the <xref:System.Windows.Controls.Page> to navigate to using the non-parameterless constructor and calling the <xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="103ed-249"><xref:System.Windows.Navigation.NavigationService.Navigate%2A> では、パック URI ではなく、<xref:System.Windows.Navigation.NavigationService> がナビゲートするオブジェクトへの参照が受け入れられます。</span><span class="sxs-lookup"><span data-stu-id="103ed-249"><xref:System.Windows.Navigation.NavigationService.Navigate%2A> accepts a reference to the object that the <xref:System.Windows.Navigation.NavigationService> will navigate to, rather than a pack URI.</span></span>

#### <a name="programmatic-navigation-with-a-pack-uri"></a><span data-ttu-id="103ed-250">パック URI によるプログラム ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-250">Programmatic Navigation with a Pack URI</span></span>

<span data-ttu-id="103ed-251">パック URI をプログラムによって構築する必要がある場合 (たとえば、実行時にのみパック URI を決定できる場合など) は、<xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> メソッドを使用できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-251">If you need to construct a pack URI programmatically (when you can only determine the pack URI at run time, for example), you can use the <xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="103ed-252">これを次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-252">This is shown in the following example.</span></span>

[!code-xaml[NavigationOverviewSnippets#NSUriNavigationPageXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSUriNavigationPage.xaml#nsurinavigationpagexaml)]

[!code-csharp[NavigationOverviewSnippets#NSUriNavigationPageCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSUriNavigationPage.xaml.cs#nsurinavigationpagecodebehind)]
[!code-vb[NavigationOverviewSnippets#NSUriNavigationPageCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/NSUriNavigationPage.xaml.vb#nsurinavigationpagecodebehind)]

#### <a name="refreshing-the-current-page"></a><span data-ttu-id="103ed-253">現在のページの更新</span><span class="sxs-lookup"><span data-stu-id="103ed-253">Refreshing the Current Page</span></span>

<span data-ttu-id="103ed-254"><xref:System.Windows.Controls.Page> が <xref:System.Windows.Navigation.NavigationService.Source%2A?displayProperty=nameWithType> プロパティに格納されているパック URI と同じパック URI を持つ場合、このページはダウンロードされません。</span><span class="sxs-lookup"><span data-stu-id="103ed-254">A <xref:System.Windows.Controls.Page> is not downloaded if it has the same pack URI as the pack URI that is stored in the <xref:System.Windows.Navigation.NavigationService.Source%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="103ed-255">WPF で現在のページを強制的に再びダウンロードするには、次の例に示されているように、<xref:System.Windows.Navigation.NavigationService.Refresh%2A?displayProperty=nameWithType> メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="103ed-255">To force WPF to download the current page again, you can call the <xref:System.Windows.Navigation.NavigationService.Refresh%2A?displayProperty=nameWithType> method, as shown in the following example.</span></span>

[!code-xaml[NavigationOverviewSnippets#NSRefreshNavigationPageXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSRefreshNavigationPage.xaml#nsrefreshnavigationpagexaml1)]

[!code-csharp[NavigationOverviewSnippets#NSRefreshNavigationPageCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSRefreshNavigationPage.xaml.cs#nsrefreshnavigationpagecodebehind1)]
[!code-vb[NavigationOverviewSnippets#NSRefreshNavigationPageCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/NSRefreshNavigationPage.xaml.vb#nsrefreshnavigationpagecodebehind1)]
[!code-csharp[NavigationOverviewSnippets#NSRefreshNavigationPageCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NSRefreshNavigationPage.xaml.cs#nsrefreshnavigationpagecodebehind2)]
[!code-vb[NavigationOverviewSnippets#NSRefreshNavigationPageCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/NSRefreshNavigationPage.xaml.vb#nsrefreshnavigationpagecodebehind2)]

<a name="Navigation_Lifetime"></a>

### <a name="navigation-lifetime"></a><span data-ttu-id="103ed-256">ナビゲーションの有効期間</span><span class="sxs-lookup"><span data-stu-id="103ed-256">Navigation Lifetime</span></span>

<span data-ttu-id="103ed-257">これまでに説明したように、ナビゲーションを開始するには多くの方法があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-257">There are many ways to initiate navigation, as you've seen.</span></span> <span data-ttu-id="103ed-258">ナビゲーションが開始されると、ナビゲーション中に、<xref:System.Windows.Navigation.NavigationService> によって実装される次のイベントを使用して、ナビゲーションを追跡および制御できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-258">When navigation is initiated, and while navigation is in progress, you can track and influence the navigation using the following events that are implemented by <xref:System.Windows.Navigation.NavigationService>:</span></span>

- <span data-ttu-id="103ed-259"><xref:System.Windows.Navigation.NavigationService.Navigating>。</span><span class="sxs-lookup"><span data-stu-id="103ed-259"><xref:System.Windows.Navigation.NavigationService.Navigating>.</span></span> <span data-ttu-id="103ed-260">新しいナビゲーションが要求されたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-260">Occurs when a new navigation is requested.</span></span> <span data-ttu-id="103ed-261">ナビゲーションのキャンセルに使用できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-261">Can be used to cancel the navigation.</span></span>

- <span data-ttu-id="103ed-262"><xref:System.Windows.Navigation.NavigationService.NavigationProgress>。</span><span class="sxs-lookup"><span data-stu-id="103ed-262"><xref:System.Windows.Navigation.NavigationService.NavigationProgress>.</span></span> <span data-ttu-id="103ed-263">ナビゲーション進行状況の情報提供を目的として、ダウンロード中に定期的に発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-263">Occurs periodically during a download to provide navigation progress information.</span></span>

- <span data-ttu-id="103ed-264"><xref:System.Windows.Navigation.NavigationService.Navigated>。</span><span class="sxs-lookup"><span data-stu-id="103ed-264"><xref:System.Windows.Navigation.NavigationService.Navigated>.</span></span> <span data-ttu-id="103ed-265">ページの位置が特定され、ダウンロードされたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-265">Occurs when the page has been located and downloaded.</span></span>

- <span data-ttu-id="103ed-266"><xref:System.Windows.Navigation.NavigationService.NavigationStopped>。</span><span class="sxs-lookup"><span data-stu-id="103ed-266"><xref:System.Windows.Navigation.NavigationService.NavigationStopped>.</span></span> <span data-ttu-id="103ed-267">ナビゲーションが停止されたとき (<xref:System.Windows.Navigation.NavigationService.StopLoading%2A> を呼び出すことによって)、または現在のナビゲーションの進行中に新しいナビゲーションが要求されたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-267">Occurs when the navigation is stopped (by calling <xref:System.Windows.Navigation.NavigationService.StopLoading%2A>), or when a new navigation is requested while a current navigation is in progress.</span></span>

- <span data-ttu-id="103ed-268"><xref:System.Windows.Navigation.NavigationService.NavigationFailed>。</span><span class="sxs-lookup"><span data-stu-id="103ed-268"><xref:System.Windows.Navigation.NavigationService.NavigationFailed>.</span></span> <span data-ttu-id="103ed-269">要求されたコンテンツにナビゲートするときにエラーが発生したときに発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-269">Occurs when an error is raised while navigating to the requested content.</span></span>

- <span data-ttu-id="103ed-270"><xref:System.Windows.Navigation.NavigationService.LoadCompleted>。</span><span class="sxs-lookup"><span data-stu-id="103ed-270"><xref:System.Windows.Navigation.NavigationService.LoadCompleted>.</span></span> <span data-ttu-id="103ed-271">ナビゲート先のコンテンツが読み込まれ、解析されて、レンダリングが開始されたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-271">Occurs when content that was navigated to is loaded and parsed, and has begun rendering.</span></span>

- <span data-ttu-id="103ed-272"><xref:System.Windows.Navigation.NavigationService.FragmentNavigation>。</span><span class="sxs-lookup"><span data-stu-id="103ed-272"><xref:System.Windows.Navigation.NavigationService.FragmentNavigation>.</span></span> <span data-ttu-id="103ed-273">コンテンツ フラグメントへのナビゲーションが開始されたときに、次のタイミングで発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-273">Occurs when navigation to a content fragment begins, which happens:</span></span>

  - <span data-ttu-id="103ed-274">目的のフラグメントが現在のコンテンツの場合は、すぐに発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-274">Immediately, if the desired fragment is in the current content.</span></span>

  - <span data-ttu-id="103ed-275">目的のフラグメントが別のコンテンツにある場合は、ソース コンテンツが読み込まれた後で発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-275">After the source content has been loaded, if the desired fragment is in different content.</span></span>

<span data-ttu-id="103ed-276">ナビゲーション イベントは、次の図に示されている順序で発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-276">The navigation events are raised in the order that is illustrated by the following figure.</span></span>

<span data-ttu-id="103ed-277">![ページ ナビゲーションのフロー チャート](./media/navigation-overview/order-of-navigation-events.png "ページ ナビゲーション イベントのフロー チャート")</span><span class="sxs-lookup"><span data-stu-id="103ed-277">![Page navigation flow chart](./media/navigation-overview/order-of-navigation-events.png "Page navigation event flow chart")</span></span>

<span data-ttu-id="103ed-278">一般に、<xref:System.Windows.Controls.Page> は、これらのイベントの影響を受けません。</span><span class="sxs-lookup"><span data-stu-id="103ed-278">In general, a <xref:System.Windows.Controls.Page> isn't concerned about these events.</span></span> <span data-ttu-id="103ed-279">アプリケーションは、これらのイベントの影響を受ける可能性が高いため、これらのイベントは <xref:System.Windows.Application> クラスによっても発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-279">It is more likely that an application is concerned with them and, for that reason, these events are also raised by the <xref:System.Windows.Application> class:</span></span>

- <xref:System.Windows.Application.Navigating?displayProperty=nameWithType>

- <xref:System.Windows.Application.NavigationProgress?displayProperty=nameWithType>

- <xref:System.Windows.Application.Navigated?displayProperty=nameWithType>

- <xref:System.Windows.Application.NavigationFailed?displayProperty=nameWithType>

- <xref:System.Windows.Application.NavigationStopped?displayProperty=nameWithType>

- <xref:System.Windows.Application.LoadCompleted?displayProperty=nameWithType>

- <xref:System.Windows.Application.FragmentNavigation?displayProperty=nameWithType>

<span data-ttu-id="103ed-280"><xref:System.Windows.Navigation.NavigationService> によってイベントが発生するたびに、<xref:System.Windows.Application> クラスでは対応するイベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-280">Every time <xref:System.Windows.Navigation.NavigationService> raises an event, the <xref:System.Windows.Application> class raises the corresponding event.</span></span> <span data-ttu-id="103ed-281"><xref:System.Windows.Controls.Frame> と <xref:System.Windows.Navigation.NavigationWindow> では、それぞれのスコープ内でナビゲーションを検出するために、同じイベントが提供されています。</span><span class="sxs-lookup"><span data-stu-id="103ed-281"><xref:System.Windows.Controls.Frame> and <xref:System.Windows.Navigation.NavigationWindow> offer the same events to detect navigation within their respective scopes.</span></span>

<span data-ttu-id="103ed-282">場合によっては、<xref:System.Windows.Controls.Page> がこれらのイベントに関与することがあります。</span><span class="sxs-lookup"><span data-stu-id="103ed-282">In some cases, a <xref:System.Windows.Controls.Page> might be interested in these events.</span></span> <span data-ttu-id="103ed-283">たとえば、<xref:System.Windows.Controls.Page> では、<xref:System.Windows.Navigation.NavigationService.Navigating?displayProperty=nameWithType> イベントを処理して、そのページ以外へのナビゲーションをキャンセルするかどうかを決定することがあります。</span><span class="sxs-lookup"><span data-stu-id="103ed-283">For example, a <xref:System.Windows.Controls.Page> might handle the <xref:System.Windows.Navigation.NavigationService.Navigating?displayProperty=nameWithType> event to determine whether or not to cancel navigation away from itself.</span></span> <span data-ttu-id="103ed-284">これを次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-284">This is shown in the following example.</span></span>

[!code-xaml[NavigationOverviewSnippets#CancelNavigationPageXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/CancelNavigationPage.xaml#cancelnavigationpagexaml)]

[!code-csharp[NavigationOverviewSnippets#CancelNavigationPageCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/CancelNavigationPage.xaml.cs#cancelnavigationpagecodebehind)]
[!code-vb[NavigationOverviewSnippets#CancelNavigationPageCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/CancelNavigationPage.xaml.vb#cancelnavigationpagecodebehind)]

<span data-ttu-id="103ed-285">前の例で行ったように、<xref:System.Windows.Controls.Page> からのナビゲーション イベントにハンドラーを登録した場合は、イベント ハンドラーの登録解除も行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-285">If you register a handler with a navigation event from a <xref:System.Windows.Controls.Page>, as the preceding example does, you must also unregister the event handler.</span></span> <span data-ttu-id="103ed-286">解除しなかった場合、WPF ナビゲーションが履歴を使用して <xref:System.Windows.Controls.Page> ナビゲーションを記憶する方法に関して、副作用が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-286">If you don't, there may be side effects with respect to how WPF navigation remembers <xref:System.Windows.Controls.Page> navigation using the journal.</span></span>

<a name="NavigationHistory"></a>

### <a name="remembering-navigation-with-the-journal"></a><span data-ttu-id="103ed-287">履歴によるナビゲーションの記憶</span><span class="sxs-lookup"><span data-stu-id="103ed-287">Remembering Navigation with the Journal</span></span>

<span data-ttu-id="103ed-288">WPF では、戻るスタックと進むスタックの 2 つのスタックを使用して、ナビゲート元のページが記憶されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-288">WPF uses two stacks to remember the pages that you have navigated from: a back stack and a forward stack.</span></span> <span data-ttu-id="103ed-289">現在の <xref:System.Windows.Controls.Page> から新しい <xref:System.Windows.Controls.Page> にナビゲートするか、既存の <xref:System.Windows.Controls.Page> に進むときは、現在の <xref:System.Windows.Controls.Page> が "*戻るスタック*" に追加されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-289">When you navigate from the current <xref:System.Windows.Controls.Page> to a new <xref:System.Windows.Controls.Page> or forward to an existing <xref:System.Windows.Controls.Page>, the current <xref:System.Windows.Controls.Page> is added to the *back stack*.</span></span> <span data-ttu-id="103ed-290">現在の <xref:System.Windows.Controls.Page> から前の <xref:System.Windows.Controls.Page> に戻るときは、現在の <xref:System.Windows.Controls.Page> が "*進むスタック*" に追加されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-290">When you navigate from the current <xref:System.Windows.Controls.Page> back to the previous <xref:System.Windows.Controls.Page>, the current <xref:System.Windows.Controls.Page> is added to the *forward stack*.</span></span> <span data-ttu-id="103ed-291">戻るスタック、進むスタック、およびそれらを管理する機能を、まとめて履歴と呼びます。</span><span class="sxs-lookup"><span data-stu-id="103ed-291">The back stack, the forward stack, and the functionality to manage them, are collectively referred to as the journal.</span></span> <span data-ttu-id="103ed-292">戻るスタックと進むスタックの各項目は、<xref:System.Windows.Navigation.JournalEntry> クラスのインスタンスであり、"*履歴エントリ*" と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="103ed-292">Each item in the back stack and the forward stack is an instance of the <xref:System.Windows.Navigation.JournalEntry> class, and is referred to as a *journal entry*.</span></span>

#### <a name="navigating-the-journal-from-internet-explorer"></a><span data-ttu-id="103ed-293">Internet Explorer からの履歴のナビゲート</span><span class="sxs-lookup"><span data-stu-id="103ed-293">Navigating the Journal from Internet Explorer</span></span>

<span data-ttu-id="103ed-294">概念として、履歴は、Internet Explorer の **[戻る]** ボタンと **[進む]** ボタンと同じように機能します。</span><span class="sxs-lookup"><span data-stu-id="103ed-294">Conceptually, the journal operates the same way that the **Back** and **Forward** buttons in Internet Explorer do.</span></span> <span data-ttu-id="103ed-295">これを次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-295">These are shown in the following figure.</span></span>

<span data-ttu-id="103ed-296">![[戻る] ボタンと [次に進む] ボタン](./media/navigation-overview/back-and-forward-navigation.png "[戻る] ボタンと [進む] ボタンでナビゲートします。")</span><span class="sxs-lookup"><span data-stu-id="103ed-296">![Back and Forward buttons](./media/navigation-overview/back-and-forward-navigation.png "Navigate with the back and forward buttons.")</span></span>

<span data-ttu-id="103ed-297">Internet Explorer によってホストされる XBAP の場合、WPF では、履歴が Internet Explorer のナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] に統合されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-297">For XBAPs that are hosted by Internet Explorer, WPF integrates the journal into the navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] of Internet Explorer.</span></span> <span data-ttu-id="103ed-298">これにより、ユーザーは、Internet Explorer の **[戻る]** 、 **[進む]** 、 **[最近表示したページ]** ボタンを使用して、XBAP のページ間をナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-298">This allows users to navigate pages in an XBAP by using the **Back**, **Forward**, and **Recent Pages** buttons in Internet Explorer.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="103ed-299">Internet Explorer では、ユーザーが XBAP との間でナビゲートすると、キープ アライブされなかったページの履歴項目のみが履歴に保持されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-299">In Internet Explorer, when a user navigates away from and back to an XBAP, only the journal entries for pages that were not kept alive are retained in the journal.</span></span> <span data-ttu-id="103ed-300">ページのキープ アライブについては、このトピックで後述する「[ページの有効期間と履歴](#PageLifetime)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-300">For discussion on keeping pages alive, see [Page Lifetime and the Journal](#PageLifetime) later in this topic.</span></span>

<span data-ttu-id="103ed-301">既定では、Internet Explorer の **[最近表示したページ]** の一覧に表示される各 <xref:System.Windows.Controls.Page> のテキストは、<xref:System.Windows.Controls.Page> の URI です。</span><span class="sxs-lookup"><span data-stu-id="103ed-301">By default, the text for each <xref:System.Windows.Controls.Page> that appears in the **Recent Pages** list of Internet Explorer is the URI for the <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-302">多くの場合、これは、ユーザーにとって特に意味がありません。</span><span class="sxs-lookup"><span data-stu-id="103ed-302">In many cases, this is not particularly meaningful to the user.</span></span> <span data-ttu-id="103ed-303">幸い、次のオプションのいずれかを使用して、テキストを変更できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-303">Fortunately, you can change the text using one the following options:</span></span>

1. <span data-ttu-id="103ed-304">添付 `JournalEntry.Name` 属性値。</span><span class="sxs-lookup"><span data-stu-id="103ed-304">The attached `JournalEntry.Name` attribute value.</span></span>

2. <span data-ttu-id="103ed-305">`Page.Title` 属性値。</span><span class="sxs-lookup"><span data-stu-id="103ed-305">The `Page.Title` attribute value.</span></span>

3. <span data-ttu-id="103ed-306">`Page.WindowTitle` 属性値と現在の <xref:System.Windows.Controls.Page> の URI。</span><span class="sxs-lookup"><span data-stu-id="103ed-306">The `Page.WindowTitle` attribute value and the URI for the current <xref:System.Windows.Controls.Page>.</span></span>

4. <span data-ttu-id="103ed-307">現在の <xref:System.Windows.Controls.Page> の URI。</span><span class="sxs-lookup"><span data-stu-id="103ed-307">The URI for the current <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-308">(既定)</span><span class="sxs-lookup"><span data-stu-id="103ed-308">(Default)</span></span>

<span data-ttu-id="103ed-309">これらのオプションの順序は、テキスト検索の優先順位と一致します。</span><span class="sxs-lookup"><span data-stu-id="103ed-309">The order in which the options are listed matches the order of precedence for finding the text.</span></span> <span data-ttu-id="103ed-310">たとえば、`JournalEntry.Name` が設定された場合、他の値は無視されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-310">For example, if `JournalEntry.Name` is set, the other values are ignored.</span></span>

<span data-ttu-id="103ed-311">次の例では、`Page.Title` 属性を使用して、履歴エントリに表示されるテキストを変更します。</span><span class="sxs-lookup"><span data-stu-id="103ed-311">The following example uses the `Page.Title` attribute to change the text that appears for a journal entry.</span></span>

[!code-xaml[NavigationOverviewSnippets#PageTitleMARKUP1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithTitle.xaml#pagetitlemarkup1)]
[!code-xaml[NavigationOverviewSnippets#PageTitleMARKUP2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithTitle.xaml#pagetitlemarkup2)]

[!code-csharp[NavigationOverviewSnippets#PageTitleCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithTitle.xaml.cs#pagetitlecodebehind1)]
[!code-vb[NavigationOverviewSnippets#PageTitleCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/PageWithTitle.xaml.vb#pagetitlecodebehind1)]
[!code-csharp[NavigationOverviewSnippets#PageTitleCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/PageWithTitle.xaml.cs#pagetitlecodebehind2)]
[!code-vb[NavigationOverviewSnippets#PageTitleCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigationOverviewSnippets/VisualBasic/PageWithTitle.xaml.vb#pagetitlecodebehind2)]

#### <a name="navigating-the-journal-using-wpf"></a><span data-ttu-id="103ed-312">WPF を使用する履歴のナビゲート</span><span class="sxs-lookup"><span data-stu-id="103ed-312">Navigating the Journal Using WPF</span></span>

<span data-ttu-id="103ed-313">ユーザーは Internet Explorer の **[戻る]** 、 **[進む]** 、 **[最近表示したページ]** を使用して履歴をナビゲートできますが、WPF によって提供される宣言およびプログラム メカニズムを使用して履歴をナビゲートすることもできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-313">Although a user can navigate the journal by using the **Back**, **Forward**, and **Recent Pages** in Internet Explorer, you can also navigate the journal using both declarative and programmatic mechanisms provided by WPF.</span></span> <span data-ttu-id="103ed-314">これを行う理由の 1 つは、カスタム ナビゲーション UI をページに表示するためです。</span><span class="sxs-lookup"><span data-stu-id="103ed-314">One reason to do this is to provide custom navigation UIs in your pages.</span></span>

<span data-ttu-id="103ed-315"><xref:System.Windows.Input.NavigationCommands> によって公開されるナビゲーション コマンドを使用して、宣言によって履歴ナビゲーション サポートを追加できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-315">You can declaratively add journal navigation support by using the navigation commands exposed by <xref:System.Windows.Input.NavigationCommands>.</span></span> <span data-ttu-id="103ed-316">次の例では、`BrowseBack` ナビゲーション コマンドの使用方法を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-316">The following example demonstrates how to use the `BrowseBack` navigation command.</span></span>

[!code-xaml[NavigationOverviewSnippets#NavigationCommandsPageXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NavigationCommandsPage.xaml#navigationcommandspagexaml1)]
[!code-xaml[NavigationOverviewSnippets#NavigationCommandsPageXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NavigationCommandsPage.xaml#navigationcommandspagexaml2)]
[!code-xaml[NavigationOverviewSnippets#NavigationCommandsPageXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NavigationCommandsPage.xaml#navigationcommandspagexaml3)]
[!code-xaml[NavigationOverviewSnippets#NavigationCommandsPageXAML4](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/NavigationCommandsPage.xaml#navigationcommandspagexaml4)]

<span data-ttu-id="103ed-317"><xref:System.Windows.Navigation.NavigationService> クラスの次のメンバーのいずれかを使用して、プログラムによって履歴をナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-317">You can programmatically navigate the journal by using one of the following members of the <xref:System.Windows.Navigation.NavigationService> class:</span></span>

- <xref:System.Windows.Navigation.NavigationService.GoBack%2A>

- <xref:System.Windows.Navigation.NavigationService.GoForward%2A>

- <xref:System.Windows.Navigation.NavigationService.CanGoBack%2A>

- <xref:System.Windows.Navigation.NavigationService.CanGoForward%2A>

<span data-ttu-id="103ed-318">このトピックの「[ナビゲーション履歴によるコンテンツ状態の保持](#RetainingContentStateWithNavigationHistory)」で説明するように、プログラムによって履歴を操作することも可能です。</span><span class="sxs-lookup"><span data-stu-id="103ed-318">The journal can also be manipulated programmatically, as discussed in [Retaining Content State with Navigation History](#RetainingContentStateWithNavigationHistory) later in this topic.</span></span>

<a name="PageLifetime"></a>

### <a name="page-lifetime-and-the-journal"></a><span data-ttu-id="103ed-319">ページの有効期間と履歴</span><span class="sxs-lookup"><span data-stu-id="103ed-319">Page Lifetime and the Journal</span></span>

<span data-ttu-id="103ed-320">グラフィックス、アニメーション、メディアなどのリッチ コンテンツを含む複数のページがある XBAP を考えてみます。</span><span class="sxs-lookup"><span data-stu-id="103ed-320">Consider an XBAP with several pages that contain rich content, including graphics, animations, and media.</span></span> <span data-ttu-id="103ed-321">このようなページのメモリ使用量は、特にビデオやオーディオ メディアが使用されている場合、非常に大きくなることがあります。</span><span class="sxs-lookup"><span data-stu-id="103ed-321">The memory footprint for pages like these could be quite large, particularly if video and audio media are used.</span></span> <span data-ttu-id="103ed-322">履歴がナビゲート先のページを "記憶" することを考えると、このような XBAP はすぐに大量のメモリを消費する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-322">Given that the journal "remembers" pages that have been navigated to, such an XBAP could quickly consume a large and noticeable amount of memory.</span></span>

<span data-ttu-id="103ed-323">このため、履歴の既定の動作では、<xref:System.Windows.Controls.Page> オブジェクトへの参照ではなく、<xref:System.Windows.Controls.Page> メタデータが各履歴エントリに格納されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-323">For this reason, the default behavior of the journal is to store <xref:System.Windows.Controls.Page> metadata in each journal entry rather than a reference to a <xref:System.Windows.Controls.Page> object.</span></span> <span data-ttu-id="103ed-324">履歴エントリにナビゲートすると、その <xref:System.Windows.Controls.Page> メタデータを使用して、指定された <xref:System.Windows.Controls.Page> の新しいインスタンスが作成されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-324">When a journal entry is navigated to, its <xref:System.Windows.Controls.Page> metadata is used to create a new instance of the specified <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-325">その結果、ナビゲートされた各 <xref:System.Windows.Controls.Page> の有効期間は、次の図のようになります。</span><span class="sxs-lookup"><span data-stu-id="103ed-325">As a consequence, each <xref:System.Windows.Controls.Page> that is navigated has the lifetime that is illustrated by the following figure.</span></span>

<span data-ttu-id="103ed-326">![ページの有効期間](./media/navigation-overview/navigated-page-lifetime.png "これは、ページがナビゲートされるときの有効期間を示します。")</span><span class="sxs-lookup"><span data-stu-id="103ed-326">![Page lifetime](./media/navigation-overview/navigated-page-lifetime.png "This shows the lifetime when a page is navigated.")</span></span>

<span data-ttu-id="103ed-327">既定の履歴動作を使用すると、メモリ消費量を節約できますが、特にコンテンツが多い場合は、ページごとのレンダリングのパフォーマンスが低下し、<xref:System.Windows.Controls.Page> の再インスタンス化に時間がかかることがあります。</span><span class="sxs-lookup"><span data-stu-id="103ed-327">Although using the default journaling behavior can save on memory consumption, per-page rendering performance might be reduced; reinstantiating a <xref:System.Windows.Controls.Page> can be time-intensive, particularly if it has a lot of content.</span></span> <span data-ttu-id="103ed-328"><xref:System.Windows.Controls.Page> インスタンスを履歴に保持する必要がある場合、2 つの方法があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-328">If you need to retain a <xref:System.Windows.Controls.Page> instance in the journal, you can draw on two techniques for doing so.</span></span> <span data-ttu-id="103ed-329">1 つ目の方法は、<xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> メソッドを呼び出すことによって、<xref:System.Windows.Controls.Page> オブジェクトにプログラムでナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-329">First, you can programmatically navigate to a <xref:System.Windows.Controls.Page> object by calling the <xref:System.Windows.Navigation.NavigationService.Navigate%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="103ed-330">2 つ目の方法は、<xref:System.Windows.Controls.Page.KeepAlive%2A> プロパティを `true` (既定値は `false`) に設定することによって、WPF で <xref:System.Windows.Controls.Page> のインスタンスを保持するように指定することができます。</span><span class="sxs-lookup"><span data-stu-id="103ed-330">Second, you can specify that WPF retain an instance of a <xref:System.Windows.Controls.Page> in the journal by setting the <xref:System.Windows.Controls.Page.KeepAlive%2A> property to `true` (the default is `false`).</span></span> <span data-ttu-id="103ed-331">次の例に示されているように、マークアップで宣言することによって、<xref:System.Windows.Controls.Page.KeepAlive%2A> を設定することができます。</span><span class="sxs-lookup"><span data-stu-id="103ed-331">As shown in the following example, you can set <xref:System.Windows.Controls.Page.KeepAlive%2A> declaratively in markup.</span></span>

[!code-xaml[NavigationOverviewSnippets#KeepAlivePageXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/KeepAlivePage.xaml#keepalivepagexaml)]

<span data-ttu-id="103ed-332">キープ アライブされる <xref:System.Windows.Controls.Page> の有効期間とキープ アライブされないページの有効期間は、わずかに異なります。</span><span class="sxs-lookup"><span data-stu-id="103ed-332">The lifetime of a <xref:System.Windows.Controls.Page> that is kept alive is subtly different from one that is not.</span></span> <span data-ttu-id="103ed-333">キープ アライブされる <xref:System.Windows.Controls.Page> に最初にナビゲートするときには、キープ アライブされない <xref:System.Windows.Controls.Page> と同様にインスタンス化されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-333">The first time a <xref:System.Windows.Controls.Page> that is kept alive is navigated to, it is instantiated just like a <xref:System.Windows.Controls.Page> that is not kept alive.</span></span> <span data-ttu-id="103ed-334">ただし、<xref:System.Windows.Controls.Page> のインスタンスは履歴に保持されているため、履歴に保持されている限り、再びインスタンス化されることはありません。</span><span class="sxs-lookup"><span data-stu-id="103ed-334">However, because an instance of the <xref:System.Windows.Controls.Page> is retained in the journal, it is never instantiated again for as long as it remains in the journal.</span></span> <span data-ttu-id="103ed-335">その結果、<xref:System.Windows.Controls.Page> へのナビゲートが行われるたびに呼び出す必要がある初期化ロジックが <xref:System.Windows.Controls.Page> にある場合、それをコンストラクターから <xref:System.Windows.FrameworkElement.Loaded> イベントのハンドラーに移動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-335">Consequently, if a <xref:System.Windows.Controls.Page> has initialization logic that needs to be called every time the <xref:System.Windows.Controls.Page> is navigated to, you should move it from the constructor into a handler for the <xref:System.Windows.FrameworkElement.Loaded> event.</span></span> <span data-ttu-id="103ed-336">このようにしても、次の図に示されているように、<xref:System.Windows.Controls.Page> がナビゲート先およびナビゲート元になるたびに、それぞれ <xref:System.Windows.FrameworkElement.Loaded> イベントと <xref:System.Windows.FrameworkElement.Unloaded> イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="103ed-336">As shown in the following figure, the <xref:System.Windows.FrameworkElement.Loaded> and <xref:System.Windows.FrameworkElement.Unloaded> events are still raised each time a <xref:System.Windows.Controls.Page> is navigated to and from, respectively.</span></span>

<span data-ttu-id="103ed-337">![Loaded イベントと Unloaded イベントが発生した場合](./media/navigation-overview/loaded-and-unloaded-events.png "ページがナビゲートされると、読み込みイベントとアンロード イベントが発生します。")</span><span class="sxs-lookup"><span data-stu-id="103ed-337">![When the Loaded and Unloaded events are raised](./media/navigation-overview/loaded-and-unloaded-events.png "Loaded and unloaded events are raised when a page is navigated to and from.")</span></span>

<span data-ttu-id="103ed-338"><xref:System.Windows.Controls.Page> がキープ ア ライブされないときは、次のいずれの操作も行わないでください。</span><span class="sxs-lookup"><span data-stu-id="103ed-338">When a <xref:System.Windows.Controls.Page> is not kept alive, you should not do either of the following:</span></span>

- <span data-ttu-id="103ed-339">ページへの参照、またはその一部への参照を格納する。</span><span class="sxs-lookup"><span data-stu-id="103ed-339">Store a reference to it, or any part of it.</span></span>

- <span data-ttu-id="103ed-340">ページによって実装されていないイベントのイベント ハンドラーを登録する。</span><span class="sxs-lookup"><span data-stu-id="103ed-340">Register event handlers with events that are not implemented by it.</span></span>

<span data-ttu-id="103ed-341">このいずれかの操作を行うと、<xref:System.Windows.Controls.Page> が履歴から削除された後も、強制的にメモリに保持される参照が作成されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-341">Doing either of these will create references that force the <xref:System.Windows.Controls.Page> to be retained in memory, even after it has been removed from the journal.</span></span>

<span data-ttu-id="103ed-342">一般に、<xref:System.Windows.Controls.Page> をキープ アライブしない <xref:System.Windows.Controls.Page> の既定の動作を優先する必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-342">In general, you should prefer the default <xref:System.Windows.Controls.Page> behavior of not keeping a <xref:System.Windows.Controls.Page> alive.</span></span> <span data-ttu-id="103ed-343">ただし、これには、次のセクションで説明されている状態も関係します。</span><span class="sxs-lookup"><span data-stu-id="103ed-343">However, this has state implications that are discussed in the next section.</span></span>

<a name="RetainingContentStateWithNavigationHistory"></a>

### <a name="retaining-content-state-with-navigation-history"></a><span data-ttu-id="103ed-344">ナビゲーション履歴によるコンテンツの状態の保持</span><span class="sxs-lookup"><span data-stu-id="103ed-344">Retaining Content State with Navigation History</span></span>

<span data-ttu-id="103ed-345"><xref:System.Windows.Controls.Page> がキープ アライブされず、ユーザーからデータを収集するコントロールを持っている場合、ユーザーが <xref:System.Windows.Controls.Page> からナビゲートしたり、そこに戻ったりすると、データに何が起きるでしょうか。</span><span class="sxs-lookup"><span data-stu-id="103ed-345">If a <xref:System.Windows.Controls.Page> is not kept alive, and it has controls that collect data from the user, what happens to the data if a user navigates away from and back to the <xref:System.Windows.Controls.Page>?</span></span> <span data-ttu-id="103ed-346">ユーザー エクスペリエンスの観点から見ると、ユーザーは以前に入力したデータが表示されることを期待します。</span><span class="sxs-lookup"><span data-stu-id="103ed-346">From a user experience perspective, the user should expect to see the data they entered previously.</span></span> <span data-ttu-id="103ed-347">残念ながら、ナビゲーションごとに <xref:System.Windows.Controls.Page> の新しいインスタンスが作成されるため、データを収集したコントロールが再インスタンス化されて、データは失われます。</span><span class="sxs-lookup"><span data-stu-id="103ed-347">Unfortunately, because a new instance of the <xref:System.Windows.Controls.Page> is created with each navigation, the controls that collected the data are reinstantiated and the data is lost.</span></span>

<span data-ttu-id="103ed-348">幸いにも、履歴では <xref:System.Windows.Controls.Page> ナビゲーション間をまたいでデータ (コントロール データなど) を記憶するサポートが提供されています。</span><span class="sxs-lookup"><span data-stu-id="103ed-348">Fortunately, the journal provides support for remembering data across <xref:System.Windows.Controls.Page> navigations, including control data.</span></span> <span data-ttu-id="103ed-349">具体的には、各 <xref:System.Windows.Controls.Page> の履歴エントリは、関連付けられた <xref:System.Windows.Controls.Page> の状態の一時的なコンテナーとして機能します。</span><span class="sxs-lookup"><span data-stu-id="103ed-349">Specifically, the journal entry for each <xref:System.Windows.Controls.Page> acts as a temporary container for the associated <xref:System.Windows.Controls.Page> state.</span></span> <span data-ttu-id="103ed-350">次の手順では、<xref:System.Windows.Controls.Page> からナビゲートするときに、このサポートがどのように使用されるかを示しています。</span><span class="sxs-lookup"><span data-stu-id="103ed-350">The following steps outline how this support is used when a <xref:System.Windows.Controls.Page> is navigated from:</span></span>

1. <span data-ttu-id="103ed-351">現在の <xref:System.Windows.Controls.Page> のエントリが履歴に追加されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-351">An entry for the current <xref:System.Windows.Controls.Page> is added to the journal.</span></span>

2. <span data-ttu-id="103ed-352"><xref:System.Windows.Controls.Page> の状態が、そのページの履歴エントリに格納され、戻るスタックに追加されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-352">The state of the <xref:System.Windows.Controls.Page> is stored with the journal entry for that page, which is added to the back stack.</span></span>

3. <span data-ttu-id="103ed-353">新しい <xref:System.Windows.Controls.Page> にナビゲートします。</span><span class="sxs-lookup"><span data-stu-id="103ed-353">The new <xref:System.Windows.Controls.Page> is navigated to.</span></span>

<span data-ttu-id="103ed-354">履歴を使用して、<xref:System.Windows.Controls.Page> に戻るときには、次の手順が実行されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-354">When the page <xref:System.Windows.Controls.Page> is navigated back to, using the journal, the following steps take place:</span></span>

1. <span data-ttu-id="103ed-355"><xref:System.Windows.Controls.Page> (戻るスタックの先頭の履歴エントリ) がインスタンス化されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-355">The <xref:System.Windows.Controls.Page> (the top journal entry on the back stack) is instantiated.</span></span>

2. <span data-ttu-id="103ed-356"><xref:System.Windows.Controls.Page> の履歴エントリに格納された状態で、<xref:System.Windows.Controls.Page> が更新されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-356">The <xref:System.Windows.Controls.Page> is refreshed with the state that was stored with the journal entry for the <xref:System.Windows.Controls.Page>.</span></span>

3. <span data-ttu-id="103ed-357"><xref:System.Windows.Controls.Page> に戻ります。</span><span class="sxs-lookup"><span data-stu-id="103ed-357">The <xref:System.Windows.Controls.Page> is navigated back to.</span></span>

<span data-ttu-id="103ed-358"><xref:System.Windows.Controls.Page> で次のようなコントロールが使用されるとき、WPF では、このサポートが自動的に使用されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-358">WPF automatically uses this support when the following controls are used on a <xref:System.Windows.Controls.Page>:</span></span>

- <xref:System.Windows.Controls.CheckBox>

- <xref:System.Windows.Controls.ComboBox>

- <xref:System.Windows.Controls.Expander>

- <xref:System.Windows.Controls.Frame>

- <xref:System.Windows.Controls.ListBox>

- <xref:System.Windows.Controls.ListBoxItem>

- <xref:System.Windows.Controls.MenuItem>

- <xref:System.Windows.Controls.ProgressBar>

- <xref:System.Windows.Controls.RadioButton>

- <xref:System.Windows.Controls.Slider>

- <xref:System.Windows.Controls.TabControl>

- <xref:System.Windows.Controls.TabItem>

- <xref:System.Windows.Controls.TextBox>

<span data-ttu-id="103ed-359">次の図の **[Favorite Color]** <xref:System.Windows.Controls.ListBox> で示されているように、<xref:System.Windows.Controls.Page> でこれらのコントロールが使用される場合、これらに入力されたデータは、<xref:System.Windows.Controls.Page> ナビゲーション間をまたいで記憶されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-359">If a <xref:System.Windows.Controls.Page> uses these controls, data entered into them is remembered across <xref:System.Windows.Controls.Page> navigations, as demonstrated by the **Favorite Color**<xref:System.Windows.Controls.ListBox> in the following figure.</span></span>

<span data-ttu-id="103ed-360">![状態を記憶するコントロールを含むページ](./media/navigation-overview/data-remembered-across-page-navigations.png "入力されたデータは、ページ ナビゲーション間で記憶されます。")</span><span class="sxs-lookup"><span data-stu-id="103ed-360">![Page with controls that remember state](./media/navigation-overview/data-remembered-across-page-navigations.png "Data entered is remembered across page navigations.")</span></span>

<span data-ttu-id="103ed-361">前述の一覧にないコントロールが <xref:System.Windows.Controls.Page> に含まれている場合や、状態情報がカスタム オブジェクトに格納される場合、<xref:System.Windows.Controls.Page> ナビゲーション間をまたいで履歴に状態を記憶するコードを記述する必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-361">When a <xref:System.Windows.Controls.Page> has controls other than those in the preceding list, or when state is stored in custom objects, you need to write code to cause the journal to remember state across <xref:System.Windows.Controls.Page> navigations.</span></span>

<span data-ttu-id="103ed-362"><xref:System.Windows.Controls.Page> ナビゲーション間をまたいで少量の状態情報を記憶する必要がある場合、<xref:System.Windows.FrameworkPropertyMetadata.Journal%2A?displayProperty=nameWithType> メタデータ フラグを使用して構成される依存関係プロパティ (<xref:System.Windows.DependencyProperty> を参照) を使用できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-362">If you need to remember small pieces of state across <xref:System.Windows.Controls.Page> navigations, you can use dependency properties (see <xref:System.Windows.DependencyProperty>) that are configured with the <xref:System.Windows.FrameworkPropertyMetadata.Journal%2A?displayProperty=nameWithType> metadata flag.</span></span>

<span data-ttu-id="103ed-363">ナビゲーション間をまたいで状態を記憶する必要がある <xref:System.Windows.Controls.Page> が複数のデータで構成される場合、状態情報を 1 つのクラスにカプセル化して、<xref:System.Windows.Navigation.IProvideCustomContentState> インターフェイスを実装すると、コードが簡単になることがあります。</span><span class="sxs-lookup"><span data-stu-id="103ed-363">If the state that your <xref:System.Windows.Controls.Page> needs to remember across navigations comprises multiple pieces of data, you may find it less code intensive to encapsulate your state in a single class and implement the <xref:System.Windows.Navigation.IProvideCustomContentState> interface.</span></span>

<span data-ttu-id="103ed-364"><xref:System.Windows.Controls.Page> 自体からはナビゲートせずに、1 つの <xref:System.Windows.Controls.Page> のさまざまな状態をナビゲートする必要がある場合には、<xref:System.Windows.Navigation.IProvideCustomContentState> と <xref:System.Windows.Navigation.NavigationService.AddBackEntry%2A?displayProperty=nameWithType> を使用できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-364">If you need to navigate through various states of a single <xref:System.Windows.Controls.Page>, without navigating from the <xref:System.Windows.Controls.Page> itself, you can use <xref:System.Windows.Navigation.IProvideCustomContentState> and <xref:System.Windows.Navigation.NavigationService.AddBackEntry%2A?displayProperty=nameWithType>.</span></span>

<a name="Cookies"></a>

### <a name="cookies"></a><span data-ttu-id="103ed-365">クッキー</span><span class="sxs-lookup"><span data-stu-id="103ed-365">Cookies</span></span>

<span data-ttu-id="103ed-366">WPF アプリケーションでデータを格納するもう 1 つの方法は、クッキーを使用することです。Cookie は、<xref:System.Windows.Application.SetCookie%2A> メソッドと <xref:System.Windows.Application.GetCookie%2A> メソッドを使用して、作成、更新、および削除されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-366">Another way that WPF applications can store data is with cookies, which are created, updated, and deleted by using the <xref:System.Windows.Application.SetCookie%2A> and <xref:System.Windows.Application.GetCookie%2A> methods.</span></span> <span data-ttu-id="103ed-367">WPF で作成できる Cookie は、他の種類の Web アプリケーションが使用する Cookie と同じです。クッキーは、アプリケーション セッション中またはアプリケーション セッションにまたがって、クライアント コンピューター上にアプリケーションによって格納される任意のデータです。</span><span class="sxs-lookup"><span data-stu-id="103ed-367">The cookies that you can create in WPF are the same cookies that other types of Web applications use; cookies are arbitrary pieces of data that are stored by an application on a client machine either during or across application sessions.</span></span> <span data-ttu-id="103ed-368">クッキー データは、通常、次の形式の名前と値のペアです。</span><span class="sxs-lookup"><span data-stu-id="103ed-368">Cookie data typically takes the form of a name/value pair in the following format.</span></span>

<span data-ttu-id="103ed-369"><*名前*> `=` <*値*></span><span class="sxs-lookup"><span data-stu-id="103ed-369">*Name* `=` *Value*</span></span>

<span data-ttu-id="103ed-370">データが、Cookie を設定する位置の <xref:System.Uri> と共に <xref:System.Windows.Application.SetCookie%2A> に渡されると、メモリ内に Cookie が作成され、現在のアプリケーション セッションの期間中のみ使用可能です。</span><span class="sxs-lookup"><span data-stu-id="103ed-370">When the data is passed to <xref:System.Windows.Application.SetCookie%2A>, along with the <xref:System.Uri> of the location for which the cookie should be set, a cookie is created in-memory, and it is only available for the duration of the current application session.</span></span> <span data-ttu-id="103ed-371">この種類の Cookie は、"*セッション Cookie*" と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="103ed-371">This type of cookie is referred to as a *session cookie*.</span></span>

<span data-ttu-id="103ed-372">複数のアプリケーション セッションにまたがってクッキーを格納するには、次の形式を使用して、有効期限をクッキーに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="103ed-372">To store a cookie across application sessions, an expiration date must be added to the cookie, using the following format.</span></span>

<span data-ttu-id="103ed-373"><*名前*> `=` <*値*> `; expires=DAY, DD-MMM-YYYY HH:MM:SS GMT`</span><span class="sxs-lookup"><span data-stu-id="103ed-373">*NAME* `=` *VALUE* `; expires=DAY, DD-MMM-YYYY HH:MM:SS GMT`</span></span>

<span data-ttu-id="103ed-374">有効期限を持つ Cookie は、Cookie の有効期限が切れるまで、現在の Windows インストールのインターネット一時ファイル フォルダーに格納されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-374">A cookie with an expiration date is stored in the current Windows installation's Temporary Internet Files folder until the cookie expires.</span></span> <span data-ttu-id="103ed-375">このような Cookie は、アプリケーション セッションをまたいで存続するため、"*永続的な Cookie*" と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="103ed-375">Such a cookie is known as a *persistent cookie* because it persists across application sessions.</span></span>

<span data-ttu-id="103ed-376">セッション Cookie と永続的な Cookie の両方を取得するには、<xref:System.Windows.Application.GetCookie%2A> メソッドを呼び出し、<xref:System.Windows.Application.SetCookie%2A> メソッドで Cookie が設定された位置の <xref:System.Uri> を渡します。</span><span class="sxs-lookup"><span data-stu-id="103ed-376">You retrieve both session and persistent cookies by calling the <xref:System.Windows.Application.GetCookie%2A> method, passing the <xref:System.Uri> of the location where the cookie was set with the <xref:System.Windows.Application.SetCookie%2A> method.</span></span>

<span data-ttu-id="103ed-377">WPF で Cookie がどのようにサポートされるかを次に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-377">The following are some of the ways that cookies are supported in WPF:</span></span>

- <span data-ttu-id="103ed-378">WPF スタンドアロン アプリケーションと XBAP では、Cookie の作成と管理の両方を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="103ed-378">WPF standalone applications and XBAPs can both create and manage cookies.</span></span>

- <span data-ttu-id="103ed-379">XBAP によって作成された Cookie には、ブラウザーからアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-379">Cookies that are created by an XBAP can be accessed from the browser.</span></span>

- <span data-ttu-id="103ed-380">同じドメインの XBAP は、Cookie を作成して共有できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-380">XBAPs from the same domain can create and share cookies.</span></span>

- <span data-ttu-id="103ed-381">同じドメインの XBAP ページと HTML ページでは、Cookie を作成して共有できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-381">XBAPs and HTML pages from the same domain can create and share cookies.</span></span>

- <span data-ttu-id="103ed-382">XBAP ページと Loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ページで Web 要求が行われると、Cookie がディスパッチされます。</span><span class="sxs-lookup"><span data-stu-id="103ed-382">Cookies are dispatched when XBAPs and loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages make Web requests.</span></span>

- <span data-ttu-id="103ed-383">最上位の XBAP と IFRAMES でホストされる XBAP のどちらでも、Cookie にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-383">Both top-level XBAPs and XBAPs hosted in IFRAMES can access cookies.</span></span>

- <span data-ttu-id="103ed-384">WPF での Cookie のサポートは、サポートされているすべてのブラウザーで同じです。</span><span class="sxs-lookup"><span data-stu-id="103ed-384">Cookie support in WPF is the same for all supported browsers.</span></span>

- <span data-ttu-id="103ed-385">Internet Explorer では、WPF は、Cookie に関する P3P ポリシー (特に開発元とサードパーティの XBAP に関して) に従います。</span><span class="sxs-lookup"><span data-stu-id="103ed-385">In Internet Explorer, P3P policy that pertains to cookies is honored by WPF, particularly with respect to first-party and third-party XBAPs.</span></span>

<a name="Structured_Navigation"></a>

### <a name="structured-navigation"></a><span data-ttu-id="103ed-386">構造化ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="103ed-386">Structured Navigation</span></span>

<span data-ttu-id="103ed-387"><xref:System.Windows.Controls.Page> 間でデータを渡す必要がある場合、<xref:System.Windows.Controls.Page> のパラメーターなしではないコンストラクターにデータを引数として渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="103ed-387">If you need to pass data from one <xref:System.Windows.Controls.Page> to another, you can pass the data as arguments to a non-parameterless constructor of the <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-388">この方法を使用する場合は、<xref:System.Windows.Controls.Page> をキープ アライブ必要があることに注意してください。そうしなかった場合、次回、<xref:System.Windows.Controls.Page> にナビゲートすると、WPF ではパラメーターなしのコンストラクターを使用して <xref:System.Windows.Controls.Page> が再インスタンス化されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-388">Note that if you use this technique, you must keep the <xref:System.Windows.Controls.Page> alive; if not, the next time you navigate to the <xref:System.Windows.Controls.Page>, WPF reinstantiates the <xref:System.Windows.Controls.Page> by using the parameterless constructor.</span></span>

<span data-ttu-id="103ed-389">または、<xref:System.Windows.Controls.Page> で、渡す必要のあるデータが設定されるプロパティを実装することができます。</span><span class="sxs-lookup"><span data-stu-id="103ed-389">Alternatively, your <xref:System.Windows.Controls.Page> can implement properties that are set with the data that needs to be passed.</span></span> <span data-ttu-id="103ed-390">ただし、<xref:System.Windows.Controls.Page> でナビゲート元の <xref:System.Windows.Controls.Page> にデータを渡す必要があるときは、少し手間がかかります。</span><span class="sxs-lookup"><span data-stu-id="103ed-390">Things become tricky, however, when a <xref:System.Windows.Controls.Page> needs to pass data back to the <xref:System.Windows.Controls.Page> that navigated to it.</span></span> <span data-ttu-id="103ed-391">問題は、ナビゲーションでは、ナビゲート後に <xref:System.Windows.Controls.Page> に戻ることを保証するメカニズムがネイティブではサポートされていないことにあります。</span><span class="sxs-lookup"><span data-stu-id="103ed-391">The problem is that navigation doesn't natively support mechanisms for guaranteeing that a <xref:System.Windows.Controls.Page> will be returned to after it is navigated from.</span></span> <span data-ttu-id="103ed-392">基本的に、ナビゲーションは、"呼び出す/戻る" というセマンティクスをサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="103ed-392">Essentially, navigation doesn't support call/return semantics.</span></span> <span data-ttu-id="103ed-393">この問題を解決するため、WPF では、予測可能な構造化された方法で <xref:System.Windows.Controls.Page> に戻ることを可能にする <xref:System.Windows.Navigation.PageFunction%601> クラスが提供されています。</span><span class="sxs-lookup"><span data-stu-id="103ed-393">To solve this problem, WPF provides the <xref:System.Windows.Navigation.PageFunction%601> class that you can use to ensure that a <xref:System.Windows.Controls.Page> is returned to in a predictable and structured fashion.</span></span> <span data-ttu-id="103ed-394">詳細については、「[構造化ナビゲーションの概要](structured-navigation-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-394">For more information, see [Structured Navigation Overview](structured-navigation-overview.md).</span></span>

<a name="The_NavigationWindow_Class"></a>

## <a name="the-navigationwindow-class"></a><span data-ttu-id="103ed-395">NavigationWindow クラス</span><span class="sxs-lookup"><span data-stu-id="103ed-395">The NavigationWindow Class</span></span>

<span data-ttu-id="103ed-396">ここまでで、ナビゲート可能なコンテンツを含むアプリケーションをビルドするために使用する可能性が最も高いナビゲーション サービスの全容を説明しました。</span><span class="sxs-lookup"><span data-stu-id="103ed-396">To this point, you've seen the gamut of navigation services that you are most likely to use to build applications with navigable content.</span></span> <span data-ttu-id="103ed-397">これらのサービスについては、XBAP のコンテキストで説明しましたが、XBAP に限定されるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="103ed-397">These services were discussed in the context of XBAPs, although they are not limited to XBAPs.</span></span> <span data-ttu-id="103ed-398">最新のオペレーティング システムと Windows アプリケーションでは、最近のユーザーがブラウザーの使用経験を持つことを考慮して、スタンドアロン アプリケーションにブラウザー スタイルのナビゲーションが組み込まれています。</span><span class="sxs-lookup"><span data-stu-id="103ed-398">Modern operating systems and Windows applications take advantage of the browser experience of modern users to incorporate browser-style navigation into standalone applications.</span></span> <span data-ttu-id="103ed-399">一般的な例は、次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="103ed-399">Common examples include:</span></span>

- <span data-ttu-id="103ed-400">**Word の類義語辞典**: 単語の選択をナビゲートします。</span><span class="sxs-lookup"><span data-stu-id="103ed-400">**Word Thesaurus**: Navigate word choices.</span></span>

- <span data-ttu-id="103ed-401">**エクスプローラー**: ファイルとフォルダーをナビゲートします。</span><span class="sxs-lookup"><span data-stu-id="103ed-401">**File Explorer**: Navigate files and folders.</span></span>

- <span data-ttu-id="103ed-402">**ウィザード**: 複雑なタスクを複数のページに分割し、ページ間をナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-402">**Wizards**: Breaking down a complex task into multiple pages that can be navigated between.</span></span> <span data-ttu-id="103ed-403">たとえば、Windows の機能の追加と削除を行う Windows コンポーネント ウィザードなどがあります。</span><span class="sxs-lookup"><span data-stu-id="103ed-403">An example is the Windows Components Wizard that handles adding and removing Windows features.</span></span>

<span data-ttu-id="103ed-404">ブラウザー スタイルのナビゲーションをスタンドアロン アプリケーションに組み込むには、<xref:System.Windows.Navigation.NavigationWindow> クラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="103ed-404">To incorporate browser-style navigation into your standalone applications, you can use the <xref:System.Windows.Navigation.NavigationWindow> class.</span></span> <span data-ttu-id="103ed-405"><xref:System.Windows.Navigation.NavigationWindow> は、<xref:System.Windows.Window> から派生し、XBAP で提供されるのと同様のナビゲーション サポートによってウィンドウを拡張します。</span><span class="sxs-lookup"><span data-stu-id="103ed-405"><xref:System.Windows.Navigation.NavigationWindow> derives from <xref:System.Windows.Window> and extends it with the same support for navigation that XBAPs provide.</span></span> <span data-ttu-id="103ed-406"><xref:System.Windows.Navigation.NavigationWindow> は、スタンドアロン アプリケーションのメイン ウィンドウとして、またはダイアログ ボックスなどの 2 次ウィンドウとして使用できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-406">You can use <xref:System.Windows.Navigation.NavigationWindow> as either the main window of your standalone application or as a secondary window such as a dialog box.</span></span>

<span data-ttu-id="103ed-407"><xref:System.Windows.Navigation.NavigationWindow> を実装するには、WPF の最上位クラス (<xref:System.Windows.Window>、<xref:System.Windows.Controls.Page> など) と同様に、マークアップとコードビハインドの組み合わせを使用します。</span><span class="sxs-lookup"><span data-stu-id="103ed-407">To implement a <xref:System.Windows.Navigation.NavigationWindow>, as with most top-level classes in WPF (<xref:System.Windows.Window>, <xref:System.Windows.Controls.Page>, and so on), you use a combination of markup and code-behind.</span></span> <span data-ttu-id="103ed-408">これを次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-408">This is shown in the following example.</span></span>

[!code-xaml[IntroToNavNavigationWindowSnippets#NavigationWindowMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/MainWindow.xaml#navigationwindowmarkup)]

[!code-csharp[IntroToNavNavigationWindowSnippets#NavigationWindowCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/MainWindow.xaml.cs#navigationwindowcodebehind)]
[!code-vb[IntroToNavNavigationWindowSnippets#NavigationWindowCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/VisualBasic/MainWindow.xaml.vb#navigationwindowcodebehind)]

<span data-ttu-id="103ed-409">このコードでは、<xref:System.Windows.Navigation.NavigationWindow> が開かれたときに自動的に <xref:System.Windows.Controls.Page> (HomePage.xaml) にナビゲートする <xref:System.Windows.Navigation.NavigationWindow> を作成します。</span><span class="sxs-lookup"><span data-stu-id="103ed-409">This code creates a <xref:System.Windows.Navigation.NavigationWindow> that automatically navigates to a <xref:System.Windows.Controls.Page> (HomePage.xaml) when the <xref:System.Windows.Navigation.NavigationWindow> is opened.</span></span> <span data-ttu-id="103ed-410"><xref:System.Windows.Navigation.NavigationWindow> がアプリケーションのメイン ウィンドウの場合、`StartupUri` 属性を使用して起動できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-410">If the <xref:System.Windows.Navigation.NavigationWindow> is the main application window, you can use the `StartupUri` attribute to launch it.</span></span> <span data-ttu-id="103ed-411">これを次のマークアップに示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-411">This is shown in the following markup.</span></span>

[!code-xaml[IntroToNavNavigationWindowSnippets#AppLaunchNavWindow](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/App.xaml#applaunchnavwindow)]

<span data-ttu-id="103ed-412">次の図では、スタンドアロン アプリケーションのメイン ウィンドウとしての <xref:System.Windows.Navigation.NavigationWindow> を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-412">The following figure shows the <xref:System.Windows.Navigation.NavigationWindow> as the main window of a standalone application.</span></span>

<span data-ttu-id="103ed-413">![メイン ウィンドウ](./media/navigation-overview/navigation-window-as-main-window.png "メイン ウィンドウとしてのナビゲーション ウィンドウ")</span><span class="sxs-lookup"><span data-stu-id="103ed-413">![A main window](./media/navigation-overview/navigation-window-as-main-window.png "Navigation window as the main window")</span></span>

<span data-ttu-id="103ed-414">この図では、前の例の <xref:System.Windows.Navigation.NavigationWindow> 実装コードでは設定されなかったにもかかわらず、<xref:System.Windows.Navigation.NavigationWindow> にタイトルが表示されています。</span><span class="sxs-lookup"><span data-stu-id="103ed-414">From the figure, you can see that the <xref:System.Windows.Navigation.NavigationWindow> has a title, even though it wasn't set in the <xref:System.Windows.Navigation.NavigationWindow> implementation code from the preceding example.</span></span> <span data-ttu-id="103ed-415">代わりに、タイトルは、次のコードに示されている <xref:System.Windows.Controls.Page.WindowTitle%2A> プロパティを使用して設定されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-415">Instead, the title is set using the <xref:System.Windows.Controls.Page.WindowTitle%2A> property, which is shown in the following code.</span></span>

[!code-xaml[IntroToNavNavigationWindowSnippets#HomePageMARKUP1](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/HomePage.xaml#homepagemarkup1)]
[!code-xaml[IntroToNavNavigationWindowSnippets#HomePageMARKUP2](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/HomePage.xaml#homepagemarkup2)]

<span data-ttu-id="103ed-416"><xref:System.Windows.Controls.Page.WindowWidth%2A> プロパティと <xref:System.Windows.Controls.Page.WindowHeight%2A> プロパティの設定は、<xref:System.Windows.Navigation.NavigationWindow> にも影響します。</span><span class="sxs-lookup"><span data-stu-id="103ed-416">Setting the <xref:System.Windows.Controls.Page.WindowWidth%2A> and <xref:System.Windows.Controls.Page.WindowHeight%2A> properties also affects the <xref:System.Windows.Navigation.NavigationWindow>.</span></span>

<span data-ttu-id="103ed-417">通常、動作や外観をカスタマイズする必要があるときには、独自の <xref:System.Windows.Navigation.NavigationWindow> を実装します。</span><span class="sxs-lookup"><span data-stu-id="103ed-417">Usually, you implement your own <xref:System.Windows.Navigation.NavigationWindow> when you need to customize either its behavior or its appearance.</span></span> <span data-ttu-id="103ed-418">どちらも行わない場合は、ショートカットを使用できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-418">If you do neither, you can use a shortcut.</span></span> <span data-ttu-id="103ed-419">スタンドアロン アプリケーションで、<xref:System.Windows.Controls.Page> のパック URI を <xref:System.Windows.Application.StartupUri%2A> として指定した場合、<xref:System.Windows.Application> では、<xref:System.Windows.Controls.Page> をホストするための <xref:System.Windows.Navigation.NavigationWindow> が自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-419">If you specify the pack URI of a <xref:System.Windows.Controls.Page> as the <xref:System.Windows.Application.StartupUri%2A> in a standalone application, <xref:System.Windows.Application> automatically creates a <xref:System.Windows.Navigation.NavigationWindow> to host the <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-420">次のマークアップは、この方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="103ed-420">The following markup shows how to enable this.</span></span>

[!code-xaml[IntroToNavNavigationWindowSnippets#AppLaunchPage](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/AnotherApp.xaml#applaunchpage)]

<span data-ttu-id="103ed-421">ダイアログ ボックスなど、アプリケーションの 2 次ウィンドウを <xref:System.Windows.Navigation.NavigationWindow> にする場合は、次の例のコードを使用して開くことができます。</span><span class="sxs-lookup"><span data-stu-id="103ed-421">If you want a secondary application window such as a dialog box to be a <xref:System.Windows.Navigation.NavigationWindow>, you can use the code in the following example to open it.</span></span>

[!code-csharp[IntroToNavNavigationWindowSnippets#CreateNWDialogBox](~/samples/snippets/csharp/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/CSharp/DialogOwnerWindow.xaml.cs#createnwdialogbox)]
[!code-vb[IntroToNavNavigationWindowSnippets#CreateNWDialogBox](~/samples/snippets/visualbasic/VS_Snippets_Wpf/IntroToNavNavigationWindowSnippets/VisualBasic/DialogOwnerWindow.xaml.vb#createnwdialogbox)]

<span data-ttu-id="103ed-422">次の図に、結果を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-422">The following figure shows the result.</span></span>

<span data-ttu-id="103ed-423">![ダイアログ ボックス](./media/navigation-overview/navigation-window-as-dialog-box.png "ダイアログ ボックスとしてのナビゲーション ウィンドウ")</span><span class="sxs-lookup"><span data-stu-id="103ed-423">![A dialog box](./media/navigation-overview/navigation-window-as-dialog-box.png "Navigation window as a dialog box")</span></span>

<span data-ttu-id="103ed-424">この図では、<xref:System.Windows.Navigation.NavigationWindow> に Internet Explorer スタイルの **[戻る]** ボタンと **[進む]** ボタンが表示され、ユーザーは履歴をナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-424">As you can see, <xref:System.Windows.Navigation.NavigationWindow> displays Internet Explorer-style **Back** and **Forward** buttons that allow users to navigate the journal.</span></span> <span data-ttu-id="103ed-425">これらのボタンは、次の図に示されているように、同じユーザー エクスペリエンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="103ed-425">These buttons provide the same user experience, as shown in the following figure.</span></span>

<span data-ttu-id="103ed-426">![NavigationWindow 内の [戻る] ボタンと [次に進む] ボタン](./media/navigation-overview/back-and-forward-buttons-in-navigation-window.png "ナビゲーション ウィンドウの [戻る] ボタンと [進む] ボタン")</span><span class="sxs-lookup"><span data-stu-id="103ed-426">![Back and Forward buttons in a NavigationWindow](./media/navigation-overview/back-and-forward-buttons-in-navigation-window.png "Back and Forward buttons in a Navigation window")</span></span>

<span data-ttu-id="103ed-427">ページで独自の履歴ナビゲーション サポートと UI を提供する場合は、<xref:System.Windows.Navigation.NavigationWindow.ShowsNavigationUI%2A> プロパティの値を `false` に設定することにより、<xref:System.Windows.Navigation.NavigationWindow> によって表示される **[戻る]** ボタンと **[進む]** ボタンを非表示にできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-427">If your pages provide their own journal navigation support and UI, you can hide the **Back** and **Forward** buttons displayed by <xref:System.Windows.Navigation.NavigationWindow> by setting the value of the <xref:System.Windows.Navigation.NavigationWindow.ShowsNavigationUI%2A> property to `false`.</span></span>

<span data-ttu-id="103ed-428">または、WPF のカスタマイズ サポートを使用して、<xref:System.Windows.Navigation.NavigationWindow> 自体の [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] を置き換えることもできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-428">Alternatively, you can use customization support in WPF to replace the [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] of the <xref:System.Windows.Navigation.NavigationWindow> itself.</span></span>

<a name="Frame_in_Standalone_Applications"></a>

## <a name="the-frame-class"></a><span data-ttu-id="103ed-429">Frame クラス</span><span class="sxs-lookup"><span data-stu-id="103ed-429">The Frame Class</span></span>

<span data-ttu-id="103ed-430">ブラウザーと <xref:System.Windows.Navigation.NavigationWindow> は両方とも、ナビゲート可能なコンテンツをホストするウィンドウです。</span><span class="sxs-lookup"><span data-stu-id="103ed-430">Both the browser and <xref:System.Windows.Navigation.NavigationWindow> are windows that host navigable content.</span></span> <span data-ttu-id="103ed-431">場合によっては、アプリケーションには、ウィンドウ全体でホストする必要のないコンテンツがあることもあります。</span><span class="sxs-lookup"><span data-stu-id="103ed-431">In some cases, applications have content that does not need to be hosted by an entire window.</span></span> <span data-ttu-id="103ed-432">このようなコンテンツは、代わりに、他のコンテンツ内でホストされます。</span><span class="sxs-lookup"><span data-stu-id="103ed-432">Instead, such content be hosted inside other content.</span></span> <span data-ttu-id="103ed-433"><xref:System.Windows.Controls.Frame> クラスを使用すると、ナビゲート可能なコンテンツを他のコンテンツに挿入することができます。</span><span class="sxs-lookup"><span data-stu-id="103ed-433">You can insert navigable content into other content by using the <xref:System.Windows.Controls.Frame> class.</span></span> <span data-ttu-id="103ed-434"><xref:System.Windows.Controls.Frame> では、<xref:System.Windows.Navigation.NavigationWindow> および XBAP と同じサポートが提供されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-434"><xref:System.Windows.Controls.Frame> provides the same support as <xref:System.Windows.Navigation.NavigationWindow> and XBAPs.</span></span>

<span data-ttu-id="103ed-435">次の例では、`Frame` 要素を使用して <xref:System.Windows.Controls.Frame> を <xref:System.Windows.Controls.Page> に宣言によって追加する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-435">The following example shows how to add a <xref:System.Windows.Controls.Frame> to a <xref:System.Windows.Controls.Page> declaratively by using the `Frame` element.</span></span>

[!code-xaml[NavigationOverviewSnippets#FrameHostPageXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPage.xaml#framehostpagexaml1)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPage.xaml#framehostpagexaml2)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPage.xaml#framehostpagexaml3)]

<span data-ttu-id="103ed-436">このマークアップでは、`Frame` 要素の `Source` 属性に、<xref:System.Windows.Controls.Frame> が最初にナビゲートする必要がある <xref:System.Windows.Controls.Page> のパック URI を設定します。</span><span class="sxs-lookup"><span data-stu-id="103ed-436">This markup sets the `Source` attribute of the `Frame` element with a pack URI for the <xref:System.Windows.Controls.Page> that the <xref:System.Windows.Controls.Frame> should initially navigate to.</span></span> <span data-ttu-id="103ed-437">次の図では、複数のページをナビゲートした <xref:System.Windows.Controls.Frame> のある <xref:System.Windows.Controls.Page> が含まれる XBAP を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-437">The following figure shows an XBAP with a <xref:System.Windows.Controls.Page> that has a <xref:System.Windows.Controls.Frame> that has navigated between several pages.</span></span>

<span data-ttu-id="103ed-438">![複数のページ間を移動したフレーム](./media/navigation-overview/frame-navigation-between-multiple-pages.png "これは、複数のページ間のフレーム ナビゲーションを示します。")</span><span class="sxs-lookup"><span data-stu-id="103ed-438">![A frame that has navigated between multiple pages](./media/navigation-overview/frame-navigation-between-multiple-pages.png "This shows a frame navigation between multiple pages.")</span></span>

<span data-ttu-id="103ed-439"><xref:System.Windows.Controls.Page> のコンテンツの内部にある <xref:System.Windows.Controls.Frame> のみを使用する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="103ed-439">You don't only have to use <xref:System.Windows.Controls.Frame> inside the content of a <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="103ed-440"><xref:System.Windows.Window> のコンテンツの内部で <xref:System.Windows.Controls.Frame> をホストするのも一般的です。</span><span class="sxs-lookup"><span data-stu-id="103ed-440">It is also common to host a <xref:System.Windows.Controls.Frame> inside the content of a <xref:System.Windows.Window>.</span></span>

<span data-ttu-id="103ed-441">既定の <xref:System.Windows.Controls.Frame> では、別の履歴がない場合に限り、独自の履歴が使用されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-441">By default, <xref:System.Windows.Controls.Frame> only uses its own journal in the absence of another journal.</span></span> <span data-ttu-id="103ed-442"><xref:System.Windows.Controls.Frame> が <xref:System.Windows.Navigation.NavigationWindow> または XBAP の内部でホストされるコンテンツの一部である場合、<xref:System.Windows.Controls.Frame> では、<xref:System.Windows.Navigation.NavigationWindow> または XBAP に属する履歴が使用されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-442">If a <xref:System.Windows.Controls.Frame> is part of content that is hosted inside either a <xref:System.Windows.Navigation.NavigationWindow> or an XBAP, <xref:System.Windows.Controls.Frame> uses the journal that belongs to the <xref:System.Windows.Navigation.NavigationWindow> or XBAP.</span></span> <span data-ttu-id="103ed-443">ただし、場合によっては、<xref:System.Windows.Controls.Frame> では独自の履歴を使用しなければならないことがあります。</span><span class="sxs-lookup"><span data-stu-id="103ed-443">Sometimes, though, a <xref:System.Windows.Controls.Frame> might need to be responsible for its own journal.</span></span> <span data-ttu-id="103ed-444">その理由の 1 つは、<xref:System.Windows.Controls.Frame> によってホストされるページ内で履歴ナビゲーションを可能にすることです。</span><span class="sxs-lookup"><span data-stu-id="103ed-444">One reason to do so is to allow journal navigation within the pages that are hosted by a <xref:System.Windows.Controls.Frame>.</span></span> <span data-ttu-id="103ed-445">これを次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-445">This is illustrated by the following figure.</span></span>

<span data-ttu-id="103ed-446">![フレームとページのダイアグラム](./media/navigation-overview/journal-navigation-within-pages-hosted-by-a-frame.png "これは、フレームによってホストされるページ内の履歴ナビゲーションを示します。")</span><span class="sxs-lookup"><span data-stu-id="103ed-446">![Frame and Page diagram](./media/navigation-overview/journal-navigation-within-pages-hosted-by-a-frame.png "This shows journal navigation within pages hosted by a frame.")</span></span>

<span data-ttu-id="103ed-447">この場合、<xref:System.Windows.Controls.Frame> の <xref:System.Windows.Controls.Frame.JournalOwnership%2A> プロパティを <xref:System.Windows.Navigation.JournalOwnership.OwnsJournal> に設定することによって、<xref:System.Windows.Controls.Frame> が独自の履歴を使用するように構成できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-447">In this case, you can configure the <xref:System.Windows.Controls.Frame> to use its own journal by setting the <xref:System.Windows.Controls.Frame.JournalOwnership%2A> property of the <xref:System.Windows.Controls.Frame> to <xref:System.Windows.Navigation.JournalOwnership.OwnsJournal>.</span></span> <span data-ttu-id="103ed-448">これを次のマークアップに示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-448">This is shown in the following markup.</span></span>

[!code-xaml[NavigationOverviewSnippets#FrameHostPageOwnJournalXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnJournal.xaml#framehostpageownjournalxaml1)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageOwnJournalXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnJournal.xaml#framehostpageownjournalxaml2)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageOwnJournalXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnJournal.xaml#framehostpageownjournalxaml3)]

<span data-ttu-id="103ed-449">次の図は、独自の履歴を使用する <xref:System.Windows.Controls.Frame> 内でのナビゲートの結果を示しています。</span><span class="sxs-lookup"><span data-stu-id="103ed-449">The following figure illustrates the effect of navigating within a <xref:System.Windows.Controls.Frame> that uses its own journal.</span></span>

<span data-ttu-id="103ed-450">![独自の履歴を使用するフレーム](./media/navigation-overview/frame-uses-its-own-journal.png "これは、独自の履歴を使用するフレーム内でナビゲートした場合の効果を示します。")</span><span class="sxs-lookup"><span data-stu-id="103ed-450">![A frame that uses its own journal](./media/navigation-overview/frame-uses-its-own-journal.png "This shows the effect of navigating within a frame that uses its own journal.")</span></span>

<span data-ttu-id="103ed-451">履歴エントリは、Internet Explorer ではなく、<xref:System.Windows.Controls.Frame> 内のナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] によって表示されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-451">Notice that the journal entries are shown by the navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] in the <xref:System.Windows.Controls.Frame>, rather than by Internet Explorer.</span></span>

> [!NOTE]
> <span data-ttu-id="103ed-452"><xref:System.Windows.Controls.Frame> が <xref:System.Windows.Window> でホストされるコンテンツの一部である場合、<xref:System.Windows.Controls.Frame> では独自の履歴を使用するため、独自のナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] が表示されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-452">If a <xref:System.Windows.Controls.Frame> is part of content that is hosted in a <xref:System.Windows.Window>, <xref:System.Windows.Controls.Frame> uses its own journal and, consequently, displays its own navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)].</span></span>

<span data-ttu-id="103ed-453"><xref:System.Windows.Controls.Frame> でナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] を表示せずに、独自の履歴を表示することがユーザー エクスペリエンスで必要な場合、<xref:System.Windows.Controls.Frame.NavigationUIVisibility%2A> を <xref:System.Windows.Visibility.Hidden> に設定することによって、ナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] を非表示にできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-453">If your user experience requires a <xref:System.Windows.Controls.Frame> to provide its own journal without showing the navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)], you can hide the navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] by setting the <xref:System.Windows.Controls.Frame.NavigationUIVisibility%2A> to <xref:System.Windows.Visibility.Hidden>.</span></span> <span data-ttu-id="103ed-454">これを次のマークアップに示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-454">This is shown in the following markup.</span></span>

[!code-xaml[NavigationOverviewSnippets#FrameHostPageHidesUIXAML1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnHiddenJournal.xaml#framehostpagehidesuixaml1)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageHidesUIXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnHiddenJournal.xaml#framehostpagehidesuixaml2)]
[!code-xaml[NavigationOverviewSnippets#FrameHostPageHidesUIXAML3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHostPageOwnHiddenJournal.xaml#framehostpagehidesuixaml3)]

<a name="Navigation_Hosts"></a>

## <a name="navigation-hosts"></a><span data-ttu-id="103ed-455">ナビゲーション ホスト</span><span class="sxs-lookup"><span data-stu-id="103ed-455">Navigation Hosts</span></span>

<span data-ttu-id="103ed-456"><xref:System.Windows.Controls.Frame> と <xref:System.Windows.Navigation.NavigationWindow> は、ナビゲーション ホストと呼ばれるクラスです。</span><span class="sxs-lookup"><span data-stu-id="103ed-456"><xref:System.Windows.Controls.Frame> and <xref:System.Windows.Navigation.NavigationWindow> are classes that are known as navigation hosts.</span></span> <span data-ttu-id="103ed-457">"*ナビゲーション ホスト*" は、コンテンツにナビゲートして表示できるクラスです。</span><span class="sxs-lookup"><span data-stu-id="103ed-457">A *navigation host* is a class that can navigate to and display content.</span></span> <span data-ttu-id="103ed-458">これを実現するため、各ナビゲーション ホストでは、独自の <xref:System.Windows.Navigation.NavigationService> と履歴が使用されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-458">To accomplish this, each navigation host uses its own <xref:System.Windows.Navigation.NavigationService> and journal.</span></span> <span data-ttu-id="103ed-459">ナビゲーション ホストの基本的な構造を次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-459">The basic construction of a navigation host is shown in the following figure.</span></span>

<span data-ttu-id="103ed-460">![ナビゲーターのダイアグラム](./media/navigation-overview/navigation-host-construction.png "ナビゲーション ホストの基本的な構築")</span><span class="sxs-lookup"><span data-stu-id="103ed-460">![Navigator diagrams](./media/navigation-overview/navigation-host-construction.png "Basic construction of a navigation host")</span></span>

<span data-ttu-id="103ed-461">これにより、<xref:System.Windows.Navigation.NavigationWindow> と <xref:System.Windows.Controls.Frame> では、基本的に、XBAP がブラウザーでホストされるときに提供するのと同じナビゲーション サポートを提供できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-461">Essentially, this allows <xref:System.Windows.Navigation.NavigationWindow> and <xref:System.Windows.Controls.Frame> to provide the same navigation support that an XBAP provides when hosted in the browser.</span></span>

<span data-ttu-id="103ed-462"><xref:System.Windows.Navigation.NavigationService> と履歴を使用するだけでなく、ナビゲーション ホストでは、<xref:System.Windows.Navigation.NavigationService> で実装されるのと同じメンバーが実装されます。</span><span class="sxs-lookup"><span data-stu-id="103ed-462">Besides using <xref:System.Windows.Navigation.NavigationService> and a journal, navigation hosts implement the same members that <xref:System.Windows.Navigation.NavigationService> implements.</span></span> <span data-ttu-id="103ed-463">これを次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-463">This is illustrated by the following figure.</span></span>

<span data-ttu-id="103ed-464">![フレームおよび NavigationWindow 内の履歴](./media/navigation-overview/navigation-window-and-frame.png "ナビゲーション ウィンドウとフレーム")</span><span class="sxs-lookup"><span data-stu-id="103ed-464">![A journal in a Frame and in a NavigationWindow](./media/navigation-overview/navigation-window-and-frame.png "Navigation Window and Frame")</span></span>

<span data-ttu-id="103ed-465">これにより、これらのメンバーに対して直接、ナビゲーション サポートをプログラミングできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-465">This allows you to program navigation support directly against them.</span></span> <span data-ttu-id="103ed-466"><xref:System.Windows.Window> でホストされる <xref:System.Windows.Controls.Frame> のカスタム ナビゲーション [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] を提供する必要がある場合は、この方法を検討してみてください。</span><span class="sxs-lookup"><span data-stu-id="103ed-466">You may consider this if you need to provide a custom navigation [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] for a <xref:System.Windows.Controls.Frame> that is hosted in a <xref:System.Windows.Window>.</span></span> <span data-ttu-id="103ed-467">さらに、どちらのタイプも、この他に、`BackStack` (<xref:System.Windows.Navigation.NavigationWindow.BackStack%2A?displayProperty=nameWithType>、<xref:System.Windows.Controls.Frame.BackStack%2A?displayProperty=nameWithType>) や `ForwardStack` (<xref:System.Windows.Navigation.NavigationWindow.ForwardStack%2A?displayProperty=nameWithType>、<xref:System.Windows.Controls.Frame.ForwardStack%2A?displayProperty=nameWithType>) など、ナビゲーション関連のメンバーを実装し、これらによって、それぞれ戻るスタックと進むスタックの履歴エントリを列挙できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-467">Furthermore, both types implement additional, navigation-related members, including `BackStack` (<xref:System.Windows.Navigation.NavigationWindow.BackStack%2A?displayProperty=nameWithType>, <xref:System.Windows.Controls.Frame.BackStack%2A?displayProperty=nameWithType>) and `ForwardStack` (<xref:System.Windows.Navigation.NavigationWindow.ForwardStack%2A?displayProperty=nameWithType>, <xref:System.Windows.Controls.Frame.ForwardStack%2A?displayProperty=nameWithType>), which allow you to enumerate the journal entries in the back stack and forward stack, respectively.</span></span>

<span data-ttu-id="103ed-468">前に述べたように、アプリケーション内に複数の履歴が存在することがあります。</span><span class="sxs-lookup"><span data-stu-id="103ed-468">As mentioned earlier, more than one journal can exist within an application.</span></span> <span data-ttu-id="103ed-469">次の図は、この例を示しています。</span><span class="sxs-lookup"><span data-stu-id="103ed-469">The following figure provides an example of when this can happen.</span></span>

<span data-ttu-id="103ed-470">![1 つのアプリケーション内の複数の履歴](./media/navigation-overview/multiple-journals-in-one-application.png "これは、アプリケーション内の複数の履歴の例です。")</span><span class="sxs-lookup"><span data-stu-id="103ed-470">![Multiple journals within one application](./media/navigation-overview/multiple-journals-in-one-application.png "This is an example of more than one journal in an application.")</span></span>

<a name="Navigating_to_Content_Other_than_Pages"></a>

## <a name="navigating-to-content-other-than-xaml-pages"></a><span data-ttu-id="103ed-471">XAML ページ以外のコンテンツへのナビゲート</span><span class="sxs-lookup"><span data-stu-id="103ed-471">Navigating to Content Other than XAML Pages</span></span>

<span data-ttu-id="103ed-472">このトピック全体を通じて、<xref:System.Windows.Controls.Page> とパック XBAP を使用して、WPF のさまざまなナビゲーション機能を説明してきました。</span><span class="sxs-lookup"><span data-stu-id="103ed-472">Throughout this topic, <xref:System.Windows.Controls.Page> and pack XBAPs have been used to demonstrate the various navigation capabilities of WPF.</span></span> <span data-ttu-id="103ed-473">ただし、アプリケーションにコンパイルされる <xref:System.Windows.Controls.Page> がナビゲート可能な唯一の種類のコンテンツではなく、パック XBAP がコンテンツを識別する唯一の方法ではありません。</span><span class="sxs-lookup"><span data-stu-id="103ed-473">However, a <xref:System.Windows.Controls.Page> that is compiled into an application is not the only type of content that can be navigated to, and pack XBAPs aren't the only way to identify content.</span></span>

<span data-ttu-id="103ed-474">このセクションで示すように、Loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイル、HTML ファイル、およびオブジェクトにもナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-474">As this section demonstrates, you can also navigate to loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files, HTML files, and objects.</span></span>

<a name="Navigating_to_Loose_XAML_Files"></a>

### <a name="navigating-to-loose-xaml-files"></a><span data-ttu-id="103ed-475">Loose XAML ファイルへのナビゲート</span><span class="sxs-lookup"><span data-stu-id="103ed-475">Navigating to Loose XAML Files</span></span>

<span data-ttu-id="103ed-476">Loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイルは、次の特性を持つファイルです。</span><span class="sxs-lookup"><span data-stu-id="103ed-476">A loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file is a file with the following characteristics:</span></span>

- <span data-ttu-id="103ed-477">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] のみを含む (つまり、コードがない)。</span><span class="sxs-lookup"><span data-stu-id="103ed-477">Contains only [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] (that is, no code).</span></span>

- <span data-ttu-id="103ed-478">適切な名前空間宣言がある。</span><span class="sxs-lookup"><span data-stu-id="103ed-478">Has an appropriate namespace declaration.</span></span>

- <span data-ttu-id="103ed-479">.xaml ファイル名拡張子を持つ。</span><span class="sxs-lookup"><span data-stu-id="103ed-479">Has the .xaml file name extension.</span></span>

<span data-ttu-id="103ed-480">たとえば、Loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイル Person.xaml ファイルとして格納されている次のようなコンテンツを考えてみます。</span><span class="sxs-lookup"><span data-stu-id="103ed-480">For example, consider the following content that is stored as a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file, Person.xaml.</span></span>

[!code-xaml[NavigationOverviewSnippets#LooseXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/Person.xaml#loosexaml)]

<span data-ttu-id="103ed-481">ファイルをダブルクリックすると、ブラウザーが開き、コンテンツにナビゲートして、コンテンツを表示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-481">When you double-click the file, the browser opens and navigates to and displays the content.</span></span> <span data-ttu-id="103ed-482">これを次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-482">This is shown in the following figure.</span></span>

<span data-ttu-id="103ed-483">![Person.XAML ファイルの内容の表示](./media/navigation-overview/contents-of-person-xaml-file.png "Person.XAML ファイルの内容を示します。")</span><span class="sxs-lookup"><span data-stu-id="103ed-483">![Display of the content in the Person.XAML file](./media/navigation-overview/contents-of-person-xaml-file.png "Shows the contents of the Person.XAML file.")</span></span>

<span data-ttu-id="103ed-484">Loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイルは、次の場所から表示できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-484">You can display a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file from the following:</span></span>

- <span data-ttu-id="103ed-485">ローカル コンピューター、イントラネット、またはインターネット上の Web サイト。</span><span class="sxs-lookup"><span data-stu-id="103ed-485">A Web site on the local machine, the intranet, or the Internet.</span></span>

- <span data-ttu-id="103ed-486">汎用名前付け規則 (UNC) ファイル共有。</span><span class="sxs-lookup"><span data-stu-id="103ed-486">A Universal Naming Convention (UNC) file share.</span></span>

- <span data-ttu-id="103ed-487">ローカル ディスク。</span><span class="sxs-lookup"><span data-stu-id="103ed-487">The local disk.</span></span>

<span data-ttu-id="103ed-488">Loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイルは、ブラウザーのお気に入りに追加したり、ブラウザーのホーム ページにしたりできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-488">A loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file can be added to the browser's favorites, or be the browser's home page.</span></span>

> [!NOTE]
> <span data-ttu-id="103ed-489">Loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ページの公開と起動の詳細については、「[WPF アプリケーションの配置](deploying-a-wpf-application-wpf.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-489">For more information about publishing and launching loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages, see [Deploying a WPF Application](deploying-a-wpf-application-wpf.md).</span></span>

<span data-ttu-id="103ed-490">Loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] に関する 1 つの制限は、部分信頼で実行しても安全なコンテンツしかホストできないことです。</span><span class="sxs-lookup"><span data-stu-id="103ed-490">One limitation with respect to loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is that you can only host content that is safe to run in partial trust.</span></span> <span data-ttu-id="103ed-491">たとえば、`Window` は、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ファイルのルート要素にはできません。</span><span class="sxs-lookup"><span data-stu-id="103ed-491">For example, `Window` cannot be the root element of a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span> <span data-ttu-id="103ed-492">詳細については、「[WPF 部分信頼セキュリティ](../wpf-partial-trust-security.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-492">For more information, see [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>

<a name="Navigating_to_HTML_Files_Using_Frame"></a>

### <a name="navigating-to-html-files-by-using-frame"></a><span data-ttu-id="103ed-493">フレームを使用した HTML ファイルへのナビゲート</span><span class="sxs-lookup"><span data-stu-id="103ed-493">Navigating to HTML Files by Using Frame</span></span>

<span data-ttu-id="103ed-494">ご想像のとおり、HTML にもナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-494">As you might expect, you can also navigate to HTML.</span></span> <span data-ttu-id="103ed-495">http スキームを使用する URI を入力するだけです。</span><span class="sxs-lookup"><span data-stu-id="103ed-495">You simply need to provide a URI that uses the http scheme.</span></span> <span data-ttu-id="103ed-496">たとえば、次の [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] では、HTML ページにナビゲートする <xref:System.Windows.Controls.Frame> が示されています。</span><span class="sxs-lookup"><span data-stu-id="103ed-496">For example, the following [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] shows a <xref:System.Windows.Controls.Frame> that navigates to an HTML page.</span></span>

[!code-xaml[NavigationOverviewSnippets#FrameHtmlNavMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigationOverviewSnippets/CSharp/FrameHTMLNavPage.xaml#framehtmlnavmarkup)]

<span data-ttu-id="103ed-497">HTML にナビゲートするには、特殊なアクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="103ed-497">Navigating to HTML requires special permissions.</span></span> <span data-ttu-id="103ed-498">たとえば、インターネット ゾーンの部分信頼セキュリティ サンドボックスで実行している XBAP からはナビゲートできません。</span><span class="sxs-lookup"><span data-stu-id="103ed-498">For example, you can't navigate from an XBAP that is running in the Internet zone partial trust security sandbox.</span></span> <span data-ttu-id="103ed-499">詳細については、「[WPF 部分信頼セキュリティ](../wpf-partial-trust-security.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-499">For more information, see [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>

<a name="Navigating_to_HTML_Files_Using_WebBrowser"></a>

### <a name="navigating-to-html-files-by-using-the-webbrowser-control"></a><span data-ttu-id="103ed-500">WebBrowser コントロールを使用した HTML ファイルへのナビゲート</span><span class="sxs-lookup"><span data-stu-id="103ed-500">Navigating to HTML Files by Using the WebBrowser Control</span></span>

<span data-ttu-id="103ed-501"><xref:System.Windows.Controls.WebBrowser> コントロールでは、HTML ドキュメントのホスティング、ナビゲーション、およびスクリプトやマネージド コードの相互運用性がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="103ed-501">The <xref:System.Windows.Controls.WebBrowser> control supports HTML document hosting, navigation and script/managed code interoperability.</span></span> <span data-ttu-id="103ed-502"><xref:System.Windows.Controls.WebBrowser> コントロールの詳細については、「<xref:System.Windows.Controls.WebBrowser>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-502">For detailed information regarding the <xref:System.Windows.Controls.WebBrowser> control, see <xref:System.Windows.Controls.WebBrowser>.</span></span>

<span data-ttu-id="103ed-503"><xref:System.Windows.Controls.Frame> と同様に、<xref:System.Windows.Controls.WebBrowser> を使用して HTML にナビゲートするには、特殊なアクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="103ed-503">Like <xref:System.Windows.Controls.Frame>, navigating to HTML using <xref:System.Windows.Controls.WebBrowser> requires special permissions.</span></span> <span data-ttu-id="103ed-504">たとえば、部分信頼アプリケーションからは、起点サイトにある HTML にのみナビゲートできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-504">For example, from a partial-trust application, you can navigate only to HTML located at the site of origin.</span></span> <span data-ttu-id="103ed-505">詳細については、「[WPF 部分信頼セキュリティ](../wpf-partial-trust-security.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-505">For more information, see [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>

<a name="Navigating_to_Objects"></a>

### <a name="navigating-to-custom-objects"></a><span data-ttu-id="103ed-506">カスタム オブジェクトへのナビゲート</span><span class="sxs-lookup"><span data-stu-id="103ed-506">Navigating to Custom Objects</span></span>

<span data-ttu-id="103ed-507">カスタム オブジェクトとして格納されているデータがある場合、そのデータを表示する方法の 1 つは、それらのオブジェクトにバインドされたコンテンツを使用して <xref:System.Windows.Controls.Page> を作成することです (「[データ バインドの概要](../../../desktop-wpf/data/data-binding-overview.md)」を参照)。</span><span class="sxs-lookup"><span data-stu-id="103ed-507">If you have data that is stored as custom objects, one way to display that data is to create a <xref:System.Windows.Controls.Page> with content that is bound to those objects (see [Data Binding Overview](../../../desktop-wpf/data/data-binding-overview.md)).</span></span> <span data-ttu-id="103ed-508">オブジェクトを表示するためだけにページ全体を作成するオーバーヘッドが必要ない場合には、代わりに、オブジェクトに直接ナビゲートすることもできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-508">If you don't need the overhead of creating an entire page just to display the objects, you can navigate directly to them instead.</span></span>

<span data-ttu-id="103ed-509">次のコードで実装される `Person` クラスを考えてみます。</span><span class="sxs-lookup"><span data-stu-id="103ed-509">Consider the `Person` class that is implemented in the following code.</span></span>

[!code-csharp[NavigateToObjectSnippets#PersonClassCODE](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/Person.cs#personclasscode)]
[!code-vb[NavigateToObjectSnippets#PersonClassCODE](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigateToObjectSnippets/VisualBasic/Person.vb#personclasscode)]

<span data-ttu-id="103ed-510">それにナビゲートするには、次のコードに示されているように、<xref:System.Windows.Navigation.NavigationWindow.Navigate%2A?displayProperty=nameWithType> メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="103ed-510">To navigate to it, you call the <xref:System.Windows.Navigation.NavigationWindow.Navigate%2A?displayProperty=nameWithType> method, as demonstrated by the following code.</span></span>

[!code-xaml[NavigateToObjectSnippets#PageThatNavsToObject1](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/HomePage.xaml#pagethatnavstoobject1)]
[!code-xaml[NavigateToObjectSnippets#PageThatNavsToObject2](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/HomePage.xaml#pagethatnavstoobject2)]
[!code-xaml[NavigateToObjectSnippets#PageThatNavsToObject3](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/HomePage.xaml#pagethatnavstoobject3)]

[!code-csharp[NavigateToObjectSnippets#PageThatNavsToObjectCODEBEHIND](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/HomePage.xaml.cs#pagethatnavstoobjectcodebehind)]
[!code-vb[NavigateToObjectSnippets#PageThatNavsToObjectCODEBEHIND](~/samples/snippets/visualbasic/VS_Snippets_Wpf/NavigateToObjectSnippets/VisualBasic/HomePage.xaml.vb#pagethatnavstoobjectcodebehind)]

<span data-ttu-id="103ed-511">次の図に、結果を示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-511">The following figure shows the result.</span></span>

<span data-ttu-id="103ed-512">![クラスに移動するページ](./media/navigation-overview/page-navigates-to-an-object.png "これは、オブジェクトにナビゲートするページの例です。")</span><span class="sxs-lookup"><span data-stu-id="103ed-512">![A page that navigates to a class](./media/navigation-overview/page-navigates-to-an-object.png "This is an example of a page that navigates to an object.")</span></span>

<span data-ttu-id="103ed-513">この図には、役立つものが何も表示されていません。</span><span class="sxs-lookup"><span data-stu-id="103ed-513">From this figure, you can see that nothing useful is displayed.</span></span> <span data-ttu-id="103ed-514">実際、表示される値は、**Person** オブジェクトの `ToString` メソッドの戻り値です。既定では、これは WPF でオブジェクトの表示に使用できる唯一の値です。</span><span class="sxs-lookup"><span data-stu-id="103ed-514">In fact, the value that is displayed is the return value of the `ToString` method for the **Person** object; by default, this is the only value that WPF can use to represent your object.</span></span> <span data-ttu-id="103ed-515">`ToString` メソッドをオーバーライドすると、より意味のある情報を返すことができますが、それでも文字列値でしかありません。</span><span class="sxs-lookup"><span data-stu-id="103ed-515">You could override the `ToString` method to return more meaningful information, although it will still only be a string value.</span></span> <span data-ttu-id="103ed-516">WPF の表示機能を利用する 1 つの方法は、データ テンプレートを使用することです。</span><span class="sxs-lookup"><span data-stu-id="103ed-516">One technique you can use that takes advantage of the presentation capabilities of WPF is to use a data template.</span></span> <span data-ttu-id="103ed-517">WPF で特定の種類のオブジェクトと関連付けることができる、データ テンプレートを実装できます。</span><span class="sxs-lookup"><span data-stu-id="103ed-517">You can implement a data template that WPF can associate with an object of a particular type.</span></span> <span data-ttu-id="103ed-518">次のコードでは、`Person` オブジェクトのデータ テンプレートを示します。</span><span class="sxs-lookup"><span data-stu-id="103ed-518">The following code shows a data template for the `Person` object.</span></span>

[!code-xaml[NavigateToObjectSnippets#DataTemplateMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/NavigateToObjectSnippets/CSharp/App.xaml#datatemplatemarkup)]

<span data-ttu-id="103ed-519">ここでは、データ テンプレートは、`DataType` 属性で `x:Type` マークアップ拡張機能を使用することによって、`Person` 型と関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="103ed-519">Here, the data template is associated with the `Person` type by using the `x:Type` markup extension in the `DataType` attribute.</span></span> <span data-ttu-id="103ed-520">次に、データ テンプレートでは、`TextBlock` 要素 (<xref:System.Windows.Controls.TextBlock> を参照) が `Person` クラスのプロパティにバインドされます。</span><span class="sxs-lookup"><span data-stu-id="103ed-520">The data template then binds `TextBlock` elements (see <xref:System.Windows.Controls.TextBlock>) to the properties of the `Person` class.</span></span> <span data-ttu-id="103ed-521">次の図は、`Person` オブジェクトの更新された外観を示しています。</span><span class="sxs-lookup"><span data-stu-id="103ed-521">The following figure shows the updated appearance of the `Person` object.</span></span>

<span data-ttu-id="103ed-522">![データ テンプレートを持つクラスへの移動](./media/navigation-overview/navigating-to-a-class.png "データ テンプレートを持つクラスへの移動")</span><span class="sxs-lookup"><span data-stu-id="103ed-522">![Navigating to a class that has a data template](./media/navigation-overview/navigating-to-a-class.png "Navigating to a class that has a data template.")</span></span>

<span data-ttu-id="103ed-523">この方法の利点は、データ テンプレートを再利用して、アプリケーションの任意の場所で オブジェクトを一貫して表示できることによって得られる一貫性です。</span><span class="sxs-lookup"><span data-stu-id="103ed-523">An advantage of this technique is the consistency you gain by being able to reuse the data template to display your objects consistently anywhere in your application.</span></span>

<span data-ttu-id="103ed-524">データ テンプレートの詳細については「[データ テンプレートの概要](../data/data-templating-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="103ed-524">For more information on data templates, see [Data Templating Overview](../data/data-templating-overview.md).</span></span>

<a name="Security"></a>

## <a name="security"></a><span data-ttu-id="103ed-525">セキュリティ</span><span class="sxs-lookup"><span data-stu-id="103ed-525">Security</span></span>

<span data-ttu-id="103ed-526">WPF ナビゲーション サポートによって、XBAP をインターネットを介してナビゲートでき、アプリケーションでサード パーティの コンテンツをホストできます。</span><span class="sxs-lookup"><span data-stu-id="103ed-526">WPF navigation support allows XBAPs to be navigated to across the Internet, and it allows applications to host third-party content.</span></span> <span data-ttu-id="103ed-527">アプリケーションとユーザーの両方を有害な動作から保護するために、WPF では、さまざまなセキュリティ機能が提供されています。これらの機能の詳細は、「[セキュリティ](../security-wpf.md)」と「[WPF 部分信頼セキュリティ](../wpf-partial-trust-security.md)」で説明されています。</span><span class="sxs-lookup"><span data-stu-id="103ed-527">To protect both applications and users from harmful behavior, WPF provides a variety of security features that are discussed in [Security](../security-wpf.md) and [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="103ed-528">関連項目</span><span class="sxs-lookup"><span data-stu-id="103ed-528">See also</span></span>

- <xref:System.Windows.Application.SetCookie%2A>
- <xref:System.Windows.Application.GetCookie%2A>
- [<span data-ttu-id="103ed-529">アプリケーション管理の概要</span><span class="sxs-lookup"><span data-stu-id="103ed-529">Application Management Overview</span></span>](application-management-overview.md)
- [<span data-ttu-id="103ed-530">WPF におけるパッケージの URI</span><span class="sxs-lookup"><span data-stu-id="103ed-530">Pack URIs in WPF</span></span>](pack-uris-in-wpf.md)
- [<span data-ttu-id="103ed-531">構造化ナビゲーションの概要</span><span class="sxs-lookup"><span data-stu-id="103ed-531">Structured Navigation Overview</span></span>](structured-navigation-overview.md)
- [<span data-ttu-id="103ed-532">ナビゲーション トポロジの概要</span><span class="sxs-lookup"><span data-stu-id="103ed-532">Navigation Topologies Overview</span></span>](navigation-topologies-overview.md)
- [<span data-ttu-id="103ed-533">方法トピック</span><span class="sxs-lookup"><span data-stu-id="103ed-533">How-to Topics</span></span>](navigation-how-to-topics.md)
- [<span data-ttu-id="103ed-534">WPF アプリケーションの配置</span><span class="sxs-lookup"><span data-stu-id="103ed-534">Deploying a WPF Application</span></span>](deploying-a-wpf-application-wpf.md)
