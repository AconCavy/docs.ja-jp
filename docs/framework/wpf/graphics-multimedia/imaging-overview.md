---
title: イメージングの概要
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- metadata [WPF], images
- displaying images [WPF]
- Imaging API [WPF]
- image metadata [WPF]
- converting images [WPF]
- encoding image formats [WPF]
- format decoding for images [WPF]
- painting with images [WPF]
- stretching images [WPF]
- images [WPF], about imaging
- format encoding for images [WPF]
- cropping images [WPF]
- decoding image formats [WPF]
- rotating images [WPF]
ms.assetid: 72aad87a-e6f3-4937-94cd-a18b7766e990
ms.openlocfilehash: b60f2871062a12d3bee91a9c6d9883222b3034f4
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/07/2019
ms.locfileid: "73733569"
---
# <a name="imaging-overview"></a><span data-ttu-id="ed488-102">イメージングの概要</span><span class="sxs-lookup"><span data-stu-id="ed488-102">Imaging Overview</span></span>
<span data-ttu-id="ed488-103">このトピックでは、Microsoft Windows Presentation Foundation Imaging コンポーネントの概要について説明します。</span><span class="sxs-lookup"><span data-stu-id="ed488-103">This topic provides an introduction to the Microsoft Windows Presentation Foundation Imaging Component.</span></span> <span data-ttu-id="ed488-104">WPF イメージングを使用すると、開発者はイメージの表示、変換、および書式設定を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="ed488-104">WPF Imaging enables developers to display, transform, and format images.</span></span>  

## <a name="wpf-imaging-component"></a><span data-ttu-id="ed488-105">WPF Imaging Component</span><span class="sxs-lookup"><span data-stu-id="ed488-105">WPF Imaging Component</span></span>  
 <span data-ttu-id="ed488-106">WPF イメージングでは、Microsoft Windows 内のイメージング機能が大幅に強化されています。</span><span class="sxs-lookup"><span data-stu-id="ed488-106">WPF Imaging provides significant enhancements in imaging capabilities within Microsoft Windows.</span></span> <span data-ttu-id="ed488-107">ビットマップの表示や一般的なコントロールでのイメージの使用などのイメージング機能は、以前は Microsoft Windows グラフィックスデバイスインターフェイス (GDI) または Microsoft Windows GDI + ライブラリに依存していました。</span><span class="sxs-lookup"><span data-stu-id="ed488-107">Imaging capabilities, such as displaying a bitmap or using an image on a common control were previously reliant upon the Microsoft Windows Graphics Device Interface (GDI) or Microsoft Windows GDI+ libraries.</span></span> <span data-ttu-id="ed488-108">これらの API は、ベースラインイメージング機能を提供しますが、コーデック拡張機能や忠実度の高いイメージのサポートなどの機能を備えていません。</span><span class="sxs-lookup"><span data-stu-id="ed488-108">These API provide baseline imaging functionality, but lack features such as support for codec extensibility and high fidelity image support.</span></span> <span data-ttu-id="ed488-109">WPF イメージングは、GDI と GDI + の欠点を克服し、アプリケーション内でイメージを表示して使用するための新しい API のセットを提供するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="ed488-109">WPF Imaging is designed to overcome the shortcomings of GDI and GDI+ and provide a new set of API to display and use images within your applications.</span></span>  
  
 <span data-ttu-id="ed488-110">WPF イメージング API にアクセスするには、マネージコンポーネントとアンマネージコンポーネントの2つの方法があります。</span><span class="sxs-lookup"><span data-stu-id="ed488-110">There are two ways to access the WPF Imaging API, a managed component and an unmanaged component.</span></span> <span data-ttu-id="ed488-111">アンマネージ コンポーネントは、次の機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="ed488-111">The unmanaged component provides the following features.</span></span>  
  
- <span data-ttu-id="ed488-112">新規または独自のイメージ形式の機能拡張モデル。</span><span class="sxs-lookup"><span data-stu-id="ed488-112">Extensibility model for new or proprietary image formats.</span></span>  
  
- <span data-ttu-id="ed488-113">ビットマップ (BMP)、ジョイント Photographics エキスパートグループ (JPEG)、ポータブルネットワークグラフィックス (PNG)、Tagged Image File Format (TIFF)、Microsoft Windows Media Photo、グラフィックスインターチェンジ形式 (GIF) など、ネイティブイメージ形式のパフォーマンスとセキュリティが向上しました。とアイコン (.ico)。</span><span class="sxs-lookup"><span data-stu-id="ed488-113">Improved performance and security on native image formats including bitmap (BMP), Joint Photographics Experts Group (JPEG), Portable Network Graphics (PNG), Tagged Image File Format (TIFF), Microsoft Windows Media Photo, Graphics Interchange Format (GIF), and icon (.ico).</span></span>  
  
- <span data-ttu-id="ed488-114">チャネルあたり最大 8 ビットのビット深度の高いイメージ データの保存 (ピクセルあたり 32 ビット)。</span><span class="sxs-lookup"><span data-stu-id="ed488-114">Preservation of high bit-depth image data up to 8 bits per channel (32 bits per pixel).</span></span>  
  
- <span data-ttu-id="ed488-115">非破壊的なイメージのスケーリング、クロップ、および回転。</span><span class="sxs-lookup"><span data-stu-id="ed488-115">Nondestructive image scaling, cropping, and rotations.</span></span>  
  
- <span data-ttu-id="ed488-116">単純化されたカラー管理。</span><span class="sxs-lookup"><span data-stu-id="ed488-116">Simplified color management.</span></span>  
  
- <span data-ttu-id="ed488-117">ファイル内での専用メタデータのサポート。</span><span class="sxs-lookup"><span data-stu-id="ed488-117">Support for in-file, proprietary metadata.</span></span>  
  
- <span data-ttu-id="ed488-118">マネージド コンポーネントは、アンマネージド インフラストラクチャを利用して、[!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)]、アニメーション、グラフィックスなどの他の [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] 機能とイメージをシームレスに統合します。</span><span class="sxs-lookup"><span data-stu-id="ed488-118">The managed component utilizes the unmanaged infrastructure to provide seamless integration of images with other [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] features such as [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], animation, and graphics.</span></span> <span data-ttu-id="ed488-119">マネージコンポーネントは、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] アプリケーションで新しいイメージ形式を自動的に認識できるようにする Windows Presentation Foundation (WPF) イメージングコーデック拡張モデルの利点もあります。</span><span class="sxs-lookup"><span data-stu-id="ed488-119">The managed component also benefits from the Windows Presentation Foundation (WPF) imaging codec extensibility model which enables automatic recognition of new image formats in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="ed488-120">マネージ WPF Imaging API の大部分は <xref:System.Windows.Media.Imaging?displayProperty=nameWithType> 名前空間に存在しますが、<xref:System.Windows.Media.ImageBrush> や <xref:System.Windows.Media.ImageDrawing> などのいくつかの重要な型は <xref:System.Windows.Media?displayProperty=nameWithType> 名前空間に存在し、<xref:System.Windows.Controls.Image> は <xref:System.Windows.Controls?displayProperty=nameWithType> 名前空間に存在します。</span><span class="sxs-lookup"><span data-stu-id="ed488-120">The majority of the managed WPF Imaging API reside in the <xref:System.Windows.Media.Imaging?displayProperty=nameWithType> namespace, though several important types, such as <xref:System.Windows.Media.ImageBrush> and <xref:System.Windows.Media.ImageDrawing> reside in the <xref:System.Windows.Media?displayProperty=nameWithType> namespace and <xref:System.Windows.Controls.Image> resides in the <xref:System.Windows.Controls?displayProperty=nameWithType> namespace.</span></span>  
  
 <span data-ttu-id="ed488-121">このトピックでは、マネージド コンポーネントに関する追加情報について説明します。</span><span class="sxs-lookup"><span data-stu-id="ed488-121">This topic provides additional information about the managed component.</span></span> <span data-ttu-id="ed488-122">アンマネージ API の詳細については、[アンマネージ WPF イメージングコンポーネント](/windows/desktop/wic/-wic-lh)のドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="ed488-122">For more information on the unmanaged API see the [Unmanaged WPF Imaging Component](/windows/desktop/wic/-wic-lh) documentation.</span></span>  
  
<a name="_imageformats"></a>   
## <a name="wpf-image-formats"></a><span data-ttu-id="ed488-123">WPF イメージ形式</span><span class="sxs-lookup"><span data-stu-id="ed488-123">WPF Image Formats</span></span>  

 <span data-ttu-id="ed488-124">コーデックは、特定のメディア形式をデコードまたはエンコードするために使用されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-124">A codec is used to decode or encode a specific media format.</span></span> <span data-ttu-id="ed488-125">WPF イメージングには、BMP、JPEG、PNG、TIFF、Windows Media Photo、GIF、および ICON image 形式のコーデックが含まれています。</span><span class="sxs-lookup"><span data-stu-id="ed488-125">WPF Imaging includes a codec  for BMP, JPEG, PNG, TIFF, Windows Media Photo, GIF, and ICON image formats.</span></span> <span data-ttu-id="ed488-126">アプリケーションは、これらのコーデックを使用して、対応するイメージ形式をデコードでき、ICON を除くイメージ形式をエンコードできます。</span><span class="sxs-lookup"><span data-stu-id="ed488-126">Each of these codecs enable applications to decode and, with the exception of ICON, encode their respective image formats.</span></span>  
  
 <span data-ttu-id="ed488-127"><xref:System.Windows.Media.Imaging.BitmapSource> は、イメージのデコードとエンコードで使用される重要なクラスです。</span><span class="sxs-lookup"><span data-stu-id="ed488-127"><xref:System.Windows.Media.Imaging.BitmapSource> is an important class used in the decoding and encoding of images.</span></span> <span data-ttu-id="ed488-128">これは、WPF イメージングパイプラインの基本的な構成要素であり、特定のサイズと解像度で1つの定数のピクセルセットを表します。</span><span class="sxs-lookup"><span data-stu-id="ed488-128">It is the basic building block of the WPF Imaging pipeline and represents a single, constant set of pixels at a certain size and resolution.</span></span> <span data-ttu-id="ed488-129"><xref:System.Windows.Media.Imaging.BitmapSource> には、複数のフレームイメージの個々のフレームを指定することも、<xref:System.Windows.Media.Imaging.BitmapSource>に対して実行される変換の結果にすることもできます。</span><span class="sxs-lookup"><span data-stu-id="ed488-129">A <xref:System.Windows.Media.Imaging.BitmapSource> can be an individual frame of a multiple frame image, or it can be the result of a transform performed on a <xref:System.Windows.Media.Imaging.BitmapSource>.</span></span> <span data-ttu-id="ed488-130">これは、<xref:System.Windows.Media.Imaging.BitmapFrame>などの [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] イメージングで使用される主なクラスの多くの親です。</span><span class="sxs-lookup"><span data-stu-id="ed488-130">It is the parent of many of the primary classes used in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] imaging such as <xref:System.Windows.Media.Imaging.BitmapFrame>.</span></span>  
  
 <span data-ttu-id="ed488-131"><xref:System.Windows.Media.Imaging.BitmapFrame> は、イメージ形式の実際のビットマップデータを格納するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-131">A <xref:System.Windows.Media.Imaging.BitmapFrame> is used to store the actual bitmap data of an image format.</span></span> <span data-ttu-id="ed488-132">多くのイメージ形式でサポートされるのは1つの <xref:System.Windows.Media.Imaging.BitmapFrame>のみですが、GIF や TIFF などの形式では、イメージごとに複数のフレームがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="ed488-132">Many image formats only support a single <xref:System.Windows.Media.Imaging.BitmapFrame>, although formats such as GIF and TIFF support multiple frames per image.</span></span> <span data-ttu-id="ed488-133">フレームは、デコーダーによって入力データとして使用され、イメージ ファイルを作成するためにエンコーダーに渡されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-133">Frames are used by decoders as input data and are passed to encoders to create image files.</span></span>  
  
 <span data-ttu-id="ed488-134">次の例では、<xref:System.Windows.Media.Imaging.BitmapSource> から <xref:System.Windows.Media.Imaging.BitmapFrame> を作成し、TIFF イメージに追加する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="ed488-134">The following example demonstrates how a <xref:System.Windows.Media.Imaging.BitmapFrame> is created from a <xref:System.Windows.Media.Imaging.BitmapSource> and then added to a TIFF image.</span></span>  
  
 [!code-csharp[BitmapFrameExample#10](~/samples/snippets/csharp/VS_Snippets_Wpf/BitmapFrameExample/CSharp/BitmapFrame.cs#10)]
 [!code-vb[BitmapFrameExample#10](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BitmapFrameExample/VB/BitmapFrame.vb#10)]  
  
### <a name="image-format-decoding"></a><span data-ttu-id="ed488-135">イメージ形式のデコード</span><span class="sxs-lookup"><span data-stu-id="ed488-135">Image Format Decoding</span></span>  
 <span data-ttu-id="ed488-136">イメージのデコードは、イメージ形式をシステムで使用できるイメージ データに変換する操作です。</span><span class="sxs-lookup"><span data-stu-id="ed488-136">Image decoding is the translation of an image format to image data that can be used by the system.</span></span> <span data-ttu-id="ed488-137">変換したイメージ データを使用して、表示、処理、または別の形式へのエンコードを実行できます。</span><span class="sxs-lookup"><span data-stu-id="ed488-137">The image data can then be used to display, process, or encode to a different format.</span></span> <span data-ttu-id="ed488-138">デコーダーの選択は、イメージ形式に基づきます。</span><span class="sxs-lookup"><span data-stu-id="ed488-138">Decoder selection is based on the image format.</span></span> <span data-ttu-id="ed488-139">コーデックの選択は、特定のデコーダーを指定しない限り、自動的に行われます。</span><span class="sxs-lookup"><span data-stu-id="ed488-139">Codec selection is automatic unless a specific decoder is specified.</span></span> <span data-ttu-id="ed488-140">自動デコード操作については、「[WPF でのイメージの表示](#_displayingimages)」セクションの例を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ed488-140">The examples in the [Displaying Images in WPF](#_displayingimages) section demonstrate automatic decoding.</span></span> <span data-ttu-id="ed488-141">アンマネージ WPF イメージングインターフェイスを使用して開発され、システムに登録されたカスタム書式指定デコーダーは、自動的にデコーダーの選択に参加します。</span><span class="sxs-lookup"><span data-stu-id="ed488-141">Custom format decoders developed using the unmanaged WPF Imaging interfaces and registered with the system automatically participate in decoder selection.</span></span> <span data-ttu-id="ed488-142">これにより、カスタム形式を [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] アプリケーションに自動的に表示することができます。</span><span class="sxs-lookup"><span data-stu-id="ed488-142">This allows custom formats to be displayed automatically in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="ed488-143">次の例は、ビットマップデコーダーを使用して、BMP 形式のイメージをデコードする方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="ed488-143">The following example demonstrates the use of a bitmap decoder to decode a BMP format image.</span></span>  
  
 [!code-cpp[BmpBitmapDecoderEncoder#5](~/samples/snippets/cpp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CPP/anotherfile.cpp#5)]
 [!code-csharp[BmpBitmapDecoderEncoder#5](~/samples/snippets/csharp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CSharp/BitmapFrame.cs#5)]
 [!code-vb[BmpBitmapDecoderEncoder#5](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/VB/BitmapFrame.vb#5)]  
  
### <a name="image-format-encoding"></a><span data-ttu-id="ed488-144">イメージ形式のエンコード</span><span class="sxs-lookup"><span data-stu-id="ed488-144">Image Format Encoding</span></span>  
 <span data-ttu-id="ed488-145">イメージのエンコードは、イメージ データを特定のイメージ形式に変換する操作です。</span><span class="sxs-lookup"><span data-stu-id="ed488-145">Image encoding is the translation of image data to a specific image format.</span></span> <span data-ttu-id="ed488-146">エンコードされたイメージ データを使用して、新しいイメージ ファイルを作成できます。</span><span class="sxs-lookup"><span data-stu-id="ed488-146">The encoded image data can then be used to create new image files.</span></span> <span data-ttu-id="ed488-147">WPF イメージングでは、上記で説明したイメージ形式ごとにエンコーダーが提供されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-147">WPF Imaging provides encoders for each of the image formats described above.</span></span>  
  
 <span data-ttu-id="ed488-148">次の例は、エンコーダーを使用して新しく作成されたビットマップ イメージを保存する操作を示しています。</span><span class="sxs-lookup"><span data-stu-id="ed488-148">The following example demonstrates the use of an encoder to save a newly created bitmap image.</span></span>  
  
 [!code-cpp[BmpBitmapDecoderEncoder#3](~/samples/snippets/cpp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CPP/anotherfile.cpp#3)]
 [!code-csharp[BmpBitmapDecoderEncoder#3](~/samples/snippets/csharp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CSharp/BitmapFrame.cs#3)]
 [!code-vb[BmpBitmapDecoderEncoder#3](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/VB/BitmapFrame.vb#3)]  
  
<a name="_displayingimages"></a>   
## <a name="displaying-images-in-wpf"></a><span data-ttu-id="ed488-149">WPF でのイメージの表示</span><span class="sxs-lookup"><span data-stu-id="ed488-149">Displaying Images in WPF</span></span>  
 <span data-ttu-id="ed488-150">Windows Presentation Foundation (WPF) アプリケーションでイメージを表示するには、いくつかの方法があります。</span><span class="sxs-lookup"><span data-stu-id="ed488-150">There are several ways to display an image in a Windows Presentation Foundation (WPF) application.</span></span> <span data-ttu-id="ed488-151">画像を表示するには、<xref:System.Windows.Controls.Image> コントロールを使用するか、<xref:System.Windows.Media.ImageBrush>を使用してビジュアルに描画するか、<xref:System.Windows.Media.ImageDrawing>を使用して描画します。</span><span class="sxs-lookup"><span data-stu-id="ed488-151">Images can be displayed using an <xref:System.Windows.Controls.Image> control, painted on a visual using an <xref:System.Windows.Media.ImageBrush>, or drawn using an <xref:System.Windows.Media.ImageDrawing>.</span></span>  
  
### <a name="using-the-image-control"></a><span data-ttu-id="ed488-152">イメージ コントロールの使用</span><span class="sxs-lookup"><span data-stu-id="ed488-152">Using the Image Control</span></span>  
 <span data-ttu-id="ed488-153"><xref:System.Windows.Controls.Image> はフレームワーク要素であり、アプリケーションにイメージを表示する主な方法です。</span><span class="sxs-lookup"><span data-stu-id="ed488-153"><xref:System.Windows.Controls.Image> is a framework element and the primary way to display images in applications.</span></span> <span data-ttu-id="ed488-154">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]では、次の2つの方法で <xref:System.Windows.Controls.Image> を使用できます。属性構文またはプロパティ構文。</span><span class="sxs-lookup"><span data-stu-id="ed488-154">In [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], <xref:System.Windows.Controls.Image> can be used in two ways; attribute syntax or property syntax.</span></span> <span data-ttu-id="ed488-155">次の例は、属性構文とプロパティ タグ構文の両方を使用して、幅 200 ピクセルのイメージをレンダリングする方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="ed488-155">The following example shows how to render an image 200 pixels wide using both attribute syntax and property tag syntax.</span></span> <span data-ttu-id="ed488-156">属性構文とプロパティ構文の詳細については、「[依存関係プロパティの概要](../advanced/dependency-properties-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ed488-156">For more information on attribute syntax and property syntax, see [Dependency Properties Overview](../advanced/dependency-properties-overview.md).</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ImageSimpleExampleInlineMarkup](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageSimpleExample.xaml#imagesimpleexampleinlinemarkup)]  
  
 <span data-ttu-id="ed488-157">多くの例では、<xref:System.Windows.Media.Imaging.BitmapImage> オブジェクトを使用してイメージファイルを参照しています。</span><span class="sxs-lookup"><span data-stu-id="ed488-157">Many of the examples use a <xref:System.Windows.Media.Imaging.BitmapImage> object to reference an image file.</span></span> <span data-ttu-id="ed488-158"><xref:System.Windows.Media.Imaging.BitmapImage> は、[!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] の読み込み用に最適化された特殊な <xref:System.Windows.Media.Imaging.BitmapSource> であり、<xref:System.Windows.Controls.Image> コントロールの <xref:System.Windows.Controls.Image.Source%2A> としてイメージを表示する簡単な方法です。</span><span class="sxs-lookup"><span data-stu-id="ed488-158"><xref:System.Windows.Media.Imaging.BitmapImage> is a specialized <xref:System.Windows.Media.Imaging.BitmapSource> that is optimized for [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] loading and is an easy way to display images as the <xref:System.Windows.Controls.Image.Source%2A> of an <xref:System.Windows.Controls.Image> control.</span></span>  
  
 <span data-ttu-id="ed488-159">次の例は、コードを使用して幅 200 ピクセルのイメージをレンダリングする方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="ed488-159">The following example shows how to render an image 200 pixels wide using code.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="ed488-160"><xref:System.Windows.Media.Imaging.BitmapImage> は、<xref:System.ComponentModel.ISupportInitialize> インターフェイスを実装して、複数のプロパティの初期化を最適化します。</span><span class="sxs-lookup"><span data-stu-id="ed488-160"><xref:System.Windows.Media.Imaging.BitmapImage> implements the <xref:System.ComponentModel.ISupportInitialize> interface to optimize initialization on multiple properties.</span></span> <span data-ttu-id="ed488-161">プロパティの変更は、オブジェクトの初期化中にのみ実行できます。</span><span class="sxs-lookup"><span data-stu-id="ed488-161">Property changes can only occur during object initialization.</span></span> <span data-ttu-id="ed488-162"><xref:System.Windows.Media.Imaging.BitmapImage.BeginInit%2A> を呼び出して、初期化が開始されたことを通知し、初期化が完了したことを通知する <xref:System.Windows.Media.Imaging.BitmapImage.EndInit%2A> ます。</span><span class="sxs-lookup"><span data-stu-id="ed488-162">Call <xref:System.Windows.Media.Imaging.BitmapImage.BeginInit%2A> to signal that initialization has begun and <xref:System.Windows.Media.Imaging.BitmapImage.EndInit%2A> to signal that initialization has completed.</span></span> <span data-ttu-id="ed488-163">初期化の完了後は、プロパティの変更は無視されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-163">Once initialized, property changes are ignored.</span></span>  
  
 [!code-csharp[ImageElementExample_snip#ImageSimpleExampleInlineCode1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageSimpleExample.xaml.cs#imagesimpleexampleinlinecode1)]
 [!code-vb[ImageElementExample_snip#ImageSimpleExampleInlineCode1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/ImageSimpleExample.xaml.vb#imagesimpleexampleinlinecode1)]  
  
#### <a name="rotating-converting-and-cropping-images"></a><span data-ttu-id="ed488-164">イメージの回転、変換、およびクロップ</span><span class="sxs-lookup"><span data-stu-id="ed488-164">Rotating, Converting, and Cropping Images</span></span>  
 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] <span data-ttu-id="ed488-165">を使用すると、ユーザーは <xref:System.Windows.Media.Imaging.BitmapImage> のプロパティを使用して、または <xref:System.Windows.Media.Imaging.CroppedBitmap> や <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>などの追加の <xref:System.Windows.Media.Imaging.BitmapSource> オブジェクトを使用してイメージを変換できます。</span><span class="sxs-lookup"><span data-stu-id="ed488-165">enables users to transform images by using properties of <xref:System.Windows.Media.Imaging.BitmapImage> or by using additional <xref:System.Windows.Media.Imaging.BitmapSource> objects such as <xref:System.Windows.Media.Imaging.CroppedBitmap> or <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>.</span></span> <span data-ttu-id="ed488-166">これらのイメージの変換では、イメージの拡大縮小、回転、ピクセル形式の変更、またはクロップを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="ed488-166">These image transformations can scale or rotate an image, change the pixel format of an image, or crop an image.</span></span>  
  
 <span data-ttu-id="ed488-167">イメージの回転は、<xref:System.Windows.Media.Imaging.BitmapImage>の <xref:System.Windows.Media.Imaging.BitmapImage.Rotation%2A> プロパティを使用して実行されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-167">Image rotations are performed using the <xref:System.Windows.Media.Imaging.BitmapImage.Rotation%2A> property of <xref:System.Windows.Media.Imaging.BitmapImage>.</span></span> <span data-ttu-id="ed488-168">回転は、90 ° 単位でのみ実行できます。</span><span class="sxs-lookup"><span data-stu-id="ed488-168">Rotations can only be done in 90 degree increments.</span></span> <span data-ttu-id="ed488-169">次の例では、イメージが 90 ° 回転します。</span><span class="sxs-lookup"><span data-stu-id="ed488-169">In the following example, an image is rotated 90 degrees.</span></span>  
  
 [!code-xaml[ImageElementExample#TransformedXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample/CSharp/TransformedImageExample.xaml#transformedxaml2)]  
  
 [!code-csharp[ImageElementExample#TransformedCSharp1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample/CSharp/TransformedImageExample.xaml.cs#transformedcsharp1)]
 [!code-vb[ImageElementExample#TransformedCSharp1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample/VB/TransformedImageExample.xaml.vb#transformedcsharp1)]  
  
 <span data-ttu-id="ed488-170">画像をグレースケールなどの別のピクセル形式に変換するには、<xref:System.Windows.Media.Imaging.FormatConvertedBitmap>を使用します。</span><span class="sxs-lookup"><span data-stu-id="ed488-170">Converting an image to a different pixel format such as grayscale is done using <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>.</span></span> <span data-ttu-id="ed488-171">次の例では、イメージが <xref:System.Windows.Media.PixelFormats.Gray4%2A>に変換されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-171">In the following examples, an image is converted to <xref:System.Windows.Media.PixelFormats.Gray4%2A>.</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ConvertedXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/FormatConvertedExample.xaml#convertedxaml2)]  
  
 [!code-csharp[ImageElementExample_snip#ConvertedCSharp1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/FormatConvertedExample.xaml.cs#convertedcsharp1)]
 [!code-vb[ImageElementExample_snip#ConvertedCSharp1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/FormatConvertedExample.xaml.vb#convertedcsharp1)]  
  
 <span data-ttu-id="ed488-172">イメージをトリミングするには、<xref:System.Windows.Controls.Image> または <xref:System.Windows.Media.Imaging.CroppedBitmap> の <xref:System.Windows.UIElement.Clip%2A> プロパティを使用できます。</span><span class="sxs-lookup"><span data-stu-id="ed488-172">To crop an image, either the <xref:System.Windows.UIElement.Clip%2A> property of <xref:System.Windows.Controls.Image> or <xref:System.Windows.Media.Imaging.CroppedBitmap> can be used.</span></span> <span data-ttu-id="ed488-173">通常、イメージの一部を表示するだけの場合は、<xref:System.Windows.UIElement.Clip%2A> を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ed488-173">Typically, if you just want to display a portion of an image, <xref:System.Windows.UIElement.Clip%2A> should be used.</span></span> <span data-ttu-id="ed488-174">トリミングされたイメージをエンコードして保存する必要がある場合は、<xref:System.Windows.Media.Imaging.CroppedBitmap> を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ed488-174">If you need to encode and save a cropped image, the <xref:System.Windows.Media.Imaging.CroppedBitmap> should be used.</span></span> <span data-ttu-id="ed488-175">次の例では、<xref:System.Windows.Media.EllipseGeometry>を使用して、クリッププロパティを使用してイメージをトリミングします。</span><span class="sxs-lookup"><span data-stu-id="ed488-175">In the following example, an image is cropped using the Clip property using an <xref:System.Windows.Media.EllipseGeometry>.</span></span>  
  
 [!code-xaml[ImageElementExample_snip#CroppedXAMLUsingClip1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/CroppedImageExample.xaml#croppedxamlusingclip1)]  
  
 [!code-csharp[ImageElementExample_snip#CroppedCSharpUsingClip1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/CroppedImageExample.xaml.cs#croppedcsharpusingclip1)]
 [!code-vb[ImageElementExample_snip#CroppedCSharpUsingClip1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/CroppedImageExample.xaml.vb#croppedcsharpusingclip1)]  
  
#### <a name="stretching-images"></a><span data-ttu-id="ed488-176">イメージの引き伸ばし</span><span class="sxs-lookup"><span data-stu-id="ed488-176">Stretching Images</span></span>  
 <span data-ttu-id="ed488-177"><xref:System.Windows.Controls.Image.Stretch%2A> プロパティは、コンテナーを埋めるためにイメージをどのように拡大するかを制御します。</span><span class="sxs-lookup"><span data-stu-id="ed488-177">The <xref:System.Windows.Controls.Image.Stretch%2A> property controls how an image is stretched to fill its container.</span></span> <span data-ttu-id="ed488-178"><xref:System.Windows.Controls.Image.Stretch%2A> プロパティは、<xref:System.Windows.Media.Stretch> 列挙体によって定義される次の値を受け入れます。</span><span class="sxs-lookup"><span data-stu-id="ed488-178">The <xref:System.Windows.Controls.Image.Stretch%2A> property accepts the following values, defined by the <xref:System.Windows.Media.Stretch> enumeration:</span></span>  
  
- <span data-ttu-id="ed488-179"><xref:System.Windows.Media.Stretch.None>: イメージは、出力領域に合わせて拡大されません。</span><span class="sxs-lookup"><span data-stu-id="ed488-179"><xref:System.Windows.Media.Stretch.None>: The image is not stretched to fill the output area.</span></span> <span data-ttu-id="ed488-180">イメージが出力領域よりも大きい場合は、出力領域に収まらない部分がクリップされたイメージが出力領域に描画されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-180">If the image is larger than the output area, the image is drawn to the output area, clipping what does not fit.</span></span>  
  
- <span data-ttu-id="ed488-181"><xref:System.Windows.Media.Stretch.Fill>: イメージは、出力領域に合わせて拡大縮小されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-181"><xref:System.Windows.Media.Stretch.Fill>: The image is scaled to fit the output area.</span></span> <span data-ttu-id="ed488-182">イメージの高さと幅は個別に拡大縮小されるため、イメージの元の縦横比は保持されないことがあります。</span><span class="sxs-lookup"><span data-stu-id="ed488-182">Because the image height and width are scaled independently, the original aspect ratio of the image might not be preserved.</span></span> <span data-ttu-id="ed488-183">つまり、イメージは、出力コンテナーを完全に埋めるためにゆがんで表示される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ed488-183">That is, the image might be warped in order to completely fill the output container.</span></span>  
  
- <span data-ttu-id="ed488-184"><xref:System.Windows.Media.Stretch.Uniform>: イメージは、出力領域内に完全に収まるようにスケーリングされます。</span><span class="sxs-lookup"><span data-stu-id="ed488-184"><xref:System.Windows.Media.Stretch.Uniform>: The image is scaled so that it fits completely within the output area.</span></span> <span data-ttu-id="ed488-185">イメージの縦横比は保持されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-185">The image's aspect ratio is preserved.</span></span>  
  
- <span data-ttu-id="ed488-186"><xref:System.Windows.Media.Stretch.UniformToFill>: イメージは、イメージの元の縦横比を維持したまま、出力領域を完全に塗りつぶすようにスケーリングされます。</span><span class="sxs-lookup"><span data-stu-id="ed488-186"><xref:System.Windows.Media.Stretch.UniformToFill>: The image is scaled so that it completely fills the output area while preserving the image's original aspect ratio.</span></span>  
  
 <span data-ttu-id="ed488-187">次の例では、使用可能な <xref:System.Windows.Media.Stretch> 列挙をそれぞれ <xref:System.Windows.Controls.Image>に適用します。</span><span class="sxs-lookup"><span data-stu-id="ed488-187">The following example applies each of the available <xref:System.Windows.Media.Stretch> enumerations to an <xref:System.Windows.Controls.Image>.</span></span>  
  
 <span data-ttu-id="ed488-188">次の図は、この例の出力を示しています。また、イメージに適用した場合のさまざまな <xref:System.Windows.Controls.Image.Stretch%2A> 設定の影響を示しています。</span><span class="sxs-lookup"><span data-stu-id="ed488-188">The following image shows the output from the example and demonstrates the affect the different <xref:System.Windows.Controls.Image.Stretch%2A> settings have when applied to an image.</span></span>  
  
 <span data-ttu-id="ed488-189">![異なる TileBrush Stretch 設定](./media/img-mmgraphics-stretchenum.jpg "img_mmgraphics_stretchenum")</span><span class="sxs-lookup"><span data-stu-id="ed488-189">![Different TileBrush Stretch settings](./media/img-mmgraphics-stretchenum.jpg "img_mmgraphics_stretchenum")</span></span>  
<span data-ttu-id="ed488-190">異なる Stretch 設定</span><span class="sxs-lookup"><span data-stu-id="ed488-190">Different stretch settings</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ImageStretchExampleWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageStretchExample.xaml#imagestretchexamplewholepage)]  
  
### <a name="painting-with-images"></a><span data-ttu-id="ed488-191">イメージによる塗りつぶし</span><span class="sxs-lookup"><span data-stu-id="ed488-191">Painting with Images</span></span>  
 <span data-ttu-id="ed488-192">画像は、<xref:System.Windows.Media.Brush>で描画することによってアプリケーションに表示することもできます。</span><span class="sxs-lookup"><span data-stu-id="ed488-192">Images can also be displayed in an application by painting with a <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="ed488-193">ブラシを使用すると、[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] オブジェクトを単色で塗りつぶすことも、パターンとイメージの複雑な組み合わせで塗りつぶすこともできます。</span><span class="sxs-lookup"><span data-stu-id="ed488-193">Brushes enable you to paint [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] objects with anything from simple, solid colors to complex sets of patterns and images.</span></span> <span data-ttu-id="ed488-194">イメージで描画するには、<xref:System.Windows.Media.ImageBrush>を使用します。</span><span class="sxs-lookup"><span data-stu-id="ed488-194">To paint with images, use an <xref:System.Windows.Media.ImageBrush>.</span></span> <span data-ttu-id="ed488-195"><xref:System.Windows.Media.ImageBrush> は、そのコンテンツをビットマップイメージとして定義する <xref:System.Windows.Media.TileBrush> の一種です。</span><span class="sxs-lookup"><span data-stu-id="ed488-195">An <xref:System.Windows.Media.ImageBrush> is a type of <xref:System.Windows.Media.TileBrush> that defines its content as a bitmap image.</span></span> <span data-ttu-id="ed488-196"><xref:System.Windows.Media.ImageBrush> には、<xref:System.Windows.Media.ImageBrush.ImageSource%2A> プロパティによって指定された1つのイメージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-196">An <xref:System.Windows.Media.ImageBrush> displays a single image, which is specified by its <xref:System.Windows.Media.ImageBrush.ImageSource%2A> property.</span></span> <span data-ttu-id="ed488-197">イメージがゆがまないようしたり、パターンやその他の効果を作成したりするために、イメージの伸縮、配置、およびタイル表示方法を制御できます。</span><span class="sxs-lookup"><span data-stu-id="ed488-197">You can control how the image is stretched, aligned, and tiled, enabling you to prevent distortion and produce patterns and other effects.</span></span> <span data-ttu-id="ed488-198">次の図は、<xref:System.Windows.Media.ImageBrush>で実現できるいくつかの効果を示しています。</span><span class="sxs-lookup"><span data-stu-id="ed488-198">The following illustration shows some effects that can be achieved with an <xref:System.Windows.Media.ImageBrush>.</span></span>  
  
 <span data-ttu-id="ed488-199">![ImageBrush の出力例](./media/wcpsdk-mmgraphics-imagebrushexamples.gif "wcpsdk_mmgraphics_imagebrushexamples")</span><span class="sxs-lookup"><span data-stu-id="ed488-199">![ImageBrush output examples](./media/wcpsdk-mmgraphics-imagebrushexamples.gif "wcpsdk_mmgraphics_imagebrushexamples")</span></span>  
<span data-ttu-id="ed488-200">イメージ ブラシは、図形、コントロール、テキストなどを塗りつぶすことができる</span><span class="sxs-lookup"><span data-stu-id="ed488-200">Image brushes can fill shapes, controls, text, and more</span></span>  
  
 <span data-ttu-id="ed488-201">次の例では、<xref:System.Windows.Media.ImageBrush>を使用して、イメージでボタンの背景を描画する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="ed488-201">The following example demonstrates how to paint the background of a button with an image using an <xref:System.Windows.Media.ImageBrush>.</span></span>  
  
 [!code-xaml[UsingImageBrush#4](~/samples/snippets/csharp/VS_Snippets_Wpf/UsingImageBrush/CS/PaintingWithImages.xaml#4)]  
  
 <span data-ttu-id="ed488-202">イメージの <xref:System.Windows.Media.ImageBrush> と描画の詳細については[、「イメージ、描画、およびビジュアルによる塗りつぶし](painting-with-images-drawings-and-visuals.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ed488-202">For additional information about <xref:System.Windows.Media.ImageBrush> and painting images see [Painting with Images, Drawings, and Visuals](painting-with-images-drawings-and-visuals.md).</span></span>  
  
<a name="_metadata"></a>   
## <a name="image-metadata"></a><span data-ttu-id="ed488-203">イメージのメタデータ</span><span class="sxs-lookup"><span data-stu-id="ed488-203">Image Metadata</span></span>  
 <span data-ttu-id="ed488-204">一部のイメージ ファイルには、ファイルの内容または特性を記述するメタデータが含まれています。</span><span class="sxs-lookup"><span data-stu-id="ed488-204">Some image files contain metadata that describes the content or the characteristics of the file.</span></span> <span data-ttu-id="ed488-205">たとえば、ほとんどのデジタル カメラは、イメージをキャプチャするために使用されるカメラの型番に関するメタデータを含むイメージを作成します。</span><span class="sxs-lookup"><span data-stu-id="ed488-205">For example, most digital cameras create images that contain metadata about the make and model of the camera used to capture the image.</span></span> <span data-ttu-id="ed488-206">各イメージ形式では、メタデータの処理方法が異なりますが、WPF イメージングは、サポートされているイメージ形式ごとにメタデータを格納および取得するための統一された方法を提供</span><span class="sxs-lookup"><span data-stu-id="ed488-206">Each image format handles metadata differently but WPF Imaging provides a uniform way of storing and retrieving metadata for each supported image format.</span></span>  
  
 <span data-ttu-id="ed488-207">メタデータへのアクセスは、<xref:System.Windows.Media.Imaging.BitmapSource> オブジェクトの <xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> プロパティを通じて提供されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-207">Access to metadata is provided through the <xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> property of a <xref:System.Windows.Media.Imaging.BitmapSource> object.</span></span> <span data-ttu-id="ed488-208"><xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> は、イメージに含まれるすべてのメタデータを含む <xref:System.Windows.Media.Imaging.BitmapMetadata> オブジェクトを返します。</span><span class="sxs-lookup"><span data-stu-id="ed488-208"><xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> returns a <xref:System.Windows.Media.Imaging.BitmapMetadata> object that includes all the metadata contained by the image.</span></span> <span data-ttu-id="ed488-209">このデータは、1 つのメタデータ スキーマでも、異なるスキーマの組み合わせでもかまいません。</span><span class="sxs-lookup"><span data-stu-id="ed488-209">This data may be in one metadata schema or a combination of different schemes.</span></span> <span data-ttu-id="ed488-210">WPF イメージングでは、次のイメージメタデータスキーマがサポートされています。 Exchangeable 可能イメージファイル (Exif)、テキスト (PNG テキストデータ)、イメージファイルディレクトリ (IFD)、国際通話通信委員会 (IPTC)、および拡張可能メタデータプラットフォーム (XMP)。</span><span class="sxs-lookup"><span data-stu-id="ed488-210">WPF Imaging supports the following image metadata schemas: Exchangeable image file (Exif), tEXt (PNG Textual Data), image file directory (IFD), International Press Telecommunications Council (IPTC), and Extensible Metadata Platform (XMP).</span></span>  
  
 <span data-ttu-id="ed488-211">メタデータの読み取りプロセスを簡略化するために、<xref:System.Windows.Media.Imaging.BitmapMetadata> には、<xref:System.Windows.Media.Imaging.BitmapMetadata.Author%2A>、<xref:System.Windows.Media.Imaging.BitmapMetadata.Title%2A>、<xref:System.Windows.Media.Imaging.BitmapMetadata.CameraModel%2A>などの簡単にアクセスできる名前付きプロパティがいくつか用意されています。</span><span class="sxs-lookup"><span data-stu-id="ed488-211">In order to simplify the process of reading metadata, <xref:System.Windows.Media.Imaging.BitmapMetadata> provides several named properties that can be easily accessed such as <xref:System.Windows.Media.Imaging.BitmapMetadata.Author%2A>, <xref:System.Windows.Media.Imaging.BitmapMetadata.Title%2A>, and <xref:System.Windows.Media.Imaging.BitmapMetadata.CameraModel%2A>.</span></span> <span data-ttu-id="ed488-212">これらの名前付きプロパティの多くは、メタデータを書き込むためにも使用できます。</span><span class="sxs-lookup"><span data-stu-id="ed488-212">Many of these named properties can also be used to write metadata.</span></span> <span data-ttu-id="ed488-213">メタデータを読み取るための追加サポートは、メタデータ クエリ リーダーによって提供されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-213">Additional support for reading metadata is provided by the metadata query reader.</span></span> <span data-ttu-id="ed488-214"><xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> メソッドは、 *"/app1/exif/"* などの文字列クエリを指定することによって、メタデータクエリリーダーを取得するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-214">The <xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> method is used to retrieve a metadata query reader by providing a string query such as *"/app1/exif/"*.</span></span> <span data-ttu-id="ed488-215">次の例では、 *"/Text/Description"* の場所に格納されているテキストを取得するために <xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> が使用されています。</span><span class="sxs-lookup"><span data-stu-id="ed488-215">In the following example, <xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> is used to obtain the text stored in the *"/Text/Description"* location.</span></span>  
  
 [!code-cpp[BitmapMetadata#GetQuery](~/samples/snippets/cpp/VS_Snippets_Wpf/BitMapMetadata/CPP/BitmapMetadata.cpp#getquery)]
 [!code-csharp[BitmapMetadata#GetQuery](~/samples/snippets/csharp/VS_Snippets_Wpf/BitMapMetadata/CSharp/BitmapMetadata.cs#getquery)]
 [!code-vb[BitmapMetadata#GetQuery](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BitMapMetadata/VB/BitmapMetadata.vb#getquery)]  
  
 <span data-ttu-id="ed488-216">メタデータを書き込むには、メタデータ クエリ ライターが使用されます。</span><span class="sxs-lookup"><span data-stu-id="ed488-216">To write metadata, a metadata query writer is used.</span></span> <span data-ttu-id="ed488-217"><xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> はクエリライターを取得し、目的の値を設定します。</span><span class="sxs-lookup"><span data-stu-id="ed488-217"><xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> obtains the query writer and sets the desired value.</span></span> <span data-ttu-id="ed488-218">次の例では、 *"/Text/Description"* の場所に格納されているテキストを書き込むために <xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> が使用されています。</span><span class="sxs-lookup"><span data-stu-id="ed488-218">In the following example, <xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> is used to write the text stored in the *"/Text/Description"* location.</span></span>  
  
 [!code-cpp[BitmapMetadata#SetQuery](~/samples/snippets/cpp/VS_Snippets_Wpf/BitMapMetadata/CPP/BitmapMetadata.cpp#setquery)]
 [!code-csharp[BitmapMetadata#SetQuery](~/samples/snippets/csharp/VS_Snippets_Wpf/BitMapMetadata/CSharp/BitmapMetadata.cs#setquery)]
 [!code-vb[BitmapMetadata#SetQuery](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BitMapMetadata/VB/BitmapMetadata.vb#setquery)]  
  
<a name="_extensibility"></a>   
## <a name="codec-extensibility"></a><span data-ttu-id="ed488-219">コーデックの機能拡張</span><span class="sxs-lookup"><span data-stu-id="ed488-219">Codec Extensibility</span></span>  
 <span data-ttu-id="ed488-220">WPF イメージングのコア機能は、新しいイメージコーデックの拡張モデルです。</span><span class="sxs-lookup"><span data-stu-id="ed488-220">A core feature of WPF Imaging is the extensibility model for new image codecs.</span></span> <span data-ttu-id="ed488-221">これらのアンマネージ インターフェイスによって、コーデック開発者は、コーデックを [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] と統合して、新しいイメージ形式を [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] アプリケーションで自動的に使用できるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="ed488-221">These unmanaged interfaces enable codec developers to integrate codecs with [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] so new image formats can automatically be used by [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="ed488-222">機能拡張 API のサンプルについては、 [Win32 サンプルコーデック](https://go.microsoft.com/fwlink/?LinkID=160052)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ed488-222">For a sample of the extensibility API, see the [Win32 Sample Codec](https://go.microsoft.com/fwlink/?LinkID=160052).</span></span> <span data-ttu-id="ed488-223">このサンプルは、カスタム イメージ形式用のデコーダーとエンコーダーの作成方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="ed488-223">This sample demonstrates how to create a decoder and encoder for a custom image format.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="ed488-224">システムで認識するは、コーデックをデジタル署名する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ed488-224">The codec must be digitally signed for the system to recognize it.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ed488-225">関連項目</span><span class="sxs-lookup"><span data-stu-id="ed488-225">See also</span></span>

- <xref:System.Windows.Media.Imaging.BitmapSource>
- <xref:System.Windows.Media.Imaging.BitmapImage>
- <xref:System.Windows.Controls.Image>
- <xref:System.Windows.Media.Imaging.BitmapMetadata>
- [<span data-ttu-id="ed488-226">2D グラフィックスとイメージング</span><span class="sxs-lookup"><span data-stu-id="ed488-226">2D Graphics and Imaging</span></span>](../advanced/optimizing-performance-2d-graphics-and-imaging.md)
- [<span data-ttu-id="ed488-227">Win32 サンプル コーデック</span><span class="sxs-lookup"><span data-stu-id="ed488-227">Win32 Sample Codec</span></span>](https://go.microsoft.com/fwlink/?LinkID=160052)
