---
title: 再ホストされたワークフロー デザイナーにおける Workflow Foundation 4.5 の新機能のサポート
ms.date: 03/30/2017
ms.assetid: 1a4a4038-d8e6-41dd-99ea-93bd76286772
ms.openlocfilehash: f37938b603d0eec53a37e4f146376e3202f13d7a
ms.sourcegitcommit: d8020797a6657d0fbbdff362b80300815f682f94
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/24/2020
ms.locfileid: "95684136"
---
# <a name="support-for-new-workflow-foundation-45-features-in-the-rehosted-workflow-designer"></a><span data-ttu-id="aab48-102">再ホストされたワークフロー デザイナーにおける Workflow Foundation 4.5 の新機能のサポート</span><span class="sxs-lookup"><span data-stu-id="aab48-102">Support for New Workflow Foundation 4.5 Features in the Rehosted Workflow Designer</span></span>
<span data-ttu-id="aab48-103">.NET Framework 4.5 の Windows Workflow Foundation (WF) では、ワークフローデザイナーのエクスペリエンスに対するいくつかの機能強化など、多くの新機能が導入されました。</span><span class="sxs-lookup"><span data-stu-id="aab48-103">Windows Workflow Foundation (WF) in .NET Framework 4.5 introduced many new features, including several enhancements to the workflow designer experience.</span></span> <span data-ttu-id="aab48-104">このトピックでは、このような新機能のうち、再ホストされたデザイナーでサポートされている機能と現時点ではサポートされていない機能について詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="aab48-104">This topic details which of these features are supported in the rehosted designer, and which ones are currently not supported.</span></span>

> [!NOTE]
> <span data-ttu-id="aab48-105">.NET Framework 4.5 で導入された新しい Windows Workflow Foundation (WF) 機能の一覧については、「 [.NET Framework 4.5](whats-new-in-wf-in-dotnet.md)における Windows Workflow Foundation の新機能」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="aab48-105">For a list of all of the new Windows Workflow Foundation (WF) features introduced in .NET Framework 4.5, including those that are unrelated to designer rehosting, see [What's New in Windows Workflow Foundation in .NET Framework 4.5](whats-new-in-wf-in-dotnet.md).</span></span>

## <a name="activities"></a><span data-ttu-id="aab48-106">アクティビティ</span><span class="sxs-lookup"><span data-stu-id="aab48-106">Activities</span></span>
 <span data-ttu-id="aab48-107">組み込みのアクティビティ ライブラリには、既存のアクティビティ用の新しいアクティビティと新しい機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="aab48-107">The built-in activity library contains new activities and new features for existing activities.</span></span> <span data-ttu-id="aab48-108">これらの新しいアクティビティはすべて、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-108">All of these new activities are supported in the rehosted designer.</span></span> <span data-ttu-id="aab48-109">これらの新しいアクティビティの詳細については、 [.NET Framework 4.5 の「Windows Workflow Foundation の新機能](whats-new-in-wf-in-dotnet.md)」の「[アクティビティ](whats-new-in-wf-in-dotnet.md#BKMK_NewActivities)」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="aab48-109">For more information on these new activities, see the [Activities](whats-new-in-wf-in-dotnet.md#BKMK_NewActivities) section of [What's New in Windows Workflow Foundation in .NET Framework 4.5](whats-new-in-wf-in-dotnet.md).</span></span>

## <a name="c-expressions"></a><span data-ttu-id="aab48-110">C# の式</span><span class="sxs-lookup"><span data-stu-id="aab48-110">C# Expressions</span></span>
 <span data-ttu-id="aab48-111">.NET Framework 4.5 より前では、ワークフロー内のすべての式は Visual Basic でのみ記述できました。</span><span class="sxs-lookup"><span data-stu-id="aab48-111">Prior to .NET Framework 4.5, all expressions in workflows could only be written in Visual Basic.</span></span> <span data-ttu-id="aab48-112">.NET Framework 4.5 では、Visual Basic 式は Visual Basic を使用して作成されたプロジェクトにのみ使用されます。</span><span class="sxs-lookup"><span data-stu-id="aab48-112">In .NET Framework 4.5, Visual Basic expressions are only used for projects created using Visual Basic.</span></span> <span data-ttu-id="aab48-113">Visual C# プロジェクトでは、式に C# が使用されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="aab48-113">Visual C# projects now use C# for expressions.</span></span> <span data-ttu-id="aab48-114">Visual Studio 2012 でワークフローを作成する場合、完全に機能する C# 式エディターには、文法の強調表示や intellisense などの機能が用意されています。</span><span class="sxs-lookup"><span data-stu-id="aab48-114">When authoring workflows in Visual Studio 2012, a fully functional C# expression editor is provided which capabilities such as grammar highlighting and intellisense.</span></span> <span data-ttu-id="aab48-115">以前のバージョンで作成された、Visual Basic の式を使用する C# ワークフロー プロジェクトは引き続き動作します。</span><span class="sxs-lookup"><span data-stu-id="aab48-115">C# workflow projects created in previous versions that use Visual Basic expressions will continue to work.</span></span>

> [!WARNING]
> <span data-ttu-id="aab48-116">C# の式は、再ホストされたデザイナーではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="aab48-116">C# expressions are not supported in the rehosted designer.</span></span>

## <a name="new-designer-capabilities"></a><span data-ttu-id="aab48-117">デザイナーの新機能</span><span class="sxs-lookup"><span data-stu-id="aab48-117">New Designer Capabilities</span></span>

### <a name="designer-search"></a><span data-ttu-id="aab48-118">デザイナーでの検索</span><span class="sxs-lookup"><span data-stu-id="aab48-118">Designer Search</span></span>
 <span data-ttu-id="aab48-119">.NET Framework 4.5 で導入された [ [クイック検索](whats-new-in-wf-in-dotnet.md#BKMK_QuickFind) ] 機能と [[フォルダーを](whats-new-in-wf-in-dotnet.md#BKMK_FindInFiles) 使用して検索] 機能は、再ホストされたデザイナーではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="aab48-119">The [Quick Find](whats-new-in-wf-in-dotnet.md#BKMK_QuickFind) and [Find in Files](whats-new-in-wf-in-dotnet.md#BKMK_FindInFiles) features introduced with .NET Framework 4.5 are not supported in the rehosted designer.</span></span> <span data-ttu-id="aab48-120">`Toolbox` による検索は、再ホストされたデザイナーでもサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-120">The `Toolbox` search is supported in the rehosted designer.</span></span> <span data-ttu-id="aab48-121">これらの機能の詳細については、「 [デザイナー検索](whats-new-in-wf-in-dotnet.md#BKMK_DesignerSearch)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="aab48-121">For more information on these features, see [Designer Search](whats-new-in-wf-in-dotnet.md#BKMK_DesignerSearch).</span></span>

> [!WARNING]
> <span data-ttu-id="aab48-122">[[クイック検索](whats-new-in-wf-in-dotnet.md#BKMK_QuickFind)] と[[フォルダーを検索](whats-new-in-wf-in-dotnet.md#BKMK_FindInFiles)する] は、再ホストされたデザイナーではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="aab48-122">[Quick Find](whats-new-in-wf-in-dotnet.md#BKMK_QuickFind) and [Find in Files](whats-new-in-wf-in-dotnet.md#BKMK_FindInFiles) are not supported in the rehosted designer.</span></span>

### <a name="delete-context-menu-item-in-variable-and-argument-designer"></a><span data-ttu-id="aab48-123">変数デザイナーと引数デザイナーのコンテキスト メニューの [削除]</span><span class="sxs-lookup"><span data-stu-id="aab48-123">Delete context menu item in variable and argument designer</span></span>
 <span data-ttu-id="aab48-124">.NET Framework 4 では、変数と引数は、キーボードを使用してデザイナーでのみ削除できました。</span><span class="sxs-lookup"><span data-stu-id="aab48-124">In .NET Framework 4, variables and arguments could only be deleted in the designer using the keyboard.</span></span> <span data-ttu-id="aab48-125">.NET Framework 4.5 以降では、コンテキストメニューを使用して変数と引数を削除できます。</span><span class="sxs-lookup"><span data-stu-id="aab48-125">Starting with .NET Framework 4.5, variables and arguments can be deleted using the context menu.</span></span> <span data-ttu-id="aab48-126">この機能は、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-126">This feature is supported in the rehosted designer.</span></span>

 <span data-ttu-id="aab48-127">変数デザイナーと引数デザイナーのコンテキスト メニューを次のスクリーンショットに示しています。</span><span class="sxs-lookup"><span data-stu-id="aab48-127">The following screenshot shows the variable and argument designer context menu.</span></span>

 ![変数/引数デザイナーのコンテキスト メニュー](./media/wf-features-in-the-rehosted-workflow-designer/designer-context-menu.png)

### <a name="auto-surround-with-sequence"></a><span data-ttu-id="aab48-129">ブロックの自動挿入シーケンス</span><span class="sxs-lookup"><span data-stu-id="aab48-129">Auto-surround with Sequence</span></span>
 <span data-ttu-id="aab48-130">ワークフローまたは特定のコンテナー アクティビティ (<xref:System.Activities.Statements.NoPersistScope> など) には Body アクティビティを 1 つしか含めることができないため、2 つ目のアクティビティを追加するには、開発者が最初のアクティビティを削除し、<xref:System.Activities.Statements.Sequence> アクティビティを追加してから、シーケンス アクティビティに両方のアクティビティを追加する必要がありました。</span><span class="sxs-lookup"><span data-stu-id="aab48-130">Since a workflow or certain container activities (such as <xref:System.Activities.Statements.NoPersistScope>) can only contain a single body activity, adding a second activity required the developer to delete the first activity, add a <xref:System.Activities.Statements.Sequence> activity, and then add both activities to the sequence activity.</span></span> <span data-ttu-id="aab48-131">.NET Framework 4.5 以降では、デザイナー画面に2つ目のアクティビティを追加すると、両方のアクティビティを `Sequence` ラップするアクティビティが自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="aab48-131">Starting with .NET Framework 4.5, when adding a second activity to the designer surface, a `Sequence` activity will be automatically created to wrap both activities.</span></span> <span data-ttu-id="aab48-132">この機能は、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-132">This feature is supported in the rehosted designer.</span></span>

 <span data-ttu-id="aab48-133">次のスクリーンショットは、`WriteLine` の `Body` 内の `NoPersistScope` アクティビティを示しています。</span><span class="sxs-lookup"><span data-stu-id="aab48-133">The following screenshot shows a `WriteLine` activity in the `Body` of a `NoPersistScope`.</span></span>

 ![NoPersistScope アクティビティの本体の WriteLine アクティビティ。](./media/wf-features-in-the-rehosted-workflow-designer/auto-surround-write-line-activity.png)

 <span data-ttu-id="aab48-135">次のスクリーンショットは、2 つ目の `WriteLine` を 1 つ目の下にドロップしたときに `Body` 内に自動的に作成された `Sequence` アクティビティを示しています。</span><span class="sxs-lookup"><span data-stu-id="aab48-135">The following screenshot shows the automatically created `Sequence` activity in the `Body` when a second `WriteLine` is dropped below the first.</span></span>

 ![NoPersistScope の本体に自動的に作成されたシーケンス。](./media/wf-features-in-the-rehosted-workflow-designer/auto-surround-sequence-activity.png)

### <a name="pan-mode"></a><span data-ttu-id="aab48-137">パン モード</span><span class="sxs-lookup"><span data-stu-id="aab48-137">Pan Mode</span></span>
 <span data-ttu-id="aab48-138">デザイナーで大規模なワークフロー内をより簡単に移動するには、パン モードを有効にすると、開発者は、スクロール バーを使用する必要なく、ワークフローの表示される部分をクリックおよびドラッグして移動できるようになります。</span><span class="sxs-lookup"><span data-stu-id="aab48-138">To more easily navigate a large workflow in the designer, pan mode can be enabled, allowing the developer to click and drag to move the visible portion of the workflow, rather than needing to use the scroll bars.</span></span> <span data-ttu-id="aab48-139">パン モードをアクティブ化するボタンは、デザイナーの右下隅にあります。</span><span class="sxs-lookup"><span data-stu-id="aab48-139">The button to activate pan mode is in the lower right corner of the designer.</span></span> <span data-ttu-id="aab48-140">この機能は、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-140">This feature is supported in the rehosted designer.</span></span>

 <span data-ttu-id="aab48-141">次のスクリーンショットは、ワークフロー デザイナーの右下隅にあるパン ボタンを示しています。</span><span class="sxs-lookup"><span data-stu-id="aab48-141">The following screenshot shows the pan button which is located at the bottom right corner of the workflow designer.</span></span>

 ![ワークフローデザイナーで [パン] ボタンが強調表示されています。](./media/wf-features-in-the-rehosted-workflow-designer/pan-button-workflow-designer.png)

 <span data-ttu-id="aab48-143">マウスの中央ボタンまたは Space キーを使用して、ワークフロー デザイナーをパンすることもできます。</span><span class="sxs-lookup"><span data-stu-id="aab48-143">The middle mouse button or space bar can also be used to pan the workflow designer.</span></span>

### <a name="multi-select"></a><span data-ttu-id="aab48-144">複数選択</span><span class="sxs-lookup"><span data-stu-id="aab48-144">Multi-select</span></span>
 <span data-ttu-id="aab48-145">複数のアクティビティを同時に選択できます。これを行うには、複数のアクティビティを囲むようにドラッグするか (パン モードが無効な場合)、Ctrl キーを押したまま目的のアクティビティを 1 つずつクリックします。</span><span class="sxs-lookup"><span data-stu-id="aab48-145">Multiple activities can be selected at one time, either by dragging a rectangle around them (when pan mode is not enabled), or by holding down Ctrl and click on the desired activities one by one.</span></span> <span data-ttu-id="aab48-146">この機能は、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-146">This feature is supported in the rehosted designer.</span></span>

 <span data-ttu-id="aab48-147">選択した複数のアクティビティは、デザイナー内でドラッグ アンド ドロップすることも、コンテキスト メニューを使用して操作することもできます。</span><span class="sxs-lookup"><span data-stu-id="aab48-147">Multiple activity selections can also be dragged and dropped within the designer, and can also be interacted with using the context menu.</span></span>

### <a name="outline-view-of-workflow-items"></a><span data-ttu-id="aab48-148">ワークフロー項目のアウトライン表示</span><span class="sxs-lookup"><span data-stu-id="aab48-148">Outline view of workflow items</span></span>
 <span data-ttu-id="aab48-149">階層ワークフローを移動しやすくするため、ワークフローのコンポーネントはツリー スタイルのアウトライン表示で示されます。</span><span class="sxs-lookup"><span data-stu-id="aab48-149">In order to make hierarchical workflows easier to navigate, components of a workflow are shown in a tree-style outline view.</span></span> <span data-ttu-id="aab48-150">[アウトライン] ビューは、[ **ドキュメントアウトライン** ] ビューに表示されます。</span><span class="sxs-lookup"><span data-stu-id="aab48-150">The outline view is displayed in the **Document Outline** view.</span></span> <span data-ttu-id="aab48-151">このビューを Visual Studio で開くには、上部のメニューで [ **表示**]、[ **その他のウィンドウ**]、[ **ドキュメントアウトライン**] の順に選択するか、Ctrl W キーを押しながら U キーを押します。</span><span class="sxs-lookup"><span data-stu-id="aab48-151">To open this view in Visual Studio, from the top menu, select **View**, **Other Windows**, **Document Outline**, or press Ctrl W,U.</span></span> <span data-ttu-id="aab48-152">アウトライン表示でノードをクリックすると、ワークフロー デザイナーの対応するアクティビティに移動し、アウトライン表示が更新されて、デザイナーで選択されているアクティビティが表示されます。</span><span class="sxs-lookup"><span data-stu-id="aab48-152">Clicking on a node in outline view will navigate to the corresponding activity in the workflow designer, and the outline view will be updated to show activities that are selected in the designer.</span></span> <span data-ttu-id="aab48-153">この機能は、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-153">This feature is supported in the rehosted designer.</span></span>

 <span data-ttu-id="aab48-154">[はじめにチュートリアル](getting-started-tutorial.md)の完成したワークフローの次のスクリーンショットは、シーケンシャルワークフローを含むアウトラインビューを示しています。</span><span class="sxs-lookup"><span data-stu-id="aab48-154">The following screenshot of the completed workflow from the [Getting Started Tutorial](getting-started-tutorial.md) shows the outline view with a sequential workflow.</span></span>

 ![Visual Studio のシーケンシャルワークフローを含むアウトラインビューのスクリーンショット](./media/wf-features-in-the-rehosted-workflow-designer/outline-view-in-workflow-designer.jpg)

### <a name="more-control-of-visibility-of-shell-bar-and-header-items"></a><span data-ttu-id="aab48-156">シェル バーおよびヘッダー項目の可視性の詳細な制御</span><span class="sxs-lookup"><span data-stu-id="aab48-156">More control of visibility of shell bar and header items</span></span>
 <span data-ttu-id="aab48-157">再ホストされたデザイナーでは、標準 UI コントロールの中に、特定のワークフローにとって意味がないものもあれば、無効になっているものもあります。</span><span class="sxs-lookup"><span data-stu-id="aab48-157">In a rehosted designer, some of the standard UI controls may not have meaning for a given workflow, and may be turned off.</span></span> <span data-ttu-id="aab48-158">.NET Framework 4 では、このカスタマイズはデザイナーの下部にあるシェルバーでのみサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-158">In .NET Framework 4, this customization is only supported by the shell bar at the bottom of the designer.</span></span> <span data-ttu-id="aab48-159">.NET Framework 4.5 では、デザイナーの上部にあるシェルヘッダー項目の表示を適切な値に設定することによって調整でき <xref:System.Activities.Presentation.View.DesignerView.WorkflowShellHeaderItemsVisibility%2A> <xref:System.Activities.Presentation.View.ShellHeaderItemsVisibility> ます。</span><span class="sxs-lookup"><span data-stu-id="aab48-159">In .NET Framework 4.5, the visibility of shell header items at the top of the designer can be adjusted by setting <xref:System.Activities.Presentation.View.DesignerView.WorkflowShellHeaderItemsVisibility%2A> with the appropriate <xref:System.Activities.Presentation.View.ShellHeaderItemsVisibility> value.</span></span>

### <a name="auto-connect-and-auto-insert-in-flowchart-and-state-machine-workflows"></a><span data-ttu-id="aab48-160">フローチャートおよびステート マシンのワークフローの自動接続と自動挿入</span><span class="sxs-lookup"><span data-stu-id="aab48-160">Auto-connect and auto-insert in Flowchart and State Machine workflows</span></span>
 <span data-ttu-id="aab48-161">.NET Framework 4 では、フローチャートワークフロー内のノード間の接続を手動で追加する必要がありました。</span><span class="sxs-lookup"><span data-stu-id="aab48-161">In .NET Framework 4, connections between nodes in a Flowchart workflow had to be added manually.</span></span> <span data-ttu-id="aab48-162">.NET Framework 4.5 では、フローチャートおよびステートマシンノードには、アクティビティをツールボックスからデザイナー画面にドラッグしたときに表示される自動接続ポイントがあります。</span><span class="sxs-lookup"><span data-stu-id="aab48-162">In .NET Framework 4.5, Flowchart and State Machine nodes have auto-connect points that become visible when an activity is dragged from the toolbox onto the designer surface.</span></span> <span data-ttu-id="aab48-163">アクティビティをこれらのポイントのうち 1 つにドロップすると、アクティビティが必要な接続と共に自動的に追加されます。</span><span class="sxs-lookup"><span data-stu-id="aab48-163">Dropping an activity on one of these points automatically adds the activity along with the necessary connection.</span></span>

 <span data-ttu-id="aab48-164">次のスクリーンショットは、アクティビティがツールボックスからドラッグされるときに表示されるアタッチ ポイントを示します。</span><span class="sxs-lookup"><span data-stu-id="aab48-164">The following screenshot shows the attachment points that become visible when an activity is dragged from the toolbox.</span></span>

 ![自動接続ポイントを示すフローチャートの開始ノード](./media/wf-features-in-the-rehosted-workflow-designer/auto-connect-points-start-node.png)

 <span data-ttu-id="aab48-166">アクティビティは、フローチャート ノードと状態の間の接続にドラッグすることで、その他 2 つのノード間にノードを自動挿入することもできます。</span><span class="sxs-lookup"><span data-stu-id="aab48-166">Activities can also be dragged onto connections between flowchart nodes and states to auto-insert the node between two other nodes.</span></span> <span data-ttu-id="aab48-167">次のスクリーンショットは、アクティビティをツールボックスからドラッグ アンド ドロップできる、強調表示された接続線を示しています。</span><span class="sxs-lookup"><span data-stu-id="aab48-167">The following screenshot shows the highlighted connecting line where activities can be dragged from the toolbox and dropped.</span></span>

 ![アクティビティをドロップするための自動挿入ハンドル](./media/wf-features-in-the-rehosted-workflow-designer/auto-insert-connecting-line.png)

 <span data-ttu-id="aab48-169">自動接続と自動挿入は、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-169">Auto-connect and auto-insert are supported in the rehosted designer.</span></span>

### <a name="designer-annotations"></a><span data-ttu-id="aab48-170">デザイナー注釈</span><span class="sxs-lookup"><span data-stu-id="aab48-170">Designer Annotations</span></span>
 <span data-ttu-id="aab48-171">より大規模なワークフローの開発を容易にするため、デザイン プロセスを追跡できるよう注釈の追加がサポートされるようになりました。</span><span class="sxs-lookup"><span data-stu-id="aab48-171">To facilitate developing larger workflows, the designer now supports adding annotations to help keep track of the design process.</span></span> <span data-ttu-id="aab48-172">注釈は、アクティビティ、状態、フローチャート ノード、変数、および引数に追加できます。</span><span class="sxs-lookup"><span data-stu-id="aab48-172">Annotation can be added to activities, states, flowchart nodes, variables and arguments.</span></span> <span data-ttu-id="aab48-173">次のスクリーンショットは、デザイナーに注釈を追加するためのコンテキスト メニューを示しています。</span><span class="sxs-lookup"><span data-stu-id="aab48-173">The following screenshot shows the context menu used to add annotations to the designer.</span></span>

 ![表記を追加するためのメニューを表示するスクリーンショット。](./media/wf-features-in-the-rehosted-workflow-designer/designer-annotations-context-menu.png)

 <span data-ttu-id="aab48-175">デザイナー注釈は、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-175">Designer annotations are supported in the rehosted designer.</span></span>

### <a name="define-and-consume-activitydelegate-objects-in-the-designer"></a><span data-ttu-id="aab48-176">デザイナーでの ActivityDelegate オブジェクトの定義と使用</span><span class="sxs-lookup"><span data-stu-id="aab48-176">Define and consume ActivityDelegate objects in the designer</span></span>
 <span data-ttu-id="aab48-177">.NET Framework 4 のアクティビティは、 <xref:System.Activities.ActivityDelegate> ワークフローの他の部分がワークフローの実行と対話できる実行ポイントを公開するために使用されます。ただし、通常、これらの実行ポイントを使用するには、かなりの量のコードが必要です。</span><span class="sxs-lookup"><span data-stu-id="aab48-177">Activities in .NET Framework 4 used <xref:System.Activities.ActivityDelegate> objects to expose execution points where other parts of the workflow could interact with a workflow's execution, but using these execution points usually required a fair amount of code.</span></span> <span data-ttu-id="aab48-178">このリリースでは、開発者はワークフロー デザイナーを使用してアクティビティ デリゲートを定義および使用できます。</span><span class="sxs-lookup"><span data-stu-id="aab48-178">In this release, developers can define and consume activity delegates using the workflow designer.</span></span> <span data-ttu-id="aab48-179">詳細については、「 [方法: ワークフローデザイナーでアクティビティデリゲートを定義および使用する](/visualstudio/workflow-designer/how-to-define-and-consume-activity-delegates-in-the-workflow-designer)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="aab48-179">For more information, see [How to: Define and consume activity delegates in the Workflow Designer](/visualstudio/workflow-designer/how-to-define-and-consume-activity-delegates-in-the-workflow-designer).</span></span>

 <span data-ttu-id="aab48-180">アクティビティ デリゲートは、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-180">Activity delegates are supported in the rehosted designer.</span></span>

### <a name="build-time-validation"></a><span data-ttu-id="aab48-181">ビルド時の検証</span><span class="sxs-lookup"><span data-stu-id="aab48-181">Build-time validation</span></span>
 <span data-ttu-id="aab48-182">.NET Framework 4 では、ワークフロープロジェクトのビルド中に、ワークフローの検証エラーがビルドエラーとしてカウントされませんでした。</span><span class="sxs-lookup"><span data-stu-id="aab48-182">In .NET Framework 4, workflow validation errors weren’t counted as build errors during the build of a workflow project.</span></span> <span data-ttu-id="aab48-183">つまり、ワークフローの検証エラーが発生した場合でも、ワークフロー プロジェクトのビルドは成功している可能性があります。</span><span class="sxs-lookup"><span data-stu-id="aab48-183">This meant that building a workflow project could succeed even when there were workflow validation errors.</span></span> <span data-ttu-id="aab48-184">.NET Framework 4.5 では、ワークフローの検証エラーによってビルドが失敗します。</span><span class="sxs-lookup"><span data-stu-id="aab48-184">In .NET Framework 4.5, workflow validation errors cause the build to fail.</span></span>

> [!WARNING]
> <span data-ttu-id="aab48-185">ビルド時の検証は、再ホストされたデザイナーではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="aab48-185">Build-time validation is not supported in the rehosted designer.</span></span>

### <a name="design-time-background-validation"></a><span data-ttu-id="aab48-186">デザイン時バックグラウンド検証</span><span class="sxs-lookup"><span data-stu-id="aab48-186">Design-time background validation</span></span>
 <span data-ttu-id="aab48-187">.NET Framework 4 では、ワークフローがフォアグラウンドプロセスとして検証されました。これにより、複雑な、または時間のかかる検証プロセスで UI がブロックされる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="aab48-187">In .NET Framework 4, workflows were validated as a foreground process, which could potentially block the UI during complex or time-consuming validation processes.</span></span> <span data-ttu-id="aab48-188">現在、ワークフローの検証はバックグラウンド スレッドで実行されるため、UI がブロックされることはありません。</span><span class="sxs-lookup"><span data-stu-id="aab48-188">Workflow validation now takes place on a background thread, so that the UI is not blocked.</span></span>

 <span data-ttu-id="aab48-189">デザイン時バックグラウンド検証は、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-189">Design-time background validation is supported in the rehosted designer.</span></span>

### <a name="view-state-located-in-a-separate-location-in-xaml-files"></a><span data-ttu-id="aab48-190">XAML ファイル内で別々の場所にあるビューステート</span><span class="sxs-lookup"><span data-stu-id="aab48-190">View state located in a separate location in XAML files</span></span>
 <span data-ttu-id="aab48-191">.NET Framework 4 では、ワークフローのビューステート情報は、さまざまな場所にある XAML ファイルに格納されます。</span><span class="sxs-lookup"><span data-stu-id="aab48-191">In .NET Framework 4, the view state information for a workflow is stored across the XAML file in many different locations.</span></span> <span data-ttu-id="aab48-192">これは、XAML を直接読み取ったり、ビューステート情報を削除するコードを記述したりする開発者にとっては不便です。</span><span class="sxs-lookup"><span data-stu-id="aab48-192">This is inconvenient for developers who want to read XAML directly, or write code to remove the view state information.</span></span> <span data-ttu-id="aab48-193">.NET Framework 4.5 では、XAML ファイル内のビューステート情報が XAML ファイル内の個別の要素としてシリアル化されます。</span><span class="sxs-lookup"><span data-stu-id="aab48-193">In .NET Framework 4.5, the view state information in the XAML file is serialized as a separate element in the XAML file.</span></span>  <span data-ttu-id="aab48-194">開発者は、アクティビティのビューステート情報を簡単に見つけて編集したり、ビューステートを完全に削除したりできます。</span><span class="sxs-lookup"><span data-stu-id="aab48-194">Developers can easily locate and edit the view state information of an activity, or remove the view state altogether.</span></span>

 <span data-ttu-id="aab48-195">この機能は、再ホストされたワークフロー デザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-195">This feature is supported in the rehosted workflow designer.</span></span>

### <a name="opt-in-for-workflow-45-features-in-rehosted-designer"></a><span data-ttu-id="aab48-196">再ホストされたデザイナーでの Workflow 4.5 機能のオプトイン</span><span class="sxs-lookup"><span data-stu-id="aab48-196">Opt-in for Workflow 4.5 features in rehosted designer</span></span>
 <span data-ttu-id="aab48-197">旧バージョンとの互換性を維持するために、再ホストされたデザイナーでは、.NET Framework 4.5 に含まれるいくつかの新機能が既定で有効になっていません。</span><span class="sxs-lookup"><span data-stu-id="aab48-197">To preserve backward compatibility, some new features included in .NET Framework 4.5 are not enabled by default in the rehosted designer.</span></span> <span data-ttu-id="aab48-198">これは、再ホストされたデザイナーを使用する既存のアプリケーションが、最新バージョンに更新することで壊れないようにするためです。</span><span class="sxs-lookup"><span data-stu-id="aab48-198">This is to ensure that existing applications that use the rehosted designer are not broken by updating to the latest version.</span></span> <span data-ttu-id="aab48-199">再ホストされたデザイナーで新機能を有効にするには、<xref:System.Activities.Presentation.DesignerConfigurationService.TargetFrameworkName%2A> を ".Net Framework 4.5" に設定するか、<xref:System.Activities.Presentation.DesignerConfigurationService> の各メンバーを設定して各機能を有効にします。</span><span class="sxs-lookup"><span data-stu-id="aab48-199">To enable new features in the rehosted designer, either set <xref:System.Activities.Presentation.DesignerConfigurationService.TargetFrameworkName%2A> to ".Net Framework 4.5", or set individual members of <xref:System.Activities.Presentation.DesignerConfigurationService> to enable individual features.</span></span>

## <a name="new-workflow-development-models"></a><span data-ttu-id="aab48-200">新しいワークフロー開発モデル</span><span class="sxs-lookup"><span data-stu-id="aab48-200">New Workflow Development Models</span></span>
 <span data-ttu-id="aab48-201">このリリースには、フローチャートおよびシーケンシャル ワークフロー開発モデルに加えて、ステート マシンのワークフロー、およびコントラクト優先ワークフロー サービスが含まれています。</span><span class="sxs-lookup"><span data-stu-id="aab48-201">In addition to flowchart and sequential workflow development models, this release includes State Machine workflows, and contract-first workflow services.</span></span>

### <a name="state-machine-workflows"></a><span data-ttu-id="aab48-202">ステート マシンのワークフロー</span><span class="sxs-lookup"><span data-stu-id="aab48-202">State machine workflows</span></span>
 <span data-ttu-id="aab48-203">ステートマシンのワークフローは、 [Microsoft .NET Framework 4 Platform Update 1](/archive/blogs/endpoint/microsoft-net-framework-4-platform-update-1)の .NET Framework 4.0.1 の一部として導入されました。</span><span class="sxs-lookup"><span data-stu-id="aab48-203">State machine workflows were introduced as part of the .NET Framework 4.0.1 in the [Microsoft .NET Framework 4 Platform Update 1](/archive/blogs/endpoint/microsoft-net-framework-4-platform-update-1).</span></span> <span data-ttu-id="aab48-204">この更新プログラムには、開発者がステート マシンのワークフローを作成できるようにする、いくつかの新しいクラスとアクティビティが含まれていました。</span><span class="sxs-lookup"><span data-stu-id="aab48-204">This update included several new classes and activities which allowed developers to create state machine workflows.</span></span> <span data-ttu-id="aab48-205">これらのクラスとアクティビティは .NET Framework 4.5 に対して更新されました。</span><span class="sxs-lookup"><span data-stu-id="aab48-205">These classes and activities have been updated for .NET Framework 4.5.</span></span> <span data-ttu-id="aab48-206">更新プログラムには次のものが含まれています。</span><span class="sxs-lookup"><span data-stu-id="aab48-206">Updates include:</span></span>

1. <span data-ttu-id="aab48-207">状態にブレークポイントを設定する機能。</span><span class="sxs-lookup"><span data-stu-id="aab48-207">The ability to set breakpoints on states</span></span>

2. <span data-ttu-id="aab48-208">ワークフロー デザイナーで遷移をコピーして貼り付ける機能。</span><span class="sxs-lookup"><span data-stu-id="aab48-208">The ability to copy and paste transitions in the workflow designer</span></span>

3. <span data-ttu-id="aab48-209">トリガーを共有する遷移の作成に対するデザイナーのサポート。</span><span class="sxs-lookup"><span data-stu-id="aab48-209">Designer support for shared trigger transition creation</span></span>

4. <span data-ttu-id="aab48-210">ステート マシンのワークフロー作成に使用するアクティビティ (<xref:System.Activities.Statements.StateMachine><xref:System.Activities.Statements.State>、<xref:System.Activities.Statements.Transition> など)。</span><span class="sxs-lookup"><span data-stu-id="aab48-210">Activities used to create State Machine workflows, including: <xref:System.Activities.Statements.StateMachine>, <xref:System.Activities.Statements.State>, and <xref:System.Activities.Statements.Transition></span></span>

 <span data-ttu-id="aab48-211">次のスクリーンショットは、 [はじめにチュートリアル](getting-started-tutorial.md) の手順 [「ステートマシンワークフローを作成する方法](how-to-create-a-state-machine-workflow.md)」の完成したステートマシンワークフローを示しています。</span><span class="sxs-lookup"><span data-stu-id="aab48-211">The following screenshot shows the completed state machine workflow from the [Getting Started Tutorial](getting-started-tutorial.md) step [How to: Create a State Machine Workflow](how-to-create-a-state-machine-workflow.md).</span></span>

 ![完成したステートマシンのワークフローを示す図。](./media/wf-features-in-the-rehosted-workflow-designer/complete-state-machine-workflow.jpg)

 <span data-ttu-id="aab48-213">ステートマシンワークフローの作成の詳細については、「 [ステートマシンワークフロー](state-machine-workflows.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="aab48-213">For more information on creating state machine workflows, see [State Machine Workflows](state-machine-workflows.md).</span></span> <span data-ttu-id="aab48-214">ステート マシンのワークフローは、再ホストされたデザイナーでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="aab48-214">State machine workflows are supported in the rehosted designer.</span></span>

### <a name="contract-first-workflow-development"></a><span data-ttu-id="aab48-215">コントラクト優先ワークフローの開発</span><span class="sxs-lookup"><span data-stu-id="aab48-215">Contract-first workflow development</span></span>
 <span data-ttu-id="aab48-216">コントラクト優先ワークフロー開発ツールを使用すると、開発者は code first でコントラクトをデザインできます。 Visual Studio で数回クリックするだけで、各操作を表すアクティビティテンプレートがツールボックスに自動的に生成されます。</span><span class="sxs-lookup"><span data-stu-id="aab48-216">The contract-first workflow development tool allows the developer to design a contract in code first, then, with a few clicks in Visual Studio, automatically generate an activity template in the toolbox representing each operation.</span></span> <span data-ttu-id="aab48-217">これらのアクティビティは、コントラクトで定義された操作を実装するワークフローを作成するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="aab48-217">These activities are then used to create a workflow that implements the operations defined by the contract.</span></span> <span data-ttu-id="aab48-218">ワークフロー デザイナーは、ワークフロー サービスを検証し、これらの操作が実装され、ワークフローの署名がコントラクトの署名と一致することを確認します。</span><span class="sxs-lookup"><span data-stu-id="aab48-218">The workflow designer will validate the workflow service to ensure that these operations are implemented and the signature of the workflow matches the contract signature.</span></span> <span data-ttu-id="aab48-219">また、開発者は、ワークフロー サービスを、実装済みコントラクトのコレクションと関連付けることもできます。</span><span class="sxs-lookup"><span data-stu-id="aab48-219">The developer can also associate a workflow service with a collection of implemented contracts.</span></span> <span data-ttu-id="aab48-220">コントラクト優先ワークフローサービスの開発の詳細については、「 [方法: 既存のサービスコントラクトを使用するワークフローサービスを作成](how-to-create-a-workflow-service-that-consumes-an-existing-service-contract.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="aab48-220">For more information on contract-first workflow service development, see [How to: Create a workflow service that consumes an existing service contract](how-to-create-a-workflow-service-that-consumes-an-existing-service-contract.md).</span></span>

> [!WARNING]
> <span data-ttu-id="aab48-221">コントラクト優先ワークフローの開発は、ワークフロー デザイナーではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="aab48-221">Contract-first workflow development is not supported in the workflow designer.</span></span>
