---
title: SignTool.exe (署名ツール)
description: SignTool.exe (署名ツール) について説明します。 このコマンド ライン ツールによって、ファイルにデジタル署名を添付し、ファイルの署名を検証し、ファイルにタイムスタンプを適用することができます。
ms.date: 03/30/2017
helpviewer_keywords:
- Sign tool
- SignTool.exe
ms.assetid: 0c25ff6c-bff3-422e-b017-146a3ee86cb9
ms.openlocfilehash: 46a7453ff7de0329d9cd7f671dcaa0a3e3e0e54c
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/26/2020
ms.locfileid: "96238471"
---
# <a name="signtoolexe-sign-tool"></a><span data-ttu-id="c98ae-104">SignTool.exe (署名ツール)</span><span class="sxs-lookup"><span data-stu-id="c98ae-104">SignTool.exe (Sign Tool)</span></span>

<span data-ttu-id="c98ae-105">署名ツールはコマンド ライン ツールで、ファイルにデジタル署名を添付し、ファイルの署名を検証し、ファイルにタイム スタンプを付けます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-105">Sign Tool is a command-line tool that digitally signs files, verifies signatures in files, and time-stamps files.</span></span>  
  
 <span data-ttu-id="c98ae-106">このツールは、Visual Studio と共に自動的にインストールされます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-106">This tool is automatically installed with Visual Studio.</span></span> <span data-ttu-id="c98ae-107">このツールを実行するには、Visual Studio 用開発者コマンド プロンプト (または Windows 7 の Visual Studio コマンド プロンプト) を使用します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-107">To run the tool, use the Developer Command Prompt for Visual Studio (or the Visual Studio Command Prompt in Windows 7).</span></span> <span data-ttu-id="c98ae-108">詳細については、「[Visual Studio 用開発者コマンド プロンプト](developer-command-prompt-for-vs.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c98ae-108">For more information, see [Command Prompts](developer-command-prompt-for-vs.md).</span></span>

> [!Note]  
> <span data-ttu-id="c98ae-109">Windows 10 SDK、Windows 10 HLK、Windows 10 WDK、および Windows 10 ADK **ビルド 20236 以降** の場合、ダイジェスト アルゴリズムを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-109">The Windows 10 SDK, Windows 10 HLK, Windows 10 WDK and Windows 10 ADK **builds 20236 and later** require specifying the digest algorithm.</span></span> <span data-ttu-id="c98ae-110">SignTool の `sign` コマンドを使用するには、署名時およびタイムスタンプ時に、それぞれ `/fd` **ファイル ダイジェスト アルゴリズム** および `/td` **タイムスタンプ ダイジェスト アルゴリズム** オプションを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-110">The SignTool `sign` command requires the `/fd` **file digest algorithm** and the `/td` **timestamp digest algorithm** option to be specified during signing and timestamping, respectively.</span></span> <span data-ttu-id="c98ae-111">署名時に `/fd` が指定されていない場合、およびタイムスタンプ時に `/td` が指定されていない場合は、警告 (エラー コード 0、初期) がスローされます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-111">A warning (error code 0, initially) will be thrown if `/fd` is not specified during signing and if `/td` is not specified during timestamping.</span></span> <span data-ttu-id="c98ae-112">SignTool の以降のバージョンでは、警告がエラーになります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-112">In later versions of SignTool, the warning will become an error.</span></span> <span data-ttu-id="c98ae-113">SHA256 が推奨され、業界によって SHA1 より安全であると見なされています。</span><span class="sxs-lookup"><span data-stu-id="c98ae-113">SHA256 is recommended and considered to be more secure than SHA1 by the industry.</span></span>  
  
 <span data-ttu-id="c98ae-114">コマンド プロンプトに次のように入力します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-114">At the command prompt, type the following:</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="c98ae-115">構文</span><span class="sxs-lookup"><span data-stu-id="c98ae-115">Syntax</span></span>  
  
```console  
signtool [command] [options] [file_name | ...]  
```  
  
## <a name="parameters"></a><span data-ttu-id="c98ae-116">パラメーター</span><span class="sxs-lookup"><span data-stu-id="c98ae-116">Parameters</span></span>  
  
|<span data-ttu-id="c98ae-117">引数</span><span class="sxs-lookup"><span data-stu-id="c98ae-117">Argument</span></span>|<span data-ttu-id="c98ae-118">説明</span><span class="sxs-lookup"><span data-stu-id="c98ae-118">Description</span></span>|  
|--------------|-----------------|  
|`command`|<span data-ttu-id="c98ae-119">4 つのコマンド (`catdb`、`sign`、`Timestamp`、または `Verify`) の 1 つで、ファイルで実行する操作を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-119">One of four commands (`catdb`, `sign`, `Timestamp`, or `Verify`) that specifies an operation to perform on a file.</span></span> <span data-ttu-id="c98ae-120">各コマンドの詳細については、次の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c98ae-120">For a description of each command, see the next table.</span></span>|  
|`options`|<span data-ttu-id="c98ae-121">コマンドを変更するオプションです。</span><span class="sxs-lookup"><span data-stu-id="c98ae-121">An option that modifies a command.</span></span> <span data-ttu-id="c98ae-122">グローバル オプション `/q` および `/v` のほかに、各コマンドは固有のオプション セットをサポートします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-122">In addition to the global `/q` and `/v` options, each command supports a unique set of options.</span></span>|  
|`file_name`|<span data-ttu-id="c98ae-123">署名するファイルへのパスです。</span><span class="sxs-lookup"><span data-stu-id="c98ae-123">The path to a file to sign.</span></span>|  
  
 <span data-ttu-id="c98ae-124">次のコマンドは、署名ツールでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="c98ae-124">The following commands are supported by Sign Tool.</span></span> <span data-ttu-id="c98ae-125">各コマンドは、それぞれのセクションに示す個別のオプション セットと共に使用されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-125">Each command is used with distinct sets of options, which are listed in their respective sections.</span></span>  
  
|<span data-ttu-id="c98ae-126">コマンド</span><span class="sxs-lookup"><span data-stu-id="c98ae-126">Command</span></span>|<span data-ttu-id="c98ae-127">説明</span><span class="sxs-lookup"><span data-stu-id="c98ae-127">Description</span></span>|  
|-------------|-----------------|  
|`catdb`|<span data-ttu-id="c98ae-128">カタログ ファイルをカタログ データベースに追加したり、カタログ データベースから削除したりします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-128">Adds a catalog file to, or removes it from, a catalog database.</span></span> <span data-ttu-id="c98ae-129">カタログ データベースは、カタログ ファイルの自動検索で使用され、GUID によって識別されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-129">Catalog databases are used for automatic lookup of catalog files and are identified by GUID.</span></span> <span data-ttu-id="c98ae-130">`catdb` コマンドでサポートされているオプションの一覧については、「[catdb コマンド オプション](signtool-exe.md#catdb)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c98ae-130">For a list of the options supported by the `catdb` command, see [catdb Command Options](signtool-exe.md#catdb).</span></span>|  
|`sign`|<span data-ttu-id="c98ae-131">ファイルにデジタル署名します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-131">Digitally signs files.</span></span> <span data-ttu-id="c98ae-132">デジタル署名はファイルの改ざんを防止し、ユーザーが署名証明書に基づいて署名者を検証できるようにします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-132">Digital signatures protect files from tampering, and enable users to verify the signer based on a signing certificate.</span></span> <span data-ttu-id="c98ae-133">`sign` コマンドでサポートされているオプションの一覧については、「[sign コマンド オプション](signtool-exe.md#sign)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c98ae-133">For a list of the options supported by the `sign` command, see [sign Command Options](signtool-exe.md#sign).</span></span>|  
|`Timestamp`|<span data-ttu-id="c98ae-134">ファイルにタイム スタンプを付けます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-134">Time-stamps files.</span></span> <span data-ttu-id="c98ae-135">`TimeStamp` コマンドでサポートされているオプションの一覧については、「[TimeStamp コマンド オプション](signtool-exe.md#TimeStamp)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c98ae-135">For a list of the options supported by the `TimeStamp` command, see [TimeStamp Command Options](signtool-exe.md#TimeStamp).</span></span>|  
|`Verify`|<span data-ttu-id="c98ae-136">ファイルのデジタル署名を検証します。そのために、署名証明書が信頼できる機関により発行されたかどうか、署名証明書が取り消されたかどうかを確認します。また、オプションで、署名証明書が特定のポリシーに対して有効になっているかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-136">Verifies the digital signature of files by determining whether the signing certificate was issued by a trusted authority, whether the signing certificate has been revoked, and, optionally, whether the signing certificate is valid for a specific policy.</span></span> <span data-ttu-id="c98ae-137">`Verify` コマンドでサポートされているオプションの一覧については、「[Verify コマンド オプション](signtool-exe.md#Verify)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c98ae-137">For a list of the options supported by the `Verify` command, see [Verify Command Options](signtool-exe.md#Verify).</span></span>|  
  
 <span data-ttu-id="c98ae-138">次のオプションは、すべての署名ツール コマンドに適用されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-138">The following options apply to all Sign Tool commands.</span></span>  
  
|<span data-ttu-id="c98ae-139">Global オプション</span><span class="sxs-lookup"><span data-stu-id="c98ae-139">Global option</span></span>|<span data-ttu-id="c98ae-140">説明</span><span class="sxs-lookup"><span data-stu-id="c98ae-140">Description</span></span>|  
|-------------------|-----------------|  
|<span data-ttu-id="c98ae-141">**/q**</span><span class="sxs-lookup"><span data-stu-id="c98ae-141">**/q**</span></span>|<span data-ttu-id="c98ae-142">コマンドが正常に実行した場合には何も出力されず、コマンドが失敗した場合には最小限の出力が表示されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-142">Displays no output if the command runs successfully, and displays minimal output if the command fails.</span></span>|  
|<span data-ttu-id="c98ae-143">**/v**</span><span class="sxs-lookup"><span data-stu-id="c98ae-143">**/v**</span></span>|<span data-ttu-id="c98ae-144">コマンドが正常に実行したか、失敗したかにかかわらず、詳細出力と警告メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-144">Displays verbose output regardless of whether the command runs successfully or fails, and displays warning messages.</span></span>|  
|<span data-ttu-id="c98ae-145">**/debug**</span><span class="sxs-lookup"><span data-stu-id="c98ae-145">**/debug**</span></span>|<span data-ttu-id="c98ae-146">デバッグ情報を表示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-146">Displays debugging information.</span></span>|  
  
<a name="catdb"></a>

## <a name="catdb-command-options"></a><span data-ttu-id="c98ae-147">catdb コマンド オプション</span><span class="sxs-lookup"><span data-stu-id="c98ae-147">catdb Command Options</span></span>  

 <span data-ttu-id="c98ae-148">次の表に、`catdb` コマンドと共に使用できるオプションを示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-148">The following table lists the options that can be used with the `catdb` command.</span></span>  
  
|<span data-ttu-id="c98ae-149">Catdb オプション</span><span class="sxs-lookup"><span data-stu-id="c98ae-149">Catdb option</span></span>|<span data-ttu-id="c98ae-150">説明</span><span class="sxs-lookup"><span data-stu-id="c98ae-150">Description</span></span>|  
|------------------|-----------------|  
|`/d`|<span data-ttu-id="c98ae-151">既定のカタログ データベースを更新するように指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-151">Specifies that the default catalog database is updated.</span></span> <span data-ttu-id="c98ae-152">`/d` と `/g` のいずれのオプションも使用しない場合、署名ツールはシステム コンポーネントおよびドライバー データベースを更新します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-152">If neither the `/d` nor the `/g` option is used, Sign Tool updates the system component and driver database.</span></span>|  
|<span data-ttu-id="c98ae-153">`/g` *GUID*</span><span class="sxs-lookup"><span data-stu-id="c98ae-153">`/g` *GUID*</span></span>|<span data-ttu-id="c98ae-154">グローバル一意識別子 *GUID* によって識別されるカタログ データベースを更新するように指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-154">Specifies that the catalog database identified by the globally unique identifier *GUID* is updated.</span></span>|  
|`/r`|<span data-ttu-id="c98ae-155">指定したカタログをカタログ データベースから削除します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-155">Removes the specified catalogs from the catalog database.</span></span> <span data-ttu-id="c98ae-156">このオプションが指定されていない場合、署名ツールはカタログ データベースに指定されたカタログを追加します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-156">If this option is not specified, Sign Tool adds the specified catalogs to the catalog database.</span></span>|  
|`/u`|<span data-ttu-id="c98ae-157">追加されたカタログ ファイルに対して、一意な名前を自動的に生成するように指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-157">Specifies that a unique name is automatically generated for the added catalog files.</span></span> <span data-ttu-id="c98ae-158">必要に応じて、既存のカタログ ファイルと名前が競合しないように、カタログ ファイルの名前が変更されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-158">If necessary, the catalog files are renamed to prevent name conflicts with existing catalog files.</span></span> <span data-ttu-id="c98ae-159">このオプションが指定されていない場合、署名ツールは追加されるカタログと同じ名前を持つ既存のカタログを上書きします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-159">If this option is not specified, Sign Tool overwrites any existing catalog that has the same name as the catalog being added.</span></span>|  
  
<a name="sign"></a>

## <a name="sign-command-options"></a><span data-ttu-id="c98ae-160">sign コマンド オプション</span><span class="sxs-lookup"><span data-stu-id="c98ae-160">sign Command Options</span></span>  

 <span data-ttu-id="c98ae-161">次の表に、`sign` コマンドと共に使用できるオプションを示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-161">The following table lists the options that can be used with the `sign` command.</span></span>  
  
|<span data-ttu-id="c98ae-162">Sign コマンド オプション</span><span class="sxs-lookup"><span data-stu-id="c98ae-162">Sign command option</span></span>|<span data-ttu-id="c98ae-163">説明</span><span class="sxs-lookup"><span data-stu-id="c98ae-163">Description</span></span>|  
|-------------------------|-----------------|  
|`/a`|<span data-ttu-id="c98ae-164">最適な署名証明書を自動的に選択します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-164">Automatically selects the best signing certificate.</span></span> <span data-ttu-id="c98ae-165">署名ツールは、指定されたすべての条件を満たす有効な証明書をすべて検出し、最も長い期間有効である証明書を選択します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-165">Sign Tool will find all valid certificates that satisfy all specified conditions and select the one that is valid for the longest time.</span></span> <span data-ttu-id="c98ae-166">このオプションが指定されていない場合、署名ツールは有効な署名証明書を 1 つだけ検索することが前提とします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-166">If this option is not present, Sign Tool expects to find only one valid signing certificate.</span></span>|  
|<span data-ttu-id="c98ae-167">`/ac`  *file*</span><span class="sxs-lookup"><span data-stu-id="c98ae-167">`/ac`  *file*</span></span>|<span data-ttu-id="c98ae-168">*file* から署名ブロックに証明書を追加します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-168">Adds an additional certificate from *file* to the signature block.</span></span>|  
|`/as`|<span data-ttu-id="c98ae-169">この署名を追加します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-169">Appends this signature.</span></span> <span data-ttu-id="c98ae-170">プライマリ署名が存在しない場合、この署名がプライマリ署名になります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-170">If no primary signature is present, this signature is made the primary signature instead.</span></span>|  
|<span data-ttu-id="c98ae-171">`/c`  *CertTemplateName*</span><span class="sxs-lookup"><span data-stu-id="c98ae-171">`/c`  *CertTemplateName*</span></span>|<span data-ttu-id="c98ae-172">署名証明書に対して証明書テンプレート名 (Microsoft 拡張機能) を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-172">Specifies the Certificate Template Name (a Microsoft extension) for the signing certificate.</span></span>|  
|<span data-ttu-id="c98ae-173">`/csp`  *CSPName*</span><span class="sxs-lookup"><span data-stu-id="c98ae-173">`/csp`  *CSPName*</span></span>|<span data-ttu-id="c98ae-174">秘密キー コンテナーを含む暗号化サービス プロバイダー (CSP: Cryptographic Service Provider) を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-174">Specifies the cryptographic service provider (CSP) that contains the private key container.</span></span>|  
|<span data-ttu-id="c98ae-175">`/d`  *Desc*</span><span class="sxs-lookup"><span data-stu-id="c98ae-175">`/d`  *Desc*</span></span>|<span data-ttu-id="c98ae-176">署名された内容の説明を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-176">Specifies a description of the signed content.</span></span>|  
|<span data-ttu-id="c98ae-177">`/du`  *URL*</span><span class="sxs-lookup"><span data-stu-id="c98ae-177">`/du`  *URL*</span></span>|<span data-ttu-id="c98ae-178">署名された内容の詳細な説明に対する URL (Uniform Resource Locator) を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-178">Specifies a Uniform Resource Locator (URL) for the expanded description of the signed content.</span></span>|  
|<span data-ttu-id="c98ae-179">`/f`  *SignCertFile*</span><span class="sxs-lookup"><span data-stu-id="c98ae-179">`/f`  *SignCertFile*</span></span>|<span data-ttu-id="c98ae-180">ファイルの署名証明書を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-180">Specifies the signing certificate in a file.</span></span> <span data-ttu-id="c98ae-181">ファイルが個人情報交換 (PFX: Personal Information Exchange) 形式でパスワードによって保護されている場合に、`/p` オプションを使用してパスワードを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-181">If the file is in Personal Information Exchange (PFX) format and protected by a password, use the `/p` option to specify the password.</span></span> <span data-ttu-id="c98ae-182">ファイルに秘密キーが含まれていない場合、`/csp` および `/kc` オプションを使用して、CSP と秘密キー コンテナー名を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-182">If the file does not contain private keys, use the `/csp` and `/kc` options to specify the CSP and private key container name.</span></span>|  
|`/fd`|<span data-ttu-id="c98ae-183">ファイルの署名の作成に使用するファイル ダイジェスト アルゴリズムを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-183">Specifies the file digest algorithm to use for creating file signatures.</span></span> </br> <span data-ttu-id="c98ae-184">**注:** 署名時に `/fd` スイッチが指定されていない場合、警告が生成されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-184">**Note:** A warning is generated if the`/fd` switch is not provided while signing.</span></span> <span data-ttu-id="c98ae-185">既定のアルゴリズムは SHA1 ですが、SHA256 をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-185">The default algorithm is SHA1 but SHA256 is recommended.</span></span>|
|<span data-ttu-id="c98ae-186">`/fd`  *certHash*</span><span class="sxs-lookup"><span data-stu-id="c98ae-186">`/fd`  *certHash*</span></span>|<span data-ttu-id="c98ae-187">文字列 *certHash* を指定すると、既定でそのアルゴリズムが署名証明書に使用されるようになります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-187">Specifying the string *certHash* will default to the algorithm used on the signing certificate.</span></span> </br> <span data-ttu-id="c98ae-188">**注:** Windows 10 キット ビルド 20236 以降でのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-188">**Note:** Only available in Windows 10 kit builds 20236 and later.</span></span>|  
|<span data-ttu-id="c98ae-189">`/i`  *IssuerName*</span><span class="sxs-lookup"><span data-stu-id="c98ae-189">`/i`  *IssuerName*</span></span>|<span data-ttu-id="c98ae-190">署名証明書の発行者の名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-190">Specifies the name of the issuer of the signing certificate.</span></span> <span data-ttu-id="c98ae-191">この値には、発行者名全体の部分文字列を指定できます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-191">This value can be a substring of the entire issuer name.</span></span>|  
|<span data-ttu-id="c98ae-192">`/kc`  *PrivKeyContainerName*</span><span class="sxs-lookup"><span data-stu-id="c98ae-192">`/kc`  *PrivKeyContainerName*</span></span>|<span data-ttu-id="c98ae-193">秘密キー コンテナー名を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-193">Specifies the private key container name.</span></span>|  
|<span data-ttu-id="c98ae-194">`/n`  *SubjectName*</span><span class="sxs-lookup"><span data-stu-id="c98ae-194">`/n`  *SubjectName*</span></span>|<span data-ttu-id="c98ae-195">署名証明書の件名を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-195">Specifies the name of the subject of the signing certificate.</span></span> <span data-ttu-id="c98ae-196">この値には、件名全体の部分文字列を指定できます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-196">This value can be a substring of the entire subject name.</span></span>|  
|`/nph`|<span data-ttu-id="c98ae-197">サポートされている場合に、実行可能ファイルのページ ハッシュを抑制します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-197">If supported, suppresses page hashes for executable files.</span></span> <span data-ttu-id="c98ae-198">既定値は、SIGNTOOL_PAGE_HASHES 環境変数と wintrust.dll のバージョンによって決定されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-198">The default is determined by the SIGNTOOL_PAGE_HASHES environment variable and by the wintrust.dll version.</span></span> <span data-ttu-id="c98ae-199">PE ファイル以外では、このオプションは無視されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-199">This option is ignored for non-PE files.</span></span>|  
|<span data-ttu-id="c98ae-200">`/p`  *Password*</span><span class="sxs-lookup"><span data-stu-id="c98ae-200">`/p`  *Password*</span></span>|<span data-ttu-id="c98ae-201">PFX ファイルを開くときに使用するパスワードを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-201">Specifies the password to use when opening a PFX file.</span></span> <span data-ttu-id="c98ae-202">PFX ファイルを指定するには、`/f` オプションを使用します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-202">(Use the `/f` option to specify a PFX file.)</span></span>|  
|<span data-ttu-id="c98ae-203">`/p7` *パス*</span><span class="sxs-lookup"><span data-stu-id="c98ae-203">`/p7` *Path*</span></span>|<span data-ttu-id="c98ae-204">指定する各コンテンツ ファイルについて公開キー暗号化規格 (PKCS) #7 ファイルを作成することを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-204">Specifies that a Public Key Cryptography Standards (PKCS) #7 file is produced for each specified content file.</span></span> <span data-ttu-id="c98ae-205">PKCS #7 ファイルの名前は *path*\\*filename*.p7 です。</span><span class="sxs-lookup"><span data-stu-id="c98ae-205">PKCS #7 files are named *path*\\*filename*.p7.</span></span>|  
|<span data-ttu-id="c98ae-206">`/p7ce` *Value*</span><span class="sxs-lookup"><span data-stu-id="c98ae-206">`/p7ce` *Value*</span></span>|<span data-ttu-id="c98ae-207">署名された PKCS#7 コンテンツのオプションを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-207">Specifies options for the signed PKCS #7 content.</span></span> <span data-ttu-id="c98ae-208">署名されたコンテンツを PKCS #7 ファイルに埋め込む場合は *Value* を "Embedded" に設定し、デタッチされた PKCS #7 ファイルの署名されたデータ部分を作成する場合には "DetachedSignedData" に設定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-208">Set *Value* to "Embedded" to embed the signed content in the PKCS #7 file, or to "DetachedSignedData" to produce the signed data portion of a detached PKCS #7 file.</span></span> <span data-ttu-id="c98ae-209">`/p7ce` オプションを使用しない場合は、既定で署名されたコンテンツが埋め込まれます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-209">If the `/p7ce` option is not used, the signed content is embedded by default.</span></span>|  
|<span data-ttu-id="c98ae-210">`/p7co` *\<OID>*</span><span class="sxs-lookup"><span data-stu-id="c98ae-210">`/p7co` *\<OID>*</span></span>|<span data-ttu-id="c98ae-211">署名された PKCS#7 コンテンツを識別するオブジェクト識別子 (OID) を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-211">Specifies the object identifier (OID) that identifies the signed PKCS #7 content.</span></span>|  
|`/ph`|<span data-ttu-id="c98ae-212">サポートされている場合に、実行可能ファイルのページ ハッシュを生成します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-212">If supported, generates page hashes for executable files.</span></span>|  
|<span data-ttu-id="c98ae-213">`/r`  *RootSubjectName*</span><span class="sxs-lookup"><span data-stu-id="c98ae-213">`/r`  *RootSubjectName*</span></span>|<span data-ttu-id="c98ae-214">署名証明書のチェーン先とするルート証明書の件名を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-214">Specifies the name of the subject of the root certificate that the signing certificate must chain to.</span></span> <span data-ttu-id="c98ae-215">この値には、ルート証明書の件名全体の部分文字列を指定できます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-215">This value may be a substring of the entire subject name of the root certificate.</span></span>|  
|<span data-ttu-id="c98ae-216">`/s`  *StoreName*</span><span class="sxs-lookup"><span data-stu-id="c98ae-216">`/s`  *StoreName*</span></span>|<span data-ttu-id="c98ae-217">証明書を検索するときに開くストアを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-217">Specifies the store to open when searching for the certificate.</span></span> <span data-ttu-id="c98ae-218">このオプションが指定されていない場合、`My` ストアが開きます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-218">If this option is not specified, the `My` store is opened.</span></span>|  
|<span data-ttu-id="c98ae-219">`/sha1`  *Hash*</span><span class="sxs-lookup"><span data-stu-id="c98ae-219">`/sha1`  *Hash*</span></span>|<span data-ttu-id="c98ae-220">署名証明書の SHA1 ハッシュを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-220">Specifies the SHA1 hash of the signing certificate.</span></span> <span data-ttu-id="c98ae-221">以降のスイッチによって指定された条件を複数の証明書が満たす場合、一般的に SHA1 ハッシュが指定されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-221">The SHA1 hash is commonly specified when multiple certificates satisfy the criteria specified by the remaining switches.</span></span>|  
|`/sm`|<span data-ttu-id="c98ae-222">ユーザー ストアの代わりに、コンピューター ストアを使用するように指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-222">Specifies that a machine store, instead of a user store, is used.</span></span>|  
|<span data-ttu-id="c98ae-223">`/t`  *URL*</span><span class="sxs-lookup"><span data-stu-id="c98ae-223">`/t`  *URL*</span></span>|<span data-ttu-id="c98ae-224">タイム スタンプ サーバーの URL を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-224">Specifies the URL of the time stamp server.</span></span> <span data-ttu-id="c98ae-225">このオプション (または `/tr`) が指定されていない場合、署名されたファイルにはタイム スタンプが付きません。</span><span class="sxs-lookup"><span data-stu-id="c98ae-225">If this option (or `/tr`) is not present, the signed file will not be time stamped.</span></span> <span data-ttu-id="c98ae-226">タイム スタンプを付けるのに失敗すると、警告が生成されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-226">A warning is generated if time stamping fails.</span></span> <span data-ttu-id="c98ae-227">このオプションは、`/tr` オプションと一緒に使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="c98ae-227">This option cannot be used with the `/tr` option.</span></span>|  
|<span data-ttu-id="c98ae-228">`/td`  *alg*</span><span class="sxs-lookup"><span data-stu-id="c98ae-228">`/td`  *alg*</span></span>|<span data-ttu-id="c98ae-229">`/tr` オプションと共に使用して、RFC 3161 タイム スタンプ サーバーで使用されるダイジェスト アルゴリズムを要求します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-229">Used with the `/tr` option to request a digest algorithm used by the RFC 3161 time stamp server.</span></span> </br> <span data-ttu-id="c98ae-230">**注:** タイムスタンプ時に `/td` スイッチが指定されていない場合、警告が生成されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-230">**Note:** A warning is generated if the `/td` switch is not provided while timestamping.</span></span> <span data-ttu-id="c98ae-231">既定のアルゴリズムは SHA1 ですが、SHA256 をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-231">The default algorithm is SHA1, but SHA256 is recommended.</span></span> <br/> <span data-ttu-id="c98ae-232">`/td` スイッチは、`/tr` スイッチの前ではなく、後で宣言する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-232">The `/td` switch must be declared after the `/tr` switch, not before.</span></span> <span data-ttu-id="c98ae-233">`/tr` スイッチの前で `/td` スイッチを宣言した場合、返されるタイムスタンプは、意図した SHA256 アルゴリズムではなく SHA1 アルゴリズムからのものになります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-233">If the `/td` switch is declared before the `/tr` switch, the timestamp that is returned is from the SHA1 algorithm instead of the intended SHA256 algorithm.</span></span> |
|<span data-ttu-id="c98ae-234">`/tr`  *URL*</span><span class="sxs-lookup"><span data-stu-id="c98ae-234">`/tr`  *URL*</span></span>|<span data-ttu-id="c98ae-235">RFC 3161 タイム スタンプ サーバーの URL を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-235">Specifies the URL of the RFC 3161 time stamp server.</span></span> <span data-ttu-id="c98ae-236">このオプション (または `/t`) が指定されていない場合、署名されたファイルにはタイム スタンプが付きません。</span><span class="sxs-lookup"><span data-stu-id="c98ae-236">If this option (or `/t`) is not present, the signed file will not be time stamped.</span></span> <span data-ttu-id="c98ae-237">タイム スタンプを付けるのに失敗すると、警告が生成されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-237">A warning is generated if time stamping fails.</span></span> <span data-ttu-id="c98ae-238">このオプションは、`/t` オプションと一緒に使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="c98ae-238">This option cannot be used with the `/t` option.</span></span>|
|<span data-ttu-id="c98ae-239">`/u`  *Usage*</span><span class="sxs-lookup"><span data-stu-id="c98ae-239">`/u`  *Usage*</span></span>|<span data-ttu-id="c98ae-240">署名証明書に必要な拡張キー使用法 (EKU: Enhanced Key Usage) を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-240">Specifies the enhanced key usage (EKU) that must be present in the signing certificate.</span></span> <span data-ttu-id="c98ae-241">使用法の値は、OID または文字列によって指定できます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-241">The usage value can be specified by OID or string.</span></span> <span data-ttu-id="c98ae-242">既定の使用法は "Code Signing" (1.3.6.1.5.5.7.3.3) です。</span><span class="sxs-lookup"><span data-stu-id="c98ae-242">The default usage is "Code Signing" (1.3.6.1.5.5.7.3.3).</span></span>|  
|`/uw`|<span data-ttu-id="c98ae-243">使用法 "Windows System Component Verification" (1.3.6.1.4.1.311.10.3.6) を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-243">Specifies usage of "Windows System Component Verification" (1.3.6.1.4.1.311.10.3.6).</span></span>|  
  
 <span data-ttu-id="c98ae-244">使用例については、「[Using SignTool to Sign a File](/windows/desktop/SecCrypto/using-signtool-to-sign-a-file)」(SignTool を使用してファイルに署名する) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c98ae-244">For usage examples, see [Using SignTool to Sign a File](/windows/desktop/SecCrypto/using-signtool-to-sign-a-file).</span></span>  
  
<a name="TimeStamp"></a>

## <a name="timestamp-command-options"></a><span data-ttu-id="c98ae-245">TimeStamp コマンド オプション</span><span class="sxs-lookup"><span data-stu-id="c98ae-245">TimeStamp Command Options</span></span>  

 <span data-ttu-id="c98ae-246">次の表に、`TimeStamp` コマンドと共に使用できるオプションを示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-246">The following table lists the options that can be used with the `TimeStamp` command.</span></span>  
  
|<span data-ttu-id="c98ae-247">TimeStamp オプション</span><span class="sxs-lookup"><span data-stu-id="c98ae-247">TimeStamp option</span></span>|<span data-ttu-id="c98ae-248">説明</span><span class="sxs-lookup"><span data-stu-id="c98ae-248">Description</span></span>|  
|----------------------|-----------------|  
|`/p7`|<span data-ttu-id="c98ae-249">PKCS #7 ファイルにタイム スタンプを付けます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-249">Time stamps PKCS #7 files.</span></span>|  
|<span data-ttu-id="c98ae-250">`/t`  *URL*</span><span class="sxs-lookup"><span data-stu-id="c98ae-250">`/t`  *URL*</span></span>|<span data-ttu-id="c98ae-251">タイム スタンプ サーバーの URL を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-251">Specifies the URL of the time stamp server.</span></span> <span data-ttu-id="c98ae-252">タイム スタンプを付けるファイルは、事前に署名されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-252">The file being time stamped must have previously been signed.</span></span> <span data-ttu-id="c98ae-253">`/t` オプションまたは `/tr` オプションを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-253">Either the `/t` or the `/tr` option is required.</span></span>|  
|<span data-ttu-id="c98ae-254">`/td`  *alg*</span><span class="sxs-lookup"><span data-stu-id="c98ae-254">`/td`  *alg*</span></span>|<span data-ttu-id="c98ae-255">`/tr` オプションと共に使用して、RFC 3161 タイム スタンプ サーバーで使用されるダイジェスト アルゴリズムを要求します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-255">Used with the `/tr` option to request a digest algorithm used by the RFC 3161 time stamp server.</span></span> </br> <span data-ttu-id="c98ae-256">**注:** タイムスタンプ時に `/td` スイッチが指定されていない場合、警告が生成されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-256">**Note:** A warning is generated if the `/td` switch is not provided while timestamping.</span></span> <span data-ttu-id="c98ae-257">既定のアルゴリズムは SHA1 ですが、SHA256 をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-257">The default algorithm is SHA1, but SHA256 is recommended.</span></span> <br/> <span data-ttu-id="c98ae-258">`/td` スイッチは、`/tr` スイッチの前ではなく、後で宣言する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-258">The `/td` switch must be declared after the `/tr` switch, not before.</span></span> <span data-ttu-id="c98ae-259">`/tr` スイッチの前で `/td` スイッチを宣言した場合、返されるタイムスタンプは、意図した SHA256 アルゴリズムではなく SHA1 アルゴリズムからのものになります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-259">If the `/td` switch is declared before the `/tr` switch, the timestamp that is returned is from the SHA1 algorithm instead of the intended SHA256 algorithm.</span></span> |
|<span data-ttu-id="c98ae-260">`/tp` *index*</span><span class="sxs-lookup"><span data-stu-id="c98ae-260">`/tp` *index*</span></span>|<span data-ttu-id="c98ae-261">*index* で署名にタイム スタンプを付けます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-261">Time stamps the signature at *index*.</span></span>|  
|<span data-ttu-id="c98ae-262">`/tr`  *URL*</span><span class="sxs-lookup"><span data-stu-id="c98ae-262">`/tr`  *URL*</span></span>|<span data-ttu-id="c98ae-263">RFC 3161 タイム スタンプ サーバーの URL を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-263">Specifies the URL of the RFC 3161 time stamp server.</span></span> <span data-ttu-id="c98ae-264">タイム スタンプを付けるファイルは、事前に署名されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-264">The file being time stamped must have previously been signed.</span></span> <span data-ttu-id="c98ae-265">`/tr` オプションまたは `/t` オプションを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-265">Either the `/tr` or the `/t` option is required.</span></span>|  
  
 <span data-ttu-id="c98ae-266">使用例については、「[Adding Time Stamps to Previously Signed Files](/windows/desktop/SecCrypto/adding-time-stamps-to-previously-signed-files)」(署名済みのファイルにタイム スタンプを追加する) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c98ae-266">For a usage example, see [Adding Time Stamps to Previously Signed Files](/windows/desktop/SecCrypto/adding-time-stamps-to-previously-signed-files).</span></span>  
  
<a name="Verify"></a>

## <a name="verify-command-options"></a><span data-ttu-id="c98ae-267">Verify コマンド オプション</span><span class="sxs-lookup"><span data-stu-id="c98ae-267">Verify Command Options</span></span>  
  
|<span data-ttu-id="c98ae-268">Verify オプション</span><span class="sxs-lookup"><span data-stu-id="c98ae-268">Verify option</span></span>|<span data-ttu-id="c98ae-269">説明</span><span class="sxs-lookup"><span data-stu-id="c98ae-269">Description</span></span>|  
|-------------------|-----------------|  
|`/a`|<span data-ttu-id="c98ae-270">ファイルの検証にすべてのメソッドを使用できることを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-270">Specifies that all methods can be used to verify the file.</span></span> <span data-ttu-id="c98ae-271">まず、カタログ データベースを検索して、カタログでファイルが署名されているかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-271">First, the catalog databases are searched to determine whether the file is signed in a catalog.</span></span> <span data-ttu-id="c98ae-272">任意のカタログでファイルが署名されていない場合、署名ツールはファイルの埋め込み署名の検証を試みます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-272">If the file is not signed in any catalog, Sign Tool attempts to verify the file's embedded signature.</span></span> <span data-ttu-id="c98ae-273">カタログで署名されているファイルまたは署名されていないファイルを検証するときには、このオプションをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-273">This option is recommended when verifying files that may or may not be signed in a catalog.</span></span> <span data-ttu-id="c98ae-274">これらのファイルの例には、Windows ファイルまたはドライバーが含まれます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-274">Examples of these files include Windows files or drivers.</span></span>|  
|`/ad`|<span data-ttu-id="c98ae-275">既定のカタログ データベースを使用してカタログを検索します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-275">Finds the catalog by using the default catalog database.</span></span>|  
|<span data-ttu-id="c98ae-276">`/ag` *CatDBGUID*</span><span class="sxs-lookup"><span data-stu-id="c98ae-276">`/ag` *CatDBGUID*</span></span>|<span data-ttu-id="c98ae-277">*CatDBGUID* によって識別されるカタログ データベースのカタログを検索します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-277">Finds the catalog in the catalog database that is identified by the *CatDBGUID*.</span></span>|  
|`/all`|<span data-ttu-id="c98ae-278">複数の署名を含むファイル内のすべての署名を確認します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-278">Verifies all signatures in a file that includes multiple signatures.</span></span>|  
|`/as`|<span data-ttu-id="c98ae-279">システム コンポーネント (ドライバー) のカタログ データベースを使用してカタログを検索します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-279">Finds the catalog by using the system component (driver) catalog database.</span></span>|  
|<span data-ttu-id="c98ae-280">`/c` *CatFile*</span><span class="sxs-lookup"><span data-stu-id="c98ae-280">`/c` *CatFile*</span></span>|<span data-ttu-id="c98ae-281">名前でカタログ ファイルを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-281">Specifies the catalog file by name.</span></span>|  
|`/d`|<span data-ttu-id="c98ae-282">署名ツールで説明と説明の URL を出力するように指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-282">Specifies that Sign Tool should print the description and the description URL.</span></span>|  
|<span data-ttu-id="c98ae-283">`/ds`  *Index*</span><span class="sxs-lookup"><span data-stu-id="c98ae-283">`/ds`  *Index*</span></span>|<span data-ttu-id="c98ae-284">指定した位置の署名を検証します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-284">Verifies the signature at a specified position.</span></span>|  
|<span data-ttu-id="c98ae-285">`/hash` (`SHA1`&#124;`SHA256`)</span><span class="sxs-lookup"><span data-stu-id="c98ae-285">`/hash` (`SHA1`&#124;`SHA256`)</span></span>|<span data-ttu-id="c98ae-286">カタログ内のファイルを検索する場合に使用するオプションのハッシュ アルゴリズムを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-286">Specifies an optional hash algorithm to use when searching for a file in a catalog.</span></span>|  
|`/kp`|<span data-ttu-id="c98ae-287">カーネル モード ドライバーの署名ポリシーを使用して検証を実行するように指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-287">Specifies that verification should be performed with the kernel-mode driver signing policy.</span></span>|  
|`/ms`|<span data-ttu-id="c98ae-288">複数の検証セマンティクスを使用します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-288">Uses multiple verification semantics.</span></span> <span data-ttu-id="c98ae-289">これは、Windows 8 以降での [WinVerifyTrust](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) 呼び出しの既定の動作です。</span><span class="sxs-lookup"><span data-stu-id="c98ae-289">This is the default behavior of a [WinVerifyTrust](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) call on Windows 8 and above.</span></span>|  
|<span data-ttu-id="c98ae-290">`/o` *Version*</span><span class="sxs-lookup"><span data-stu-id="c98ae-290">`/o` *Version*</span></span>|<span data-ttu-id="c98ae-291">オペレーティング システムのバージョンでファイルを確認します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-291">Verifies the file by operating system version.</span></span> <span data-ttu-id="c98ae-292">*バージョン* の書式は、*PlatformID*:*VerMajor*.*VerMinor*.*BuildNumber* になります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-292">*Version* has the following form: *PlatformID*:*VerMajor*.*VerMinor*.*BuildNumber*.</span></span> <span data-ttu-id="c98ae-293">*PlatformID* は、<xref:System.PlatformID> 列挙メンバーの基になる値を表します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-293">*PlatformID* represents the underlying value of a <xref:System.PlatformID> enumeration member.</span></span> <span data-ttu-id="c98ae-294">**重要:** `/o` スイッチを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-294">**Important:**  The use of the `/o` switch is recommended.</span></span> <span data-ttu-id="c98ae-295">`/o` を指定しない場合、SignTool.exe から予期しない結果が返されることがあります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-295">If `/o` is not specified, SignTool.exe may return unexpected results.</span></span> <span data-ttu-id="c98ae-296">たとえば、`/o` スイッチを含めない場合、古いオペレーティング システム上で正しく検証されるシステム カタログが新しいオペレーティング システムで正しく検証されないことがあります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-296">For example, if you do not include the `/o` switch, system catalogs that validate correctly on an older operating system may not validate correctly on a newer operating system.</span></span>|  
|`/p7`|<span data-ttu-id="c98ae-297">PKCS #7 ファイルを確認します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-297">Verifies PKCS #7 files.</span></span> <span data-ttu-id="c98ae-298">PKCS #7 検証で既存のポリシーは使用されません。</span><span class="sxs-lookup"><span data-stu-id="c98ae-298">No existing policies are used for PKCS #7 validation.</span></span> <span data-ttu-id="c98ae-299">署名がチェックされ、署名証明書のチェーンがビルドされます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-299">The signature is checked and a chain is built for the signing certificate.</span></span>|  
|`/pa`|<span data-ttu-id="c98ae-300">既定の Authenticode 検証ポリシーを使用するように指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-300">Specifies that the Default Authenticode Verification Policy should be used.</span></span> <span data-ttu-id="c98ae-301">`/pa` オプションが指定されていない場合、署名ツールは Windows ドライバー検証ポリシーを使用します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-301">If the `/pa` option is not specified, Sign Tool uses the Windows Driver Verification Policy.</span></span> <span data-ttu-id="c98ae-302">このオプションは、`catdb` オプションと一緒に使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="c98ae-302">This option cannot be used with the `catdb` options.</span></span>|  
|<span data-ttu-id="c98ae-303">`/pg` *PolicyGUID*</span><span class="sxs-lookup"><span data-stu-id="c98ae-303">`/pg` *PolicyGUID*</span></span>|<span data-ttu-id="c98ae-304">GUID により検証ポリシーを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-304">Specifies a verification policy by GUID.</span></span> <span data-ttu-id="c98ae-305">*PolicyGUID* は検証ポリシーの ActionID に対応しています。</span><span class="sxs-lookup"><span data-stu-id="c98ae-305">The *PolicyGUID* corresponds to the ActionID of the verification policy.</span></span> <span data-ttu-id="c98ae-306">このオプションは、`catdb` オプションと一緒に使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="c98ae-306">This option cannot be used with the `catdb` options.</span></span>|  
|`/ph`|<span data-ttu-id="c98ae-307">署名ツールでページ ハッシュ値を出力および検証するように指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-307">Specifies that Sign Tool should print and verify page hash values.</span></span>|  
|<span data-ttu-id="c98ae-308">`/r` *RootSubjectName*</span><span class="sxs-lookup"><span data-stu-id="c98ae-308">`/r` *RootSubjectName*</span></span>|<span data-ttu-id="c98ae-309">署名証明書のチェーン先とするルート証明書の件名を指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-309">Specifies the name of the subject of the root certificate that the signing certificate must chain to.</span></span> <span data-ttu-id="c98ae-310">この値には、ルート証明書の件名全体の部分文字列を指定できます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-310">This value can be a substring of the entire subject name of the root certificate.</span></span>|  
|`/tw`|<span data-ttu-id="c98ae-311">署名にタイム スタンプが付けられていない場合に、警告を生成することを指定します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-311">Specifies that a warning should be generated if the signature is not time stamped.</span></span>|  
  
 <span data-ttu-id="c98ae-312">使用例については、「[Using SignTool to Verify a File Signature](/windows/desktop/SecCrypto/using-signtool-to-verify-a-file-signature)」(SignTool を使用してファイルの署名を検証する) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c98ae-312">For usage examples, see [Using SignTool to Verify a File Signature](/windows/desktop/SecCrypto/using-signtool-to-verify-a-file-signature).</span></span>  
  
## <a name="return-value"></a><span data-ttu-id="c98ae-313">戻り値</span><span class="sxs-lookup"><span data-stu-id="c98ae-313">Return Value</span></span>  

 <span data-ttu-id="c98ae-314">署名ツールは、終了時に次のいずれかの終了コードを返します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-314">Sign Tool returns one of the following exit codes when it terminates.</span></span>  
  
|<span data-ttu-id="c98ae-315">終了コード</span><span class="sxs-lookup"><span data-stu-id="c98ae-315">Exit code</span></span>|<span data-ttu-id="c98ae-316">説明</span><span class="sxs-lookup"><span data-stu-id="c98ae-316">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="c98ae-317">0</span><span class="sxs-lookup"><span data-stu-id="c98ae-317">0</span></span>|<span data-ttu-id="c98ae-318">実行に成功しました。</span><span class="sxs-lookup"><span data-stu-id="c98ae-318">Execution was successful.</span></span>|  
|<span data-ttu-id="c98ae-319">1</span><span class="sxs-lookup"><span data-stu-id="c98ae-319">1</span></span>|<span data-ttu-id="c98ae-320">実行に失敗しました。</span><span class="sxs-lookup"><span data-stu-id="c98ae-320">Execution has failed.</span></span>|  
|<span data-ttu-id="c98ae-321">2</span><span class="sxs-lookup"><span data-stu-id="c98ae-321">2</span></span>|<span data-ttu-id="c98ae-322">実行は完了しましたが、警告があります。</span><span class="sxs-lookup"><span data-stu-id="c98ae-322">Execution has completed with warnings.</span></span>|  

## <a name="examples"></a><span data-ttu-id="c98ae-323">使用例</span><span class="sxs-lookup"><span data-stu-id="c98ae-323">Examples</span></span>  

 <span data-ttu-id="c98ae-324">カタログ ファイル MyCatalogFileName.cat をシステム コンポーネントおよびドライバー データベースに追加するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-324">The following command adds the catalog file MyCatalogFileName.cat to the system component and driver database.</span></span> <span data-ttu-id="c98ae-325">`/u` オプションは、必要に応じて一意の名前を生成し、`MyCatalogFileName.cat` という名前の既存のカタログ ファイルが置き換えられないようにします。</span><span class="sxs-lookup"><span data-stu-id="c98ae-325">The `/u` option generates a unique name if necessary to prevent replacing an existing catalog file named `MyCatalogFileName.cat`.</span></span>  
  
```console  
signtool catdb /v /u MyCatalogFileName.cat  
```  
  
 <span data-ttu-id="c98ae-326">最適な証明書を使用してファイルに自動的に署名するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-326">The following command signs a file automatically by using the best certificate.</span></span>  
  
```console
signtool sign /a /fd SHA256 MyFile.exe
```

 <span data-ttu-id="c98ae-327">パスワードで保護された PFX ファイルに格納されている証明書を使用してファイルにデジタル署名するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-327">The following command digitally signs a file by using a certificate stored in a password-protected PFX file.</span></span>  
  
```console  
signtool sign /f MyCert.pfx /p MyPassword /fd SHA256 MyFile.exe
```  
  
 <span data-ttu-id="c98ae-328">ファイルにデジタル署名してタイム スタンプを付けるコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-328">The following command digitally signs and time-stamps a file.</span></span> <span data-ttu-id="c98ae-329">ファイルへの署名に使用する証明書は、PFX ファイルに格納されています。</span><span class="sxs-lookup"><span data-stu-id="c98ae-329">The certificate used to sign the file is stored in a PFX file.</span></span>  
  
```console  
signtool sign /f MyCert.pfx /t http://timestamp.digicert.com /fd SHA256 MyFile.exe
```  
  
 <span data-ttu-id="c98ae-330">`My` ストアにある件名が `My Company Certificate` の証明書を使用してファイルに署名するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-330">The following command signs a file by using a certificate located in the `My` store that has a subject name of `My Company Certificate`.</span></span>  
  
```console  
signtool sign /n "My Company Certificate" /fd SHA256 MyFile.exe
```  
  
 <span data-ttu-id="c98ae-331">ActiveX コントロールに署名して、ユーザーがコントロールをインストールするように求められるときに Internet Explorer に表示される情報を指定するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-331">The following command signs an ActiveX control and provides information that is displayed by Internet Explorer when the user is prompted to install the control.</span></span>  
  
```console  
Signtool sign /f MyCert.pfx /d: "MyControl" /du http://www.example.com/MyControl/info.html /fd SHA256 MyControl.exe
```  
  
 <span data-ttu-id="c98ae-332">デジタル署名済みのファイルにタイム スタンプを付けるコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-332">The following command time-stamps a file that has already been digitally signed.</span></span>  
  
```console  
signtool timestamp /t http://timestamp.digicert.com MyFile.exe
```  

<span data-ttu-id="c98ae-333">次のコマンドを使用すると、RFC 3161 タイムスタンプ サーバーを使用してファイルのタイムスタンプが設定されます。</span><span class="sxs-lookup"><span data-stu-id="c98ae-333">The following command time-stamps a file using an RFC 3161 timestamp server.</span></span>  
  
```console  
signtool timestamp /tr http://timestamp.digicert.com /td SHA256 MyFile.exe
```  
  
 <span data-ttu-id="c98ae-334">ファイルが署名済みであることを検証するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-334">The following command verifies that a file has been signed.</span></span>  
  
```console  
signtool verify MyFile.exe  
```  
  
 <span data-ttu-id="c98ae-335">カタログで署名されている可能性があるシステム ファイルを検証するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-335">The following command verifies a system file that may be signed in a catalog.</span></span>  
  
```console  
signtool verify /a SystemFile.dll  
```  
  
 <span data-ttu-id="c98ae-336">`MyCatalog.cat` という名前のカタログで署名されているシステム ファイルを検証するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c98ae-336">The following command verifies a system file that is signed in a catalog named `MyCatalog.cat`.</span></span>  
  
```console  
signtool verify /c MyCatalog.cat SystemFile.dll  
```  
  
## <a name="see-also"></a><span data-ttu-id="c98ae-337">関連項目</span><span class="sxs-lookup"><span data-stu-id="c98ae-337">See also</span></span>

- [<span data-ttu-id="c98ae-338">ツール</span><span class="sxs-lookup"><span data-stu-id="c98ae-338">Tools</span></span>](index.md)
- [<span data-ttu-id="c98ae-339">Visual Studio 用開発者コマンド プロンプト</span><span class="sxs-lookup"><span data-stu-id="c98ae-339">Command Prompts</span></span>](developer-command-prompt-for-vs.md)
