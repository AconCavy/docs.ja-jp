---
title: アーキテクチャ
description: データへのアクセスと操作に関する 2 つの主要なコンポーネントである、.NET Framework データ プロバイダーと DataSet を含む、ADO.NET のアーキテクチャについて説明します。
ms.date: 03/30/2017
ms.assetid: fcd45b99-ae8f-45ab-8b97-d887beda734e
ms.openlocfilehash: 8d45c1d0b33f3e7bf86a42561bfaa13772aa5a31
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/24/2020
ms.locfileid: "91166912"
---
# <a name="adonet-architecture"></a><span data-ttu-id="7ef82-103">ADO.NET のアーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="7ef82-103">ADO.NET Architecture</span></span>

<span data-ttu-id="7ef82-104">従来のデータ処理は、主に接続をベースとした 2 層モデルに基づいていました。</span><span class="sxs-lookup"><span data-stu-id="7ef82-104">Data processing has traditionally relied primarily on a connection-based, two-tier model.</span></span> <span data-ttu-id="7ef82-105">近年、データ処理では多層アーキテクチャの採用が増えてきており、アプリケーションのスケーラビリティを高める非接続型アプローチが主流になりつつあります。</span><span class="sxs-lookup"><span data-stu-id="7ef82-105">As data processing increasingly uses multi-tier architectures, programmers are switching to a disconnected approach to provide better scalability for their applications.</span></span>  
  
## <a name="adonet-components"></a><span data-ttu-id="7ef82-106">ADO.NET のコンポーネント</span><span class="sxs-lookup"><span data-stu-id="7ef82-106">ADO.NET Components</span></span>  

 <span data-ttu-id="7ef82-107">データのアクセスと操作に関する ADO.NET の 2 つの主要なコンポーネントは、.NET Framework データ プロバイダーと <xref:System.Data.DataSet> です。</span><span class="sxs-lookup"><span data-stu-id="7ef82-107">The two main components of ADO.NET for accessing and manipulating data are the .NET Framework data providers and the <xref:System.Data.DataSet>.</span></span>  
  
### <a name="net-framework-data-providers"></a><span data-ttu-id="7ef82-108">.NET Framework データ プロバイダー</span><span class="sxs-lookup"><span data-stu-id="7ef82-108">.NET Framework Data Providers</span></span>  

 <span data-ttu-id="7ef82-109">.NET Framework データ プロバイダーは、データの操作と、データに対する高速かつ前方参照専用、読み込み専用のアクセスを実行することを明確な目標としてデザインされたコンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="7ef82-109">The .NET Framework Data Providers are components that have been explicitly designed for data manipulation and fast, forward-only, read-only access to data.</span></span> <span data-ttu-id="7ef82-110">`Connection` オブジェクトはデータ ソースへの接続を実現します。</span><span class="sxs-lookup"><span data-stu-id="7ef82-110">The `Connection` object provides connectivity to a data source.</span></span> <span data-ttu-id="7ef82-111">`Command` オブジェクトによりデータベース コマンドにアクセスし、データの取得、データの修正、ストアド プロシージャの実行、およびパラメーター情報の送信または取得を実行できます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-111">The `Command` object enables access to database commands to return data, modify data, run stored procedures, and send or retrieve parameter information.</span></span> <span data-ttu-id="7ef82-112">`DataReader` は、データ ソースからのパフォーマンスの高いデータ ストリームを実現します。</span><span class="sxs-lookup"><span data-stu-id="7ef82-112">The `DataReader` provides a high-performance stream of data from the data source.</span></span> <span data-ttu-id="7ef82-113">最後に、`DataAdapter` は `DataSet` オブジェクトとデータ ソース間のブリッジとして機能します。</span><span class="sxs-lookup"><span data-stu-id="7ef82-113">Finally, the `DataAdapter` provides the bridge between the `DataSet` object and the data source.</span></span> <span data-ttu-id="7ef82-114">`DataAdapter` では `Command` オブジェクトを使用してデータ ソースに対して SQL コマンドを実行して、`DataSet` にデータを読み込むと同時に、`DataSet` のデータに加えられた変更をデータ ソースと調整します。</span><span class="sxs-lookup"><span data-stu-id="7ef82-114">The `DataAdapter` uses `Command` objects to execute SQL commands at the data source to both load the `DataSet` with data and reconcile changes that were made to the data in the `DataSet` back to the data source.</span></span> <span data-ttu-id="7ef82-115">詳しくは、「[.NET Framework データ プロバイダー](data-providers.md)」および「[ADO.NET でのデータの取得および変更](retrieving-and-modifying-data.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7ef82-115">For more information, see [.NET Framework Data Providers](data-providers.md) and [Retrieving and Modifying Data in ADO.NET](retrieving-and-modifying-data.md).</span></span>  
  
### <a name="the-dataset"></a><span data-ttu-id="7ef82-116">DataSet</span><span class="sxs-lookup"><span data-stu-id="7ef82-116">The DataSet</span></span>  

 <span data-ttu-id="7ef82-117">ADO.NET `DataSet` は、どのデータ ソースにも依存しないデータ アクセスを行うことを目的としています。</span><span class="sxs-lookup"><span data-stu-id="7ef82-117">The ADO.NET `DataSet` is explicitly designed for data access independent of any data source.</span></span> <span data-ttu-id="7ef82-118">したがって、複数の異なるデータ ソースと併用したり、XML データと併用したり、アプリケーションにとってローカルなデータを管理するために使用したりできます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-118">As a result, it can be used with multiple and differing data sources, used with XML data, or used to manage data local to the application.</span></span> <span data-ttu-id="7ef82-119">`DataSet` には、1 つ以上の <xref:System.Data.DataTable> オブジェクトのコレクションが含まれます。このオブジェクトは、データの行と列に加え、主キー、外部キー、制約、および `DataTable` オブジェクトのリレーション情報で構成されます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-119">The `DataSet` contains a collection of one or more <xref:System.Data.DataTable> objects consisting of rows and columns of data, and also primary key, foreign key, constraint, and relation information about the data in the `DataTable` objects.</span></span> <span data-ttu-id="7ef82-120">詳しくは、「[DataSet、DataTable、および DataView](./dataset-datatable-dataview/index.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7ef82-120">For more information, see [DataSets, DataTables, and DataViews](./dataset-datatable-dataview/index.md).</span></span>  
  
 <span data-ttu-id="7ef82-121">.NET Framework データ プロバイダーと `DataSet` の関係を次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="7ef82-121">The following diagram illustrates the relationship between a .NET Framework data provider and a `DataSet`.</span></span>  
  
 <span data-ttu-id="7ef82-122">![ADO.NET の図](./media/ado-1-bpuedev11.png "ado_1_bpuedev11")</span><span class="sxs-lookup"><span data-stu-id="7ef82-122">![ADO.Net graphic](./media/ado-1-bpuedev11.png "ado_1_bpuedev11")</span></span>  
<span data-ttu-id="7ef82-123">ADO.NET のアーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="7ef82-123">ADO.NET architecture</span></span>  
  
### <a name="choosing-a-datareader-or-a-dataset"></a><span data-ttu-id="7ef82-124">DataReader または DataSet の選択</span><span class="sxs-lookup"><span data-stu-id="7ef82-124">Choosing a DataReader or a DataSet</span></span>  

 <span data-ttu-id="7ef82-125">アプリケーションで `DataReader` (「[DataReader によるデータの取得](retrieving-data-using-a-datareader.md)」を参照) または `DataSet` (「[DataSet、DataTable、および DataView](./dataset-datatable-dataview/index.md)」を参照) を使用する必要があるかどうかを判断するときは、アプリケーションで必要な機能の種類を検討します。</span><span class="sxs-lookup"><span data-stu-id="7ef82-125">When you decide whether your application should use a `DataReader` (see [Retrieving Data Using a DataReader](retrieving-data-using-a-datareader.md)) or a `DataSet` (see [DataSets, DataTables, and DataViews](./dataset-datatable-dataview/index.md)), consider the type of functionality that your application requires.</span></span> <span data-ttu-id="7ef82-126">以下を実行する場合は `DataSet` を使用します。</span><span class="sxs-lookup"><span data-stu-id="7ef82-126">Use a `DataSet` to do the following:</span></span>  
  
- <span data-ttu-id="7ef82-127">アプリケーションでデータをローカルにキャッシュすると、そのデータを操作できます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-127">Cache data locally in your application so that you can manipulate it.</span></span> <span data-ttu-id="7ef82-128">クエリの実行結果を読み取るだけで良い場合は、`DataReader` の使用をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7ef82-128">If you only need to read the results of a query, the `DataReader` is the better choice.</span></span>  
  
- <span data-ttu-id="7ef82-129">層間で、または XML Web サービスからデータをリモート処理する場合。</span><span class="sxs-lookup"><span data-stu-id="7ef82-129">Remote data between tiers or from an XML Web service.</span></span>  
  
- <span data-ttu-id="7ef82-130">Windows フォーム コントロールとの連結、または複数ソースに属するデータの組み合わせや関連付けなど、データと動的に対話する場合。</span><span class="sxs-lookup"><span data-stu-id="7ef82-130">Interact with data dynamically such as binding to a Windows Forms control or combining and relating data from multiple sources.</span></span>  
  
- <span data-ttu-id="7ef82-131">データ ソースとの接続を開かずにデータに対する広範な処理を実行する場合。他のクライアントが使用できるように、接続が解放されます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-131">Perform extensive processing on data without requiring an open connection to the data source, which frees the connection to be used by other clients.</span></span>  
  
 <span data-ttu-id="7ef82-132">`DataSet` の機能が必要ない場合は、`DataReader` を使用して前方参照専用、読み取り専用の方法でデータを返すことにより、アプリケーションのパフォーマンスを向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-132">If you do not require the functionality provided by the `DataSet`, you can improve the performance of your application by using the `DataReader` to return your data in a forward-only, read-only manner.</span></span> <span data-ttu-id="7ef82-133">`DataAdapter` では `DataReader` を使用して `DataSet` の内容が設定されますが (「[DataAdapter からの DataSet の読み込み](populating-a-dataset-from-a-dataadapter.md)」を参照)、`DataReader` を使用するとパフォーマンスを向上させることができます。これは、`DataSet` によって消費されるメモリが節約され、`DataSet` の内容の作成と設定に必要な処理が不要になるためです。</span><span class="sxs-lookup"><span data-stu-id="7ef82-133">Although the `DataAdapter` uses the `DataReader` to fill the contents of a `DataSet` (see [Populating a DataSet from a DataAdapter](populating-a-dataset-from-a-dataadapter.md)), by using the `DataReader`, you can boost performance because you will save memory that would be consumed by the `DataSet`, and avoid the processing that is required to create and fill the contents of the `DataSet`.</span></span>  
  
## <a name="linq-to-dataset"></a><span data-ttu-id="7ef82-134">LINQ to DataSet</span><span class="sxs-lookup"><span data-stu-id="7ef82-134">LINQ to DataSet</span></span>  

 <span data-ttu-id="7ef82-135">LINQ to DataSet はクエリ機能を備え、DataSet オブジェクトでキャッシュされたデータに対するコンパイル時の型チェックを行います。</span><span class="sxs-lookup"><span data-stu-id="7ef82-135">LINQ to DataSet provides query capabilities and compile-time type checking over data cached in a DataSet object.</span></span> <span data-ttu-id="7ef82-136">これを使用すると、C# や Visual Basic などのいずれかの .NET Framework 開発言語でクエリを記述できます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-136">It allows you to write queries in one of the .NET Framework development language, such as C# or Visual Basic.</span></span> <span data-ttu-id="7ef82-137">詳細については、「[LINQ to DataSet](linq-to-dataset.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7ef82-137">For more information, see [LINQ to DataSet](linq-to-dataset.md).</span></span>  
  
## <a name="linq-to-sql"></a><span data-ttu-id="7ef82-138">LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="7ef82-138">LINQ to SQL</span></span>  

 <span data-ttu-id="7ef82-139">LINQ to SQL では、リレーショナル データベースのデータ構造と対応付けられたオブジェクト モデルに対し、中間概念モデルを使用することなくクエリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-139">LINQ to SQL supports queries against an object model that is mapped to the data structures of a relational database without using an intermediate conceptual model.</span></span> <span data-ttu-id="7ef82-140">それぞれのテーブルは独立したクラスで表現され、オブジェクト モデルとリレーショナル データベース スキーマとが緊密に結び付けられます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-140">Each table is represented by a separate class, tightly coupling the object model to the relational database schema.</span></span> <span data-ttu-id="7ef82-141">LINQ to SQL では、オブジェクト モデルの統合言語クエリが Transact-SQL に変換され、データベースに送信されて実行されます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-141">LINQ to SQL translates language-integrated queries in the object model into Transact-SQL and sends them to the database for execution.</span></span> <span data-ttu-id="7ef82-142">データベースから結果が返されると、LINQ to SQL によって、その結果が再びオブジェクトへと変換されます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-142">When the database returns the results, LINQ to SQL translates the results back into objects.</span></span> <span data-ttu-id="7ef82-143">詳細については、「[LINQ to SQL](./sql/linq/index.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7ef82-143">For more information, see [LINQ to SQL](./sql/linq/index.md).</span></span>  
  
## <a name="adonet-entity-framework"></a><span data-ttu-id="7ef82-144">ADO.NET Entity Framework</span><span class="sxs-lookup"><span data-stu-id="7ef82-144">ADO.NET Entity Framework</span></span>  

 <span data-ttu-id="7ef82-145">ADO.NET Entity Framework は、開発者がリレーショナル ストレージ スキーマに対して直接プログラムを作成するのではなく、概念アプリケーション モデルに対してプログラムを作成して、データ アクセス アプリケーションを作成できるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="7ef82-145">The ADO.NET Entity Framework is designed to enable developers to create data access applications by programming against a conceptual application model instead of programming directly against a relational storage schema.</span></span> <span data-ttu-id="7ef82-146">その目的は、データ指向アプリケーションに必要なコードの量と保守作業の量を減らすことです。</span><span class="sxs-lookup"><span data-stu-id="7ef82-146">The goal is to decrease the amount of code and maintenance required for data-oriented applications.</span></span> <span data-ttu-id="7ef82-147">詳しくは、「[ADO.NET Entity Framework](./ef/index.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7ef82-147">For more information, see [ADO.NET Entity Framework](./ef/index.md).</span></span>  
  
## <a name="wcf-data-services"></a><span data-ttu-id="7ef82-148">WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="7ef82-148">WCF Data Services</span></span>  

 <span data-ttu-id="7ef82-149">WCF Data Services は、Web またはイントラネットにデータ サービスを配置するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-149">WCF Data Services is used to deploy data services on the Web or an intranet.</span></span> <span data-ttu-id="7ef82-150">データは、エンティティ データ モデルの仕様に従ってエンティティおよびリレーションシップとして構成されます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-150">The data is structured as entities and relationships according to the specifications of the Entity Data Model.</span></span> <span data-ttu-id="7ef82-151">このモデルで展開されるデータは、標準 HTTP プロトコルによってアドレス指定可能です。</span><span class="sxs-lookup"><span data-stu-id="7ef82-151">Data deployed on this model is addressable by standard HTTP protocol.</span></span> <span data-ttu-id="7ef82-152">詳細については、「[WCF Data Services 4.5](../wcf/index.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7ef82-152">For more information, see [WCF Data Services 4.5](../wcf/index.md).</span></span>  
  
## <a name="xml-and-adonet"></a><span data-ttu-id="7ef82-153">XML と ADO.NET</span><span class="sxs-lookup"><span data-stu-id="7ef82-153">XML and ADO.NET</span></span>  

 <span data-ttu-id="7ef82-154">ADO.NET では XML の機能を利用して、データへの非接続型アクセスが提供されます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-154">ADO.NET leverages the power of XML to provide disconnected access to data.</span></span> <span data-ttu-id="7ef82-155">ADO.NET は、.NET Framework の XML クラスと密接に連携するように設計されています。どちらも単一のアーキテクチャのコンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="7ef82-155">ADO.NET was designed hand-in-hand with the XML classes in the .NET Framework; both are components of a single architecture.</span></span>  
  
 <span data-ttu-id="7ef82-156">.NET Framework の ADO.NET と XML のクラスは、`DataSet` オブジェクトに集約されています。</span><span class="sxs-lookup"><span data-stu-id="7ef82-156">ADO.NET and the XML classes in the .NET Framework converge in the `DataSet` object.</span></span> <span data-ttu-id="7ef82-157">`DataSet` に、XML ソース (ファイルまたは XML ストリーム) に含まれるデータを入力できます。</span><span class="sxs-lookup"><span data-stu-id="7ef82-157">The `DataSet` can be populated with data from an XML source, whether it is a file or an XML stream.</span></span> <span data-ttu-id="7ef82-158">`DataSet` は、XML スキーマ定義言語 (XSD) スキーマを含む、W3C (World Wide Web Consortium) 準拠の XML として作成できます。これには `DataSet` 内のデータのソースは関係ありません。</span><span class="sxs-lookup"><span data-stu-id="7ef82-158">The `DataSet` can be written as World-Wide Web Consortium (W3C) compliant XML that includes its schema as XML schema definition language (XSD) schema, regardless of the source of the data in the `DataSet`.</span></span> <span data-ttu-id="7ef82-159">`DataSet` のネイティブのシリアル化形式は XML であることから、層間でデータを移動するための媒体として優れており、XML Web サービスとの間でデータとスキーマ コンテキストをリモート処理する場合には `DataSet` が最適な選択となります。</span><span class="sxs-lookup"><span data-stu-id="7ef82-159">Because of the native serialization format of the `DataSet` is XML, it is an excellent medium for moving data between tiers, making the `DataSet` an optimal choice for remoting data and schema context to and from an XML Web service.</span></span> <span data-ttu-id="7ef82-160">詳細については、「[XML ドキュメントと XML データ](../../../standard/data/xml/index.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7ef82-160">For more information, see [XML Documents and Data](../../../standard/data/xml/index.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7ef82-161">関連項目</span><span class="sxs-lookup"><span data-stu-id="7ef82-161">See also</span></span>

- [<span data-ttu-id="7ef82-162">ADO.NET の概要</span><span class="sxs-lookup"><span data-stu-id="7ef82-162">ADO.NET Overview</span></span>](ado-net-overview.md)
