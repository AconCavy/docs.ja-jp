---
title: ADO.NET Entity Framework での接続文字列
description: Entity Framework での接続文字列について説明します。これには、ADO.NET データ プロバイダーに接続するための情報と、モデル ファイルとマッピング ファイルに関する情報が含まれています。
ms.date: 10/15/2018
ms.assetid: 78d516bc-c99f-4865-8ff1-d856bc1a01c0
ms.openlocfilehash: 36b7724bc8dbb8f427f4bbf748b7b7801adea8db
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/15/2020
ms.locfileid: "90542758"
---
# <a name="connection-strings-in-the-adonet-entity-framework"></a><span data-ttu-id="43190-103">ADO.NET Entity Framework での接続文字列</span><span class="sxs-lookup"><span data-stu-id="43190-103">Connection Strings in the ADO.NET Entity Framework</span></span>

<span data-ttu-id="43190-104">接続文字列には、データ プロバイダーからデータ ソースにパラメーターとして渡す初期化情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="43190-104">A connection string contains initialization information that is passed as a parameter from a data provider to a data source.</span></span> <span data-ttu-id="43190-105">接続文字列は接続を開くときに解析され、その構文はデータ プロバイダーによって異なります。</span><span class="sxs-lookup"><span data-stu-id="43190-105">The syntax depends on the data provider, and the connection string is parsed during the attempt to open a connection.</span></span> <span data-ttu-id="43190-106">Entity Framework で使用される接続文字列には、Entity Framework のサポート基盤である ADO.NET データ プロバイダーへの接続に使用される情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="43190-106">Connection strings used by the Entity Framework contain information used to connect to the underlying ADO.NET data provider that supports the Entity Framework.</span></span> <span data-ttu-id="43190-107">また、必要なモデル ファイルおよびマッピング ファイルに関する情報も含まれています。</span><span class="sxs-lookup"><span data-stu-id="43190-107">They also contain information about the required model and mapping files.</span></span>

<span data-ttu-id="43190-108">接続文字列は、モデル メタデータおよびマッピング メタデータにアクセスしてデータ ソースに接続する際に EntityClient プロバイダーによって使用されます。</span><span class="sxs-lookup"><span data-stu-id="43190-108">The connection string is used by the EntityClient provider when accessing model and mapping metadata and connecting to the data source.</span></span> <span data-ttu-id="43190-109">接続文字列へのアクセスや接続文字列の設定は、<xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> の <xref:System.Data.EntityClient.EntityConnection> プロパティを使用して行います。</span><span class="sxs-lookup"><span data-stu-id="43190-109">The connection string can be accessed or set through the <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> property of <xref:System.Data.EntityClient.EntityConnection>.</span></span> <span data-ttu-id="43190-110"><xref:System.Data.EntityClient.EntityConnectionStringBuilder> クラスを使用すると、接続文字列内のパラメーターの構築やこれらへのアクセスをプログラムで行えます。</span><span class="sxs-lookup"><span data-stu-id="43190-110">The <xref:System.Data.EntityClient.EntityConnectionStringBuilder> class can be used to programmatically construct or access parameters in the connection string.</span></span> <span data-ttu-id="43190-111">詳細については、[EntityConnection の接続文字列を作成する](how-to-build-an-entityconnection-connection-string.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="43190-111">For more information, see [How to: Build an EntityConnection Connection String](how-to-build-an-entityconnection-connection-string.md).</span></span>

<span data-ttu-id="43190-112">[Entity Data Model ツール](/previous-versions/dotnet/netframework-4.0/bb399249(v=vs.100))では、アプリケーションの構成ファイルに保存される接続文字列が生成されます。</span><span class="sxs-lookup"><span data-stu-id="43190-112">The [Entity Data Model tools](/previous-versions/dotnet/netframework-4.0/bb399249(v=vs.100)) generate a connection string that is stored in the application's configuration file.</span></span> <span data-ttu-id="43190-113"><xref:System.Data.Objects.ObjectContext> は、オブジェクト クエリの作成時に自動的にこの接続情報を取得します。</span><span class="sxs-lookup"><span data-stu-id="43190-113"><xref:System.Data.Objects.ObjectContext> retrieves this connection information automatically when creating object queries.</span></span> <span data-ttu-id="43190-114"><xref:System.Data.EntityClient.EntityConnection> インスタンスで使用される <xref:System.Data.Objects.ObjectContext> には、<xref:System.Data.Objects.ObjectContext.Connection%2A> プロパティからアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="43190-114">The <xref:System.Data.EntityClient.EntityConnection> used by an <xref:System.Data.Objects.ObjectContext> instance can be accessed from the <xref:System.Data.Objects.ObjectContext.Connection%2A> property.</span></span> <span data-ttu-id="43190-115">詳しくは、「[接続とトランザクションの管理](/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100))」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="43190-115">For more information, see [Managing Connections and Transactions](/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span></span>

## <a name="connection-string-syntax"></a><span data-ttu-id="43190-116">接続文字列の構文</span><span class="sxs-lookup"><span data-stu-id="43190-116">Connection String Syntax</span></span>

<span data-ttu-id="43190-117">接続文字列の一般的な構文については、「ADO.NET での接続文字列」の「[接続文字列の構文](../connection-strings.md#connection-string-syntax)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="43190-117">To learn about the general syntax for connection strings, see [Connection string syntax | Connection Strings in ADO.NET](../connection-strings.md#connection-string-syntax).</span></span>

## <a name="connection-string-parameters"></a><span data-ttu-id="43190-118">接続文字列パラメーター</span><span class="sxs-lookup"><span data-stu-id="43190-118">Connection String Parameters</span></span>

<span data-ttu-id="43190-119"><xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> のキーワード値に有効な名前を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="43190-119">The following table lists the valid names for keyword values in the <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A>.</span></span>

|<span data-ttu-id="43190-120">キーワード</span><span class="sxs-lookup"><span data-stu-id="43190-120">Keyword</span></span>|<span data-ttu-id="43190-121">説明</span><span class="sxs-lookup"><span data-stu-id="43190-121">Description</span></span>|
|-------------|-----------------|
|`Provider`|<span data-ttu-id="43190-122">`Name` キーワードが指定されていない場合に必要です。</span><span class="sxs-lookup"><span data-stu-id="43190-122">Required if the `Name` keyword is not specified.</span></span> <span data-ttu-id="43190-123">基になるプロバイダーの <xref:System.Data.Common.DbProviderFactory> オブジェクトを取得するために使用されるプロバイダー名です。</span><span class="sxs-lookup"><span data-stu-id="43190-123">The provider name, which is used to retrieve the <xref:System.Data.Common.DbProviderFactory> object for the underlying provider.</span></span> <span data-ttu-id="43190-124">この値は定数です。</span><span class="sxs-lookup"><span data-stu-id="43190-124">This value is constant.</span></span><br /><br /> <span data-ttu-id="43190-125">`Name` キーワードがエンティティ接続文字列に含まれていない場合、`Provider` キーワードの空でない値が必要になります。</span><span class="sxs-lookup"><span data-stu-id="43190-125">When the `Name` keyword is not included in an entity connection string, a non-empty value for the `Provider` keyword is required.</span></span> <span data-ttu-id="43190-126">このキーワードは `Name` キーワードと同時に指定できません。</span><span class="sxs-lookup"><span data-stu-id="43190-126">This keyword is mutually exclusive with the `Name` keyword.</span></span>|
|`Provider Connection String`|<span data-ttu-id="43190-127">任意。</span><span class="sxs-lookup"><span data-stu-id="43190-127">Optional.</span></span> <span data-ttu-id="43190-128">基になるデータ ソースに渡される、プロバイダー固有の接続文字列を指定します。</span><span class="sxs-lookup"><span data-stu-id="43190-128">Specifies the provider-specific connection string that is passed to the underlying data source.</span></span> <span data-ttu-id="43190-129">この接続文字列には、データ プロバイダーの有効なキーワードと値のペアが含まれます。</span><span class="sxs-lookup"><span data-stu-id="43190-129">This connection string contains valid keyword/value pairs for the data provider.</span></span> <span data-ttu-id="43190-130">無効な `Provider Connection String` がデータ ソースによって評価されると、ランタイム エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="43190-130">An invalid `Provider Connection String` will cause a run-time error when it is evaluated by the data source.</span></span><br /><br /> <span data-ttu-id="43190-131">このキーワードは `Name` キーワードと同時に指定できません。</span><span class="sxs-lookup"><span data-stu-id="43190-131">This keyword is mutually exclusive with the `Name` keyword.</span></span><br /><br /> <span data-ttu-id="43190-132">必ず、「[ADO.NET での接続文字列](../connection-strings.md)」の一般的な構文に従って、値をエスケープします。</span><span class="sxs-lookup"><span data-stu-id="43190-132">Make sure to escape the value according to the general syntax of [ADO.NET connection strings](../connection-strings.md).</span></span> <span data-ttu-id="43190-133">たとえば、次のような接続文字列について考えます: `Server=serverName; User ID = userID`。</span><span class="sxs-lookup"><span data-stu-id="43190-133">Consider for example the following connection string: `Server=serverName; User ID = userID`.</span></span> <span data-ttu-id="43190-134">セミコロンが含まれているため、エスケープする必要があります。</span><span class="sxs-lookup"><span data-stu-id="43190-134">It must be escaped because it contains a semicolon.</span></span> <span data-ttu-id="43190-135">二重引用符は含まれていないため、エスケープに使用できます。</span><span class="sxs-lookup"><span data-stu-id="43190-135">Since it does not contain double quotation marks, they may be used for escaping:</span></span><br /><br /> `Provider Connection String ="Server=serverName; User ID = userID";`|
|`Metadata`|<span data-ttu-id="43190-136">`Name` キーワードが指定されていない場合に必要です。</span><span class="sxs-lookup"><span data-stu-id="43190-136">Required if the `Name` keyword is not specified.</span></span> <span data-ttu-id="43190-137">メタデータとマッピング情報の検索対象となるディレクトリ、ファイル、およびリソースの場所をパイプで区切って指定したリストです。</span><span class="sxs-lookup"><span data-stu-id="43190-137">A pipe-delimited list of directories, files, and resource locations in which to look for metadata and mapping information.</span></span> <span data-ttu-id="43190-138">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="43190-138">The following is an example:</span></span><br /><br /> `Metadata=`<br /><br /> `c:\model &#124; c:\model\sql\mapping.msl;`<br /><br /> <span data-ttu-id="43190-139">パイプ区切り記号の両側の空白は無視されます。</span><span class="sxs-lookup"><span data-stu-id="43190-139">Blank spaces on each side of the pipe separator are ignored.</span></span><br /><br /> <span data-ttu-id="43190-140">このキーワードは `Name` キーワードと同時に指定できません。</span><span class="sxs-lookup"><span data-stu-id="43190-140">This keyword is mutually exclusive with the `Name` keyword.</span></span>|
|`Name`|<span data-ttu-id="43190-141">アプリケーションは、オプションで、必要なキーワード/値接続文字列値を提供する接続名をアプリケーション構成ファイル内で指定できます。</span><span class="sxs-lookup"><span data-stu-id="43190-141">The application can optionally specify the connection name in an application configuration file that provides the required keyword/value connection string values.</span></span> <span data-ttu-id="43190-142">その場合は、接続文字列内に値を直接記述することはできません。</span><span class="sxs-lookup"><span data-stu-id="43190-142">In this case, you cannot supply them directly in the connection string.</span></span> <span data-ttu-id="43190-143">`Name` キーワードは、構成ファイル内で使用できません。</span><span class="sxs-lookup"><span data-stu-id="43190-143">The `Name` keyword is not allowed in a configuration file.</span></span><br /><br /> <span data-ttu-id="43190-144">`Name` キーワードが接続文字列に含まれていない場合、Provider キーワードの空でない値が必要になります。</span><span class="sxs-lookup"><span data-stu-id="43190-144">When the `Name` keyword is not included in the connection string, a non-empty values for Provider keyword is required.</span></span><br /><br /> <span data-ttu-id="43190-145">このキーワードは他のすべての接続文字列キーワードと同時に指定できません。</span><span class="sxs-lookup"><span data-stu-id="43190-145">This keyword is mutually exclusive with all the other connection string keywords.</span></span>|

<span data-ttu-id="43190-146">アプリケーション構成ファイルに格納された [AdventureWorks Sales Model](https://github.com/Microsoft/sql-server-samples/releases/tag/adventureworks) の接続文字列の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="43190-146">The following is an example of a connection string for the [AdventureWorks Sales Model](https://github.com/Microsoft/sql-server-samples/releases/tag/adventureworks) stored in the application configuration file:</span></span>

## <a name="model-and-mapping-file-locations"></a><span data-ttu-id="43190-147">モデル ファイルおよびマッピング ファイルの場所</span><span class="sxs-lookup"><span data-stu-id="43190-147">Model and Mapping File Locations</span></span>

<span data-ttu-id="43190-148">`Metadata` パラメーターには、`EntityClient` プロバイダーがモデル ファイルおよびマッピング ファイルを検索するための場所のリストが格納されます。</span><span class="sxs-lookup"><span data-stu-id="43190-148">The `Metadata` parameter contains a list of locations for the `EntityClient` provider to search for model and mapping files.</span></span> <span data-ttu-id="43190-149">多くの場合、モデル ファイルとマッピング ファイルは、アプリケーション実行可能ファイルと同じディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="43190-149">Model and mapping files are often deployed in the same directory as the application executable file.</span></span> <span data-ttu-id="43190-150">これらのファイルは、特定の場所に配置することも組み込みリソースとしてアプリケーションに含めることもできます。</span><span class="sxs-lookup"><span data-stu-id="43190-150">These files can also be deployed in a specific location or included as an embedded resource in the application.</span></span>

<span data-ttu-id="43190-151">組み込みリソースは次のように指定します。</span><span class="sxs-lookup"><span data-stu-id="43190-151">Embedded resources are specified as follows:</span></span>

`Metadata=res://<assemblyFullName>/<resourceName>`

<span data-ttu-id="43190-152">組み込みリソースの場所を定義するには、次のオプションを使用できます。</span><span class="sxs-lookup"><span data-stu-id="43190-152">The following options are available for defining the location of an embedded resource:</span></span>

|<span data-ttu-id="43190-153">オプション</span><span class="sxs-lookup"><span data-stu-id="43190-153">Option</span></span>|<span data-ttu-id="43190-154">説明</span><span class="sxs-lookup"><span data-stu-id="43190-154">Description</span></span>|
|-|-|
|`assemblyFullName`|<span data-ttu-id="43190-155">リソースが組み込まれたアセンブリの完全な名前。</span><span class="sxs-lookup"><span data-stu-id="43190-155">The full name of an assembly with the embedded resource.</span></span> <span data-ttu-id="43190-156">この名前には、次のように単純な名前、バージョン名、サポートされるカルチャ、および公開キーが含まれます。</span><span class="sxs-lookup"><span data-stu-id="43190-156">The name includes the simple name, version name, supported culture, and public key, as follows:</span></span><br /><br /> `ResourceLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null`<br /><br /> <span data-ttu-id="43190-157">リソースは、アプリケーションからアクセスできる任意のアセンブリに組み込むことができます。</span><span class="sxs-lookup"><span data-stu-id="43190-157">Resources can be embedded in any assembly that is accessible by the application.</span></span><br /><br /> <span data-ttu-id="43190-158">`assemblyFullName` にワイルドカード (\*) を指定すると、Entity Framework ランタイムでは、次の場所のリソースがこの順序で検索されます。</span><span class="sxs-lookup"><span data-stu-id="43190-158">If you specify a wildcard (\*) for `assemblyFullName`, the Entity Framework runtime will search for resources in the following locations, in this order:</span></span><br /><br /> <span data-ttu-id="43190-159">1.呼び出し側のアセンブリ。</span><span class="sxs-lookup"><span data-stu-id="43190-159">1.  The calling assembly.</span></span><br /><span data-ttu-id="43190-160">2.参照アセンブリ</span><span class="sxs-lookup"><span data-stu-id="43190-160">2.  The referenced assemblies.</span></span><br /><span data-ttu-id="43190-161">3.アプリケーションの bin ディレクトリ内のアセンブリ。</span><span class="sxs-lookup"><span data-stu-id="43190-161">3.  The assemblies in the bin directory of an application.</span></span><br /><br /> <span data-ttu-id="43190-162">ファイルが上記のどの場所にもない場合は、例外がスローされます。</span><span class="sxs-lookup"><span data-stu-id="43190-162">If the files are not in one of these locations, an exception will be thrown.</span></span> <span data-ttu-id="43190-163">**注:** ワイルドカード (\*) を使用すると、Entity Framework では、正しい名前のリソースを見つけるためにすべてのアセンブリを調べる必要があります。</span><span class="sxs-lookup"><span data-stu-id="43190-163">**Note:**  When you use wildcard (\*), the Entity Framework has to look through all the assemblies for resources with the correct name.</span></span> <span data-ttu-id="43190-164">パフォーマンスを向上させるには、ワイルドカードではなくアセンブリ名を指定してください。</span><span class="sxs-lookup"><span data-stu-id="43190-164">To improve performance, specify the assembly name instead of the wildcard.</span></span>|
|`resourceName`|<span data-ttu-id="43190-165">AdventureWorksModel.csdl などの含まれるリソースの名前。</span><span class="sxs-lookup"><span data-stu-id="43190-165">The name of the included resource, such as AdventureWorksModel.csdl.</span></span> <span data-ttu-id="43190-166">メタデータ サービスでは、拡張子が .csdl、.ssdl、または .msl のいずれかであるファイルまたはリソースのみが検索されます。</span><span class="sxs-lookup"><span data-stu-id="43190-166">The metadata services will only look for files or resources with one of the following extensions: .csdl, .ssdl, or .msl.</span></span> <span data-ttu-id="43190-167">`resourceName` を指定しない場合は、すべてのメタデータ リソースが読み込まれます。</span><span class="sxs-lookup"><span data-stu-id="43190-167">If `resourceName` is not specified, all metadata resources will be loaded.</span></span> <span data-ttu-id="43190-168">リソースには、アセンブリ内で一意の名前を付ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="43190-168">The resources should have unique names within an assembly.</span></span> <span data-ttu-id="43190-169">同じ名前が付けられた複数のファイルがアセンブリ内の異なるディレクトリで定義されている場合、`resourceName` には、リソースの名前の前にフォルダー構造を含める必要があります (FolderName.FileName.csdl など)。</span><span class="sxs-lookup"><span data-stu-id="43190-169">If multiple files with the same name are defined in different directories in the assembly, the `resourceName` must include the folder structure before the name of the resource, for example FolderName.FileName.csdl.</span></span><br /><br /> <span data-ttu-id="43190-170">`resourceName` にワイルドカード (\*) を指定した場合、`assemblyFullName` は不要です。</span><span class="sxs-lookup"><span data-stu-id="43190-170">`resourceName` is not required when you specify a wildcard (\*) for `assemblyFullName`.</span></span>|

> [!NOTE]
> <span data-ttu-id="43190-171">パフォーマンスを向上させるには、リソースを呼び出し側のアセンブリに組み込んでください。ただし、呼び出し側のアセンブリ内の基になるマッピング ファイルとメタデータ ファイルへの参照が存在しない Web 以外のシナリオの場合は除きます。</span><span class="sxs-lookup"><span data-stu-id="43190-171">To improve performance, embed resources in the calling assembly, except in non-Web scenarios where there is no reference to underlying mapping and metadata files in the calling assembly.</span></span>

<span data-ttu-id="43190-172">次の例では、呼び出し側のアセンブリ、参照アセンブリ、およびアプリケーションの bin ディレクトリ内のその他のアセンブリに存在するすべてのモデル ファイルおよびマッピング ファイルを読み込みます。</span><span class="sxs-lookup"><span data-stu-id="43190-172">The following example loads all the model and mapping files in the calling assembly, referenced assemblies, and other assemblies in the bin directory of an application.</span></span>

```csharp
Metadata=res://*/
```

<span data-ttu-id="43190-173">次の例では、model.csdl ファイルを AdventureWorks アセンブリから読み込み、model.ssdl ファイルと model.msl ファイルを実行中のアプリケーションの既定のディレクトリから読み込みます。</span><span class="sxs-lookup"><span data-stu-id="43190-173">The following example loads the model.csdl file from the AdventureWorks assembly, and loads the model.ssdl and model.msl files from the default directory of the running application.</span></span>

```csharp
Metadata=res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.csdl|model.ssdl|model.msl
```

<span data-ttu-id="43190-174">次の例では、指定した 3 つのリソースを特定のアセンブリから読み込みます。</span><span class="sxs-lookup"><span data-stu-id="43190-174">The following example loads the three specified resources from the specific assembly.</span></span>

```csharp
Metadata=res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.csdl|
res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.ssdl|
res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.msl
```

<span data-ttu-id="43190-175">次の例では、拡張子が .csdl、.msl、および .ssdl であるすべての組み込みリソースをアセンブリから読み込みます。</span><span class="sxs-lookup"><span data-stu-id="43190-175">The following example loads all the embedded resources with the extensions .csdl, .msl, and .ssdl from the assembly.</span></span>

```csharp
Metadata=res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/
```

<span data-ttu-id="43190-176">次の例では、相対ファイル パスと "datadir\metadata\\" 内のすべてのリソースを読み込まれたアセンブリの場所から読み込みます。</span><span class="sxs-lookup"><span data-stu-id="43190-176">The following example loads all the resources in the relative file path plus "datadir\metadata\\" from the loaded assembly location.</span></span>

```csharp
Metadata=datadir\metadata\
```

<span data-ttu-id="43190-177">次の例では、相対ファイル パス内のすべてのリソースを読み込まれたアセンブリの場所から読み込みます。</span><span class="sxs-lookup"><span data-stu-id="43190-177">The following example loads all the resources in the relative file path from the loaded assembly location.</span></span>

```csharp
Metadata=.\
```

## <a name="support-for-the-124datadirectory124-substitution-string-and-the-web-application-root-operator-"></a><span data-ttu-id="43190-178">&#124;DataDirectory&#124; 置換文字列と Web アプリケーション ルート演算子 (~) のサポート</span><span class="sxs-lookup"><span data-stu-id="43190-178">Support for the &#124;DataDirectory&#124; Substitution String and the Web Application Root Operator (~)</span></span>

<span data-ttu-id="43190-179">`DataDirectory` と ~ 演算子は、`Metadata` および `Provider Connection String` キーワードの一部として <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> で使用されます。</span><span class="sxs-lookup"><span data-stu-id="43190-179">`DataDirectory` and the ~ operator are used in the <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> as part of the `Metadata` and `Provider Connection String` keywords.</span></span> <span data-ttu-id="43190-180"><xref:System.Data.EntityClient.EntityConnection> によって、`DataDirectory` と ~ 演算子がそれぞれ <xref:System.Data.Metadata.Edm.MetadataWorkspace> とストア プロバイダーに転送されます。</span><span class="sxs-lookup"><span data-stu-id="43190-180">The <xref:System.Data.EntityClient.EntityConnection> forwards the `DataDirectory` and the ~ operator to <xref:System.Data.Metadata.Edm.MetadataWorkspace> and the store provider, respectively.</span></span>

|<span data-ttu-id="43190-181">用語</span><span class="sxs-lookup"><span data-stu-id="43190-181">Term</span></span>|<span data-ttu-id="43190-182">説明</span><span class="sxs-lookup"><span data-stu-id="43190-182">Description</span></span>|
|----------|-----------------|
|`&#124;DataDirectory&#124;`|<span data-ttu-id="43190-183">マッピング ファイルとメタデータ ファイルの相対パスに解決されます。</span><span class="sxs-lookup"><span data-stu-id="43190-183">Resolves to a relative path to a mapping and metadata files.</span></span> <span data-ttu-id="43190-184">この値は、`AppDomain.SetData("DataDirectory", objValue)` メソッドで設定される値です。</span><span class="sxs-lookup"><span data-stu-id="43190-184">This is the value that is set through the `AppDomain.SetData("DataDirectory", objValue)` method.</span></span> <span data-ttu-id="43190-185">`DataDirectory` 置換文字列はパイプ文字で囲む必要があり、その名前とパイプ文字の間に空白を含めることはできません。</span><span class="sxs-lookup"><span data-stu-id="43190-185">The `DataDirectory` substitution string must be surrounded by the pipe characters and there cannot be any white space between its name and the pipe characters.</span></span> <span data-ttu-id="43190-186">`DataDirectory` の名前では大文字と小文字は区別されません。</span><span class="sxs-lookup"><span data-stu-id="43190-186">The `DataDirectory` name is not case-sensitive.</span></span><br /><br /> <span data-ttu-id="43190-187">"DataDirectory" という名前の物理ディレクトリをメタデータ パスのリストのメンバーとして渡す必要がある場合は、名前の片側または両側に空白文字を追加します。</span><span class="sxs-lookup"><span data-stu-id="43190-187">If a physical directory named "DataDirectory" has to be passed as a member of the list of metadata paths, add white space to either or both sides of the name.</span></span> <span data-ttu-id="43190-188">たとえば、`Metadata="DataDirectory1 &#124; DataDirectory &#124; DataDirectory2"` のように指定します。</span><span class="sxs-lookup"><span data-stu-id="43190-188">For example: `Metadata="DataDirectory1 &#124; DataDirectory &#124; DataDirectory2"`.</span></span> <span data-ttu-id="43190-189">ASP.NET アプリケーションでは、&#124;DataDirectory&#124; は "\<application root>/app_data" フォルダーに解決されます。</span><span class="sxs-lookup"><span data-stu-id="43190-189">An ASP.NET application resolves &#124;DataDirectory&#124; to the "\<application root>/app_data" folder.</span></span>|
|~|<span data-ttu-id="43190-190">Web アプリケーション ルートに解決されます。</span><span class="sxs-lookup"><span data-stu-id="43190-190">Resolves to the Web application root.</span></span> <span data-ttu-id="43190-191">先頭の ~ 文字は、有効なローカル サブディレクトリを表すこともありますが、常に Web アプリケーション ルート演算子 (~) として解釈されます。</span><span class="sxs-lookup"><span data-stu-id="43190-191">The ~ character at a leading position is always interpreted as the Web application root operator (~), although it might represent a valid local subdirectory.</span></span> <span data-ttu-id="43190-192">このようなローカル サブディレクトリを参照するには、ユーザーが明示的に `./~` を渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="43190-192">To refer to such a local subdirectory, the user should explicitly pass `./~`.</span></span>|

<span data-ttu-id="43190-193">`DataDirectory` と ~ 演算子は、パスの先頭にのみ指定する必要があります。その他の位置では解決されません。</span><span class="sxs-lookup"><span data-stu-id="43190-193">`DataDirectory` and the ~ operator should be specified only at the beginning of a path, they are not resolved at any other position.</span></span> <span data-ttu-id="43190-194">Entity Framework では、`~/data` の解決は試行されますが、`/data/~` は物理パスとして処理されます。</span><span class="sxs-lookup"><span data-stu-id="43190-194">The Entity Framework will try to resolve `~/data`, but it will treat `/data/~` as a physical path.</span></span>

<span data-ttu-id="43190-195">`DataDirectory` または ~ 演算子で始まるパスは、`DataDirectory` と ~ 演算子の分岐の外側の物理パスには解決できません。</span><span class="sxs-lookup"><span data-stu-id="43190-195">A path that starts with the `DataDirectory` or the ~ operator cannot resolve to a physical path outside the branch of the `DataDirectory` and the ~ operator.</span></span> <span data-ttu-id="43190-196">たとえば、パス `~`、`~/data`、`~/bin/Model/SqlServer` は解決されます。</span><span class="sxs-lookup"><span data-stu-id="43190-196">For example, the following paths will resolve: `~` , `~/data` , `~/bin/Model/SqlServer`.</span></span> <span data-ttu-id="43190-197">パス `~/..` や `~/../other` は解決できません。</span><span class="sxs-lookup"><span data-stu-id="43190-197">The following paths will fail to resolve: `~/..`, `~/../other`.</span></span>

<span data-ttu-id="43190-198">`DataDirectory` と ~ 演算子は、`|DataDirectory|\Model` や `~/bin/Model` など、サブディレクトリが含まれるように拡張できます。</span><span class="sxs-lookup"><span data-stu-id="43190-198">`DataDirectory` and the ~ operator can be extended to include sub-directories, as follows: `|DataDirectory|\Model`, `~/bin/Model`</span></span>

<span data-ttu-id="43190-199">`DataDirectory` 置換文字列と ~ 演算子の解決は非再帰型です。</span><span class="sxs-lookup"><span data-stu-id="43190-199">The resolution of the `DataDirectory` substitution string and the ~ operator is non-recursive.</span></span> <span data-ttu-id="43190-200">たとえば、`DataDirectory` に `~` 文字が含まれる場合は、例外が発生します。</span><span class="sxs-lookup"><span data-stu-id="43190-200">For example, when `DataDirectory` includes the `~` character, an exception will occur.</span></span> <span data-ttu-id="43190-201">これにより、無限再帰が回避されます。</span><span class="sxs-lookup"><span data-stu-id="43190-201">This prevents an infinite recursion.</span></span>

## <a name="see-also"></a><span data-ttu-id="43190-202">関連項目</span><span class="sxs-lookup"><span data-stu-id="43190-202">See also</span></span>

- [<span data-ttu-id="43190-203">データ プロバイダーの操作</span><span class="sxs-lookup"><span data-stu-id="43190-203">Working with Data Providers</span></span>](working-with-data-providers.md)
- [<span data-ttu-id="43190-204">配置に関する注意事項</span><span class="sxs-lookup"><span data-stu-id="43190-204">Deployment Considerations</span></span>](deployment-considerations.md)
- <span data-ttu-id="43190-205">[接続とトランザクションの管理](/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="43190-205">[Managing Connections and Transactions](/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100))</span></span>
- [<span data-ttu-id="43190-206">接続文字列</span><span class="sxs-lookup"><span data-stu-id="43190-206">Connection Strings</span></span>](../connection-strings.md)
