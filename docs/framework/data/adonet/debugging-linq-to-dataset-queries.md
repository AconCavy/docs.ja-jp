---
title: LINQ to DataSet クエリのデバッグ
ms.date: 03/30/2017
ms.assetid: f4c54015-8ce2-4c5c-8d18-7038144cc66d
ms.openlocfilehash: 5f6e711d13a71f73a75e774c9251c5c29216b860
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/15/2020
ms.locfileid: "90554349"
---
# <a name="debugging-linq-to-dataset-queries"></a><span data-ttu-id="54637-102">LINQ to DataSet クエリのデバッグ</span><span class="sxs-lookup"><span data-stu-id="54637-102">Debugging LINQ to DataSet Queries</span></span>

<span data-ttu-id="54637-103">Visual Studio では、LINQ to DataSet のコードのデバッグがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="54637-103">Visual Studio supports the debugging of LINQ to DataSet code.</span></span> <span data-ttu-id="54637-104">ただし、LINQ to DataSet のコードのデバッグと LINQ to DataSet 以外のマネージド コードのデバッグとでは若干違いがあります。</span><span class="sxs-lookup"><span data-stu-id="54637-104">However, there are some differences between debugging LINQ to DataSet code and non-LINQ to DataSet managed code.</span></span> <span data-ttu-id="54637-105">ステップ実行、ブレークポイントの設定、デバッガー ウィンドウでの結果の確認など、ほとんどのデバッグ機能は、LINQ to DataSet のステートメントでも使用できます。</span><span class="sxs-lookup"><span data-stu-id="54637-105">Most debugging features work with LINQ to DataSet statements, including stepping, setting breakpoints, and viewing results that are shown in debugger windows.</span></span> <span data-ttu-id="54637-106">ただし、LINQ to DataSet のコードをデバッグするときは、クエリの遅延実行による副作用を考慮する必要があり、エディット コンティニュの使用についてもいくつかの制限があります。</span><span class="sxs-lookup"><span data-stu-id="54637-106">However, deferred query execution in has some side effects that you should consider while debugging LINQ to DataSet code and there are some limitations to using Edit and Continue.</span></span> <span data-ttu-id="54637-107">このトピックでは、LINQ to DataSet 以外のマネージド コードと比較して LINQ to DataSet に固有のデバッグの側面について説明します。</span><span class="sxs-lookup"><span data-stu-id="54637-107">This topic discusses aspects of debugging that are unique to LINQ to DataSet compared to non-LINQ to DataSet managed code.</span></span>  
  
## <a name="viewing-results"></a><span data-ttu-id="54637-108">結果の表示</span><span class="sxs-lookup"><span data-stu-id="54637-108">Viewing Results</span></span>  
 <span data-ttu-id="54637-109">LINQ to DataSet のステートメントの結果を表示するには、DataTip、ウォッチ ウィンドウ、および [クイック ウォッチ] ダイアログ ボックスを使用します。</span><span class="sxs-lookup"><span data-stu-id="54637-109">You can view the result of a LINQ to DataSet statement by using DataTips, the Watch window, and the QuickWatch dialog box.</span></span> <span data-ttu-id="54637-110">ソース ウィンドウで特定のクエリにポインターを置くと、データヒントが表示されます。</span><span class="sxs-lookup"><span data-stu-id="54637-110">By using a source window, you can pause the pointer on a query in the source window and a DataTip will appear.</span></span> <span data-ttu-id="54637-111">LINQ to DataSet の変数をコピーし、それをウォッチ ウィンドウまたは [クイック ウォッチ] ダイアログ ボックスに貼り付けることができます。</span><span class="sxs-lookup"><span data-stu-id="54637-111">You can copy a LINQ to DataSet variable and paste it into the Watch window or the QuickWatch dialog box.</span></span> <span data-ttu-id="54637-112">LINQ to DataSet のクエリは、作成または宣言された時点では評価されず、実行されるときにだけ評価されます。</span><span class="sxs-lookup"><span data-stu-id="54637-112">In LINQ to DataSet, a query is not evaluated when it is created or declared, but only when the query is executed.</span></span> <span data-ttu-id="54637-113">これを "*遅延実行*" といいます。</span><span class="sxs-lookup"><span data-stu-id="54637-113">This is called *deferred execution*.</span></span> <span data-ttu-id="54637-114">したがって、それが評価されるまでは、クエリ変数に値は割り当てられません。</span><span class="sxs-lookup"><span data-stu-id="54637-114">Therefore, the query variable does not have a value until it is evaluated.</span></span> <span data-ttu-id="54637-115">詳しくは、「[LINQ to DataSet でのクエリ](queries-in-linq-to-dataset.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="54637-115">For more information, see [Queries in LINQ to DataSet](queries-in-linq-to-dataset.md).</span></span>  
  
 <span data-ttu-id="54637-116">デバッガーは、クエリの結果を表示するために、そのクエリを評価する必要があります。</span><span class="sxs-lookup"><span data-stu-id="54637-116">The debugger must evaluate a query to display the query results.</span></span> <span data-ttu-id="54637-117">この暗黙的な評価は、LINQ to DataSet のクエリ結果をデバッガーで表示したときに実行され、考慮する必要のある影響がいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="54637-117">This implicit evaluation occurs when you view a LINQ to DataSet query result in the debugger, and it has some effects you should consider.</span></span> <span data-ttu-id="54637-118">クエリの評価には時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="54637-118">Each evaluation of the query takes time.</span></span> <span data-ttu-id="54637-119">結果ノードを展開するときにも時間を要します。</span><span class="sxs-lookup"><span data-stu-id="54637-119">Expanding the results node takes time.</span></span> <span data-ttu-id="54637-120">クエリによっては繰り返し評価が実行され、パフォーマンスが著しく低下する場合があります。</span><span class="sxs-lookup"><span data-stu-id="54637-120">For some queries, repeated evaluation might cause a noticeable performance penalty.</span></span> <span data-ttu-id="54637-121">さらに、データの値またはプログラムの状態が変わるという副作用が伴う場合もあります。</span><span class="sxs-lookup"><span data-stu-id="54637-121">Evaluating a query can also cause side effects, which are changes to the value of data or the state of your program.</span></span> <span data-ttu-id="54637-122">すべてのクエリに副作用があるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="54637-122">Not all queries have side effects.</span></span> <span data-ttu-id="54637-123">副作用を伴うことなく安全にクエリを評価できるかどうかを判断するには、クエリが実装されているコードを十分に理解する必要があります。</span><span class="sxs-lookup"><span data-stu-id="54637-123">To determine whether a query can be safely evaluated without side effects, you must understand the code that implements the query.</span></span> <span data-ttu-id="54637-124">詳しくは、「[副作用と式](/previous-versions/visualstudio/visual-studio-2013/a7a250bs(v=vs.120))」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="54637-124">For more information, see [Side Effects and Expressions](/previous-versions/visualstudio/visual-studio-2013/a7a250bs(v=vs.120)).</span></span>  
  
## <a name="edit-and-continue"></a><span data-ttu-id="54637-125">エディット コンティニュ</span><span class="sxs-lookup"><span data-stu-id="54637-125">Edit and Continue</span></span>  
 <span data-ttu-id="54637-126">エディット コンティニュでは、LINQ to DataSet のクエリの変更はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="54637-126">Edit and Continue does not support changes to LINQ to DataSet queries.</span></span> <span data-ttu-id="54637-127">デバッグ セッション中に LINQ to DataSet のステートメントを追加、削除、または変更すると、そのような変更がエディット コンティニュでサポートされていないことを示すダイアログ ボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="54637-127">If you add, remove, or change a LINQ to DataSet statement during a debugging session, a dialog box appears that tells you the change is not supported by Edit and Continue.</span></span> <span data-ttu-id="54637-128">このとき、変更を元に戻すか、デバッグ セッションを中止して編集済みのコードで新たなセッションを開始するかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="54637-128">At that point, you can either undo the changes or stop the debugging session and restart a new session with the edited code.</span></span>  
  
 <span data-ttu-id="54637-129">また、エディット コンティニュでは、LINQ to DataSet のステートメントで使用されている変数の型や値の変更もサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="54637-129">In addition, Edit and Continue does not support changing the type or the value of a variable that is used in a LINQ to DataSet statement.</span></span> <span data-ttu-id="54637-130">この場合も、変更を元に戻すか、デバッグ セッションを中止して新たなセッションを開始するかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="54637-130">Again, you can either undo the changes or stop and restart the debugging session.</span></span>  
  
 <span data-ttu-id="54637-131">Visual Studio の Visual C# では、LINQ to DataSet のクエリが含まれるメソッドのコードに対して、エディット コンティニュを使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="54637-131">In Visual C# in Visual Studio, you cannot use Edit and Continue on any code in a method that contains a LINQ to DataSet query.</span></span>  
  
 <span data-ttu-id="54637-132">Visual Studio の Visual Basic では、LINQ to DataSet のクエリが含まれるメソッドであっても、LINQ to DataSet 以外のコードであればエディット コンティニュを使用できます。</span><span class="sxs-lookup"><span data-stu-id="54637-132">In Visual Basic in Visual Studio, you can use Edit and Continue on non-LINQ to DataSet code, even in a method that contains a LINQ to DataSet query.</span></span> <span data-ttu-id="54637-133">LINQ to DataSet のステートメントの前であれば、LINQ to DataSet のクエリの行番号が変わる場合でも、コードの追加や削除を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="54637-133">You can add or remove code before the LINQ to DataSet statement, even if the changes affect line number of the LINQ to DataSet query.</span></span> <span data-ttu-id="54637-134">LINQ to DataSet 以外のコードに対する Visual Basic のデバッグ エクスペリエンスは、LINQ to DataSet が導入される前と同じです。</span><span class="sxs-lookup"><span data-stu-id="54637-134">Your Visual Basic debugging experience for non-LINQ to DataSet code remains the same as it was before LINQ to DataSet was introduced.</span></span> <span data-ttu-id="54637-135">ただし、デバッグを中止して変更を適用しない限り、LINQ to DataSet のクエリを変更、追加、または削除することはできません。</span><span class="sxs-lookup"><span data-stu-id="54637-135">You cannot change, add, or remove a LINQ to DataSet query, however, unless you stop debugging to apply the changes.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="54637-136">関連項目</span><span class="sxs-lookup"><span data-stu-id="54637-136">See also</span></span>

- [<span data-ttu-id="54637-137">マネージド コードをデバッグする</span><span class="sxs-lookup"><span data-stu-id="54637-137">Debugging Managed Code</span></span>](/visualstudio/debugger/debugging-managed-code)
- [<span data-ttu-id="54637-138">プログラミング ガイド</span><span class="sxs-lookup"><span data-stu-id="54637-138">Programming Guide</span></span>](programming-guide-linq-to-dataset.md)
