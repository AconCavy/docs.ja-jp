---
title: トランザクションの基礎
description: .NET のトランザクションの基礎を確認します。 すべてのトランザクションは基本 ACID プロパティ (atomic、consistent、isolated、durable) を持つ必要があります。
ms.date: 03/30/2017
ms.assetid: 353f4ee2-e6bf-4b1c-b1c8-385fc8a486c0
ms.openlocfilehash: 49292172b07985d379bfa5d520798d7d97af5749
ms.sourcegitcommit: 6219b1e1feccb16d88656444210fed3297f5611e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/22/2020
ms.locfileid: "85141940"
---
# <a name="transaction-fundamentals"></a><span data-ttu-id="4825b-104">トランザクションの基礎</span><span class="sxs-lookup"><span data-stu-id="4825b-104">Transaction Fundamentals</span></span>
<span data-ttu-id="4825b-105">トランザクションとは、複数のタスクを互いに結合したものです。</span><span class="sxs-lookup"><span data-stu-id="4825b-105">Transactions bind multiple tasks together.</span></span> <span data-ttu-id="4825b-106">たとえば、あるアプリケーションが 2 つのタスクを実行するものとします。</span><span class="sxs-lookup"><span data-stu-id="4825b-106">For example, imagine that an application performs two tasks.</span></span> <span data-ttu-id="4825b-107">まず、このアプリケーションはデータベースに新しいテーブルを作成します。</span><span class="sxs-lookup"><span data-stu-id="4825b-107">First, it creates a new table in a database.</span></span> <span data-ttu-id="4825b-108">次に、データを収集、フォーマットし、新しく作成したテーブルに挿入する特定のオブジェクトを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="4825b-108">Next, it calls a specialized object to collect, format, and insert data into the new table.</span></span> <span data-ttu-id="4825b-109">この 2 つのタスクは、単に関連しているだけでなく、相互に依存しており、たとえば、新しいテーブルにデータを格納できなければ新しいテーブルを作成しないようにできます。</span><span class="sxs-lookup"><span data-stu-id="4825b-109">These two tasks are related and even interdependent, such that you want to avoid creating a new table unless you can fill it with data.</span></span> <span data-ttu-id="4825b-110">単一のトランザクションのスコープ内でこの 2 つのタスクを実行すると、両タスク間の結合が行われます。</span><span class="sxs-lookup"><span data-stu-id="4825b-110">Executing both tasks within the scope of a single transaction enforces the connection between them.</span></span> <span data-ttu-id="4825b-111">第 2 のタスクが失敗すると、新しいテーブルの作成以前の時点まで第 1 のタスクがロールバックされます。</span><span class="sxs-lookup"><span data-stu-id="4825b-111">If the second task fails, the first task is rolled back to a point before the new table was created.</span></span>  
  
 <span data-ttu-id="4825b-112">動作を予測できるようにするため、すべてのトランザクションは基本 ACID プロパティ (atomic、consistent、isolated、および durable) を持つ必要があります。</span><span class="sxs-lookup"><span data-stu-id="4825b-112">To ensure predictable behavior, all transactions must possess the basic ACID properties (atomic, consistent, isolated, and durable).</span></span> <span data-ttu-id="4825b-113">これらのプロパティは、ミッション クリティカルなトランザクションの役割を悉無律型の命題として規定します。</span><span class="sxs-lookup"><span data-stu-id="4825b-113">These properties reinforce the role of mission-critical transactions as all-or-none propositions.</span></span> <span data-ttu-id="4825b-114">ACID の詳細については、「[ACID プロパティ](/windows/win32/cossdk/acid-properties)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="4825b-114">For more information on ACID, please see [ACID Properties](/windows/win32/cossdk/acid-properties).</span></span> <span data-ttu-id="4825b-115">要約すると、ACID を使用すれば、一連の関連タスクを 1 つの単位として成功または失敗させることができます。</span><span class="sxs-lookup"><span data-stu-id="4825b-115">In summary, ACID guarantees that a set of related tasks either succeed or fail as a unit.</span></span> <span data-ttu-id="4825b-116">トランザクション処理の用語でいえば、トランザクションはコミットされるか中止されるかのいずれかである、ということになります。</span><span class="sxs-lookup"><span data-stu-id="4825b-116">In transaction processing terminology, the transaction either commits or aborts.</span></span> <span data-ttu-id="4825b-117">トランザクションをコミットするためには、すべての参加要素が、データに対する変更は永続化されるということを保証する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4825b-117">For a transaction to commit, all participants must guarantee that any change to data will be permanent.</span></span> <span data-ttu-id="4825b-118">システム クラッシュその他の予期しない出来事が発生した場合でも、変更は保持されます。</span><span class="sxs-lookup"><span data-stu-id="4825b-118">Changes must persist despite system crashes or other unforeseen events.</span></span> <span data-ttu-id="4825b-119">この保証を履行しない参加要素が 1 つでもあると、トランザクション全体が失敗します。</span><span class="sxs-lookup"><span data-stu-id="4825b-119">If even a single participant fails to make this guarantee, the entire transaction fails.</span></span> <span data-ttu-id="4825b-120">そのトランザクションのスコープ内でのデータに対するすべての変更が、特定の時点までロールバックされます。</span><span class="sxs-lookup"><span data-stu-id="4825b-120">All changes to data within the scope of the transaction are rolled back to a specific set point.</span></span>  
  
 <span data-ttu-id="4825b-121">トランザクションは、データベースやメッセージ キューなどの単一のデータ リソースに収容することができます。</span><span class="sxs-lookup"><span data-stu-id="4825b-121">A transaction can be confined to a single data resource, such as a database or message queue.</span></span> <span data-ttu-id="4825b-122">このシナリオでは、ローカル トランザクションは、パフォーマンスを向上させる <xref:System.Transactions> が提供するトランザクション マネージャーによって管理されます。</span><span class="sxs-lookup"><span data-stu-id="4825b-122">In this scenario, the local transaction is managed by the Transaction Manager provided by <xref:System.Transactions> , which generates performance gain.</span></span> <span data-ttu-id="4825b-123">これらのトランザクションは、データ リソースによって制御されるため、効率的で管理しやすくなっています。</span><span class="sxs-lookup"><span data-stu-id="4825b-123">Controlled by the data resource, these transactions are efficient and easy to manage.</span></span>  
  
 <span data-ttu-id="4825b-124">さらに、トランザクションは複数のデータ リソースにまたがることもできます。</span><span class="sxs-lookup"><span data-stu-id="4825b-124">Transactions can also span multiple data resources.</span></span> <span data-ttu-id="4825b-125">分散トランザクションにより、さまざまなシステムで発生する複数の異なる操作を、単一の成功または失敗操作に統合することができます。</span><span class="sxs-lookup"><span data-stu-id="4825b-125">Distributed transactions give you the ability to incorporate several distinct operations occurring on different systems into a single pass or fail action.</span></span> <span data-ttu-id="4825b-126">このシナリオでは、トランザクションは、各システムに常駐する Microsoft 分散トランザクション コーディネーター (MSDTC) によって調整されます。</span><span class="sxs-lookup"><span data-stu-id="4825b-126">In this scenario, the transactions are coordinated by the Microsoft Distributed Transaction Coordinator (MSDTC) that resides in each system.</span></span>  
  
 <span data-ttu-id="4825b-127"><xref:System.Transactions> の提供するクラスを使用してトランザクション アプリケーションを開発する際は、必要なトランザクションの種類や関連するトランザクション マネージャーを気にする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="4825b-127">When you develop a transactional application using the classes provided by <xref:System.Transactions>, you do not need to worry about what kind of transactions you need, or the transaction manager involved.</span></span> <span data-ttu-id="4825b-128"><xref:System.Transactions> インフラストラクチャが自動的にこれらを管理します。</span><span class="sxs-lookup"><span data-stu-id="4825b-128">The <xref:System.Transactions> infrastructure automatically manages these for you.</span></span>  
  
 <span data-ttu-id="4825b-129">トランザクションの作成時に、トランザクションに適用する分離レベルを指定できます。</span><span class="sxs-lookup"><span data-stu-id="4825b-129">When you create a transaction, you can specify the isolation level that applies to the transaction.</span></span> <span data-ttu-id="4825b-130"><xref:System.Transactions.IsolationLevel> 列挙型で定義されている分離レベルにより、特定のトランザクションの影響を受けるデータに対して他のトランザクションが持つアクセス レベルが決定されます。</span><span class="sxs-lookup"><span data-stu-id="4825b-130">The isolation level, defined by the <xref:System.Transactions.IsolationLevel> enum, determines what level of access other transactions will have to the data affected by your transaction.</span></span>  
  
 <span data-ttu-id="4825b-131">トランザクションの作成には、ADO.NET、<xref:System.EnterpriseServices>、または <xref:System.Transactions> 名前空間によって提供されるトランザクション プログラミング モデルを使用できます。</span><span class="sxs-lookup"><span data-stu-id="4825b-131">You can create transactions using ADO.NET, <xref:System.EnterpriseServices>, or the transactional programming model provided by the <xref:System.Transactions> namespace.</span></span> <span data-ttu-id="4825b-132">「[System.Transactions により提供される機能](features-provided-by-system-transactions.md)」トピックでは、<xref:System.Transactions> 名前空間を使用してトランザクション アプリケーションを作成するときに使用できる機能について説明されています。</span><span class="sxs-lookup"><span data-stu-id="4825b-132">The [Features Provided by System.Transactions](features-provided-by-system-transactions.md) topic discusses the features that you can use to write a transactional application using the <xref:System.Transactions> namespace.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4825b-133">関連項目</span><span class="sxs-lookup"><span data-stu-id="4825b-133">See also</span></span>

- [<span data-ttu-id="4825b-134">System.Transactions により提供される機能</span><span class="sxs-lookup"><span data-stu-id="4825b-134">Features Provided by System.Transactions</span></span>](features-provided-by-system-transactions.md)
