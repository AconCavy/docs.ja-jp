---
title: .NET Framework 4.5 のインストール中のシステム再起動の削減
ms.date: 03/30/2017
helpviewer_keywords:
- .NET Framework, reducing system restarts
- installing .NET Framework
- installation [.NET Framework]
ms.assetid: 7aa8cb72-dee9-4716-ac54-b17b9ae8218f
ms.openlocfilehash: 6261a883e7b99b7fd38da2a17ab4820c81552506
ms.sourcegitcommit: 5f236cd78cf09593c8945a7d753e0850e96a0b80
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/07/2020
ms.locfileid: "75716426"
---
# <a name="reducing-system-restarts-during-net-framework-45-installations"></a><span data-ttu-id="d451e-102">.NET Framework 4.5 のインストール中のシステム再起動の削減</span><span class="sxs-lookup"><span data-stu-id="d451e-102">Reducing System Restarts During .NET Framework 4.5 Installations</span></span>
<span data-ttu-id="d451e-103">.NET Framework 4.5 インストーラーは[再起動マネージャー](/windows/win32/rstmgr/about-restart-manager)を使用して、インストール中のシステムの再起動を可能な限り回避します。</span><span class="sxs-lookup"><span data-stu-id="d451e-103">The .NET Framework 4.5 installer uses the [Restart Manager](/windows/win32/rstmgr/about-restart-manager) to prevent system restarts whenever possible during installation.</span></span> <span data-ttu-id="d451e-104">アプリケーションのセットアップ プログラムで .NET Framework をインストールする場合は、再起動マネージャーとやり取りしてこの機能を利用できます。</span><span class="sxs-lookup"><span data-stu-id="d451e-104">If your app setup program installs the .NET Framework, it can interface with the Restart Manager to take advantage of this feature.</span></span> <span data-ttu-id="d451e-105">詳細については、[.NET Framework 4.5 インストーラーの進行状況を表示する](how-to-get-progress-from-the-dotnet-installer.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d451e-105">For more information, see [How to: Get Progress from the .NET Framework 4.5 Installer](how-to-get-progress-from-the-dotnet-installer.md).</span></span>  
  
## <a name="reasons-for-a-restart"></a><span data-ttu-id="d451e-106">再起動の理由</span><span class="sxs-lookup"><span data-stu-id="d451e-106">Reasons for a Restart</span></span>  
 <span data-ttu-id="d451e-107">.NET Framework 4.5 のインストールでは、.NET Framework 4 アプリケーションがインストール中に使用されている場合は、システムの再起動が必要になります。</span><span class="sxs-lookup"><span data-stu-id="d451e-107">The .NET Framework 4.5 installation requires a system restart if a .NET Framework 4 app is in use during the installation.</span></span> <span data-ttu-id="d451e-108">これは、.NET Framework 4.5 によって .NET Framework 4 のファイルが置き換えられ、インストール中にこれらのファイルが使用可能になっていることが必要とされるためです。</span><span class="sxs-lookup"><span data-stu-id="d451e-108">This is because the .NET Framework 4.5 replaces .NET Framework 4 files and requires those files to be available during installation.</span></span> <span data-ttu-id="d451e-109">多くの場合、再起動は使用中の .NET Framework 4 アプリケーションをプリエンティブに検出し、終了することで回避できます。</span><span class="sxs-lookup"><span data-stu-id="d451e-109">In many cases, the restart can be prevented by preemptively detecting and closing.NET Framework 4 apps that are in use.</span></span> <span data-ttu-id="d451e-110">ただし、一部のシステム アプリケーションは終了しないでください。</span><span class="sxs-lookup"><span data-stu-id="d451e-110">However, some system apps should not be closed.</span></span> <span data-ttu-id="d451e-111">このような場合、再起動は回避できません。</span><span class="sxs-lookup"><span data-stu-id="d451e-111">In these cases, a restart cannot be avoided.</span></span>  
  
## <a name="end-user-experience"></a><span data-ttu-id="d451e-112">エンド ユーザー エクスペリエンス</span><span class="sxs-lookup"><span data-stu-id="d451e-112">End-User Experience</span></span>  
 <span data-ttu-id="d451e-113">.NET Framework 4.5 の完全インストールを行っているエンド ユーザーには、使用中の .NET Framework 4 アプリケーションをインストーラーが検出した場合にシステムの再起動を回避する機会が与えられます。</span><span class="sxs-lookup"><span data-stu-id="d451e-113">An end-user who is doing a full installation of the .NET Framework 4.5 is given the opportunity to avoid a system restart if the installer detects .NET Framework 4 apps in use.</span></span> <span data-ttu-id="d451e-114">メッセージには、実行中の .NET Framework 4 アプリケーションがすべて一覧表示され、インストール前にこれらのアプリケーションを終了するオプションが表示されます。</span><span class="sxs-lookup"><span data-stu-id="d451e-114">A message lists all running .NET Framework 4 apps and provides the option to close these apps before the installation.</span></span> <span data-ttu-id="d451e-115">ユーザーが終了を確認すると、これらのアプリケーションはインストーラーによってシャットダウンされ、システムの再起動が回避されます。</span><span class="sxs-lookup"><span data-stu-id="d451e-115">If the user confirms, these apps are shut down by the installer, and a system restart is avoided.</span></span> <span data-ttu-id="d451e-116">一定時間内にユーザーがメッセージに応答しなかった場合、インストールはアプリケーションを終了せずに続行します。</span><span class="sxs-lookup"><span data-stu-id="d451e-116">If the user does not respond to the message within a certain amount of time, the installation continues without closing any apps.</span></span>  
  
 <span data-ttu-id="d451e-117">実行中のアプリケーションが終了してもシステムの再起動が必要な状況を再起動マネージャーが検出した場合、メッセージは表示されません。</span><span class="sxs-lookup"><span data-stu-id="d451e-117">If the Restart Manager detects a situation that will require a system restart even if running apps are closed, the message is not displayed.</span></span>  
  
 ![現在実行中のプログラムが一覧表示されるアプリケーション終了ダイアログ。](./media/reducing-system-restarts/close-application-dialog.png)  
  
## <a name="using-a-chained-installer"></a><span data-ttu-id="d451e-119">チェーンされたインストーラーの使用</span><span class="sxs-lookup"><span data-stu-id="d451e-119">Using a Chained Installer</span></span>  
 <span data-ttu-id="d451e-120">アプリケーションと共に .NET Framework を再配布し、ただし独自のセットアップ プログラムと UI を使用する場合は、.NET Framework のセットアップ プロセスをセットアップ プロセスにインクルード (チェーン) できます。</span><span class="sxs-lookup"><span data-stu-id="d451e-120">If you want to redistribute the .NET Framework with your app, but you want to use your own setup program and UI, you can include (chain) the .NET Framework setup process to your setup process.</span></span> <span data-ttu-id="d451e-121">チェーンされたインストールについて詳しくは、「[配置ガイド (開発者向け)](deployment-guide-for-developers.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d451e-121">For more information about chained installations, see [Deployment Guide for Developers](deployment-guide-for-developers.md).</span></span> <span data-ttu-id="d451e-122">チェーンされたインストールでのシステムの再起動を減らすために、.NET Framework インストーラーは、終了するアプリケーションの一覧をセットアップ プログラムに提示します。</span><span class="sxs-lookup"><span data-stu-id="d451e-122">To reduce system restarts in chained installations, the .NET Framework installer supplies your setup program with the list of apps to close.</span></span> <span data-ttu-id="d451e-123">セットアップ プログラムは、メッセージ ボックスなどのユーザー インターフェイスを経由してこの情報をユーザーに提供し、ユーザーの応答を取得して、応答を .NET Framework インストーラーに渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="d451e-123">Your setup program must provide this information to the user through a user interface such as a message box, get the user’s response, and then pass the response back to the .NET Framework installer.</span></span> <span data-ttu-id="d451e-124">チェーンされたインストーラーの例については、「[方法:.NET Framework 4.5 インストーラーの進行状況を表示する](how-to-get-progress-from-the-dotnet-installer.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d451e-124">For an example of a chained installer, see the article [How to: Get Progress from the .NET Framework 4.5 Installer](how-to-get-progress-from-the-dotnet-installer.md).</span></span>  
  
 <span data-ttu-id="d451e-125">チェーンされたインストーラーを使用しているときに、終了するアプリケーションに対して独自のメッセージ ボックスを非表示にする場合は、.NET Framework セットアップ プロセスをチェーンするときに、コマンド ラインで `/showrmui` と `/passive` のオプションを使用できます。</span><span class="sxs-lookup"><span data-stu-id="d451e-125">If you're using a chained installer, but you do not want to provide your own message box for closing apps, you can use the `/showrmui` and `/passive` options on the command line when you chain the .NET Framework setup process.</span></span> <span data-ttu-id="d451e-126">これらのオプションを一緒に使用すると、システムの再起動を避けるために終了できるアプリケーションを閉じるためのメッセージ ボックスがインストーラーによって表示されます。</span><span class="sxs-lookup"><span data-stu-id="d451e-126">When you use these options together, the installer shows the message box for closing apps if they can be closed to avoid a system restart.</span></span> <span data-ttu-id="d451e-127">このメッセージ ボックスは、完全なユーザー インターフェイスの下でも、パッシブ モードでも同じように動作します。</span><span class="sxs-lookup"><span data-stu-id="d451e-127">This message box behaves the same in passive mode as it does under the full user interface.</span></span> <span data-ttu-id="d451e-128">.NET Framework 再頒布可能パッケージのコマンドライン オプションの完全なセットについては、「[配置ガイド (開発者向け)](deployment-guide-for-developers.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d451e-128">See [Deployment Guide for Developers](deployment-guide-for-developers.md) for the complete set of command-line options for the .NET Framework redistributable.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d451e-129">関連項目</span><span class="sxs-lookup"><span data-stu-id="d451e-129">See also</span></span>

- [<span data-ttu-id="d451e-130">配置</span><span class="sxs-lookup"><span data-stu-id="d451e-130">Deployment</span></span>](index.md)
- [<span data-ttu-id="d451e-131">配置ガイド (開発者向け)</span><span class="sxs-lookup"><span data-stu-id="d451e-131">Deployment Guide for Developers</span></span>](deployment-guide-for-developers.md)
- [<span data-ttu-id="d451e-132">方法: .NET Framework 4.5 インストーラーの進行状況を表示する</span><span class="sxs-lookup"><span data-stu-id="d451e-132">How to: Get Progress from the .NET Framework 4.5 Installer</span></span>](how-to-get-progress-from-the-dotnet-installer.md)
