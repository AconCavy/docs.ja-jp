---
title: バインディングとバインディング要素
ms.date: 03/30/2017
helpviewer_keywords:
- binding elements [WCF]
ms.assetid: 765ff77b-7682-4ea3-90eb-e4d751e37379
ms.openlocfilehash: 16e1b7840be6a3ec247033fa3a2eada9e5799bdb
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/26/2020
ms.locfileid: "96262139"
---
# <a name="bindings-and-binding-elements"></a><span data-ttu-id="3445e-102">バインディングとバインディング要素</span><span class="sxs-lookup"><span data-stu-id="3445e-102">Bindings and Binding Elements</span></span>

<span data-ttu-id="3445e-103">バインディングは、 *バインディング要素* と呼ばれる特別な構成要素のコレクションであり、クライアントまたはサービスのエンドポイントが構築されるたびに、サービスランタイムによって評価されます。</span><span class="sxs-lookup"><span data-stu-id="3445e-103">Bindings are collections of special configuration elements, called *binding elements*, which are evaluated by the service runtime whenever a client or service endpoint is being constructed.</span></span> <span data-ttu-id="3445e-104">バインディング内のバインド要素の型と順序に基づいて、エンドポイントのチャネル スタック内のプロトコル チャネルとトランスポート チャネルが選択され、スタック順が決定されます。</span><span class="sxs-lookup"><span data-stu-id="3445e-104">The type and order of the binding elements within a binding determines the selection and stacking order of the protocol and transport channels in an endpoint's channel stack.</span></span>  
  
 <span data-ttu-id="3445e-105">また、バインディング (特に、システム指定のバインディング) は、通常、多数の構成プロパティを持ちますが、これらはカプセル化されたバインド要素の最も頻繁に変更されたプロパティを反映します。</span><span class="sxs-lookup"><span data-stu-id="3445e-105">Bindings, especially the system-provided bindings, usually also have a number of configuration properties that reflect the most commonly modified properties of the encapsulated binding elements.</span></span>  
  
 <span data-ttu-id="3445e-106">バインディングには、トランスポート バインド要素が 1 つだけ含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="3445e-106">A binding must contain exactly one transport binding element.</span></span> <span data-ttu-id="3445e-107">各トランスポート バインド要素は、1 つのメッセージ エンコード バインド要素をバインディングに追加することによってオーバーライドできる既定のメッセージ エンコード バインド要素です。</span><span class="sxs-lookup"><span data-stu-id="3445e-107">Each transport binding element implies a default message encoding binding element, which can be overridden by adding at most one message encoding binding element to the binding.</span></span> <span data-ttu-id="3445e-108">トランスポート バインド要素とエンコーダー バインド要素に加えて、バインディングには任意の数のプロトコル バインド要素を含めることもできます。この要素により、サービスに必要な機能を実装し、エンドポイント間で SOAP メッセージを送信することができます。</span><span class="sxs-lookup"><span data-stu-id="3445e-108">In addition to the transport and encoder binding elements, the binding may contain any number of protocol binding elements that together implement the functionality needed to service and send a SOAP message from one endpoint to another.</span></span> <span data-ttu-id="3445e-109">詳細については、「バインディングを使用した [サービスとクライアントの構成](../using-bindings-to-configure-services-and-clients.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3445e-109">For details, see [Using Bindings to Configure Services and Clients](../using-bindings-to-configure-services-and-clients.md).</span></span>  
  
## <a name="extending-bindings-and-binding-elements"></a><span data-ttu-id="3445e-110">バインディングとバインド要素の拡張</span><span class="sxs-lookup"><span data-stu-id="3445e-110">Extending Bindings and Binding Elements</span></span>  

 <span data-ttu-id="3445e-111">Windows Communication Foundation (WCF) には、幅広いシナリオに対応するシステム指定のバインディングが含まれています。</span><span class="sxs-lookup"><span data-stu-id="3445e-111">Windows Communication Foundation (WCF) includes system-provided bindings that cover a wide range of scenarios.</span></span> <span data-ttu-id="3445e-112">(詳細については、「 [システム指定のバインディング](../system-provided-bindings.md)」を参照してください)。ただし、WCF に含まれていないバインディングを作成して使用する必要がある場合もあります。</span><span class="sxs-lookup"><span data-stu-id="3445e-112">(For more, see [System-Provided Bindings](../system-provided-bindings.md).) There may be times, however, when you need to create and use a binding that is not included in WCF.</span></span> <span data-ttu-id="3445e-113">次のシナリオでは、新しいバインディングを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3445e-113">The following scenarios require the creation of a new binding.</span></span>  
  
- <span data-ttu-id="3445e-114">新しいバインド要素 (新しいトランスポート バインド要素、エンコード バインド要素、またはプロトコル バインド要素) を使用する場合。そのバインド要素を含む新しいバインディングを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3445e-114">To use a new binding element (such as a new transport, encoding, or protocol binding element), you must create a new binding that includes that binding element.</span></span> <span data-ttu-id="3445e-115">たとえば、UDP トランスポートのためのカスタム `UdpTransportBindingElement` を追加した場合は、そのカスタム バインド要素を使用する新しいバインディングを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3445e-115">For example, if you added a custom `UdpTransportBindingElement` for UDP transport, you would need to create a new binding to make use of it.</span></span> <span data-ttu-id="3445e-116">型を使用してこの動作を実行する方法の詳細については <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType> 、「 [カスタムバインド](custom-bindings.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3445e-116">For information about performing this behavior using the <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType> type, see [Custom Bindings](custom-bindings.md).</span></span>  
  
- <span data-ttu-id="3445e-117">パブリック プロパティでシステム指定のバインディングが公開されないように既存のバインド要素を構成する場合。</span><span class="sxs-lookup"><span data-stu-id="3445e-117">To configure existing binding elements in a way that the system-provided bindings to not expose on public properties.</span></span> <span data-ttu-id="3445e-118">たとえば、署名操作と暗号化操作の実行順序を変更するには、新しいバインディングを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3445e-118">For example, you must create a new binding to change the order in which signing and encryption operations are performed.</span></span> <span data-ttu-id="3445e-119">この動作を実行する方法の詳細については、「 [方法: System-Provided バインディングをカスタマイズ](how-to-customize-a-system-provided-binding.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3445e-119">For information about performing this behavior, see [How to: Customize a System-Provided Binding](how-to-customize-a-system-provided-binding.md).</span></span>  
  
- <span data-ttu-id="3445e-120">特定の構成オプションだけを公開する、企業の標準バインディングを確立する場合。</span><span class="sxs-lookup"><span data-stu-id="3445e-120">To establish corporate standard bindings that expose only specific configuration options.</span></span> <span data-ttu-id="3445e-121">たとえば、社内用にセキュリティを無効にできない <xref:System.ServiceModel.WSHttpBinding> のバリエーションを作成するには、<xref:System.ServiceModel.WSHttpBinding> のように動作し、セキュリティが常に有効になる新しいバインディングを作成します。</span><span class="sxs-lookup"><span data-stu-id="3445e-121">For example, to create for your company a variant of the <xref:System.ServiceModel.WSHttpBinding> for your company in which security cannot be disabled, create a new binding that behaves like the <xref:System.ServiceModel.WSHttpBinding>, but with security always on.</span></span> <span data-ttu-id="3445e-122">詳細については、「 [User-Defined バインドの作成](creating-user-defined-bindings.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3445e-122">For details, see [Creating User-Defined Bindings](creating-user-defined-bindings.md).</span></span>  
  
- <span data-ttu-id="3445e-123">特定のカスタム バインド要素を状況に応じて構成または使用するようにメタデータをカスタマイズする場合。</span><span class="sxs-lookup"><span data-stu-id="3445e-123">To perform some customization of metadata, typically but not necessarily to configure or use some custom binding element.</span></span> <span data-ttu-id="3445e-124">バインディングとバインド要素にメタデータのサポートを提供する方法の詳細については、「 [構成とメタデータのサポート](configuration-and-metadata-support.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3445e-124">For more information about providing metadata support to bindings and binding elements, see [Configuration and Metadata Support](configuration-and-metadata-support.md).</span></span>  

## <a name="channels-bindings-and-binding-elements"></a><span data-ttu-id="3445e-125">チャネル、バインディング、およびバインド要素</span><span class="sxs-lookup"><span data-stu-id="3445e-125">Channels, Bindings, and Binding Elements</span></span>  

 <span data-ttu-id="3445e-126">バインディングとバインド要素は、属性と動作を含むアプリケーション プログラミング モデルと、ファクトリとリスナー、メッセージ エンコーダー、およびトランスポートとプロトコルの実装を含むチャネル モデルを結び付けます。</span><span class="sxs-lookup"><span data-stu-id="3445e-126">Bindings and binding elements are the connection between the application programming model, which includes the attributes and behaviors, and the channel model, which includes the factories and listeners, message encoders, and transport and protocol implementations.</span></span> <span data-ttu-id="3445e-127">通常、バインド要素とバインディングは、アプリケーション層で使用されるチャネルを有効にするために実装されます。</span><span class="sxs-lookup"><span data-stu-id="3445e-127">Typically, binding elements and bindings are implemented to enable channels to be used by the application layer.</span></span>  
  
 <span data-ttu-id="3445e-128">チャネル層は、サービス層との間でメッセージを送受信し、そのメッセージをエンドポイント間で転送します。</span><span class="sxs-lookup"><span data-stu-id="3445e-128">The channel layer hands off or receives messages to and from the service layer and transports those messages between endpoints.</span></span> <span data-ttu-id="3445e-129">クライアントでは、チャネル層はネットワーク エンドポイントへのチャネルを作成するチャネル ファクトリのスタックです。</span><span class="sxs-lookup"><span data-stu-id="3445e-129">On a client, the channel layer is a stack of channel factories that create channels to a network endpoint.</span></span> <span data-ttu-id="3445e-130">サービスでは、チャネル層はネットワーク エンドポイントで受信されたチャネルを受け入れるチャネル リスナーのスタックです。</span><span class="sxs-lookup"><span data-stu-id="3445e-130">On a service, the channel layer is a stack of channel listeners that accept channels received at a network endpoint.</span></span>  
  
 <span data-ttu-id="3445e-131">一般的なチャネルの種類としては、プロトコル チャネルとトランスポート チャネルの 2 つがあります。</span><span class="sxs-lookup"><span data-stu-id="3445e-131">There are two general types of channels: protocol channels and transport channels.</span></span> <span data-ttu-id="3445e-132">トランスポート チャネルの役割は、ネットワーク エンドポイント間でメッセージを実際に転送することです。</span><span class="sxs-lookup"><span data-stu-id="3445e-132">Transport channels are responsible for the actual transmission of a message from one network endpoint to another.</span></span> <span data-ttu-id="3445e-133">トランスポート チャネルは、既定のメッセージ エンコーダーを持ち、メッセージ エンコーダー バインド要素を通じて供給される代替のメッセージ エンコーダーを使用できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="3445e-133">Transport channels must have a default message encoder and should be able to use an alternate message encoder supplied through a message encoder binding element.</span></span> <span data-ttu-id="3445e-134">メッセージ エンコーダーには、<xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> をネットワーク上の表現に (またはその逆方向に) 変換する役割があります。</span><span class="sxs-lookup"><span data-stu-id="3445e-134">A message encoder is responsible for turning a <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> into a wire representation and vice-versa.</span></span> <span data-ttu-id="3445e-135">プロトコル チャネルの役割は、SOAP レベルのプロトコル (たとえば、WS-Security や WS-ReliableMessaging) を実装することです。</span><span class="sxs-lookup"><span data-stu-id="3445e-135">Protocol channels are responsible for implementing SOAP-level protocols (for example, WS-Security or WS-ReliableMessaging).</span></span>  
  
 <span data-ttu-id="3445e-136">トランスポート チャネルとプロトコル チャネルの主要要件は、必要なチャネル インターフェイスを実装することです。</span><span class="sxs-lookup"><span data-stu-id="3445e-136">The primary requirement for transport and protocol channels is that they implement the required channel interfaces.</span></span> <span data-ttu-id="3445e-137">正常に機能するチャネル層を作成するには、ファクトリとリスナーを関連付ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="3445e-137">To create a working channel layer they must have associated factories and listeners, and so on.</span></span> <span data-ttu-id="3445e-138">WCF からのチャネル実装を使用するには、各チャネルに対してから派生した関連付けられたバインド要素が必要です <xref:System.ServiceModel.Channels.BindingElement> 。また、から派生した構成ファイルに含めるために、関連するバインディング拡張要素が必要です <xref:System.ServiceModel.Configuration.BindingElementExtensionElement> 。</span><span class="sxs-lookup"><span data-stu-id="3445e-138">To use the channel implementations from WCF there needs to be an associated binding elements derived from <xref:System.ServiceModel.Channels.BindingElement> for each channel and there should be a related binding extension element for inclusion into configuration files that derives from <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span></span>  
  
 <span data-ttu-id="3445e-139">前述のように、メッセージ エンコーダー チャネル、プロトコル チャネル、およびトランスポート チャネルの実装に使用されるバインド要素をスタックすることによりチャネル スタックを形成できます。バインディングは、これらを順序付きセットに並べ替えるための機構です。</span><span class="sxs-lookup"><span data-stu-id="3445e-139">As mentioned earlier, binding elements for message encoders, protocol, and transport channel implementations can be stacked to form a channel stack and the mechanism to line them up into an ordered set is the binding.</span></span> <span data-ttu-id="3445e-140">バインディングとバインド要素は、アプリケーション プログラミング モデルをチャネル モデルに結び付けます。</span><span class="sxs-lookup"><span data-stu-id="3445e-140">Bindings and binding elements connect the application programming model to the channel model.</span></span> <span data-ttu-id="3445e-141">チャネルの実装をコードから直接使用することもできますが、エンコーダー、トランスポート、およびプロトコルがバインド要素として実装されていない限り、サービス層プログラミング モデルから使用できません。</span><span class="sxs-lookup"><span data-stu-id="3445e-141">You can use your channel implementations from code directly, but unless encoders, transports, and protocols are implemented as binding elements they cannot be used from the service layer programming model.</span></span>  
  
 <span data-ttu-id="3445e-142">チャネルとそのバインド要素の開発の詳細については、「 [チャネルレイヤーの拡張](extending-the-channel-layer.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3445e-142">For details about developing channels and their binding elements, see [Extending the Channel Layer](extending-the-channel-layer.md).</span></span>
