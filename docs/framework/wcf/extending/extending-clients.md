---
title: クライアントの拡張
ms.date: 03/30/2017
helpviewer_keywords:
- proxy extensions [WCF]
ms.assetid: 1328c61c-06e5-455f-9ebd-ceefb59d3867
ms.openlocfilehash: b3bbbdb895576b4a6d9167bcf321a99d10d378cc
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/26/2020
ms.locfileid: "96249294"
---
# <a name="extending-clients"></a><span data-ttu-id="e7dd7-102">クライアントの拡張</span><span class="sxs-lookup"><span data-stu-id="e7dd7-102">Extending Clients</span></span>

<span data-ttu-id="e7dd7-103">呼び出し側のアプリケーションでは、サービス モデル レイヤーが、アプリケーション コードでのメソッド呼び出しを送信メッセージに変換し、それらを基になるチャネルにプッシュし、結果をアプリケーション コードで戻り値と出力パラメーターに変換して、変換結果を呼び出し側に返します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-103">In a calling application, the service model layer is responsible for translating method invocations in application code into outbound messages, pushing them to the underlying channels, translating results back into return values and out parameters in application code, and returning the results back to the caller.</span></span> <span data-ttu-id="e7dd7-104">サービス モデル拡張は、クライアントやディスパッチャーの機能、カスタム動作、メッセージとパラメーターの途中受信、およびその他の拡張機能に関連する実行や通信の動作と機能を変更または実装します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-104">Service model extensions modify or implement execution or communication behavior and features involving client or dispatcher functionality, custom behaviors, message and parameter interception, and other extensibility functionality.</span></span>  
  
 <span data-ttu-id="e7dd7-105">このトピックでは、 <xref:System.ServiceModel.Dispatcher.ClientRuntime> <xref:System.ServiceModel.Dispatcher.ClientOperation> WINDOWS COMMUNICATION FOUNDATION (wcf) クライアントアプリケーションでクラスとクラスを使用して、wcf クライアントの既定の実行動作を変更したり、メッセージ、パラメーター、または戻り値をチャネルレイヤーから送信または取得する前または後に受信または変更したりする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-105">This topic describes how to use the <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.ClientOperation> classes in a Windows Communication Foundation (WCF) client application to modify the default execution behavior of a WCF client or to intercept or modify messages, parameters, or return values prior to or subsequent to sending or retrieving them from the channel layer.</span></span> <span data-ttu-id="e7dd7-106">サービスランタイムの拡張の詳細については、「 [ディスパッチャーの拡張](extending-dispatchers.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-106">For more information about extending the service runtime, see [Extending Dispatchers](extending-dispatchers.md).</span></span> <span data-ttu-id="e7dd7-107">カスタマイズオブジェクトを変更してクライアントランタイムに挿入する動作の詳細については、「動作を使用した [ランタイムの構成と拡張](configuring-and-extending-the-runtime-with-behaviors.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-107">For more information about the behaviors that modify and insert customization objects into the client runtime, see [Configuring and Extending the Runtime with Behaviors](configuring-and-extending-the-runtime-with-behaviors.md).</span></span>  
  
## <a name="clients"></a><span data-ttu-id="e7dd7-108">クライアント</span><span class="sxs-lookup"><span data-stu-id="e7dd7-108">Clients</span></span>  

 <span data-ttu-id="e7dd7-109">クライアントでは、WCF クライアントオブジェクトまたはクライアントチャネルは、メソッドの呼び出しを送信メッセージに変換し、受信メッセージを呼び出し元のアプリケーションに返される操作結果に変換します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-109">On a client, a WCF client object or client channel converts method invocations into outgoing messages and incoming messages to operation results that are returned to the calling application.</span></span> <span data-ttu-id="e7dd7-110">(クライアントの種類の詳細については、「 [WCF クライアントアーキテクチャ](../feature-details/client-architecture.md)」を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-110">(For more information about client types, see [WCF Client Architecture](../feature-details/client-architecture.md).)</span></span>  
  
 <span data-ttu-id="e7dd7-111">WCF クライアント型には、このエンドポイントおよび操作レベルの機能を処理するランタイム型があります。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-111">WCF client types have runtime types that handle this endpoint- and operation-level functionality.</span></span> <span data-ttu-id="e7dd7-112">アプリケーションが操作を呼び出すと、<xref:System.ServiceModel.Dispatcher.ClientOperation> が送信オブジェクトをメッセージに変換し、インターセプターを処理し、送信呼び出しがターゲット コントラクトに適合することを確認してから、送信メッセージを <xref:System.ServiceModel.Dispatcher.ClientRuntime> に渡します。このクラスは、送信チャネル (双方向サービスの場合には、さらに受信チャネル) の作成と管理、追加の送信メッセージ処理 (ヘッダーの変更など)、メッセージ インターセプターの両方向での処理、および適切なクライアント側 <xref:System.ServiceModel.Dispatcher.DispatchRuntime> オブジェクトへの受信双方向呼び出しのルーティングを実行します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-112">When an application calls an operation, the <xref:System.ServiceModel.Dispatcher.ClientOperation> translates the outbound objects into a message, processes interceptors, confirms that the outbound call conforms to the target contract, and hands the outbound message to the <xref:System.ServiceModel.Dispatcher.ClientRuntime>, which is responsible for creating and managing outbound channels (and inbound channels in the case of duplex services), handling extra outbound message processing (such as header modification), processing message interceptors in both directions, and routing inbound duplex calls to the appropriate client-side <xref:System.ServiceModel.Dispatcher.DispatchRuntime> object.</span></span> <span data-ttu-id="e7dd7-113"><xref:System.ServiceModel.Dispatcher.ClientOperation> と <xref:System.ServiceModel.Dispatcher.ClientRuntime> は、共にメッセージ (エラーを含む) がクライアントに返されるときに同様のサービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-113">Both the <xref:System.ServiceModel.Dispatcher.ClientOperation> and <xref:System.ServiceModel.Dispatcher.ClientRuntime> provide similar services when messages (including faults) are returned to the client.</span></span>  
  
 <span data-ttu-id="e7dd7-114">これら2つのランタイムクラスは、WCF クライアントオブジェクトとチャネルの処理をカスタマイズするための主要な拡張機能です。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-114">These two runtime classes are the main extension to customize the processing of WCF client objects and channels.</span></span> <span data-ttu-id="e7dd7-115"><xref:System.ServiceModel.Dispatcher.ClientRuntime> クラスは、ユーザーが、コントラクト内のすべてのメッセージについてクライアント実行を途中受信して拡張できるようにします。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-115">The <xref:System.ServiceModel.Dispatcher.ClientRuntime> class allows users to intercept and extend client execution across all messages in the contract.</span></span> <span data-ttu-id="e7dd7-116"><xref:System.ServiceModel.Dispatcher.ClientOperation> クラスは、ユーザーが、特定の操作内のすべてのメッセージについてクライアント実行を途中受信して拡張できるようにします。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-116">The <xref:System.ServiceModel.Dispatcher.ClientOperation> class allows users to intercept and extend client execution for all messages in a given operation.</span></span>  
  
 <span data-ttu-id="e7dd7-117">プロパティの変更やカスタマイズの挿入は、コントラクト、エンドポイント、および操作の各動作を使用して行います。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-117">Modifying the properties or inserting customizations are done by using contract, endpoint, and operation behaviors.</span></span> <span data-ttu-id="e7dd7-118">これらの種類の動作を使用してクライアントランタイムのカスタマイズを実行する方法の詳細については、「動作を使用した [ランタイムの構成と拡張](configuring-and-extending-the-runtime-with-behaviors.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-118">For more information about how to use these types of behaviors to perform client runtime customizations, see [Configuring and Extending the Runtime with Behaviors](configuring-and-extending-the-runtime-with-behaviors.md).</span></span>  
  
## <a name="scenarios"></a><span data-ttu-id="e7dd7-119">シナリオ</span><span class="sxs-lookup"><span data-stu-id="e7dd7-119">Scenarios</span></span>  

 <span data-ttu-id="e7dd7-120">クライアント システムを拡張する理由としては、次のようなさまざまなものがあります。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-120">There a number of reasons to extend the client system, including:</span></span>  
  
- <span data-ttu-id="e7dd7-121">カスタム メッセージの検証。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-121">Custom Message Validation.</span></span> <span data-ttu-id="e7dd7-122">特定のスキーマに対してメッセージが有効になるようにする必要が生じる場合があります。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-122">A user may want to enforce that a message is valid for a certain schema.</span></span> <span data-ttu-id="e7dd7-123">これは、<xref:System.ServiceModel.Dispatcher.IClientMessageInspector> インターフェイスを実装し、この実装を <xref:System.ServiceModel.Dispatcher.DispatchRuntime.MessageInspectors%2A> プロパティに割り当てることで可能になります。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-123">This can be done by implementing the <xref:System.ServiceModel.Dispatcher.IClientMessageInspector> interface and assigning the implementation to the <xref:System.ServiceModel.Dispatcher.DispatchRuntime.MessageInspectors%2A> property.</span></span> <span data-ttu-id="e7dd7-124">例については、「 [方法: クライアントのメッセージを検査または変更](how-to-inspect-or-modify-messages-on-the-client.md) する」および「 [方法: クライアントでメッセージを検査または変更する](how-to-inspect-or-modify-messages-on-the-client.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-124">For examples, see [How to: Inspect or Modify Messages on the Client](how-to-inspect-or-modify-messages-on-the-client.md) and [How to: Inspect or Modify Messages on the Client](how-to-inspect-or-modify-messages-on-the-client.md).</span></span>  
  
- <span data-ttu-id="e7dd7-125">カスタム メッセージのログ記録。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-125">Custom Message Logging.</span></span> <span data-ttu-id="e7dd7-126">エンドポイントを通過するアプリケーション メッセージの一部を検査して記録する必要が生じる場合があります。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-126">A user may want to inspect and log some set of application messages that flow through an endpoint.</span></span> <span data-ttu-id="e7dd7-127">これはメッセージ インターセプター インターフェイスで実行可能です。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-127">This can also be accomplished with the message interceptor interfaces.</span></span>  
  
- <span data-ttu-id="e7dd7-128">カスタム メッセージの変換。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-128">Custom Message Transformations.</span></span> <span data-ttu-id="e7dd7-129">アプリケーション コードを変更するのではなく、ランタイムのメッセージに特定の変換を適用する必要が生じる場合があります (バージョン管理の場合など)。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-129">Rather than modifying application code, the user may want to apply certain transformations to the message in the runtime (for example, for versioning).</span></span> <span data-ttu-id="e7dd7-130">これもまた、メッセージ インターセプター インターフェイスで実行可能です。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-130">This can be accomplished, again, with the message interceptor interfaces.</span></span>  
  
- <span data-ttu-id="e7dd7-131">カスタム データ モデル。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-131">Custom Data Model.</span></span> <span data-ttu-id="e7dd7-132">ユーザーは、WCF で既定でサポートされているもの以外のデータまたはシリアル化モデルを持つことができます (つまり、、、、 <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType> <xref:System.Xml.Serialization.XmlSerializer?displayProperty=nameWithType> および <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> オブジェクト)。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-132">A user may want to have a data or serialization model other than those supported by default in WCF (namely, <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType>, <xref:System.Xml.Serialization.XmlSerializer?displayProperty=nameWithType>, and <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> objects).</span></span> <span data-ttu-id="e7dd7-133">これは、メッセージ フォーマッタ インターフェイスを実装することで対応できます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-133">This can be done by implementing the message formatter interfaces.</span></span> <span data-ttu-id="e7dd7-134">詳細については、<xref:System.ServiceModel.Dispatcher.IClientMessageFormatter?displayProperty=nameWithType> および <xref:System.ServiceModel.Dispatcher.ClientOperation.Formatter%2A?displayProperty=nameWithType> プロパティのトピックを参照してください。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-134">For more information, see <xref:System.ServiceModel.Dispatcher.IClientMessageFormatter?displayProperty=nameWithType> and the <xref:System.ServiceModel.Dispatcher.ClientOperation.Formatter%2A?displayProperty=nameWithType> property.</span></span>  
  
- <span data-ttu-id="e7dd7-135">カスタム パラメーターの検証。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-135">Custom Parameter Validation.</span></span> <span data-ttu-id="e7dd7-136">XML ではなく、型指定されたパラメーターが有効になるようにする必要が生じる場合があります。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-136">A user may want to enforce that typed parameters are valid (as opposed to XML).</span></span> <span data-ttu-id="e7dd7-137">これは、パラメーター インスペクター インターフェイスを使用して実行できます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-137">This can be done using the parameter inspector interfaces.</span></span> <span data-ttu-id="e7dd7-138">例については、「方法: パラメーターまたは[クライアント検証](../samples/client-validation.md)を[検査または変更する](how-to-inspect-or-modify-parameters.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-138">For an example, see [How to: Inspect or Modify Parameters](how-to-inspect-or-modify-parameters.md) or [Client Validation](../samples/client-validation.md).</span></span>  
  
### <a name="using-the-clientruntime-class"></a><span data-ttu-id="e7dd7-139">ClientRuntime クラスの使用</span><span class="sxs-lookup"><span data-stu-id="e7dd7-139">Using the ClientRuntime Class</span></span>  

 <span data-ttu-id="e7dd7-140"><xref:System.ServiceModel.Dispatcher.ClientRuntime> クラスは、メッセージを途中受信してクライアントの動作を拡張する拡張オブジェクトを追加できる拡張ポイントです。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-140">The <xref:System.ServiceModel.Dispatcher.ClientRuntime> class is an extensibility point to which you can add extension objects that intercept messages and extend client behavior.</span></span> <span data-ttu-id="e7dd7-141">途中受信オブジェクトには、特定のコントラクト内のすべてのメッセージを処理する、特定の操作用のメッセージだけを処理する、カスタムのチャネル初期化を実行する、その他のカスタム クライアント アプリケーションの動作を実行する、などの機能があります。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-141">Interception objects can process all messages in a particular contract, process only messages for particular operations, perform custom channel initialization, and implement other custom client application behavior.</span></span>  
  
- <span data-ttu-id="e7dd7-142"><xref:System.ServiceModel.Dispatcher.ClientRuntime.CallbackDispatchRuntime%2A> プロパティは、サービス側開始のコールバック クライアント用のディスパッチ ランタイム オブジェクトを返します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-142">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.CallbackDispatchRuntime%2A> property returns the dispatch run-time object for service-initiated callback clients.</span></span>  
  
- <span data-ttu-id="e7dd7-143"><xref:System.ServiceModel.Dispatcher.ClientRuntime.OperationSelector%2A> プロパティは、カスタムの操作セレクター オブジェクトを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-143">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.OperationSelector%2A> property accepts a custom operation selector object.</span></span>  
  
- <span data-ttu-id="e7dd7-144"><xref:System.ServiceModel.Dispatcher.ClientRuntime.ChannelInitializers%2A> プロパティを使用すると、クライアント チャネルを検査または変更できるチャネル初期化子を追加できます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-144">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.ChannelInitializers%2A> property enables the addition of a channel initializer that can inspect or modify the client channel.</span></span>  
  
- <span data-ttu-id="e7dd7-145"><xref:System.ServiceModel.Dispatcher.ClientRuntime.Operations%2A> プロパティは、<xref:System.ServiceModel.Dispatcher.ClientOperation> オブジェクトのコレクションを取得します。このコレクションにカスタムのメッセージ インターセプターを追加すれば、その操作のメッセージに固有の機能を提供できます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-145">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.Operations%2A> property gets a collection of <xref:System.ServiceModel.Dispatcher.ClientOperation> objects to which you can add custom message interceptors that provide functionality specific to the messages of that operation.</span></span>  
  
- <span data-ttu-id="e7dd7-146"><xref:System.ServiceModel.Dispatcher.ClientRuntime.ManualAddressing%2A> プロパティをアプリケーションで使用すると、自動アドレス指定ヘッダーをオフにしてアドレス指定を直接制御できます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-146">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.ManualAddressing%2A> property enables an application to turn off some automatic addressing headers to directly control addressing.</span></span>  
  
- <span data-ttu-id="e7dd7-147"><xref:System.ServiceModel.Dispatcher.ClientRuntime.Via%2A> プロパティは、トランスポート レベルでメッセージの送信先の値を設定して、メッセージの中継者やその他のシナリオをサポートします。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-147">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.Via%2A> property sets the value of the destination of the message at the transport level to support intermediaries and other scenarios.</span></span>  
  
- <span data-ttu-id="e7dd7-148">プロパティは、 <xref:System.ServiceModel.Dispatcher.ClientRuntime.MessageInspectors%2A> <xref:System.ServiceModel.Dispatcher.IClientMessageInspector> WCF クライアントを介して移動するすべてのメッセージに対してカスタムメッセージインターセプターを追加できるオブジェクトのコレクションを取得します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-148">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.MessageInspectors%2A> property gets a collection of <xref:System.ServiceModel.Dispatcher.IClientMessageInspector> objects to which you can add custom message interceptors for all messages traveling through a WCF client.</span></span>  
  
 <span data-ttu-id="e7dd7-149">また、コントラクト情報を取得するその他のプロパティも多数用意されています。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-149">In addition, there are a number of other properties that retrieve the contract information:</span></span>  
  
- <xref:System.ServiceModel.Dispatcher.ClientRuntime.ContractName%2A>  
  
- <xref:System.ServiceModel.Dispatcher.ClientRuntime.ContractNamespace%2A>  
  
- <xref:System.ServiceModel.Dispatcher.ClientRuntime.ContractClientType%2A>  
  
 <span data-ttu-id="e7dd7-150">WCF クライアントが双方向 WCF クライアントである場合は、次のプロパティもコールバック WCF クライアント情報を取得します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-150">If the WCF client is a duplex WCF client, the following properties also retrieve the callback WCF client information:</span></span>  
  
- <xref:System.ServiceModel.Dispatcher.ClientRuntime.CallbackClientType%2A>  
  
- <xref:System.ServiceModel.Dispatcher.ClientRuntime.CallbackDispatchRuntime%2A>  
  
 <span data-ttu-id="e7dd7-151">Wcf クライアント全体で WCF クライアントの実行を拡張するには、クラスで使用できるプロパティを確認し <xref:System.ServiceModel.Dispatcher.ClientRuntime> て、プロパティを変更するか、インターフェイスを実装してプロパティに追加することで、検索する機能を作成するかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-151">To extend WCF client execution across an entire WCF client, review the properties available on the <xref:System.ServiceModel.Dispatcher.ClientRuntime> class to see whether modifying a property or implementing an interface and adding it to a property creates the functionality you are seeking.</span></span> <span data-ttu-id="e7dd7-152">作成する特定の拡張を選択した後は、適切な <xref:System.ServiceModel.Dispatcher.ClientRuntime> プロパティにその拡張を挿入します。挿入するには、実行時に <xref:System.ServiceModel.Dispatcher.ClientRuntime> クラスにアクセスを提供するクライアント動作を実装します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-152">Once you have chosen a particular extension to build, insert your extension into the appropriate <xref:System.ServiceModel.Dispatcher.ClientRuntime> property by implementing a client behavior that provides access to the <xref:System.ServiceModel.Dispatcher.ClientRuntime> class when invoked.</span></span>  
  
 <span data-ttu-id="e7dd7-153">カスタム拡張オブジェクトは、操作動作 (<xref:System.ServiceModel.Description.IOperationBehavior> を実装するオブジェクト)、コントラクト動作 (<xref:System.ServiceModel.Description.IContractBehavior> を実装するオブジェクト)、またはエンドポイント動作 (<xref:System.ServiceModel.Description.IEndpointBehavior> を実装するオブジェクト) を使用して、コレクションに挿入できます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-153">You can insert custom extension objects into a collection using an operation behavior (an object that implements <xref:System.ServiceModel.Description.IOperationBehavior>), a contract behavior (an object that implements <xref:System.ServiceModel.Description.IContractBehavior>), or an endpoint behavior (an object that implements <xref:System.ServiceModel.Description.IEndpointBehavior>).</span></span> <span data-ttu-id="e7dd7-154">インストール動作オブジェクトは、プログラムで直接に、または宣言を介して (カスタム属性を実装して)、さらにアプリケーション構成ファイルを使用して動作を挿入できるようにするカスタム <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> オブジェクトを実装することにより、適切な動作コレクションに追加されます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-154">The installing behavior object is added to the appropriate collection of behaviors either programmatically, declaratively (by implementing a custom attribute), or by implementing a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> object to enable the behavior to be inserted using an application configuration file.</span></span> <span data-ttu-id="e7dd7-155">詳細については、「動作を使用した [ランタイムの構成と拡張](configuring-and-extending-the-runtime-with-behaviors.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-155">For details, see [Configuring and Extending the Runtime with Behaviors](configuring-and-extending-the-runtime-with-behaviors.md).</span></span>  
  
 <span data-ttu-id="e7dd7-156">WCF クライアント全体のインターセプトを示す例については、「 [方法: クライアントでメッセージを検査または変更する](how-to-inspect-or-modify-messages-on-the-client.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-156">For examples that demonstrate interception across a WCF client, see [How to: Inspect or Modify Messages on the Client](how-to-inspect-or-modify-messages-on-the-client.md).</span></span>  
  
### <a name="using-the-clientoperation-class"></a><span data-ttu-id="e7dd7-157">ClientOperation クラスの使用</span><span class="sxs-lookup"><span data-stu-id="e7dd7-157">Using the ClientOperation Class</span></span>  

 <span data-ttu-id="e7dd7-158"><xref:System.ServiceModel.Dispatcher.ClientOperation> クラスは、1 つのサービス操作のスコープ内だけに適用されるカスタムの拡張を実現するために、クライアント ランタイムに対して変更または挿入を行う場所です。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-158">The <xref:System.ServiceModel.Dispatcher.ClientOperation> class is the location for client run-time modifications and insertion point for custom extensions that are scoped to only one service operation.</span></span> <span data-ttu-id="e7dd7-159">(コントラクト中のすべてのメッセージに対するクライアントのランタイム動作を変更するには、<xref:System.ServiceModel.Dispatcher.ClientRuntime> クラスを使用します。)</span><span class="sxs-lookup"><span data-stu-id="e7dd7-159">(To modify client run-time behavior for all messages in a contract, use the <xref:System.ServiceModel.Dispatcher.ClientRuntime> class.)</span></span>  
  
 <span data-ttu-id="e7dd7-160"><xref:System.ServiceModel.Dispatcher.ClientRuntime.Operations%2A> プロパティを使用して、特定のサービス操作を表す <xref:System.ServiceModel.Dispatcher.ClientOperation> オブジェクトを検索します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-160">Use the <xref:System.ServiceModel.Dispatcher.ClientRuntime.Operations%2A> property to locate the <xref:System.ServiceModel.Dispatcher.ClientOperation> object that represents a particular service operation.</span></span> <span data-ttu-id="e7dd7-161">次のプロパティを使用すると、カスタムオブジェクトを WCF クライアントシステムに挿入できます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-161">The following properties enable you to insert custom objects into the WCF client system:</span></span>  
  
- <span data-ttu-id="e7dd7-162"><xref:System.ServiceModel.Dispatcher.ClientOperation.Formatter%2A> プロパティは、特定の操作用に <xref:System.ServiceModel.Dispatcher.IClientMessageFormatter> のカスタムの実装を挿入したり、現在のフォーマッタを変更するために使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-162">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.Formatter%2A> property to insert a custom <xref:System.ServiceModel.Dispatcher.IClientMessageFormatter> implementation for an operation or modify the current formatter.</span></span>  
  
- <span data-ttu-id="e7dd7-163"><xref:System.ServiceModel.Dispatcher.ClientOperation.ParameterInspectors%2A> プロパティは、<xref:System.ServiceModel.Dispatcher.IParameterInspector> のカスタムの実装を挿入したり、現在の実装を変更するために使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-163">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.ParameterInspectors%2A> property to insert a custom <xref:System.ServiceModel.Dispatcher.IParameterInspector> implementation or to modify the current one.</span></span>  
  
 <span data-ttu-id="e7dd7-164">次の各プロパティを使用すると、フォーマッタおよびカスタムのパラメーター インスペクターとやり取りしてシステムを変更できます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-164">The following properties enable you to modify the system in interaction with the formatter and custom parameter inspectors:</span></span>  
  
- <span data-ttu-id="e7dd7-165"><xref:System.ServiceModel.Dispatcher.ClientOperation.SerializeRequest%2A> プロパティは、送信メッセージのシリアル化を制御するために使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-165">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.SerializeRequest%2A> property to control the serialization of an outbound message.</span></span>  
  
- <span data-ttu-id="e7dd7-166"><xref:System.ServiceModel.Dispatcher.ClientOperation.DeserializeReply%2A> プロパティは、受信メッセージの逆シリアル化を制御するために使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-166">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.DeserializeReply%2A> property to control the deserialization of an inbound message.</span></span>  
  
- <span data-ttu-id="e7dd7-167">要求メッセージの WS-Addressing 操作を制御する場合に <xref:System.ServiceModel.Dispatcher.ClientOperation.Action%2A> プロパティを使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-167">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.Action%2A> property to control the WS-Addressing action of the request message.</span></span>  
  
- <span data-ttu-id="e7dd7-168">およびを使用し <xref:System.ServiceModel.Dispatcher.ClientOperation.BeginMethod%2A> <xref:System.ServiceModel.Dispatcher.ClientOperation.EndMethod%2A> て、非同期操作に関連付けられている WCF クライアントメソッドを指定します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-168">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.BeginMethod%2A> and <xref:System.ServiceModel.Dispatcher.ClientOperation.EndMethod%2A> to specify which WCF client methods are associated with an asynchronous operation.</span></span>  
  
- <span data-ttu-id="e7dd7-169"><xref:System.ServiceModel.Dispatcher.ClientOperation.FaultContractInfos%2A> プロパティは、SOAP エラーの際に詳細な型として表示できる型を含むコレクションを取得するために使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-169">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.FaultContractInfos%2A> property to get a collection that contains the types that can appear in SOAP faults as the detail type.</span></span>  
  
- <span data-ttu-id="e7dd7-170"><xref:System.ServiceModel.Dispatcher.ClientOperation.IsInitiating%2A> プロパティおよび <xref:System.ServiceModel.Dispatcher.ClientOperation.IsTerminating%2A> プロパティは、操作が呼び出されたとき、それぞれセッションを起動するか終了するかを制御するために使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-170">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.IsInitiating%2A> and <xref:System.ServiceModel.Dispatcher.ClientOperation.IsTerminating%2A> properties to control whether a session is initiated or is torn down, respectively, when the operation is called.</span></span>  
  
- <span data-ttu-id="e7dd7-171"><xref:System.ServiceModel.Dispatcher.ClientOperation.IsOneWay%2A> プロパティは、操作が一方向の操作であるかどうかを制御するために使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-171">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.IsOneWay%2A> property to control whether the operation is a one-way operation.</span></span>  
  
- <span data-ttu-id="e7dd7-172"><xref:System.ServiceModel.Dispatcher.ClientOperation.Parent%2A> プロパティは、<xref:System.ServiceModel.Dispatcher.ClientRuntime> の親オブジェクトを取得するために使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-172">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.Parent%2A> property to obtain the containing <xref:System.ServiceModel.Dispatcher.ClientRuntime> object.</span></span>  
  
- <span data-ttu-id="e7dd7-173"><xref:System.ServiceModel.Dispatcher.ClientOperation.Name%2A> プロパティは、操作の名前を取得するために使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-173">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.Name%2A> property to get the name of the operation.</span></span>  
  
- <span data-ttu-id="e7dd7-174"><xref:System.ServiceModel.Dispatcher.ClientOperation.SyncMethod%2A> プロパティは、操作にマップされるメソッドを制御するために使用します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-174">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.SyncMethod%2A> property to control which method is mapped to the operation.</span></span>  
  
 <span data-ttu-id="e7dd7-175">WCF クライアントの実行を1つのサービス操作でのみ拡張するには、クラスで使用できるプロパティを確認し <xref:System.ServiceModel.Dispatcher.ClientOperation> て、プロパティを変更するか、インターフェイスを実装してプロパティに追加することで、検索する機能を作成するかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-175">To extend WCF client execution across only one service operation, review the properties available on the <xref:System.ServiceModel.Dispatcher.ClientOperation> class to see whether modifying a property or implementing an interface and adding it to a property creates the functionality you are seeking.</span></span> <span data-ttu-id="e7dd7-176">作成する特定の拡張を選択した後は、適切な <xref:System.ServiceModel.Dispatcher.ClientOperation> プロパティにその拡張を挿入します。挿入するには、実行時に <xref:System.ServiceModel.Dispatcher.ClientOperation> クラスにアクセスを提供するクライアント動作を実装します。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-176">Once you have chosen a particular extension to build, insert your extension into the appropriate <xref:System.ServiceModel.Dispatcher.ClientOperation> property by implementing a client behavior that provides access to the <xref:System.ServiceModel.Dispatcher.ClientOperation> class when invoked.</span></span> <span data-ttu-id="e7dd7-177">これで、その動作の内部で、<xref:System.ServiceModel.Dispatcher.ClientRuntime> プロパティを要件に合わせて変更できるようになります。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-177">Inside that behavior you can then modify the <xref:System.ServiceModel.Dispatcher.ClientRuntime> property to fit your requirements.</span></span>  
  
 <span data-ttu-id="e7dd7-178">通常は、操作動作 (<xref:System.ServiceModel.Description.IOperationBehavior> を実装するオブジェクト) の実装で十分ですが、エンドポイント動作とコントラクト動作を使用して、特定の操作の <xref:System.ServiceModel.Description.OperationDescription> を検索し、これに動作を関連付けても同じことを実現できます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-178">Typically, implementing an operation behavior (an object that implements the <xref:System.ServiceModel.Description.IOperationBehavior> interface) suffices, but you can also use endpoint behaviors and contract behaviors to accomplish the same thing by locating the <xref:System.ServiceModel.Description.OperationDescription> for a particular operation and attaching the behavior there.</span></span> <span data-ttu-id="e7dd7-179">詳細については、「動作を使用した [ランタイムの構成と拡張](configuring-and-extending-the-runtime-with-behaviors.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-179">For details, see [Configuring and Extending the Runtime with Behaviors](configuring-and-extending-the-runtime-with-behaviors.md).</span></span>  
  
 <span data-ttu-id="e7dd7-180">構成からカスタム動作を使用するには、カスタム動作構成セクション ハンドラーを使用して動作をインストールします。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-180">To use your custom behavior from configuration, install your behavior using a custom behavior configuration section handler.</span></span> <span data-ttu-id="e7dd7-181">また、カスタム属性を作成することによって動作をインストールすることもできます。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-181">You can also install your behavior by creating a custom attribute.</span></span>  
  
 <span data-ttu-id="e7dd7-182">WCF クライアント全体のインターセプトを示す例について [は、「方法: パラメーターを検査または変更する](how-to-inspect-or-modify-parameters.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e7dd7-182">For examples that demonstrate interception across a WCF client, see [How to: Inspect or Modify Parameters](how-to-inspect-or-modify-parameters.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e7dd7-183">関連項目</span><span class="sxs-lookup"><span data-stu-id="e7dd7-183">See also</span></span>

- <xref:System.ServiceModel.Dispatcher.ClientRuntime>
- <xref:System.ServiceModel.Dispatcher.ClientOperation>
- [<span data-ttu-id="e7dd7-184">方法: クライアントのメッセージを検査または変更する</span><span class="sxs-lookup"><span data-stu-id="e7dd7-184">How to: Inspect or Modify Messages on the Client</span></span>](how-to-inspect-or-modify-messages-on-the-client.md)
- [<span data-ttu-id="e7dd7-185">方法: パラメーターを検査または変更する</span><span class="sxs-lookup"><span data-stu-id="e7dd7-185">How to: Inspect or Modify Parameters</span></span>](how-to-inspect-or-modify-parameters.md)
