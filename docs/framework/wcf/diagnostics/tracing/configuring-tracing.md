---
title: トレースの構成
ms.date: 03/30/2017
helpviewer_keywords:
- tracing [WCF]
ms.assetid: 82922010-e8b3-40eb-98c4-10fc05c6d65d
ms.openlocfilehash: d8b216bf5497cf2a1faa2fa24ba1d8b3102f6f10
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/12/2020
ms.locfileid: "79185737"
---
# <a name="configuring-tracing"></a><span data-ttu-id="5d27a-102">トレースの構成</span><span class="sxs-lookup"><span data-stu-id="5d27a-102">Configuring Tracing</span></span>
<span data-ttu-id="5d27a-103">ここでは、トレースを有効にする方法、トレースを出力し、トレース レベルを設定するようにトレース ソースを構成する方法、エンドツーエンドのトレース相関をサポートするようにアクティビティ トレースと伝達を設定する方法、およびトレースにアクセスするようにトレース リスナーを設定する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-103">This topic describes how you can enable tracing, configure trace sources to emit traces and set trace levels, set activity tracing and propagation to support end-to-end trace correlation, and set trace listeners to access traces.</span></span>  
  
 <span data-ttu-id="5d27a-104">運用環境またはデバッグ環境でのトレース設定の推奨事項については、「[トレースとメッセージ ログ記録の推奨設定](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5d27a-104">For tracing settings recommendations in production or debugging environment, refer to [Recommended Settings for Tracing and Message Logging](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="5d27a-105">Windows 8 でアプリケーションによるトレース ログの生成を行うには、アプリケーションを権限の高い状態で実行 (管理者として実行) する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-105">On Windows 8 you must run your application elevated (Run as Administrator) in order for your application to generate trace logs.</span></span>  
  
## <a name="enabling-tracing"></a><span data-ttu-id="5d27a-106">トレースの有効化</span><span class="sxs-lookup"><span data-stu-id="5d27a-106">Enabling Tracing</span></span>  
 <span data-ttu-id="5d27a-107">Windows 通信基盤 (WCF) は、診断トレースの次のデータを出力します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-107">Windows Communication Foundation (WCF) outputs the following data for diagnostic tracing:</span></span>  
  
- <span data-ttu-id="5d27a-108">操作呼び出し、コード例外、警告、その他の重要な処理イベントなど、アプリケーションのすべてのコンポーネントにおける処理マイルストーンのトレース。</span><span class="sxs-lookup"><span data-stu-id="5d27a-108">Traces for process milestones across all components of the applications, such as operation calls, code exceptions, warnings and other significant processing events.</span></span>  
  
- <span data-ttu-id="5d27a-109">トレース機能が正しく動作しないときの Windows エラー イベント。</span><span class="sxs-lookup"><span data-stu-id="5d27a-109">Windows error events when the tracing feature malfunctions.</span></span> <span data-ttu-id="5d27a-110">[イベント ログ記録](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5d27a-110">See [Event Logging](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span></span>  
  
 <span data-ttu-id="5d27a-111">WCF トレースは、 の<xref:System.Diagnostics>上に構築されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-111">WCF tracing is built on top of <xref:System.Diagnostics>.</span></span> <span data-ttu-id="5d27a-112">トレースを使用するには、構成ファイルまたはコードでトレース ソースを定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-112">To use tracing, you should define trace sources in the configuration file or in code.</span></span> <span data-ttu-id="5d27a-113">WCF では、各 WCF アセンブリのトレース ソースを定義します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-113">WCF defines a trace source for each WCF assembly.</span></span> <span data-ttu-id="5d27a-114">トレース`System.ServiceModel`ソースは、最も一般的な WCF トレース ソースであり、転送の入力/退出からユーザー コードの入力/退出まで、WCF 通信スタック全体での処理マイルストーンを記録します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-114">The `System.ServiceModel` trace source is the most general WCF trace source, and records processing milestones across the WCF communication stack, from entering/leaving transport to entering/leaving user code.</span></span> <span data-ttu-id="5d27a-115">`System.ServiceModel.MessageLogging` トレース ソースは、システムを通過するすべてのメッセージを記録します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-115">The `System.ServiceModel.MessageLogging` trace source records all messages that flow through the system.</span></span>  
  
 <span data-ttu-id="5d27a-116">既定では、トレースは無効です。</span><span class="sxs-lookup"><span data-stu-id="5d27a-116">Tracing is not enabled by default.</span></span> <span data-ttu-id="5d27a-117">トレースをアクティブにするには、トレース リスナーを作成し、構成で選択したトレース ソースに対して "オフ" 以外のトレース レベルを設定する必要があります。それ以外の場合、WCF はトレースを生成しません。</span><span class="sxs-lookup"><span data-stu-id="5d27a-117">To activate tracing, you must create a trace listener and set a trace level other than "Off" for the selected trace source in configuration; otherwise, WCF does not generate any traces.</span></span> <span data-ttu-id="5d27a-118">リスナーを指定しないと、トレースは自動的に無効になります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-118">If you do not specify a listener, tracing is automatically disabled.</span></span> <span data-ttu-id="5d27a-119">リスナーを定義してもトレース レベルを指定しないと、トレース レベルは既定で "Off" に設定され、トレースが出力されなくなります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-119">If a listener is defined, but no level is specified, the level is set to "Off" by default, which means that no trace is emitted.</span></span>  
  
 <span data-ttu-id="5d27a-120">カスタム操作呼び出し元などの WCF 拡張ポイントを使用する場合は、独自のトレースを出力する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-120">If you use WCF extensibility points such as custom operation invokers, you should emit your own traces.</span></span> <span data-ttu-id="5d27a-121">これは、拡張ポイントを実装すると、WCF が既定のパスで標準トレースを出力できなくなるためです。</span><span class="sxs-lookup"><span data-stu-id="5d27a-121">This is because if you implement an extensibility point, WCF can no longer emit the standard traces in the default path.</span></span> <span data-ttu-id="5d27a-122">トレースを出力することで手動トレースのサポートを実装しない場合、予測したトレースが得られない場合があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-122">If you do not implement manual tracing support by emitting traces, you may not see the traces you expect.</span></span>  
  
 <span data-ttu-id="5d27a-123">トレースは、アプリケーションの構成ファイル (Web ホスト型アプリケーションの場合は Web.config、自己ホスト型アプリケーションの場合は Appname.exe.config) を編集することで構成できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-123">You can configure tracing by editing the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted applications.</span></span> <span data-ttu-id="5d27a-124">以下は、このような編集の例です。</span><span class="sxs-lookup"><span data-stu-id="5d27a-124">The following is an example of such edit.</span></span> <span data-ttu-id="5d27a-125">これらの設定の詳細については、「トレースを使用するためのトレース リスナーの構成」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5d27a-125">For more information on these settings, see the "Configuring Trace Listeners to Consume Traces" section.</span></span>  
  
```xml  
<configuration>  
   <system.diagnostics>  
      <sources>  
            <source name="System.ServiceModel"
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
            <listeners>  
               <add name="traceListener"
                   type="System.Diagnostics.XmlWriterTraceListener"
                   initializeData= "c:\log\Traces.svclog" />  
            </listeners>  
         </source>  
      </sources>  
   </system.diagnostics>  
</configuration>  
```  
  
> [!NOTE]
> <span data-ttu-id="5d27a-126">Visual Studio で WCF サービス プロジェクトの構成ファイルを編集するには、アプリケーションの構成ファイルを右クリック**します。**</span><span class="sxs-lookup"><span data-stu-id="5d27a-126">To edit the configuration file of a WCF service project in Visual Studio, right click the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted application in **Solution Explorer**.</span></span> <span data-ttu-id="5d27a-127">次に **、[WCF 構成の編集]** コンテキスト メニュー項目を選択します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-127">Then choose the **Edit WCF Configuration** context menu item.</span></span> <span data-ttu-id="5d27a-128">[構成エディター ツール (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md)が起動し、グラフィカル ユーザー インターフェイスを使用して WCF サービスの構成設定を変更できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-128">This launches the [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md), which enables you to modify configuration settings for WCF services using a graphical user interface.</span></span>  
  
## <a name="configuring-trace-sources-to-emit-traces"></a><span data-ttu-id="5d27a-129">トレースを出力するためのトレース ソースの構成</span><span class="sxs-lookup"><span data-stu-id="5d27a-129">Configuring Trace Sources to Emit Traces</span></span>  
 <span data-ttu-id="5d27a-130">WCF では、各アセンブリのトレース ソースを定義します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-130">WCF defines a trace source for each assembly.</span></span> <span data-ttu-id="5d27a-131">アセンブリ内で生成されたトレースは、該当するソースで定義されているリスナーによってアクセスされます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-131">Traces generated within an assembly are accessed by the listeners defined for that source.</span></span> <span data-ttu-id="5d27a-132">次のトレース ソースが定義されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-132">The following trace sources are defined:</span></span>  
  
- <span data-ttu-id="5d27a-133">System.ServiceModel: WCF 処理のすべてのステージをログに記録し、構成が読み取られるたびに、メッセージがトランスポートで処理され、セキュリティ処理が行われ、メッセージがユーザー コードでディスパッチされます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-133">System.ServiceModel: Logs all stages of WCF processing, whenever configuration is read, a message is processed in transport, security processing, a message is dispatched in user code, and so on.</span></span>  
  
- <span data-ttu-id="5d27a-134">System.ServiceModel.MessageLogging: システムを通過するすべてのメッセージを記録します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-134">System.ServiceModel.MessageLogging: Logs all messages that flow through the system.</span></span>  
  
- <span data-ttu-id="5d27a-135">System.IdentityModel</span><span class="sxs-lookup"><span data-stu-id="5d27a-135">System.IdentityModel.</span></span>  
  
- <span data-ttu-id="5d27a-136">System.ServiceModel.Activation</span><span class="sxs-lookup"><span data-stu-id="5d27a-136">System.ServiceModel.Activation.</span></span>  
  
- <span data-ttu-id="5d27a-137">System.IO.Log: Common Log File System (CLFS) への .NET Framework インターフェイスを記録します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-137">System.IO.Log: Logging for the .NET Framework interface to the Common Log File System (CLFS).</span></span>  
  
- <span data-ttu-id="5d27a-138">System.Runtime.Serialization: オブジェクトの読み取りまたは書き込みを記録します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-138">System.Runtime.Serialization: Logs when objects are read or written.</span></span>  
  
- <span data-ttu-id="5d27a-139">CardSpace</span><span class="sxs-lookup"><span data-stu-id="5d27a-139">CardSpace.</span></span>  
  
 <span data-ttu-id="5d27a-140">各トレース ソースは、次の構成例に示すように同じ (共有) リスナーを使用するように構成できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-140">You can configure each trace source to use the same (shared) listener, as indicated in the following configuration example.</span></span>  
  
```xml  
<configuration>  
    <system.diagnostics>  
        <sources>  
            <source name="System.ServiceModel"
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="CardSpace">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IO.Log">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.Runtime.Serialization">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IdentityModel">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
        </sources>  
  
        <sharedListeners>  
            <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="c:\log\Traces.svclog" />  
        </sharedListeners>  
    </system.diagnostics>  
</configuration>  
```  
  
 <span data-ttu-id="5d27a-141">さらに、次の例に示すように、ユーザー定義のトレース ソースを追加してユーザー コード トレースを出力することもできます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-141">In addition, you can add user-defined trace sources, as demonstrated by the following example, to emit user code traces.</span></span>  
  
```xml  
<system.diagnostics>  
   <sources>  
       <source name="UserTraceSource" switchValue="Warning, ActivityTracing" >  
          <listeners>  
              <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="C:\logs\UserTraces.svclog" />  
          </listeners>  
       </source>  
   </sources>  
   <trace autoflush="true" />
</system.diagnostics>  
```  
  
 <span data-ttu-id="5d27a-142">ユーザー定義トレース・ソースの作成の詳細については、「[トレースの拡張](../../../../../docs/framework/wcf/samples/extending-tracing.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5d27a-142">For more information about creating user-defined trace sources, see [Extending Tracing](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span></span>  
  
## <a name="configuring-trace-listeners-to-consume-traces"></a><span data-ttu-id="5d27a-143">トレースを使用するためのトレース リスナーの構成</span><span class="sxs-lookup"><span data-stu-id="5d27a-143">Configuring Trace Listeners to Consume Traces</span></span>  
 <span data-ttu-id="5d27a-144">実行時に、WCF は、データを処理するリスナーにトレース データをフィードします。</span><span class="sxs-lookup"><span data-stu-id="5d27a-144">At runtime, WCF feeds trace data to the listeners which process the data.</span></span> <span data-ttu-id="5d27a-145">WCF には、出力に使用する<xref:System.Diagnostics>形式が異なる、定義済みのリスナーがいくつか用意されています。</span><span class="sxs-lookup"><span data-stu-id="5d27a-145">WCF provides several predefined listeners for <xref:System.Diagnostics>, which differ in the format they use for output.</span></span> <span data-ttu-id="5d27a-146">カスタム リスナーの種類を追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-146">You can also add custom listener types.</span></span>  
  
 <span data-ttu-id="5d27a-147">`add` を使用して、使用するトレース リスナーの名前と種類を指定できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-147">You can use `add` to specify the name and type of the trace listener you want to use.</span></span> <span data-ttu-id="5d27a-148">この例の構成では、リスナーに `traceListener` という名前を付け、使用する種類として標準の .NET Framework トレース リスナー (`System.Diagnostics.XmlWriterTraceListener`) を追加しています。</span><span class="sxs-lookup"><span data-stu-id="5d27a-148">In our example configuration, we named the Listener `traceListener` and added the standard .NET Framework trace listener (`System.Diagnostics.XmlWriterTraceListener`) as the type we want to use.</span></span> <span data-ttu-id="5d27a-149">ソースごとに任意の数のトレース リスナーを追加できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-149">You can add any number of trace listeners for each source.</span></span> <span data-ttu-id="5d27a-150">トレース リスナーがトレースをファイルに出力する場合は、構成ファイルで出力ファイルの場所と名前を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-150">If the trace listener emits the trace to a file, you must specify the output file location and name in the configuration file.</span></span> <span data-ttu-id="5d27a-151">指定するには、`initializeData` をそのリスナーのファイルの名前に設定します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-151">This is done by setting `initializeData` to the name of the file for that listener.</span></span> <span data-ttu-id="5d27a-152">ファイル名を指定しないと、使用するリスナーの種類に基づいて任意のファイル名が生成されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-152">If you do not specify a file name, a random file name is generated based on the listener type used.</span></span> <span data-ttu-id="5d27a-153"><xref:System.Diagnostics.XmlWriterTraceListener> を使用した場合は、拡張子のないファイル名が生成されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-153">If <xref:System.Diagnostics.XmlWriterTraceListener> is used, a file name with no extension is generated.</span></span> <span data-ttu-id="5d27a-154">カスタム リスナーを実装した場合は、この属性を使用して、ファイル名以外の初期化データを受け取ることもできます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-154">If you implement a custom listener, you can also use this attribute to receive initialization data other than a filename.</span></span> <span data-ttu-id="5d27a-155">たとえば、この属性にデータベース識別子を指定できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-155">For example, you can specify a database identifier for this attribute.</span></span>  
  
 <span data-ttu-id="5d27a-156">カスタム トレース リスナーは、ネットワーク上のリモート データベースなどにトレースを送信するように構成できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-156">You can configure a custom trace listener to send traces on the wire, for example, to a remote database.</span></span> <span data-ttu-id="5d27a-157">アプリケーションを展開するユーザーは、リモート コンピューターのトレース ログに適切なアクセス制御を適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-157">As an application deployer, you should enforce proper access control on the trace logs in the remote machine.</span></span>  
  
 <span data-ttu-id="5d27a-158">また、トレース リスナーはプログラムによって構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-158">You can also configure a trace listener programmatically.</span></span> <span data-ttu-id="5d27a-159">詳細については、「方法[: トレース リスナーを作成および初期化する](../../../debug-trace-profile/how-to-create-and-initialize-trace-listeners.md)」および「[カスタム TraceListener の作成](https://docs.microsoft.com/archive/msdn-magazine/2006/april/clr-inside-out-extending-system-diagnostics)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5d27a-159">For more information, see [How to: Create and Initialize Trace Listeners](../../../debug-trace-profile/how-to-create-and-initialize-trace-listeners.md) and [Creating a Custom TraceListener](https://docs.microsoft.com/archive/msdn-magazine/2006/april/clr-inside-out-extending-system-diagnostics).</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="5d27a-160">`System.Diagnostics.XmlWriterTraceListener` はスレッド セーフではないため、トレース ソースは、トレースを出力するときにリソースを排他的にロックする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-160">Because `System.Diagnostics.XmlWriterTraceListener` is not thread-safe, the trace source may lock resources exclusively when outputting traces.</span></span> <span data-ttu-id="5d27a-161">このリスナーを使用するように構成されたトレース ソースに多くのスレッドがトレースを出力すると、リソースの競合が発生し、パフォーマンスに重大な問題が生じる場合があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-161">When many threads output traces to a trace source configured to use this listener, resource contention may occur, which results in a significant performance issue.</span></span> <span data-ttu-id="5d27a-162">この問題を解決するには、スレッド セーフなカスタム リスナーを実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-162">To resolve this problem, you should implement a custom listener that is thread-safe.</span></span>  
  
## <a name="trace-level"></a><span data-ttu-id="5d27a-163">トレース レベル</span><span class="sxs-lookup"><span data-stu-id="5d27a-163">Trace Level</span></span>  
 <span data-ttu-id="5d27a-164">トレース レベルは、トレース ソースの `switchValue` 設定で制御します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-164">The tracing level is controlled by the `switchValue` setting of the trace source.</span></span> <span data-ttu-id="5d27a-165">使用できるトレース レベルを次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-165">The available tracing levels are described in the following table.</span></span>  
  
|<span data-ttu-id="5d27a-166">トレース レベル</span><span class="sxs-lookup"><span data-stu-id="5d27a-166">Trace Level</span></span>|<span data-ttu-id="5d27a-167">追跡イベントの性質</span><span class="sxs-lookup"><span data-stu-id="5d27a-167">Nature of the Tracked Events</span></span>|<span data-ttu-id="5d27a-168">追跡イベントの内容</span><span class="sxs-lookup"><span data-stu-id="5d27a-168">Content of the Tracked Events</span></span>|<span data-ttu-id="5d27a-169">追跡イベント</span><span class="sxs-lookup"><span data-stu-id="5d27a-169">Tracked Events</span></span>|<span data-ttu-id="5d27a-170">対象ユーザー</span><span class="sxs-lookup"><span data-stu-id="5d27a-170">User Target</span></span>|  
|-----------------|----------------------------------|-----------------------------------|--------------------|-----------------|  
|<span data-ttu-id="5d27a-171">Off</span><span class="sxs-lookup"><span data-stu-id="5d27a-171">Off</span></span>|<span data-ttu-id="5d27a-172">該当なし</span><span class="sxs-lookup"><span data-stu-id="5d27a-172">N/A</span></span>|<span data-ttu-id="5d27a-173">該当なし</span><span class="sxs-lookup"><span data-stu-id="5d27a-173">N/A</span></span>|<span data-ttu-id="5d27a-174">トレースは出力されません。</span><span class="sxs-lookup"><span data-stu-id="5d27a-174">No traces are emitted.</span></span>|<span data-ttu-id="5d27a-175">該当なし</span><span class="sxs-lookup"><span data-stu-id="5d27a-175">N/A</span></span>|  
|<span data-ttu-id="5d27a-176">Critical</span><span class="sxs-lookup"><span data-stu-id="5d27a-176">Critical</span></span>|<span data-ttu-id="5d27a-177">「負の」イベント: 予期しない処理またはエラー状態を示すイベント。</span><span class="sxs-lookup"><span data-stu-id="5d27a-177">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>||<span data-ttu-id="5d27a-178">次の例を含む未処理の例外が記録されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-178">Unhandled exceptions including the following are logged:</span></span><br /><br /> <span data-ttu-id="5d27a-179">- メモリ例外</span><span class="sxs-lookup"><span data-stu-id="5d27a-179">-   OutOfMemoryException</span></span><br /><span data-ttu-id="5d27a-180">- 任意のスレッド中止例外を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-180">-   ThreadAbortException (the CLR invokes any ThreadAbortExceptionHandler)</span></span><br /><span data-ttu-id="5d27a-181">- スタックオーバーフロー例外 (キャッチできません)</span><span class="sxs-lookup"><span data-stu-id="5d27a-181">-   StackOverflowException (cannot be caught)</span></span><br /><span data-ttu-id="5d27a-182">- エラーの例外</span><span class="sxs-lookup"><span data-stu-id="5d27a-182">-   ConfigurationErrorsException</span></span><br /><span data-ttu-id="5d27a-183">- セフ例外</span><span class="sxs-lookup"><span data-stu-id="5d27a-183">-   SEHException</span></span><br /><span data-ttu-id="5d27a-184">- アプリケーションの起動エラー</span><span class="sxs-lookup"><span data-stu-id="5d27a-184">-   Application start errors</span></span><br /><span data-ttu-id="5d27a-185">- フェールファストイベント</span><span class="sxs-lookup"><span data-stu-id="5d27a-185">-   Failfast events</span></span><br /><span data-ttu-id="5d27a-186">- システムハング</span><span class="sxs-lookup"><span data-stu-id="5d27a-186">-   System hangs</span></span><br /><span data-ttu-id="5d27a-187">- 有害メッセージ: アプリケーションが失敗する原因となるメッセージ トレース。</span><span class="sxs-lookup"><span data-stu-id="5d27a-187">-   Poison messages: message traces that cause the application to fail.</span></span>|<span data-ttu-id="5d27a-188">管理者</span><span class="sxs-lookup"><span data-stu-id="5d27a-188">Administrators</span></span><br /><br /> <span data-ttu-id="5d27a-189">アプリケーション開発者</span><span class="sxs-lookup"><span data-stu-id="5d27a-189">Application developers</span></span>|  
|<span data-ttu-id="5d27a-190">エラー</span><span class="sxs-lookup"><span data-stu-id="5d27a-190">Error</span></span>|<span data-ttu-id="5d27a-191">「負の」イベント: 予期しない処理またはエラー状態を示すイベント。</span><span class="sxs-lookup"><span data-stu-id="5d27a-191">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="5d27a-192">予期しない処理が発生した。</span><span class="sxs-lookup"><span data-stu-id="5d27a-192">Unexpected processing has happened.</span></span> <span data-ttu-id="5d27a-193">アプリケーションが、タスクを正常に実行できなかった。</span><span class="sxs-lookup"><span data-stu-id="5d27a-193">The application was not able to perform a task as expected.</span></span> <span data-ttu-id="5d27a-194">ただし、アプリケーションは依然として動作している。</span><span class="sxs-lookup"><span data-stu-id="5d27a-194">However, the application is still up and running.</span></span>|<span data-ttu-id="5d27a-195">すべての例外がログに記録されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-195">All exceptions are logged.</span></span>|<span data-ttu-id="5d27a-196">管理者</span><span class="sxs-lookup"><span data-stu-id="5d27a-196">Administrators</span></span><br /><br /> <span data-ttu-id="5d27a-197">アプリケーション開発者</span><span class="sxs-lookup"><span data-stu-id="5d27a-197">Application developers</span></span>|  
|<span data-ttu-id="5d27a-198">警告</span><span class="sxs-lookup"><span data-stu-id="5d27a-198">Warning</span></span>|<span data-ttu-id="5d27a-199">「負の」イベント: 予期しない処理またはエラー状態を示すイベント。</span><span class="sxs-lookup"><span data-stu-id="5d27a-199">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="5d27a-200">問題が発生したか、発生する可能性があるが、アプリケーションは正常に動作している。</span><span class="sxs-lookup"><span data-stu-id="5d27a-200">A possible problem has occurred or may occur, but the application still functions correctly.</span></span> <span data-ttu-id="5d27a-201">ただし、正常な動作を継続できなくなる可能性がある。</span><span class="sxs-lookup"><span data-stu-id="5d27a-201">However, it may not continue to work properly.</span></span>|<span data-ttu-id="5d27a-202">- アプリケーションが、その調整設定で許可されている数を超える要求を受信しています。</span><span class="sxs-lookup"><span data-stu-id="5d27a-202">-   The application is receiving more requests than its throttling settings allow.</span></span><br /><span data-ttu-id="5d27a-203">- 受信キューが設定されている最大容量に近い。</span><span class="sxs-lookup"><span data-stu-id="5d27a-203">-   The receiving queue is near its maximum configured capacity.</span></span><br /><span data-ttu-id="5d27a-204">- タイムアウトを超えました。</span><span class="sxs-lookup"><span data-stu-id="5d27a-204">-   Timeout has exceeded.</span></span><br /><span data-ttu-id="5d27a-205">- 資格情報が拒否されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-205">-   Credentials are rejected.</span></span>|<span data-ttu-id="5d27a-206">管理者</span><span class="sxs-lookup"><span data-stu-id="5d27a-206">Administrators</span></span><br /><br /> <span data-ttu-id="5d27a-207">アプリケーション開発者</span><span class="sxs-lookup"><span data-stu-id="5d27a-207">Application developers</span></span>|  
|<span data-ttu-id="5d27a-208">Information</span><span class="sxs-lookup"><span data-stu-id="5d27a-208">Information</span></span>|<span data-ttu-id="5d27a-209">「ポジティブ」イベント: 成功したマイルストーンをマークするイベント</span><span class="sxs-lookup"><span data-stu-id="5d27a-209">"Positive" events: events that mark successful milestones</span></span>|<span data-ttu-id="5d27a-210">アプリケーションが正常に動作しているかどうかとは無関係の、アプリケーションの実行に関する重要で正常なマイルストーン。</span><span class="sxs-lookup"><span data-stu-id="5d27a-210">Important and successful milestones of application execution, regardless of whether the application is working properly or not.</span></span>|<span data-ttu-id="5d27a-211">一般に、システム ステータスの監視と診断、パフォーマンスの計測、またはプロファイリングに有用なメッセージが生成されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-211">In general, messages helpful for monitoring and diagnosing system status, measuring performance or profiling are generated.</span></span> <span data-ttu-id="5d27a-212">この情報は、キャパシティ プランニングやパフォーマンス管理のために利用できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-212">You can use such information for capacity planning and performance management:</span></span><br /><br /> <span data-ttu-id="5d27a-213">- チャネルが作成されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-213">-   Channels are created.</span></span><br /><span data-ttu-id="5d27a-214">- エンドポイントリスナーが作成されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-214">-   Endpoint listeners are created.</span></span><br /><span data-ttu-id="5d27a-215">- メッセージがトランスポートに入る/去る。</span><span class="sxs-lookup"><span data-stu-id="5d27a-215">-   Message enters/leaves transport.</span></span><br /><span data-ttu-id="5d27a-216">- セキュリティ トークンが取得されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-216">-   Security token is retrieved.</span></span><br /><span data-ttu-id="5d27a-217">- 構成設定が読み込まれます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-217">-   Configuration setting is read.</span></span>|<span data-ttu-id="5d27a-218">管理者</span><span class="sxs-lookup"><span data-stu-id="5d27a-218">Administrators</span></span><br /><br /> <span data-ttu-id="5d27a-219">アプリケーション開発者</span><span class="sxs-lookup"><span data-stu-id="5d27a-219">Application developers</span></span><br /><br /> <span data-ttu-id="5d27a-220">製品開発者。</span><span class="sxs-lookup"><span data-stu-id="5d27a-220">Product developers.</span></span>|  
|<span data-ttu-id="5d27a-221">"詳細"</span><span class="sxs-lookup"><span data-stu-id="5d27a-221">Verbose</span></span>|<span data-ttu-id="5d27a-222">「ポジティブ」イベント: 成功したマイルストーンをマークするイベント。</span><span class="sxs-lookup"><span data-stu-id="5d27a-222">"Positive" events: events that mark successful milestones.</span></span>|<span data-ttu-id="5d27a-223">ユーザー コードとサービスの両方に対する低レベルのイベントが出力されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-223">Low level events for both user code and servicing are emitted.</span></span>|<span data-ttu-id="5d27a-224">一般に、このレベルはデバッグやアプリケーションの最適化に利用できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-224">In general, you can use this level for debugging or application optimization.</span></span><br /><br /> <span data-ttu-id="5d27a-225">- 認識されたメッセージ ヘッダー。</span><span class="sxs-lookup"><span data-stu-id="5d27a-225">-   Understood message header.</span></span>|<span data-ttu-id="5d27a-226">管理者</span><span class="sxs-lookup"><span data-stu-id="5d27a-226">Administrators</span></span><br /><br /> <span data-ttu-id="5d27a-227">アプリケーション開発者</span><span class="sxs-lookup"><span data-stu-id="5d27a-227">Application developers</span></span><br /><br /> <span data-ttu-id="5d27a-228">製品開発者。</span><span class="sxs-lookup"><span data-stu-id="5d27a-228">Product developers.</span></span>|  
|<span data-ttu-id="5d27a-229">ActivityTracing</span><span class="sxs-lookup"><span data-stu-id="5d27a-229">ActivityTracing</span></span>||<span data-ttu-id="5d27a-230">処理アクティビティとコンポーネント間のフロー イベント。</span><span class="sxs-lookup"><span data-stu-id="5d27a-230">Flow events between processing activities and components.</span></span>|<span data-ttu-id="5d27a-231">このレベルを使用すると、管理者と開発者は同じアプリケーション ドメイン内のアプリケーションの相関関係を示すことができます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-231">This level allows administrators and developers to correlate applications in the same application domain:</span></span><br /><br /> <span data-ttu-id="5d27a-232">- 開始/停止などのアクティビティ境界のトレース。</span><span class="sxs-lookup"><span data-stu-id="5d27a-232">-   Traces for activity boundaries, such as start/stop.</span></span><br /><span data-ttu-id="5d27a-233">- 転送のトレース。</span><span class="sxs-lookup"><span data-stu-id="5d27a-233">-   Traces for transfers.</span></span>|<span data-ttu-id="5d27a-234">All</span><span class="sxs-lookup"><span data-stu-id="5d27a-234">All</span></span>|  
|<span data-ttu-id="5d27a-235">All</span><span class="sxs-lookup"><span data-stu-id="5d27a-235">All</span></span>||<span data-ttu-id="5d27a-236">アプリケーションが正常に動作している可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-236">Application may function properly.</span></span> <span data-ttu-id="5d27a-237">すべてのイベントが出力されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-237">All events are emitted.</span></span>|<span data-ttu-id="5d27a-238">前のすべてのイベント。</span><span class="sxs-lookup"><span data-stu-id="5d27a-238">All previous events.</span></span>|<span data-ttu-id="5d27a-239">All</span><span class="sxs-lookup"><span data-stu-id="5d27a-239">All</span></span>|  
  
 <span data-ttu-id="5d27a-240">Verbose から Critical までのレベルは相互にスタックされます。つまり、各トレース レベルには、そのレベルよりも上位のすべてのレベルが含まれます (Off レベルを除く)。</span><span class="sxs-lookup"><span data-stu-id="5d27a-240">The levels from Verbose to Critical are stacked on top of each other, that is, each trace level includes all levels above it except the Off level.</span></span> <span data-ttu-id="5d27a-241">たとえば、Warning レベルでリッスンしているリスナーは、Critical、Error、Warning の各トレースを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-241">For example, a listener listening at the Warning level receives Critical, Error, and Warning traces.</span></span> <span data-ttu-id="5d27a-242">All レベルには、Verbose から Critical までのイベントとアクティビティ トレース イベントが含まれます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-242">The All level includes events from Verbose to Critical and Activity tracing events.</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="5d27a-243">Information、Verbose、および ActivityTracing の各レベルは、多くのトレースを生成するため、コンピューターで利用可能なすべてのリソースを使い果たした場合は、メッセージ スループットに悪影響を及ぼす可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-243">The Information, Verbose, and ActivityTracing levels generate a lot of traces, which may negatively impact message throughput if you have used up all available resources on the machine.</span></span>  
  
## <a name="configuring-activity-tracing-and-propagation-for-correlation"></a><span data-ttu-id="5d27a-244">アクティビティ トレースと伝達の関連付けの構成</span><span class="sxs-lookup"><span data-stu-id="5d27a-244">Configuring Activity Tracing and Propagation for Correlation</span></span>  
 <span data-ttu-id="5d27a-245">`activityTracing` 属性に指定する `switchValue` 値を使用してアクティビティ トレースを有効にし、エンドポイント内のアクティビティの境界と転送のトレースを出力できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-245">The `activityTracing` value specified for the `switchValue` attribute is used to enable activity tracing, which emits traces for activity boundaries and transfers within endpoints.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5d27a-246">WCF で特定の機能拡張を使用すると、アクティビティ トレースが有効<xref:System.NullReferenceException>になっていると、 が表示される場合があります。</span><span class="sxs-lookup"><span data-stu-id="5d27a-246">When you use certain extensibility features in WCF, you might get a <xref:System.NullReferenceException> when activity tracing is enabled.</span></span> <span data-ttu-id="5d27a-247">この問題を解決するには、アプリケーションの構成ファイルを調べて、トレース ソースの `switchValue` 属性が `activityTracing` に設定されていないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-247">To fix this problem, check your application's configuration file and ensure that the `switchValue` attribute for your trace source is not set to `activityTracing`.</span></span>  
  
 <span data-ttu-id="5d27a-248">`propagateActivity` 属性は、メッセージ交換に参加している他のエンドポイントにアクティビティを伝達する必要があるかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="5d27a-248">The `propagateActivity` attribute indicates whether the activity should be propagated to other endpoints that participate in the message exchange.</span></span> <span data-ttu-id="5d27a-249">この値を `true` に設定すると、任意の 2 つのエンドポイントで生成されたトレース ファイルを取得し、一方のエンドポイントのトレース セットがもう一方のエンドポイントのトレース セットにどのように転送されるかを監視できます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-249">By setting this value to `true`, you can take trace files generated by any two endpoints and observe how a set of traces on one endpoint flowed to a set of traces on another endpoint.</span></span>  
  
 <span data-ttu-id="5d27a-250">アクティビティのトレースと伝播の詳細については、[伝播](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5d27a-250">For more information about activity tracing and propagation, see [Propagation](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span></span>  
  
 <span data-ttu-id="5d27a-251">ブール`propagateActivity`値`ActivityTracing`とブール値の両方が、システム.サービスモデル トレースソースに適用されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-251">Both `propagateActivity` and `ActivityTracing` Boolean values apply to the System.ServiceModel TraceSource.</span></span> <span data-ttu-id="5d27a-252">この`ActivityTracing`値は、WCF またはユーザー定義のトレース ソースを含む任意のトレース ソースにも適用されます。</span><span class="sxs-lookup"><span data-stu-id="5d27a-252">The `ActivityTracing` value also applies to any trace source, including WCF or user-defined ones.</span></span>  
  
 <span data-ttu-id="5d27a-253">ユーザー定義のトレース ソースでは、`propagateActivity` 属性を使用できません。</span><span class="sxs-lookup"><span data-stu-id="5d27a-253">You cannot use the `propagateActivity` attribute with user-defined trace sources.</span></span> <span data-ttu-id="5d27a-254">ユーザー コード アクティビティ ID の伝達では、ServiceModel `ActivityTracing` 属性を `propagateActivity` に設定しているときは、ServiceModel `true` を設定しないでください。</span><span class="sxs-lookup"><span data-stu-id="5d27a-254">For user code activity ID propagation, make sure you do not set ServiceModel `ActivityTracing`, while still having ServiceModel `propagateActivity` attribute set to `true`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5d27a-255">関連項目</span><span class="sxs-lookup"><span data-stu-id="5d27a-255">See also</span></span>

- [<span data-ttu-id="5d27a-256">トレース</span><span class="sxs-lookup"><span data-stu-id="5d27a-256">Tracing</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/index.md)
- [<span data-ttu-id="5d27a-257">管理と診断</span><span class="sxs-lookup"><span data-stu-id="5d27a-257">Administration and Diagnostics</span></span>](../../../../../docs/framework/wcf/diagnostics/index.md)
- [<span data-ttu-id="5d27a-258">方法 : トレース リスナーを作成し初期化する</span><span class="sxs-lookup"><span data-stu-id="5d27a-258">How to: Create and Initialize Trace Listeners</span></span>](../../../debug-trace-profile/how-to-create-and-initialize-trace-listeners.md)
- [<span data-ttu-id="5d27a-259">カスタム TraceListener の作成</span><span class="sxs-lookup"><span data-stu-id="5d27a-259">Creating a Custom TraceListener</span></span>](https://docs.microsoft.com/archive/msdn-magazine/2006/april/clr-inside-out-extending-system-diagnostics)
