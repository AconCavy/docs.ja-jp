---
title: Windows Communication Foundation 4.5 の新機能
ms.date: 03/30/2017
helpviewer_keywords:
- WCF [WCF], what's new
- Windows Communication Foundation [WCF], what's new
ms.assetid: 7e93fe73-af93-46b5-9f63-32f761ee40cf
ms.openlocfilehash: b22266efe2e775acd04c400cf9da50bffab28183
ms.sourcegitcommit: 700ea803fb06c5ce98de017c7f76463ba33ff4a9
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/19/2020
ms.locfileid: "77449505"
---
# <a name="whats-new-in-windows-communication-foundation-45"></a><span data-ttu-id="cb2bc-102">Windows Communication Foundation 4.5 の新機能</span><span class="sxs-lookup"><span data-stu-id="cb2bc-102">What's New in Windows Communication Foundation 4.5</span></span>

<span data-ttu-id="cb2bc-103">このトピックでは、Windows Communication Foundation (WCF) バージョン4.5 の新機能について説明します。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-103">This topic discusses features new to Windows Communication Foundation (WCF) version 4.5.</span></span>

## <a name="wcf-simplification-features"></a><span data-ttu-id="cb2bc-104">WCF の単純化機能</span><span class="sxs-lookup"><span data-stu-id="cb2bc-104">WCF Simplification Features</span></span>

<span data-ttu-id="cb2bc-105">WCF 4.5 アプリケーションの開発および保守を容易にするために多大な労力が費やされてきました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-105">Much work has been done to make WCF 4.5 applications easier to develop and maintain.</span></span> <span data-ttu-id="cb2bc-106">詳細については、「 [WCF の単純化機能](wcf-simplification-features.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-106">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="task-based-async-support"></a><span data-ttu-id="cb2bc-107">タスク ベースの非同期のサポート</span><span class="sxs-lookup"><span data-stu-id="cb2bc-107">Task-based Async Support</span></span>

<span data-ttu-id="cb2bc-108">既定では、サービス参照の追加によって、タスクを返す非同期サービス操作メソッドが生成されます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-108">By default, Add Service Reference generates Task-returning async service operation methods.</span></span> <span data-ttu-id="cb2bc-109">この処理は、同期メソッドと非同期メソッドの両方に対して行われます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-109">This is done for both synchronous and asynchronous methods.</span></span> <span data-ttu-id="cb2bc-110">これにより、新しいタスク ベースの非同期プログラミング モデルを使用して、サービス操作を非同期に呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-110">This allows you to call the service operations asynchronously using the new Task based async programming model.</span></span> <span data-ttu-id="cb2bc-111">生成されたプロキシ メソッドを呼び出すと、WCF によって非同期操作を表すタスク オブジェクトが構築され、そのタスクが返されます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-111">When you call the generated proxy method, WCF constructs a Task object to represent the asynchronous operation and returns that Task to you.</span></span> <span data-ttu-id="cb2bc-112">操作が完了すると、タスクが完了します。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-112">The Task completes when the operation completes.</span></span> <span data-ttu-id="cb2bc-113">非同期操作を実装する場合は、タスクベースの非同期操作として実装できます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-113">When implementing an async operation you can implement it as a task-based async operation.</span></span> <span data-ttu-id="cb2bc-114">詳細については、「[同期および非同期操作](synchronous-and-asynchronous-operations.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-114">For more information see, [Synchronous and Asynchronous Operations](synchronous-and-asynchronous-operations.md).</span></span>

### <a name="simplified-generated-configuration-files"></a><span data-ttu-id="cb2bc-115">生成された構成ファイルの簡略化</span><span class="sxs-lookup"><span data-stu-id="cb2bc-115">Simplified Generated Configuration Files</span></span>

<span data-ttu-id="cb2bc-116">Visual Studio でサービス参照を追加したり、SvcUtil.exe ツールを使用したりすると、クライアント構成ファイルが生成されます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-116">When you add a service reference in Visual Studio or use the SvcUtil.exe tool, a client configuration file is generated.</span></span> <span data-ttu-id="cb2bc-117">以前のバージョンの WCF では、このような構成ファイルには、各バインド プロパティの値が既定値であっても、その値が含まれていました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-117">In previous versions of WCF these configuration files contained the value of every binding property even if its value is the default value.</span></span> <span data-ttu-id="cb2bc-118">WCF 4.5 では、生成された構成ファイルには、既定値以外の値に設定されているバインド プロパティのみが含まれます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-118">In WCF 4.5 the generated configuration files contain only those binding properties that are set to a non-default value.</span></span>

<span data-ttu-id="cb2bc-119">詳細については、「 [WCF の単純化機能](wcf-simplification-features.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-119">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="contract-first-development"></a><span data-ttu-id="cb2bc-120">コントラクト優先の開発</span><span class="sxs-lookup"><span data-stu-id="cb2bc-120">Contract-First Development</span></span>

<span data-ttu-id="cb2bc-121">WCF では、コントラクト優先の開発がサポートされるようになりました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-121">WCF now has support for contract-first development.</span></span> <span data-ttu-id="cb2bc-122">Svcutil.exe には、WSDL ドキュメントからサービスコントラクトとデータコントラクトを生成するための/serviceContract スイッチが用意されています。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-122">The svcutil.exe has a /serviceContract switch which allows you to generate service and data contracts from a WSDL document.</span></span>

### <a name="add-service-reference-from-a-portable-subset-project"></a><span data-ttu-id="cb2bc-123">ポータブル サブセット プロジェクトからのサービス参照の追加</span><span class="sxs-lookup"><span data-stu-id="cb2bc-123">Add Service Reference from a Portable Subset Project</span></span>

<span data-ttu-id="cb2bc-124">ポータブルサブセットプロジェクトを使用すると、.NET アセンブリプログラマは、1つのソースツリーとビルドシステムを維持しながら、複数の .NET プラットフォーム (デスクトップ、Silverlight、Windows Phone、Xbox) をサポートできます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-124">Portable subset projects enable .NET assembly programmers to maintain a single source tree and build system while still supporting multiple .NET platforms (desktop, Silverlight, Windows Phone, and Xbox).</span></span> <span data-ttu-id="cb2bc-125">ポータブルサブセットプロジェクトは、任意の .NET プラットフォームで使用できるアセンブリである .NET ポータブルライブラリのみを参照します。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-125">Portable subset projects only reference .NET portable libraries that are assemblies that can be used on any .NET platform.</span></span> <span data-ttu-id="cb2bc-126">開発者から見れば、他の WCF クライアント アプリケーション内でサービス参照を追加するのと同じです。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-126">The developer experience is the same as adding a service reference within any other WCF client application.</span></span> <span data-ttu-id="cb2bc-127">詳細については、「[ポータブルサブセットプロジェクトでのサービス参照の追加](add-service-reference-in-a-portable-subset-project.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-127">For more information, see [Add Service Reference in a Portable Subset Project](add-service-reference-in-a-portable-subset-project.md).</span></span>

### <a name="aspnet-compatibility-mode-default-changed"></a><span data-ttu-id="cb2bc-128">ASP.NET 互換性モードの既定値の変更</span><span class="sxs-lookup"><span data-stu-id="cb2bc-128">ASP.NET Compatibility Mode Default Changed</span></span>

<span data-ttu-id="cb2bc-129">WCF には ASP.NET 互換性モードが用意されています。これにより、開発者は WCF サービスを作成する際に ASP.NET HTTP パイプラインの機能へのフル アクセスが付与されます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-129">WCF provides ASP.NET compatibility mode to grant developers full access to the features in the ASP.NET HTTP pipeline when writing WCF services.</span></span> <span data-ttu-id="cb2bc-130">このモードを使用するには、web.config の[\<serviceHostingEnvironment >](../configure-apps/file-schema/wcf/servicehostingenvironment.md)セクションで `aspNetCompatibilityEnabled` 属性を true に設定する必要があります。また、この appDomain のすべてのサービスは、その <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> の `RequirementsMode` プロパティを <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> または <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-130">To use this mode, you must set the `aspNetCompatibilityEnabled` attribute to true in the [\<serviceHostingEnvironment>](../configure-apps/file-schema/wcf/servicehostingenvironment.md) section of web.config. Additionally, any service in this appDomain needs to have the `RequirementsMode` property on its <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> set to <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> or <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>.</span></span> <span data-ttu-id="cb2bc-131">既定では <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> は <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>に設定されています。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-131">By default <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> is now set to <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>.</span></span> <span data-ttu-id="cb2bc-132">詳細については、「 [WCF Services と ASP.NET](./feature-details/wcf-services-and-aspnet.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-132">For more information, see [WCF Services and ASP.NET](./feature-details/wcf-services-and-aspnet.md).</span></span>

### <a name="new-transport-default-values"></a><span data-ttu-id="cb2bc-133">トランスポートの新しい既定値</span><span class="sxs-lookup"><span data-stu-id="cb2bc-133">New Transport Default Values</span></span>

<span data-ttu-id="cb2bc-134">構成を簡略化するため、多くのトランスポート プロパティの既定値が変更されました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-134">In order to simplify configuration a number of transport property default values have changed.</span></span> <span data-ttu-id="cb2bc-135">詳細については、「 [WCF の単純化機能](wcf-simplification-features.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-135">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="xmldictionaryreaderquotas"></a><span data-ttu-id="cb2bc-136">XmlDictionaryReaderQuotas</span><span class="sxs-lookup"><span data-stu-id="cb2bc-136">XmlDictionaryReaderQuotas</span></span>

<span data-ttu-id="cb2bc-137"><xref:System.Xml.XmlDictionaryReaderQuotas> には、メッセージの作成中にエンコーダーで使用されるメモリの量を制限する XML ディクショナリ リーダーの構成可能なクォータ値が格納されます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-137"><xref:System.Xml.XmlDictionaryReaderQuotas> contains configurable quota values for XML dictionary readers which limit the amount of memory utilized by an encoder while creating a message.</span></span> <span data-ttu-id="cb2bc-138">これらのクォータは構成可能ですが、開発者がこのクォータを明示的に設定する必要性を低くするために既定値が変更されました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-138">While these quotas are configurable, the default values have changed to lessen the possibility that a developer will have to set them explicitly.</span></span> <span data-ttu-id="cb2bc-139">詳細については、「 [WCF の単純化機能](wcf-simplification-features.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-139">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="wcf-configuration-validation"></a><span data-ttu-id="cb2bc-140">WCF 構成検証</span><span class="sxs-lookup"><span data-stu-id="cb2bc-140">WCF Configuration Validation</span></span>

<span data-ttu-id="cb2bc-141">Visual Studio 内のビルド プロセスの一環として、プロジェクト内で定義された属性について WCF 構成ファイルが検証されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-141">As part of the build process within Visual Studio, WCF configuration files are now validated for attributes defined within the project.</span></span> <span data-ttu-id="cb2bc-142">検証に失敗すると、Visual Studio では検証エラーと警告の一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-142">A list of validation errors or warnings is displayed in Visual Studio if the validation fails.</span></span>

### <a name="xml-editor-tooltips"></a><span data-ttu-id="cb2bc-143">XML エディターのツールヒント</span><span class="sxs-lookup"><span data-stu-id="cb2bc-143">XML Editor Tooltips</span></span>

<span data-ttu-id="cb2bc-144">新規および既存の WCF サービスの開発者がサービスを構成するうえで役立つよう、Visual Studio の XML エディターでは、サービス構成ファイルに含まれる各構成要素とそのプロパティにツールヒントが表示されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-144">In order to help new and existing WCF service developers to configure their services, the Visual Studio XML editor now provides tooltips for every configuration element and its properties that is part of the service configuration file.</span></span>

## <a name="streaming-improvements"></a><span data-ttu-id="cb2bc-145">ストリーミングの強化</span><span class="sxs-lookup"><span data-stu-id="cb2bc-145">Streaming Improvements</span></span>

<span data-ttu-id="cb2bc-146">非同期ストリーミングのサポートが追加されました。これにより、受信側が読み取らない場合または読み取り速度が遅い場合に送信側がスレッドをブロックすることはなくなったため、スケーラビリティが向上します。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-146">Added support for true asynchronous streaming where the send side now does not block threads if the receive side is not reading or slow in reading thereby increasing scalability.</span></span> <span data-ttu-id="cb2bc-147">IIS でホストされる WCF サービスにクライアントがストリーム メッセージを送信する際のメッセージ バッファーの制限を解除しました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-147">Removed the limitation of message buffering when a client sends a streamed message to an IIS hosted WCF service.</span></span> <span data-ttu-id="cb2bc-148">詳細については、「 [WCF の単純化機能](wcf-simplification-features.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-148">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

## <a name="simplifying-exposing-an-endpoint-over-https-with-iis"></a><span data-ttu-id="cb2bc-149">IIS での HTTPS 上のエンドポイントの公開の簡略化</span><span class="sxs-lookup"><span data-stu-id="cb2bc-149">Simplifying Exposing an Endpoint Over HTTPS with IIS</span></span>

<span data-ttu-id="cb2bc-150">HTTPS 上のエンドポイントの公開を簡単にするため、HTTPS のプロトコル マッピングが追加されました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-150">An HTTPS protocol mapping has been added to simplify exposing an endpoint over HTTPS.</span></span> <span data-ttu-id="cb2bc-151">HTTPS のエンドポイントを有効にするには、Web サイトで HTTPS バインドと SSL 証明書が構成されていることを確認した後、サービスをホストする仮想ディレクトリに対して HTTPS を有効にするだけです。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-151">To enable an HTTPS endpoint, ensure your website has an HTTPS binding and SSL certificate configured, and then simply enable HTTPS for the virtual directory that hosts the service.</span></span> <span data-ttu-id="cb2bc-152">サービスのメタデータが有効になっている場合は、それも HTTPS を介して公開されます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-152">If metadata is enabled for the service, it will be exposed over HTTPS as well.</span></span>

## <a name="generating-a-single-wsdl-document"></a><span data-ttu-id="cb2bc-153">単一の WSDL ドキュメントの生成</span><span class="sxs-lookup"><span data-stu-id="cb2bc-153">Generating a Single WSDL Document</span></span>

<span data-ttu-id="cb2bc-154">サード パーティの WSDL の処理スタックには、xsd:import を使用して他のドキュメントに依存している WSDL ドキュメントを処理できないものもあります。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-154">Some third-party WSDL processing stacks are not able to process WSDL documents that have dependencies on other documents through a xsd:import.</span></span> <span data-ttu-id="cb2bc-155">WCF により、すべての WSDL 情報が 1 つのドキュメントで返されるように指定できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-155">WCF now allows you to specify that all WSDL information be returned in a single document.</span></span> <span data-ttu-id="cb2bc-156">単一 WSDL ドキュメントをリクエストするには、サービスからメタデータを要求するときに、その URI に "?singleWSDL" を追加します。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-156">To request a single WSDL document append "?singleWSDL" to the URI when requesting metadata from the service.</span></span>

## <a name="websocket-support"></a><span data-ttu-id="cb2bc-157">WebSocket のサポート</span><span class="sxs-lookup"><span data-stu-id="cb2bc-157">WebSocket Support</span></span>

<span data-ttu-id="cb2bc-158">Websocket は、TCP と同様のパフォーマンス特性を持つポート 80 と 443 で真の双方向通信を実現するテクノロジです。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-158">WebSockets is a technology that provides true bidirectional communication over ports 80 and 443 with performance characteristics similar to TCP.</span></span> <span data-ttu-id="cb2bc-159">WebSocket トランスポート経由の通信をサポートするために 2 つの新しいバインドが追加されました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-159">Two new bindings have been added to support communication over a WebSocket transport.</span></span> <span data-ttu-id="cb2bc-160"><xref:System.ServiceModel.NetHttpBinding> および <xref:System.ServiceModel.NetHttpsBinding>。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-160"><xref:System.ServiceModel.NetHttpBinding> and <xref:System.ServiceModel.NetHttpsBinding>.</span></span> <span data-ttu-id="cb2bc-161">詳細については[、「システム指定のバインディング](system-provided-bindings.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-161">For more information see: [System-Provided Bindings](system-provided-bindings.md).</span></span>

## <a name="new-transport-default-values"></a><span data-ttu-id="cb2bc-162">トランスポートの新しい既定値</span><span class="sxs-lookup"><span data-stu-id="cb2bc-162">New Transport Default Values</span></span>

<span data-ttu-id="cb2bc-163">次の表は、変更された設定と追加情報の場所を示しています。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-163">The following table describes the settings that have changed and where to find additional information.</span></span>

|<span data-ttu-id="cb2bc-164">プロパティ</span><span class="sxs-lookup"><span data-stu-id="cb2bc-164">Property</span></span>|<span data-ttu-id="cb2bc-165">On</span><span class="sxs-lookup"><span data-stu-id="cb2bc-165">On</span></span>|<span data-ttu-id="cb2bc-166">新しい既定値</span><span class="sxs-lookup"><span data-stu-id="cb2bc-166">New Default</span></span>|<span data-ttu-id="cb2bc-167">詳細については、「</span><span class="sxs-lookup"><span data-stu-id="cb2bc-167">For more information see</span></span>|
|--------------|--------|-----------------|------------------------------|
|<span data-ttu-id="cb2bc-168">channelInitializationTimeout</span><span class="sxs-lookup"><span data-stu-id="cb2bc-168">channelInitializationTimeout</span></span>|<xref:System.ServiceModel.NetTcpBinding>|<span data-ttu-id="cb2bc-169">30 秒</span><span class="sxs-lookup"><span data-stu-id="cb2bc-169">30 seconds</span></span>|<xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.ChannelInitializationTimeout%2A>|
|<span data-ttu-id="cb2bc-170">listenBacklog</span><span class="sxs-lookup"><span data-stu-id="cb2bc-170">listenBacklog</span></span>|<xref:System.ServiceModel.NetTcpBinding>|<span data-ttu-id="cb2bc-171">12 \* プロセッサの数</span><span class="sxs-lookup"><span data-stu-id="cb2bc-171">12 \* number of processors</span></span>|<xref:System.ServiceModel.NetTcpBinding.ListenBacklog%2A>|
|<span data-ttu-id="cb2bc-172">maxPendingAccepts</span><span class="sxs-lookup"><span data-stu-id="cb2bc-172">maxPendingAccepts</span></span>|<span data-ttu-id="cb2bc-173">ConnectionOrientedTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="cb2bc-173">ConnectionOrientedTransportBindingElement</span></span><br /><br /> <span data-ttu-id="cb2bc-174">SMSvcHost.exe</span><span class="sxs-lookup"><span data-stu-id="cb2bc-174">SMSvcHost.exe</span></span>|<span data-ttu-id="cb2bc-175">2 \* トランスポート用のプロセッサの数</span><span class="sxs-lookup"><span data-stu-id="cb2bc-175">2 \* number of processors for transport</span></span><br /><br /> <span data-ttu-id="cb2bc-176">4 \* SMSvcHost のプロセッサ数</span><span class="sxs-lookup"><span data-stu-id="cb2bc-176">4 \* number of processors for SMSvcHost.exe</span></span>|<span data-ttu-id="cb2bc-177">[Net.tcp ポート共有サービスの構成](./feature-details/configuring-the-net-tcp-port-sharing-service.md)<xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingAccepts%2A></span><span class="sxs-lookup"><span data-stu-id="cb2bc-177"><xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingAccepts%2A> [Configuring the Net.TCP Port Sharing Service](./feature-details/configuring-the-net-tcp-port-sharing-service.md)</span></span>|
|<span data-ttu-id="cb2bc-178">maxPendingConnections</span><span class="sxs-lookup"><span data-stu-id="cb2bc-178">maxPendingConnections</span></span>|<span data-ttu-id="cb2bc-179">ConnectionOrientedTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="cb2bc-179">ConnectionOrientedTransportBindingElement</span></span>|<span data-ttu-id="cb2bc-180">12 \* プロセッサの数</span><span class="sxs-lookup"><span data-stu-id="cb2bc-180">12 \* number of processors</span></span>|<xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A>|
|<span data-ttu-id="cb2bc-181">receiveTimeout</span><span class="sxs-lookup"><span data-stu-id="cb2bc-181">receiveTimeout</span></span>|<span data-ttu-id="cb2bc-182">SMSvcHost.exe</span><span class="sxs-lookup"><span data-stu-id="cb2bc-182">SMSvcHost.exe</span></span>|<span data-ttu-id="cb2bc-183">30 秒</span><span class="sxs-lookup"><span data-stu-id="cb2bc-183">30 seconds</span></span>|[<span data-ttu-id="cb2bc-184">Net.TCP ポート共有サービスを構成する</span><span class="sxs-lookup"><span data-stu-id="cb2bc-184">Configuring the Net.TCP Port Sharing Service</span></span>](./feature-details/configuring-the-net-tcp-port-sharing-service.md)|

## <a name="xml-editor-tooltips"></a><span data-ttu-id="cb2bc-185">XML エディターのツールヒント</span><span class="sxs-lookup"><span data-stu-id="cb2bc-185">XML Editor Tooltips</span></span>

<span data-ttu-id="cb2bc-186">新規および既存の WCF サービスの開発者がサービスを構成するうえで役立つよう、Visual Studio の XML エディターでは、サービス構成ファイルに含まれる各構成要素とそのプロパティにツールヒントが表示されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-186">In order to help new and existing WCF service developers to configure their services, the Visual Studio XML editor now provides tooltips for every configuration element and its properties that is part of the service configuration file.</span></span>

## <a name="configuring-wcf-services-in-code"></a><span data-ttu-id="cb2bc-187">コード内での WCF サービスの構成</span><span class="sxs-lookup"><span data-stu-id="cb2bc-187">Configuring WCF Services in Code</span></span>

<span data-ttu-id="cb2bc-188">Windows Communication Foundation (WCF) を使用すると、開発者は構成ファイルまたはコードを使用してサービスを構成できます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-188">Windows Communication Foundation (WCF) allows developers to configure services using configuration files or code.</span></span> <span data-ttu-id="cb2bc-189">構成ファイルは、サービスを配置した後に構成する必要がある場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-189">Configuration files are useful when a service needs to be configured after being deployed.</span></span> <span data-ttu-id="cb2bc-190">構成ファイルを使用する場合、IT 専門家は構成ファイルを更新するだけで、再コンパイルの必要はありません。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-190">When using configuration files, an IT professional only needs to update the configuration file, no recompilation is required.</span></span> <span data-ttu-id="cb2bc-191">ただし、構成ファイルの管理は複雑で難しくなる場合があります。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-191">Configuration files, however, can be complex and difficult to maintain.</span></span> <span data-ttu-id="cb2bc-192">構成ファイルのデバッグはサポートされていません。また、構成要素は名前で参照されるため、構成ファイルの作成時にエラーが発生しやすく、構成ファイルの作成が困難になります。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-192">There is no support for debugging configuration files and configuration elements are referenced by names which makes authoring configuration files error-prone and difficult.</span></span> <span data-ttu-id="cb2bc-193">WCF では、コードでサービスを構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-193">WCF also allows you to configure services in code.</span></span> <span data-ttu-id="cb2bc-194">以前のバージョンの WCF (4.0 以前) では、自己ホスト型のシナリオでサービスを構成するのは簡単でした。 <xref:System.ServiceModel.ServiceHost> クラスを使用すると、ServiceHost. Open を呼び出す前にエンドポイントと動作を構成できました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-194">In earlier versions of WCF (4.0 and earlier) configuring services in code was easy in self-hosted scenarios, the <xref:System.ServiceModel.ServiceHost> class allowed you to configure endpoints and behaviors prior to calling ServiceHost.Open.</span></span> <span data-ttu-id="cb2bc-195">ただし、Web ホストのシナリオでは、<xref:System.ServiceModel.ServiceHost> クラスにアクセスできません。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-195">In web hosted scenarios, however, you don’t have access to the <xref:System.ServiceModel.ServiceHost> class.</span></span> <span data-ttu-id="cb2bc-196">Web ホスト サービスを構成するには、`System.ServiceModel.ServiceHostFactory` を作成して必要な構成を実行する <xref:System.ServiceModel.Activation.ServiceHostFactory> を作成する必要がありました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-196">To configure a web hosted service you were required to create a `System.ServiceModel.ServiceHostFactory` that created the <xref:System.ServiceModel.Activation.ServiceHostFactory> and performed any needed configuration.</span></span> <span data-ttu-id="cb2bc-197">.NET 4.5 以降、WCF では、自己ホスト型サービスと web ホステッドサービスの両方をコード内で簡単に構成できます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-197">Starting with .NET 4.5, WCF provides an easier way to configure both self-hosted and web hosted services in code.</span></span> <span data-ttu-id="cb2bc-198">詳細については、「[コードでの WCF サービスの構成](configuring-wcf-services-in-code.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-198">For more information, see [Configuring WCF Services in Code](configuring-wcf-services-in-code.md).</span></span>

## <a name="channelfactory-caching"></a><span data-ttu-id="cb2bc-199">ChannelFactory のキャッシュ</span><span class="sxs-lookup"><span data-stu-id="cb2bc-199">ChannelFactory Caching</span></span>

<span data-ttu-id="cb2bc-200">WCF クライアント アプリケーションでは、<xref:System.ServiceModel.ChannelFactory%601> クラスを使用して WCF サービスとの通信チャネルを作成します。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-200">WCF client applications use the <xref:System.ServiceModel.ChannelFactory%601> class to create a communication channel with a WCF service.</span></span> <span data-ttu-id="cb2bc-201"><xref:System.ServiceModel.ChannelFactory%601> インスタンスを作成する場合は、次の操作が必要になるため、オーバーヘッドが生じます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-201">Creating <xref:System.ServiceModel.ChannelFactory%601> instances incurs some overhead because it involves the following operations:</span></span>

1. <span data-ttu-id="cb2bc-202"><xref:System.ServiceModel.Description.ContractDescription> ツリーの構築</span><span class="sxs-lookup"><span data-stu-id="cb2bc-202">Constructing the <xref:System.ServiceModel.Description.ContractDescription> tree</span></span>

2. <span data-ttu-id="cb2bc-203">必要なすべての CLR 型の反映</span><span class="sxs-lookup"><span data-stu-id="cb2bc-203">Reflecting all of the required CLR types</span></span>

3. <span data-ttu-id="cb2bc-204">チャネル スタックの構築</span><span class="sxs-lookup"><span data-stu-id="cb2bc-204">Constructing the channel stack</span></span>

4. <span data-ttu-id="cb2bc-205">リソースの破棄</span><span class="sxs-lookup"><span data-stu-id="cb2bc-205">Disposing of resources</span></span>

<span data-ttu-id="cb2bc-206">このオーバーヘッドを最小限に抑えるために、WCF では、WCF クライアント プロキシの使用時にチャネル ファクトリをキャッシュできます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-206">To help minimize this overhead, WCF can cache channel factories when you are using a WCF client proxy.</span></span> <span data-ttu-id="cb2bc-207">詳細については、「[チャネルファクトリとキャッシュ](./feature-details/channel-factory-and-caching.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-207">For more information, see [Channel Factory and Caching](./feature-details/channel-factory-and-caching.md).</span></span>

## <a name="compression-and-the-binary-encoder"></a><span data-ttu-id="cb2bc-208">圧縮およびバイナリ エンコーダー</span><span class="sxs-lookup"><span data-stu-id="cb2bc-208">Compression and the Binary Encoder</span></span>

<span data-ttu-id="cb2bc-209">WCF 4.5 以降の WCF バイナリ エンコーダーでは、圧縮がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-209">Beginning with WCF 4.5 the WCF binary encoder adds support for compression.</span></span> <span data-ttu-id="cb2bc-210">圧縮の種類は <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> プロパティで構成されます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-210">The type of compression is configured with the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> property.</span></span> <span data-ttu-id="cb2bc-211">クライアントとサービスの両方で <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> のプロパティを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-211">Both the client and the service must configure the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> property.</span></span> <span data-ttu-id="cb2bc-212">圧縮は、HTTP、HTTPS、および TCP の各プロトコルに対して有効です。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-212">Compression will work for HTTP, HTTPS, and TCP protocols.</span></span> <span data-ttu-id="cb2bc-213">クライアントが圧縮を使用するよう指定しても、サービスで圧縮がサポートされていない場合は、プロトコルの不一致を示すプロトコルの例外がスローされます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-213">If a client specifies to use compression but the service does not support it a protocol exception is thrown indicating a protocol mismatch.</span></span> <span data-ttu-id="cb2bc-214">詳細については、「[メッセージエンコーダーの選択](./feature-details/choosing-a-message-encoder.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-214">For more information, see [Choosing a Message Encoder](./feature-details/choosing-a-message-encoder.md).</span></span>

## <a name="udp"></a><span data-ttu-id="cb2bc-215">UDP</span><span class="sxs-lookup"><span data-stu-id="cb2bc-215">UDP</span></span>

<span data-ttu-id="cb2bc-216">UDP トランスポートのサポートが追加されました。これにより、開発者は "火災 and 忘れる" メッセージングを使用するサービスを作成できます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-216">Support has been added for a UDP transport which allows developers to write services that use "fire and forget" messaging.</span></span> <span data-ttu-id="cb2bc-217">クライアントは、サービスにメッセージを送信しますが、サービスからの応答を期待しません。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-217">A client sends a message to a service and expects no response from the service.</span></span>

## <a name="multiple-authentication-support"></a><span data-ttu-id="cb2bc-218">複数認証のサポート</span><span class="sxs-lookup"><span data-stu-id="cb2bc-218">Multiple Authentication Support</span></span>

<span data-ttu-id="cb2bc-219">HTTP トランスポートとトランスポート セキュリティを使用する際に、IIS でサポートされている複数の認証モードを単一の WCF エンドポイントで使用できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-219">Support has been added to support multiple authentication modes, as supported by IIS, on a single WCF endpoint when using the HTTP transport and transport security.</span></span> <span data-ttu-id="cb2bc-220">IIS では仮想ディレクトリで複数の認証モードを有効にできます。この機能によって、単一の WCF エンドポイントでは、WCF サービスがホストされている仮想ディレクトリで有効になっている複数の認証モードをサポートできます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-220">IIS allows you to enable multiple authentication modes on a virtual directory, this feature allows a single WCF endpoint to support the multiple authentication modes enabled for the virtual directory where the WCF service is hosted.</span></span>

## <a name="idn-support"></a><span data-ttu-id="cb2bc-221">IDN サポート</span><span class="sxs-lookup"><span data-stu-id="cb2bc-221">IDN Support</span></span>

<span data-ttu-id="cb2bc-222">国際化ドメイン名を持つ WCF サービスのためのサポートが追加されました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-222">Support has been added to allow for WCF services with Internationalized Domain Names.</span></span> <span data-ttu-id="cb2bc-223">詳細については[、「WCF と国際化ドメイン名](./feature-details/wcf-and-internationalized-domain-names.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-223">For more information see [WCF and Internationalized Domain Names](./feature-details/wcf-and-internationalized-domain-names.md).</span></span>

## <a name="httpclient"></a><span data-ttu-id="cb2bc-224">HttpClient</span><span class="sxs-lookup"><span data-stu-id="cb2bc-224">HttpClient</span></span>

<span data-ttu-id="cb2bc-225">HTTP 要求の処理が容易になるように <xref:System.Net.Http.HttpClient> という新しいクラスが追加されました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-225">A new class called <xref:System.Net.Http.HttpClient> has been added to make working with HTTP requests much easier.</span></span> <span data-ttu-id="cb2bc-226">詳細については、「[アプリをソーシャルに](https://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-581T)する」および「http サービスと http[クライアントのサンプル](https://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-226">For more info, see [Making apps social and connected with HTTP services](https://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-581T) and the [HTTP Client Sample](https://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664).</span></span>

## <a name="configuration-intellisense"></a><span data-ttu-id="cb2bc-227">構成の Intellisense</span><span class="sxs-lookup"><span data-stu-id="cb2bc-227">Configuration Intellisense</span></span>

<span data-ttu-id="cb2bc-228">プロジェクトで定義されるカスタム属性の構成ファイル内の属性値では、構成の迅速で正確な操作を簡単にするために Intellisense がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-228">Attribute values in configuration files for custom attributes defined in the project now support intellisense to facilitate working with configurations quickly and accurately.</span></span>

## <a name="configuration-tooltips"></a><span data-ttu-id="cb2bc-229">構成のツールヒント</span><span class="sxs-lookup"><span data-stu-id="cb2bc-229">Configuration tooltips</span></span>

<span data-ttu-id="cb2bc-230">WCF の要素と属性には、XML エディターのツールヒントが追加され、要素または属性の目的をより簡単かつ正確に識別できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-230">WCF elements and attributes now have tooltips in the XML editor, to more easily and accurately identify the purpose of the element or attribute.</span></span>

## <a name="paste-data-as-classes"></a><span data-ttu-id="cb2bc-231">クラスとしてのデータの貼り付け</span><span class="sxs-lookup"><span data-stu-id="cb2bc-231">Paste Data as Classes</span></span>

<span data-ttu-id="cb2bc-232">WCF プロジェクトでは、XML で定義されたデータ型 (サービスで公開されるデータ型など) をコード ページに直接貼り付けることができます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-232">In a WCF project, data types defined in XML (such as are exposed in a service) can be pasted directly into a code page.</span></span> <span data-ttu-id="cb2bc-233">XML 型は CLR 型として貼り付けられます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-233">The XML type will be pasted as a CLR type.</span></span> <span data-ttu-id="cb2bc-234">詳細については、「 [XML からのデータ型クラスの生成](generating-data-type-classes-from-xml.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-234">See [Generating Data Type Classes from XML](generating-data-type-classes-from-xml.md) for more details.</span></span>

## <a name="webservicehost-and-default-endpoints"></a><span data-ttu-id="cb2bc-235">WebServiceHost と既定のエンドポイント</span><span class="sxs-lookup"><span data-stu-id="cb2bc-235">WebServiceHost and default endpoints</span></span>

<span data-ttu-id="cb2bc-236">Visual Studio 2010 では、明示的にエンドポイントを指定したかどうかにかかわらず、WebServiceHost によって自動的に既定のエンドポイントが作成されました。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-236">In Visual Studio 2010, WebServiceHost automatically created a default endpoint whether you explicitly specified an endpoint or not.</span></span> <span data-ttu-id="cb2bc-237">Visual Studio 2012 以降では、明示的に追加されたエンドポイントがない場合にのみ、WebServiceHost によって既定のエンドポイントが作成されます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-237">In Visual Studio 2012 and later, WebServiceHost only creates a default endpoint if no endpoints are explicitly added.</span></span> <span data-ttu-id="cb2bc-238">クライアントが既定のエンドポイントを想定している場合は、明示的にエンドポイントを追加し、クライアントにそのエンドポイントを指定することができます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-238">If your client is expecting the default endpoint you can explicitly add an endpoint and point the client to it.</span></span> <span data-ttu-id="cb2bc-239">または、アプリケーションの構成ファイルに次の設定を追加することで、以前の動作に戻すように WCF に指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-239">Alternatively, you can tell WCF to revert back to the previous behavior by adding the following setting to you application’s configuration file</span></span>

```xml
<appSettings>
    <add key="wcf:webservicehost:enableautomaticendpointscompatability" value="true"/>
  </appSettings>
```

## <a name="ihttpcookiecontainermanager"></a><span data-ttu-id="cb2bc-240">IHttpCookieContainerManager</span><span class="sxs-lookup"><span data-stu-id="cb2bc-240">IHttpCookieContainerManager</span></span>

<span data-ttu-id="cb2bc-241">このインターフェイスは、<xref:System.ServiceModel.Channels.IChannelFactory%601> によって公開されます。これにより、クライアント側でのクッキーの操作がさらに容易になります。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-241">This interface, exposed by <xref:System.ServiceModel.Channels.IChannelFactory%601>, makes working with cookies on the client side much easier.</span></span> <span data-ttu-id="cb2bc-242">AllowCookies がバインドで true に設定されている場合は、次のコードを使用してクッキーにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-242">When AllowCookies is set to true on the binding, you can access cookies by using the following code:</span></span>

```csharp
IHttpCookieContainerManager cookieManager = factory.GetProperty<IHttpCookieContainerManager>();
System.Net.CookieContainer container = cookieManager.CookieContainer;
```

<span data-ttu-id="cb2bc-243">その後、<xref:System.Net.CookieContainer> からクッキーを取得または設定できます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-243">You can then retrieve or set the cookies from the <xref:System.Net.CookieContainer>.</span></span> <span data-ttu-id="cb2bc-244">AllowCookies が false に設定されている場合は、<xref:System.ServiceModel.OperationContext> を使用して手動でクッキーを取得し、別の <xref:System.ServiceModel.OperationContext> またはメッセージ インスペクターを使用して他の要求でそのクッキーを送信できます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-244">When AllowCookies is set to false, you can manually retrieve the cookies using <xref:System.ServiceModel.OperationContext> and send it in other requests using another <xref:System.ServiceModel.OperationContext> or message inspector.</span></span> <span data-ttu-id="cb2bc-245">IHttpCookieContainerManager インターフェイスを使用すると、サービスを使用してユーザーを認証し、そのサービスから返される認証クッキーを使用して他のサービスで認証することができます。</span><span class="sxs-lookup"><span data-stu-id="cb2bc-245">The IHttpCookieContainerManager interface allows you to authenticate a user with a service and use the authentication cookie returned by that service to authenticate with other services.</span></span>
