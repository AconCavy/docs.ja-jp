---
title: WCF サービス ホスト (WcfSvcHost.exe)
ms.date: 03/30/2017
ms.assetid: 8643a63d-a357-4c39-bd6c-cdfdf71e370e
ms.openlocfilehash: f8a081ed7c525b4346908f0419f0bb1ebf43683a
ms.sourcegitcommit: d6e27023aeaffc4b5a3cb4b88685018d6284ada4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/09/2019
ms.locfileid: "67662646"
---
# <a name="wcf-service-host-wcfsvchostexe"></a>WCF サービス ホスト (WcfSvcHost.exe)

Windows Communication Foundation (WCF) サービス ホスト (WcfSvcHost.exe) を使用すると、自動的にホストし、実装したサービスをテストするには、(F5) Visual Studio デバッガーを起動できます。 WCF テスト クライアント (WcfTestClient.exe) または独自のクライアントを検出して潜在的なエラーを修正するを使用してサービスをテストできます。

## <a name="wcf-service-host"></a>WCF サービス ホスト

WCF サービス ホストは、WCF サービス プロジェクト内のサービスを列挙、プロジェクトの構成をロードおよび、検出された各サービスのホストをインスタンス化します。 このツールは、WCF サービス テンプレートを使って Visual Studio に統合し、プロジェクトのデバッグを開始するときに呼び出されます。

WCF サービス ホストを使用すると、余分なコードを記述したり開発時に特定のホストにコミットすることがなく、(WCF サービス ライブラリ プロジェクト) での WCF サービスをホストできます。

> [!NOTE]
> WCF サービス ホストは、部分信頼をサポートしていません。 部分信頼で WCF サービスを使用する場合は、使わない WCF サービス ライブラリ プロジェクト テンプレート Visual Studio で、サービスを構築します。 代わりに、WCF の部分的な信頼がサポートされている web サーバーでサービスをホストできる WCF サービスの web サイト テンプレートを選択して Visual Studio で新しい web サイトを作成します。

## <a name="project-types-hosted-by-wcf-service-host"></a>WCF サービス ホストでホストされるプロジェクトの種類

WCF サービス ホストは、次の WCF サービス ライブラリ プロジェクトの種類をホストできます。WCF サービス ライブラリ、シーケンシャル ワークフロー サービス ライブラリ、ステート マシン ワークフロー サービス ライブラリおよび配信サービス ライブラリです。 WCF サービス ホストが使用してサービス ライブラリ プロジェクトに追加できるこれらのサービスをホストできますも、**項目の追加**機能します。 これには、WCF サービス、WF ステート マシン サービス、WF シーケンシャル サービス、XAML WF ステート マシン サービス、および XAML WF シーケンシャル サービスが含まれます。

ただし、このツールでホストを構成することはできません。 このタスクでは、App.config ファイルを手動で編集する必要があります。 また、このツールでユーザー定義の構成ファイルを検証することはできません。

> [!CAUTION]
> いないにこの目的に設計されたように、運用環境でサービスをホストする WCF サービス ホストを使用する必要がありますできません。  WCF サービス ホストは、信頼性、セキュリティ、およびそのような環境の管理の容易性の要件をサポートしていません。 代わりに IIS を使用してください。IIS は、より高度な信頼性機能や監視機能を備えており、サービスをホストするのに適しています。 サービスの開発が完了すると、IIS に WCF サービス ホストからサービスを移行する必要があります。

## <a name="scenarios-for-using-wcf-service-host-inside-visual-studio"></a>Visual Studio 内で WCF サービス ホストを使用するシナリオ

次の表のすべてのパラメーター、**コマンドライン引数**でプロジェクトを右クリックしてこのダイアログ ボックスで、**ソリューション エクスプ ローラー** を選択すると、VisualStudioで**プロパティ**を選択し、**デバッグ**タブとクリックして**スタート プロジェクト**します。 これらのパラメーターは、WCF サービス ホストを構成するのに便利です。

|パラメーター|説明|
|---------------|-------------|
|`/client`|サービスのホストが開始された後に実行する実行可能ファイルへのパスを指定するオプション パラメーターです。 WCF テスト クライアントが起動次のホストします。|
|`/clientArg`|カスタム クライアント アプリケーションに渡す引数として文字列を指定します。|
|`/?`|ヘルプ テキストを表示します。|

#### <a name="using-wcf-test-client"></a>WCF のテスト用クライアントの使用

新しい WCF サービス プロジェクトを作成し、f5 キーを押してデバッガーを起動すると後、WCF サービス ホストは、プロジェクト内で見つかったすべてのサービスのホスティングを開始します。 WCF テスト クライアントは自動的に開き、構成ファイルで定義されているサービス エンドポイントの一覧を表示します。 メイン ウィンドウでパラメーターをテストしたり、サービスを呼び出したりできます。

WCF テスト クライアントが使用されることを確認するでプロジェクトを右クリックして**ソリューション エクスプ ローラー** Visual Studio で、次のように選択します。**プロパティ**を選択してから、**デバッグ**タブ。クリックして**スタート プロジェクト**で、次が表示されることを確認してください、**コマンドライン引数** ダイアログ ボックス。

`/client:WcfTestClient.exe`

#### <a name="using-a-custom-client"></a>カスタム クライアントの使用

プロジェクトを右クリックし、カスタムのクライアントを使用する**ソリューション エクスプ ローラー** Visual Studio で、次のように選択します。**プロパティ**を選択してから、**デバッグ**タブ。をクリックして**スタート プロジェクト**および編集、`/client`パラメーター、**コマンドライン引数** ダイアログ ボックスは、次の例に示すように、カスタムのクライアント をポイントします。

`/client:"path/CustomClient.exe"`

サービスをもう一度開始して f5 キーを押すと、WCF サービス ホストで、デバッガーを起動するときに、使用するカスタム クライアントが自動的に開始されます。

`/clientArg:` パラメーターを使用して、カスタム クライアント アプリケーションに渡す引数として文字列を指定することもできます。以下に例を示します。

`/client:"path/CustomClient.exe" /clientArg:"arguments that are passed to Client"`

たとえば、配信サービス ライブラリ テンプレートを使用している場合は、次のコマンド ライン引数を使用できます。

`/client:iexplore.exe /clientArgs:http://localhost:8731/Design_Time_Addresses/Feed1/`

#### <a name="specifying-no-client"></a>クライアントを指定しない場合

WCF サービスをホストしている後にクライアントが使用されませんを指定するでプロジェクトを右クリックして**ソリューション エクスプ ローラー** Visual Studio で、次のように選択します**プロパティ**を選択してから、 **のデバッグ。** タブ。クリックして**スタート プロジェクト**のままにし、**コマンドライン引数** ダイアログ ボックスを空白。

#### <a name="using-a-custom-host"></a>カスタム ホストの使用

カスタム ホストを使用するでプロジェクトを右クリックして**ソリューション エクスプ ローラー** Visual Studio で、次のように選択します。**プロパティ**を選択してから、**デバッグ**タブ。クリックして**外部プログラムの開始**し、カスタム ホストへの完全なパスを入力します。 使用することも、**コマンドライン引数** ダイアログ ボックス、ホストに渡される引数を指定します。

## <a name="wcf-service-host-user-interface"></a>WCF サービス ホストのユーザー インターフェイス

最初に呼び出すと WCF サービス ホスト (を Visual Studio 内で f5 キーを押す)、 **WCF サービス ホスト**ウィンドウが自動的に開きます。 WCF サービス ホストが実行されている場合は、通知領域で、プログラムのアイコンが表示されます。 アイコンをダブルクリックして開き、 **WCF サービス ホスト**ウィンドウ

サービスをホストしている中にエラーが発生すると、関連する情報を表示する WCF サービス ホスト ダイアログ ボックスが開きます。

**WCF サービス ホスト**メイン ウィンドウには、2 つのメニューが含まれています。

- **ファイル**:含まれています、**閉じる**と**終了**コマンド。 クリックすると**閉じる**、 **WCF サービス ホスト** ダイアログ ボックスは閉じますが、サービスは引き続きホストされるようにします。 クリックすると**終了**、WCF サービス ホストがシャット ダウンもします。 ホストされているサービスもすべて停止します。

- **ヘルプ**:含まれています、**について**バージョン情報が含まれるコマンド。 含まれています、**ヘルプ**コマンドがヘルプ ファイルを開くことができます。

メイン**WCF サービス ホスト**ウィンドウには、2 つの領域が含まれています。

- 最初の領域が**サービス**します。 この領域には、すべてのサービスの基本情報が一覧表示されます。 具体的には、次の情報が含まれています。

  - **[サービス]** :すべてのサービスを一覧表示します。

  - **ステータス**:サービスの状態を一覧表示します。 有効な値は、「開始」、「停止」と"Error"です。

  - **メタデータ アドレス**:サービスのメタデータ アドレスを表示します。

- 2 番目の領域が**追加情報**します。 特定のサービス行を選択した場合、サービスの状態の詳細についてが表示されます、**サービス**領域。 状態が "エラー" の場合は、完全なエラー メッセージを画面上で確認できます。

## <a name="stopping-wcf-service-host"></a>WCF サービス ホストの停止

次の 4 つの方法で WCF サービス ホストをシャット ダウンできます。

- Visual Studio でデバッグ セッションを停止します。

- 選択**終了**から、**ファイル**メニューで、 **WCF サービス ホスト**ウィンドウ。

- 選択**終了**システム通知領域の WCF サービス ホストのトレイ アイコンのコンテキスト メニュー。

- 使用されている場合は、WCF テスト クライアントを終了します。

## <a name="using-service-host-without-administrator-privilege"></a>管理特権を必要としないサービス ホストの使用

WCF サービスの開発を管理者特権のないユーザーを有効にする ACL (アクセス制御リスト) は、名前空間の作成"http://+:8731/Design_Time_Addresses"Visual Studio のインストール中にします。 この ACL は (UI) に設定され、コンピューターにログオンしているすべての対話ユーザーが含まれます。 管理者は、追加または、この ACL からユーザーを削除または追加のポートを開くことができます。この ACL では、管理者特権を付与せずに WCF サービスの自動ホスト (wcfSvcHost.exe) を使用することができます。

システム特権のある管理者アカウントで [!INCLUDE[wv](../../../includes/wv-md.md)] の netsh.exe ツールを使用すると、アクセスを変更できます。 netsh.exe の使用例を次に示します。

```
netsh http add urlacl url=http://+:8001/MyService user=<domain>\<user>
```

Netsh.exe の詳細については、次を参照してください。"[Netsh.exe ツールとコマンド ライン スイッチを使用する方法](https://go.microsoft.com/fwlink/?LinkId=97877)"。

## <a name="see-also"></a>関連項目

- [WCF のテスト用クライアント (WcfTestClient.exe)](../../../docs/framework/wcf/wcf-test-client-wcftestclient-exe.md)
