---
title: 電子署名の暗号化
ms.date: 03/30/2017
helpviewer_keywords:
- encryption of digital signatures [WCF]
- digital signatures [WCF], encryption
- digital signatures [WCF]
ms.assetid: 0868866d-40b4-4341-8e42-eee3b7f15b69
ms.openlocfilehash: 41094b2eee50e97cf60887cfa29f8110f2895bfa
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/09/2020
ms.locfileid: "84597398"
---
# <a name="encryption-of-digital-signatures"></a><span data-ttu-id="21933-102">電子署名の暗号化</span><span class="sxs-lookup"><span data-stu-id="21933-102">Encryption of Digital Signatures</span></span>
<span data-ttu-id="21933-103">既定では、メッセージは署名および暗号化され、署名はデジタル暗号化されます。</span><span class="sxs-lookup"><span data-stu-id="21933-103">By default, a message is signed and encrypted, and the signature is digitally encrypted.</span></span> <span data-ttu-id="21933-104">これは、<xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> または <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> のインスタンスを使用してカスタム バインドを作成し、いずれかのクラスの `MessageProtectionOrder` プロパティを <xref:System.ServiceModel.Security.MessageProtectionOrder> 列挙値に設定することによって制御できます。</span><span class="sxs-lookup"><span data-stu-id="21933-104">You can control this by creating a custom binding with an instance of the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> and then setting the `MessageProtectionOrder` property of either class to a <xref:System.ServiceModel.Security.MessageProtectionOrder> enumeration value.</span></span> <span data-ttu-id="21933-105">既定値は、<xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature> です。</span><span class="sxs-lookup"><span data-stu-id="21933-105">The default is <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="21933-106">このプロセスは、単に署名して暗号化する場合よりも時間が 10 ～ 40 % 長くかかります。</span><span class="sxs-lookup"><span data-stu-id="21933-106">This process takes 10 to 40 percent longer than simply signing and encrypting.</span></span> <span data-ttu-id="21933-107">ただし、署名の暗号化を無効にすると、攻撃者がメッセージの内容を予想できるようになる恐れがあります。</span><span class="sxs-lookup"><span data-stu-id="21933-107">Disabling encryption of the signature, however, might allow an attacker to guess the contents of the message.</span></span> <span data-ttu-id="21933-108">その理由は、メッセージ内のすべての署名部分のプレーン テキストのハッシュ コードが署名要素に含まれるからです。</span><span class="sxs-lookup"><span data-stu-id="21933-108">This is possible because the signature element contains the hash code of the plain text of every signed part in the message.</span></span> <span data-ttu-id="21933-109">たとえば、メッセージ本体は既定で暗号化されますが、暗号化されていない署名には、メッセージ本体のハッシュ コードが含まれます。</span><span class="sxs-lookup"><span data-stu-id="21933-109">For example, although the message body is encrypted by default, the unencrypted signature contains the hash code of the message body.</span></span> <span data-ttu-id="21933-110">メッセージが短い場合は、攻撃者に内容を推測されてしまうおそれがあります。</span><span class="sxs-lookup"><span data-stu-id="21933-110">If the message is small, an attacker might be able to deduce the contents.</span></span> <span data-ttu-id="21933-111">署名を暗号化すると、このような危険性が低減または解消されます。</span><span class="sxs-lookup"><span data-stu-id="21933-111">Encrypting the signature reduces or eliminates this possibility.</span></span>  
  
 <span data-ttu-id="21933-112">そのため、署名の暗号化を無効にするのは、セキュリティに影響しない大型のバイナリ ファイルを送信する場合などの、内容の重要性が低く、パフォーマンスの向上が重要な場合に限定してください。</span><span class="sxs-lookup"><span data-stu-id="21933-112">Therefore, disable encryption of the signature only when the value of the content is low, and the performance gain will be significant, for example, when sending large binary files that have no security implications.</span></span>  
  
### <a name="to-disable-digital-signing"></a><span data-ttu-id="21933-113">デジタル署名を無効にするには</span><span class="sxs-lookup"><span data-stu-id="21933-113">To disable digital signing</span></span>  
  
1. <span data-ttu-id="21933-114"><xref:System.ServiceModel.Channels.CustomBinding> を作成します。</span><span class="sxs-lookup"><span data-stu-id="21933-114">Create a <xref:System.ServiceModel.Channels.CustomBinding>.</span></span> <span data-ttu-id="21933-115">詳細については、「[方法: カスタムバインディングを使用してカスタムバインディングを作成](how-to-create-a-custom-binding-using-the-securitybindingelement.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="21933-115">For more information, see [How to: Create a Custom Binding Using the SecurityBindingElement](how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span></span>  
  
2. <span data-ttu-id="21933-116"><xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> または <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> をバインディング コレクションに追加します。</span><span class="sxs-lookup"><span data-stu-id="21933-116">Add either an <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the binding collection.</span></span>  
  
3. <span data-ttu-id="21933-117"><xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> プロパティを <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt> に設定するか、または <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> プロパティを <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt> に設定します。</span><span class="sxs-lookup"><span data-stu-id="21933-117">Set the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, or set the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.</span></span>  
  
 <span data-ttu-id="21933-118">カスタムバインディングの作成の詳細については、「[ユーザー定義バインディングの作成](../extending/creating-user-defined-bindings.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="21933-118">For more information about creating custom bindings, see [Creating User-Defined Bindings](../extending/creating-user-defined-bindings.md).</span></span> <span data-ttu-id="21933-119">特定の認証モード用のカスタムバインディングを作成する方法の詳細については、「[方法: 指定した認証モードのための](how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)内容を作成する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="21933-119">For more information about creating a custom binding for a specific authentication mode, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="21933-120">関連項目</span><span class="sxs-lookup"><span data-stu-id="21933-120">See also</span></span>

- <xref:System.ServiceModel.Security.MessageProtectionOrder>
- <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>
- <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>
- [<span data-ttu-id="21933-121">方法: SecurityBindingElement を使用してカスタム バインドを作成する</span><span class="sxs-lookup"><span data-stu-id="21933-121">How to: Create a Custom Binding Using the SecurityBindingElement</span></span>](how-to-create-a-custom-binding-using-the-securitybindingelement.md)
- [<span data-ttu-id="21933-122">ユーザー定義バインディングの作成</span><span class="sxs-lookup"><span data-stu-id="21933-122">Creating User-Defined Bindings</span></span>](../extending/creating-user-defined-bindings.md)
- [<span data-ttu-id="21933-123">方法: 指定した認証モード用の SecurityBindingElement を作成する</span><span class="sxs-lookup"><span data-stu-id="21933-123">How to: Create a SecurityBindingElement for a Specified Authentication Mode</span></span>](how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)
