---
title: HTTP 認証の理解
ms.date: 03/30/2017
ms.assetid: 9376309a-39e3-4819-b47b-a73982b57620
ms.openlocfilehash: a31c9f96185364c59dca1ff26251a30f5d7a88bc
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/09/2020
ms.locfileid: "84595090"
---
# <a name="understanding-http-authentication"></a><span data-ttu-id="cbd8f-102">HTTP 認証の理解</span><span class="sxs-lookup"><span data-stu-id="cbd8f-102">Understanding HTTP Authentication</span></span>
<span data-ttu-id="cbd8f-103">認証は、リソースにアクセスする権限をクライアントが持つかどうかを確認するプロセスです。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-103">Authentication is the process of identifying whether a client is eligible to access a resource.</span></span> <span data-ttu-id="cbd8f-104">HTTP プロトコルは、セキュリティで保護されたリソースへのアクセスをネゴシエートする手段として、認証をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-104">The HTTP protocol supports authentication as a means of negotiating access to a secure resource.</span></span>  
  
 <span data-ttu-id="cbd8f-105">クライアントからの最初の要求は、通常、認証情報を含まない匿名要求です。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-105">The initial request from a client is typically an anonymous request, not containing any authentication information.</span></span> <span data-ttu-id="cbd8f-106">HTTP サーバー アプリケーションは、認証が必要であることを示して匿名要求を拒否できます。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-106">HTTP server applications can deny the anonymous request while indicating that authentication is required.</span></span> <span data-ttu-id="cbd8f-107">その場合は、サポートされる認証方式を示す WWW 認証ヘッダーを送信します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-107">The server application sends WWW-Authentication headers to indicate the supported authentication schemes.</span></span> <span data-ttu-id="cbd8f-108">このドキュメントでは、HTTP 用の複数の認証方式について説明し、Windows Communication Foundation (WCF) でのサポートについて説明します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-108">This document describes several authentication schemes for HTTP and discusses their support in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="http-authentication-schemes"></a><span data-ttu-id="cbd8f-109">HTTP 認証方式</span><span class="sxs-lookup"><span data-stu-id="cbd8f-109">HTTP Authentication Schemes</span></span>  
 <span data-ttu-id="cbd8f-110">サーバーでは、クライアントが選択する複数の認証方式を指定できます。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-110">The server can specify multiple authentication schemes for the client to choose from.</span></span> <span data-ttu-id="cbd8f-111">次の表では、Windows アプリケーションでよく見られる認証方式の一部について説明します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-111">The following table describes some of the authentication schemes commonly found in Windows applications.</span></span>  
  
|<span data-ttu-id="cbd8f-112">認証方式</span><span class="sxs-lookup"><span data-stu-id="cbd8f-112">Authentication Scheme</span></span>|<span data-ttu-id="cbd8f-113">説明</span><span class="sxs-lookup"><span data-stu-id="cbd8f-113">Description</span></span>|  
|---------------------------|-----------------|  
|<span data-ttu-id="cbd8f-114">Anonymous</span><span class="sxs-lookup"><span data-stu-id="cbd8f-114">Anonymous</span></span>|<span data-ttu-id="cbd8f-115">匿名要求は、認証情報を含みません。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-115">An anonymous request does not contain any authentication information.</span></span> <span data-ttu-id="cbd8f-116">これは、リソースへのアクセス権をすべてのユーザーに付与することを意味します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-116">This is equivalent to granting everyone access to the resource.</span></span>|  
|<span data-ttu-id="cbd8f-117">Basic</span><span class="sxs-lookup"><span data-stu-id="cbd8f-117">Basic</span></span>|<span data-ttu-id="cbd8f-118">基本認証では、クライアントのユーザー名とパスワードを含む Base64 エンコード文字列が送信されます。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-118">Basic authentication sends a Base64-encoded string that contains a user name and password for the client.</span></span> <span data-ttu-id="cbd8f-119">Base64 は暗号化の形式ではありません。クリア テキストでのユーザー名とパスワードの送信と同じであると考えてください。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-119">Base64 is not a form of encryption and should be considered the same as sending the user name and password in clear text.</span></span> <span data-ttu-id="cbd8f-120">リソースを保護する必要がある場合は、基本認証以外の認証方式の使用を検討してください。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-120">If a resource needs to be protected, strongly consider using an authentication scheme other than basic authentication.</span></span>|  
|<span data-ttu-id="cbd8f-121">ダイジェスト</span><span class="sxs-lookup"><span data-stu-id="cbd8f-121">Digest</span></span>|<span data-ttu-id="cbd8f-122">ダイジェスト認証は、基本認証の代わりに使用できるチャレンジ レスポンス方式の認証です。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-122">Digest authentication is a challenge-response scheme that is intended to replace Basic authentication.</span></span> <span data-ttu-id="cbd8f-123">サーバーは、 *nonce*と呼ばれるランダムなデータの文字列をチャレンジとしてクライアントに送信します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-123">The server sends a string of random data called a *nonce* to the client as a challenge.</span></span> <span data-ttu-id="cbd8f-124">クライアントは、ユーザー名、パスワード、nonce およびその他の追加情報を含むハッシュを使用して応答します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-124">The client responds with a hash that includes the user name, password, and nonce, among additional information.</span></span> <span data-ttu-id="cbd8f-125">この認証方式では、このようなデータの交換によってもたらされる複雑さとデータのハッシュにより、ユーザーの資格情報を盗んで再使用することがより困難になります。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-125">The complexity this exchange introduces and the data hashing make it more difficult to steal and reuse the user's credentials with this authentication scheme.</span></span><br /><br /> <span data-ttu-id="cbd8f-126">ダイジェスト認証では、Windows ドメイン アカウントを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-126">Digest authentication requires the use of Windows domain accounts.</span></span> <span data-ttu-id="cbd8f-127">ダイジェスト*領域*は Windows ドメイン名です。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-127">The digest *realm* is the Windows domain name.</span></span> <span data-ttu-id="cbd8f-128">したがって、Windows ドメインをサポートしていないオペレーティング システム (Windows XP Home Edition など) で実行されているサーバーでは、ダイジェスト認証を使用できません。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-128">Therefore, you cannot use a server running on an operating system that does not support Windows domains, such as Windows XP Home Edition, with Digest authentication.</span></span> <span data-ttu-id="cbd8f-129">逆に、Windows ドメインをサポートしていないオペレーティング システムでクライアントが実行されている場合は、認証時にドメイン アカウントを明示的に指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-129">Conversely, when the client runs on an operating system that does not support Windows domains, a domain account must be explicitly specified during the authentication.</span></span>|  
|<span data-ttu-id="cbd8f-130">NTLM</span><span class="sxs-lookup"><span data-stu-id="cbd8f-130">NTLM</span></span>|<span data-ttu-id="cbd8f-131">NTLM (NT LAN Manager) 認証もチャレンジ レスポンス方式の認証ですが、ダイジェスト認証よりもセキュリティが強化されています。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-131">NT LAN Manager (NTLM) authentication is a challenge-response scheme that is a securer variation of Digest authentication.</span></span> <span data-ttu-id="cbd8f-132">NTLM 認証では、エンコードされていないユーザー名とパスワードではなく、Windows 資格情報を使用してチャレンジ データが変換されます。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-132">NTLM uses Windows credentials to transform the challenge data instead of the unencoded user name and password.</span></span> <span data-ttu-id="cbd8f-133">NTLM 認証では、クライアントとサーバー間で複数のメッセージ交換を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-133">NTLM authentication requires multiple exchanges between the client and server.</span></span> <span data-ttu-id="cbd8f-134">認証を正常に完了するため、サーバーおよび介在するすべてのプロキシが永続的な接続をサポートしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-134">The server and any intervening proxies must support persistent connections to successfully complete the authentication.</span></span>|  
|<span data-ttu-id="cbd8f-135">ネゴシエート</span><span class="sxs-lookup"><span data-stu-id="cbd8f-135">Negotiate</span></span>|<span data-ttu-id="cbd8f-136">ネゴシエート認証では、可用性に応じて、Kerberos プロトコルと NTLM 認証のいずれかが自動的に選択されます。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-136">Negotiate authentication automatically selects between the Kerberos protocol and NTLM authentication, depending on availability.</span></span> <span data-ttu-id="cbd8f-137">Kerberos プロトコルを使用できる場合は Kerberos プロトコルが使用され、それ以外の場合は NTLM が使用されます。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-137">The Kerberos protocol is used if it is available; otherwise, NTLM is tried.</span></span> <span data-ttu-id="cbd8f-138">Kerberos 認証は、NTLM 認証を大幅に強化した認証方式です。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-138">Kerberos authentication significantly improves upon NTLM.</span></span> <span data-ttu-id="cbd8f-139">Kerberos 認証は NTLM 認証よりも高速であるだけでなく、相互認証およびリモート コンピューターへの資格情報の委任を使用できます。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-139">Kerberos authentication is both faster than NTLM and allows the use of mutual authentication and delegation of credentials to remote machines.</span></span>|  
|<span data-ttu-id="cbd8f-140">Windows Live ID</span><span class="sxs-lookup"><span data-stu-id="cbd8f-140">Windows Live ID</span></span>|<span data-ttu-id="cbd8f-141">基になる Windows HTTP サービスには、フェデレーション プロトコルを使用する認証が含まれます。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-141">The underlying Windows HTTP service includes authentication using federated protocols.</span></span> <span data-ttu-id="cbd8f-142">ただし、WCF の標準 HTTP トランスポートでは、Microsoft Windows Live ID などのフェデレーション認証方式の使用はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-142">However, the standard HTTP transports in WCF do not support the use of federated authentication schemes, such as Microsoft Windows Live ID.</span></span> <span data-ttu-id="cbd8f-143">現時点では、この機能をサポートするには、メッセージ セキュリティを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-143">Support for this feature is currently available through the use of message security.</span></span> <span data-ttu-id="cbd8f-144">詳細については、「[フェデレーションと発行済みトークン](federation-and-issued-tokens.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-144">For more information, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>|  
  
## <a name="choosing-an-authentication-scheme"></a><span data-ttu-id="cbd8f-145">認証方式の選択</span><span class="sxs-lookup"><span data-stu-id="cbd8f-145">Choosing an Authentication Scheme</span></span>  
 <span data-ttu-id="cbd8f-146">HTTP サーバーに使用できる認証方式を選択する際には、以下の項目について検討します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-146">When selecting the potential authentication schemes for an HTTP server, a few items to consider include the following:</span></span>  
  
- <span data-ttu-id="cbd8f-147">リソースを保護する必要があるかどうかを検討します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-147">Consider whether the resource needs to be protected.</span></span> <span data-ttu-id="cbd8f-148">HTTP 認証では、より多くのデータを送信する必要があるため、クライアントとの相互運用性が制限される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-148">Using HTTP authentication requires transmitting more data and can limit interoperability with clients.</span></span> <span data-ttu-id="cbd8f-149">保護する必要のないリソースには、匿名アクセスを許可してください。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-149">Allow anonymous access to resources that do not need to be protected.</span></span>  
  
- <span data-ttu-id="cbd8f-150">リソースを保護する必要がある場合は、必要なレベルのセキュリティがどの認証方式によって提供されるかを検討します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-150">If the resource needs to be protected, consider which authentication schemes provide the required level of security.</span></span> <span data-ttu-id="cbd8f-151">ここで説明した中で最も弱い標準の認証方式は、基本認証です。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-151">The weakest standard authentication scheme discussed here is Basic authentication.</span></span> <span data-ttu-id="cbd8f-152">基本認証では、ユーザーの資格情報が保護されません。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-152">Basic authentication does not protect the user's credentials.</span></span> <span data-ttu-id="cbd8f-153">最も強力な標準の認証方式は、ネゴシエート認証で選択される Kerberos プロトコルです。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-153">The strongest standard authentication scheme is Negotiate authentication, resulting in the Kerberos protocol.</span></span>  
  
- <span data-ttu-id="cbd8f-154">受け入れる準備ができていない認証方式、またはリソースを十分にセキュリティで保護できない認証方式をサーバーが (WWW 認証ヘッダー内で) 提示しないことを確認してください。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-154">A server should not present (in the WWW-Authentication headers) any scheme that it is not prepared to accept or that does not adequately secure the protected resource.</span></span> <span data-ttu-id="cbd8f-155">クライアントは、サーバーによって提示された認証方式を自由に選択します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-155">Clients are free to choose between any of the authentication schemes the server presents.</span></span> <span data-ttu-id="cbd8f-156">クライアントによっては、弱い認証方式、またはサーバーのリストにある最初の認証方式を既定で選択します。</span><span class="sxs-lookup"><span data-stu-id="cbd8f-156">Some clients default to a weak authentication scheme or the first authentication scheme in the server's list.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cbd8f-157">関連項目</span><span class="sxs-lookup"><span data-stu-id="cbd8f-157">See also</span></span>

- [<span data-ttu-id="cbd8f-158">トランスポート セキュリティの概要</span><span class="sxs-lookup"><span data-stu-id="cbd8f-158">Transport Security Overview</span></span>](transport-security-overview.md)
- [<span data-ttu-id="cbd8f-159">トランスポート セキュリティでの偽装の使用</span><span class="sxs-lookup"><span data-stu-id="cbd8f-159">Using Impersonation with Transport Security</span></span>](using-impersonation-with-transport-security.md)
- [<span data-ttu-id="cbd8f-160">委任と偽装</span><span class="sxs-lookup"><span data-stu-id="cbd8f-160">Delegation and Impersonation</span></span>](delegation-and-impersonation-with-wcf.md)
