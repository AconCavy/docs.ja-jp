---
title: インターネット インフォメーション サービスでホストされる WCF サービスの配置
ms.date: 03/30/2017
ms.assetid: 04ebd329-3fbd-44c3-b3ab-1de3517e27d7
ms.openlocfilehash: 67f6877546951bd92b235218f10f6ccc7011ef5c
ms.sourcegitcommit: 927b7ea6b2ea5a440c8f23e3e66503152eb85591
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/16/2020
ms.locfileid: "81463855"
---
# <a name="deploying-an-internet-information-services-hosted-wcf-service"></a><span data-ttu-id="fd622-102">インターネット インフォメーション サービスでホストされる WCF サービスの配置</span><span class="sxs-lookup"><span data-stu-id="fd622-102">Deploying an Internet Information Services-Hosted WCF Service</span></span>

<span data-ttu-id="fd622-103">インターネット インフォメーション サービス (IIS) でホストされている Windows 通信基盤 (WCF) サービスの開発と展開は、次のタスクで構成されます。</span><span class="sxs-lookup"><span data-stu-id="fd622-103">Developing and deploying a Windows Communication Foundation (WCF) service that is hosted in Internet Information Services (IIS) consists of the following tasks:</span></span>

- <span data-ttu-id="fd622-104">IIS、ASP.NET、WCF、および WCF アクティベーション コンポーネントが正しくインストールされ、登録されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="fd622-104">Ensure that IIS, ASP.NET, WCF, and the WCF activation component are correctly installed and registered.</span></span>

- <span data-ttu-id="fd622-105">新しい IIS アプリケーションを作成するか、既存の ASP.NET アプリケーションを再利用します。</span><span class="sxs-lookup"><span data-stu-id="fd622-105">Create a new IIS application, or reuse an existing ASP.NET application.</span></span>

- <span data-ttu-id="fd622-106">WCF サービスの .svc ファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="fd622-106">Create a .svc file for the WCF service.</span></span>

- <span data-ttu-id="fd622-107">IIS アプリケーションにサービス実装を展開します。</span><span class="sxs-lookup"><span data-stu-id="fd622-107">Deploy the service implementation to the IIS application.</span></span>

- <span data-ttu-id="fd622-108">WCF サービスを構成します。</span><span class="sxs-lookup"><span data-stu-id="fd622-108">Configure the WCF service.</span></span>

<span data-ttu-id="fd622-109">IIS でホストされる WCF サービスの作成の詳細なチュートリアルについては、「[方法 : IIS で WCF サービスをホストする](how-to-host-a-wcf-service-in-iis.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fd622-109">For a detailed walkthrough of creating an IIS-hosted WCF service, see [How to: Host a WCF Service in IIS](how-to-host-a-wcf-service-in-iis.md).</span></span>

## <a name="ensure-that-iis-aspnet-and-wcf-are-correctly-installed-and-registered"></a><span data-ttu-id="fd622-110">IIS、ASP.NET、および WCF が正しくインストールおよび登録されていることの確認</span><span class="sxs-lookup"><span data-stu-id="fd622-110">Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered</span></span>

<span data-ttu-id="fd622-111">IIS でホストされる WCF サービスが正しく機能するには、WCF、IIS、およびASP.NETをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="fd622-111">WCF, IIS, and ASP.NET must be installed for IIS-hosted WCF services to function correctly.</span></span> <span data-ttu-id="fd622-112">WCF のインストール手順 (.NET Framework の一部として)、ASP.NET、および IIS は、オペレーティング システムによって異なります。</span><span class="sxs-lookup"><span data-stu-id="fd622-112">The procedures for installing WCF (as part of the .NET Framework), ASP.NET, and IIS vary depending on your operating system.</span></span> <span data-ttu-id="fd622-113">WCF および .NET Framework のインストールの詳細については、「 [.NET Framework の開発者向けインストール](../../install/guide-for-developers.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fd622-113">For more information about installing WCF and the .NET Framework, see [Install the .NET Framework for developers](../../install/guide-for-developers.md).</span></span> <span data-ttu-id="fd622-114">Windows 10 に IIS をインストールするには、**コントロール パネル**の **[プログラムと機能] を**開き **、[Windows の機能を有効または無効にする**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="fd622-114">To install IIS on Windows 10, open **Programs and Features** in **Control Panel** and then select **Turn Windows features on or off**.</span></span> <span data-ttu-id="fd622-115">[Windows**の機能]** で 、[**インターネット インフォメーション サービス**] を選択し **、[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="fd622-115">In **Windows Features**, select **Internet Information Services** and then choose **OK**.</span></span>

![IIS が強調表示された Windows の機能](./media/windows-features-iis.png)

<span data-ttu-id="fd622-117">他のオペレーティング システムに IIS をインストールする手順については[、「Windows Vista および Windows 7 への IIS のインストール」](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7)と[「Windows Server 2012 R2 で IIS 8.5 をインストールする](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fd622-117">Instructions for installing IIS on other operating systems can be found at [Install IIS on Windows Vista and Windows 7](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7) and [Install IIS 8.5 on Windows Server 2012 R2](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2).</span></span>

<span data-ttu-id="fd622-118">.NET Framework のインストール プロセスは、IIS が既にコンピューターに存在する場合は、自動的に IIS に WCF を登録します。</span><span class="sxs-lookup"><span data-stu-id="fd622-118">The installation process for .NET Framework automatically registers WCF with IIS if IIS is already present on the machine.</span></span> <span data-ttu-id="fd622-119">.NET Framework の後に IIS をインストールする場合は、WCF を IIS および ASP.NETに登録するために追加の手順が必要です。</span><span class="sxs-lookup"><span data-stu-id="fd622-119">If IIS is installed after the .NET Framework, an additional step is required to register WCF with IIS and ASP.NET.</span></span> <span data-ttu-id="fd622-120">使用しているオペレーティング システムに応じて、次のように実行します。</span><span class="sxs-lookup"><span data-stu-id="fd622-120">You can do this as follows, depending on your operating system:</span></span>

- <span data-ttu-id="fd622-121">Windows 7 および Windows Server 2003:[サービスモデル登録ツール (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md)ツールを使用して、WCF を IIS に登録します。</span><span class="sxs-lookup"><span data-stu-id="fd622-121">Windows 7 and Windows Server 2003: Use the [ServiceModel Registration Tool (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) tool to register WCF with IIS.</span></span> <span data-ttu-id="fd622-122">このツールを使用するには[、Visual Studio の開発者コマンド プロンプト](../../tools/developer-command-prompt-for-vs.md)で **「ServiceModelReg.exe /i /x」** と入力します。</span><span class="sxs-lookup"><span data-stu-id="fd622-122">To use this tool, type **ServiceModelReg.exe /i /x** in the [Developer Command Prompt for Visual Studio](../../tools/developer-command-prompt-for-vs.md).</span></span>

- <span data-ttu-id="fd622-123">Windows 7: 最後に、.NET Framework バージョン 4 以降を使用するようにASP.NETが構成されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fd622-123">Windows 7: Finally, you must verify that ASP.NET is configured to use the .NET Framework version 4 or later.</span></span> <span data-ttu-id="fd622-124">このオプションを使用してASPNET_Regiis ツールを`–i`実行します。</span><span class="sxs-lookup"><span data-stu-id="fd622-124">You do this by running the ASPNET_Regiis tool with the `–i` option.</span></span> <span data-ttu-id="fd622-125">詳細については、「 [IIS 登録ツールASP.NET](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/k6h9cz8h(v=vs.90))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fd622-125">For more information, see [ASP.NET IIS Registration Tool](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/k6h9cz8h(v=vs.90)).</span></span>

## <a name="create-a-new-iis-application-or-reuse-an-existing-aspnet-application"></a><span data-ttu-id="fd622-126">新しい IIS アプリケーションの作成、または既存の ASP.NET アプリケーションの再利用</span><span class="sxs-lookup"><span data-stu-id="fd622-126">Create a New IIS Application or Reuse an Existing ASP.NET Application</span></span>

<span data-ttu-id="fd622-127">IIS でホストされる WCF サービスは、IIS アプリケーション内に存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fd622-127">IIS-hosted WCF services must reside inside of an IIS application.</span></span> <span data-ttu-id="fd622-128">WCF サービスを排他的にホストする新しい IIS アプリケーションを作成できます。</span><span class="sxs-lookup"><span data-stu-id="fd622-128">You can create a new IIS application to host WCF services exclusively.</span></span> <span data-ttu-id="fd622-129">または、既に 2.0 コンテンツをホストしている既存のアプリケーションに WCF サービスASP.NET展開できます (.aspx ページや ASP.NET Web サービス (ASMX) など)。</span><span class="sxs-lookup"><span data-stu-id="fd622-129">Alternatively, you can deploy an WCF service into an existing application that is already hosting ASP.NET 2.0 content (such as .aspx pages and ASP.NET Web services [ASMX]).</span></span> <span data-ttu-id="fd622-130">これらのオプションの詳細については、「WCF[サービスとASP.NET](wcf-services-and-aspnet.md)の「wcf を並べて ASP.NET でホストする」と「wcf サービスをASP.NET互換モードでホストする」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fd622-130">For more information about these options, see the "Hosting WCF Side-by-Side with ASP.NET" and "Hosting WCF Services in ASP.NET Compatibility Mode" sections in [WCF Services and ASP.NET](wcf-services-and-aspnet.md).</span></span>

<span data-ttu-id="fd622-131">IIS 6.0 以降のバージョンでは、分離オブジェクト指向プログラミング アプリケーションを定期的に再起動します。</span><span class="sxs-lookup"><span data-stu-id="fd622-131">Note that IIS 6.0 and later versions periodically restart an isolated object-oriented programming application.</span></span> <span data-ttu-id="fd622-132">既定値は 1740 分です。</span><span class="sxs-lookup"><span data-stu-id="fd622-132">The default value is 1740 minutes.</span></span> <span data-ttu-id="fd622-133">サポートされている最大値は 71,582 分です。</span><span class="sxs-lookup"><span data-stu-id="fd622-133">The maximum value supported is 71,582 minutes.</span></span> <span data-ttu-id="fd622-134">この再起動は、無効にできます。</span><span class="sxs-lookup"><span data-stu-id="fd622-134">This restart can be disabled.</span></span> <span data-ttu-id="fd622-135">このプロパティの詳細については、「[定期再起動時間](https://docs.microsoft.com/previous-versions/iis/6.0-sdk/ms525914(v=vs.90))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fd622-135">For more information about this property, see the [PeriodicRestartTime](https://docs.microsoft.com/previous-versions/iis/6.0-sdk/ms525914(v=vs.90)).</span></span>

## <a name="create-an-svc-file-for-the-wcf-service"></a><span data-ttu-id="fd622-136">WCF サービス用の .svc ファイルの作成</span><span class="sxs-lookup"><span data-stu-id="fd622-136">Create an .svc File for the WCF Service</span></span>

<span data-ttu-id="fd622-137">IIS でホストされる WCF サービスは、IIS アプリケーション内で特別なコンテンツ ファイル (.svc ファイル) として表されます。</span><span class="sxs-lookup"><span data-stu-id="fd622-137">WCF services hosted in IIS are represented as special content files (.svc files) inside the IIS application.</span></span> <span data-ttu-id="fd622-138">これは、ASMX ページが、IIS アプリケーションの内部で .asmx ファイルとして表現されるのと同様です。</span><span class="sxs-lookup"><span data-stu-id="fd622-138">This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files.</span></span> <span data-ttu-id="fd622-139">.svc ファイルには、WCF のホスト インフラストラクチャが受信メッセージに応答してホストされるサービスをアクティブにすることを可能にする WCF 固有の処理ディレクティブ ([\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) が含まれています。</span><span class="sxs-lookup"><span data-stu-id="fd622-139">A .svc file contains a WCF-specific processing directive ([\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) that allows the WCF hosting infrastructure to activate hosted services in response to incoming messages.</span></span> <span data-ttu-id="fd622-140">.svc ファイルの最も一般的な構文を次のステートメントに示します。</span><span class="sxs-lookup"><span data-stu-id="fd622-140">The most common syntax for a .svc file is in the following statement.</span></span>

`<% @ServiceHost Service="MyNamespace.MyServiceImplementationTypeName" %>`

<span data-ttu-id="fd622-141">このクラスは[\@、ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)ディレクティブと単一の`Service`属性で構成されます。</span><span class="sxs-lookup"><span data-stu-id="fd622-141">It consists of the [\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive and a single attribute, `Service`.</span></span> <span data-ttu-id="fd622-142">`Service` 属性の値は、サービス実装の共通言語ランタイム (CLR: Common Language Runtime) 型名です。</span><span class="sxs-lookup"><span data-stu-id="fd622-142">The value of the `Service` attribute is the common language runtime (CLR) type name of the service implementation.</span></span> <span data-ttu-id="fd622-143">このディレクティブを使用することは、次のコードを使用してサービス ホストを作成することと基本的に同じです。</span><span class="sxs-lookup"><span data-stu-id="fd622-143">Using this directive is basically equivalent to creating a service host using the following code.</span></span>

```csharp
new ServiceHost( typeof( MyNamespace.MyServiceImplementationTypeName ) );
```

<span data-ttu-id="fd622-144">サービスのベース アドレスの一覧を作成するなど、追加のホスト構成を実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="fd622-144">Additional hosting configuration, such as creating a list of base addresses for the service can also be done.</span></span> <span data-ttu-id="fd622-145">カスタム <xref:System.ServiceModel.Activation.ServiceHostFactory> を使用して、このディレクティブをカスタム ホスト ソリューション用に拡張することもできます。</span><span class="sxs-lookup"><span data-stu-id="fd622-145">You can also use a custom <xref:System.ServiceModel.Activation.ServiceHostFactory> to extend the directive for use with custom hosting solutions.</span></span> <span data-ttu-id="fd622-146">WCF サービスをホストする IIS アプリケーションは、インスタンスの作成と有効期間<xref:System.ServiceModel.ServiceHost>の管理を行いません。</span><span class="sxs-lookup"><span data-stu-id="fd622-146">The IIS applications that host WCF services are not responsible for managing the creation and lifetime of <xref:System.ServiceModel.ServiceHost> instances.</span></span> <span data-ttu-id="fd622-147">マネージ WCF ホスティング インフラストラクチャは<xref:System.ServiceModel.ServiceHost>、.svc ファイルの最初の要求を受信したときに、必要なインスタンスを動的に作成します。</span><span class="sxs-lookup"><span data-stu-id="fd622-147">The managed WCF hosting infrastructure creates the necessary <xref:System.ServiceModel.ServiceHost> instance dynamically when the first request is received for the .svc file.</span></span> <span data-ttu-id="fd622-148">このインスタンスは、コードによって明示的に閉じられるか、アプリケーションがリサイクルされるときまで解放されません。</span><span class="sxs-lookup"><span data-stu-id="fd622-148">The instance is not released until either it is closed explicitly by code or when the application is recycled.</span></span>

<span data-ttu-id="fd622-149">svc ファイルの構文の詳細については、 [ \@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fd622-149">For more information about the syntax for .svc files, see [\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md).</span></span>

## <a name="deploy-the-service-implementation-to-the-iis-application"></a><span data-ttu-id="fd622-150">IIS アプリケーションへのサービス実装の展開</span><span class="sxs-lookup"><span data-stu-id="fd622-150">Deploy the Service Implementation to the IIS Application</span></span>

<span data-ttu-id="fd622-151">IIS でホストされる WCF サービスは、ASP.NET 2.0 と同じ動的コンパイル モデルを使用します。</span><span class="sxs-lookup"><span data-stu-id="fd622-151">WCF services hosted in IIS use the same dynamic compilation model as ASP.NET 2.0.</span></span> <span data-ttu-id="fd622-152">ASP.NETと同様に、IIS でホストされる WCF サービスの実装コードは、次のようにさまざまな場所に複数の方法で展開できます。</span><span class="sxs-lookup"><span data-stu-id="fd622-152">Just as with ASP.NET, you can deploy the implementation code for IIS-hosted WCF services in several ways at various locations, as follows:</span></span>

- <span data-ttu-id="fd622-153">グローバル アセンブリ キャッシュ (GAC: Global Assembly Cache) またはアプリケーションの \bin ディレクトリに配置される、プリコンパイルされた .dll ファイルとして展開します。</span><span class="sxs-lookup"><span data-stu-id="fd622-153">As a precompiled .dll file located in the global assembly cache (GAC) or in the application’s \bin directory.</span></span> <span data-ttu-id="fd622-154">プリコンパイルされたバイナリは、新しいバージョンのクラス ライブラリが展開されるまで更新されません。</span><span class="sxs-lookup"><span data-stu-id="fd622-154">Precompiled binaries are not updated until a new version of the class library is deployed.</span></span>

- <span data-ttu-id="fd622-155">アプリケーションの \App_Code ディレクトリに含まれるコンパイルされていないソース ファイルとして。</span><span class="sxs-lookup"><span data-stu-id="fd622-155">As uncompiled source files located in the application’s \App_Code directory.</span></span> <span data-ttu-id="fd622-156">このディレクトリに配置されたソース ファイルは、アプリケーションの最初の要求を処理するときに動的に要求されます。</span><span class="sxs-lookup"><span data-stu-id="fd622-156">Source files located in this directory are dynamically required when processing the application’s first request.</span></span> <span data-ttu-id="fd622-157">\App_Code ディレクトリ内のファイルを変更すると、次の要求を受け取ったときにアプリケーション全体がリサイクルされ、再コンパイルされます。</span><span class="sxs-lookup"><span data-stu-id="fd622-157">Any changes to files in the \App_Code directory cause the entire application to be recycled and recompiled when the next request is received.</span></span>

- <span data-ttu-id="fd622-158">コンパイルされていないコードとして、.svc ファイルに直接配置されます。</span><span class="sxs-lookup"><span data-stu-id="fd622-158">As uncompiled code placed directly in the .svc file.</span></span> <span data-ttu-id="fd622-159">実装コードは、ServiceHost ディレクティブの後のサービスの .svc ファイル内\@にインラインで配置することもできます。</span><span class="sxs-lookup"><span data-stu-id="fd622-159">Implementation code can also be located inline in the service’s .svc file, after the \@ServiceHost directive.</span></span> <span data-ttu-id="fd622-160">インライン コードを変更すると、次の要求を受け取ったときにアプリケーションがリサイクルされ、再コンパイルされます。</span><span class="sxs-lookup"><span data-stu-id="fd622-160">Any changes to inline code cause the application to be recycled and recompiled when the next request is received.</span></span>

<span data-ttu-id="fd622-161">ASP.NET 2.0 コンパイル モデルの詳細については、「[コンパイルの概要ASP.NET」](https://docs.microsoft.com/previous-versions/aspnet/ms178466(v=vs.100))を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fd622-161">For more information about the ASP.NET 2.0 compilation model, see [ASP.NET Compilation Overview](https://docs.microsoft.com/previous-versions/aspnet/ms178466(v=vs.100)).</span></span>

## <a name="configure-the-wcf-service"></a><span data-ttu-id="fd622-162">WCF サービスの構成</span><span class="sxs-lookup"><span data-stu-id="fd622-162">Configure the WCF Service</span></span>

<span data-ttu-id="fd622-163">IIS でホストされる WCF サービスは、アプリケーションの Web.config ファイルに構成を格納します。</span><span class="sxs-lookup"><span data-stu-id="fd622-163">IIS-hosted WCF services store their configuration in the applications Web.config file.</span></span> <span data-ttu-id="fd622-164">IIS でホストされるサービスは、IIS の外部でホストされる WCF サービスと同じ構成要素と構文を使用します。</span><span class="sxs-lookup"><span data-stu-id="fd622-164">IIS-hosted services use the same configuration elements and syntax as WCF services hosted outside of IIS.</span></span> <span data-ttu-id="fd622-165">ただし、次の制約は、IIS ホスト環境に固有です。</span><span class="sxs-lookup"><span data-stu-id="fd622-165">However, the following constraints are unique to the IIS hosting environment:</span></span>

- <span data-ttu-id="fd622-166">IIS でホストされるサービスのベース アドレス。</span><span class="sxs-lookup"><span data-stu-id="fd622-166">Base addresses for IIS-hosted services.</span></span>

- <span data-ttu-id="fd622-167">IIS の外部で WCF サービスをホストしているアプリケーションは、<xref:System.ServiceModel.ServiceHost>一連のベース アドレス URI をコンストラクターに渡すか、サービスの構成でホスト[\<>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md)要素を提供することによって、ホストサービスのベース アドレスを制御できます。</span><span class="sxs-lookup"><span data-stu-id="fd622-167">Applications hosting WCF services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <xref:System.ServiceModel.ServiceHost> constructor or by providing a [\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md) element in the service’s configuration.</span></span> <span data-ttu-id="fd622-168">IIS でホストされるサービスは、それぞれのベース アドレスを制御できません。IIS でホストされるサービスのベース アドレスは、その .svc ファイルのアドレスです。</span><span class="sxs-lookup"><span data-stu-id="fd622-168">Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.</span></span>

### <a name="endpoint-addresses-for-iis-hosted-services"></a><span data-ttu-id="fd622-169">IIS でホストされるサービスのエンドポイント アドレス</span><span class="sxs-lookup"><span data-stu-id="fd622-169">Endpoint Addresses for IIS-Hosted Services</span></span>

<span data-ttu-id="fd622-170">IIS でホストされるときのエンドポイント アドレスは、常にサービスを表す .svc ファイルのアドレスを基準にした相対アドレスと見なされます。</span><span class="sxs-lookup"><span data-stu-id="fd622-170">When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service.</span></span> <span data-ttu-id="fd622-171">たとえば、WCF サービスのベース アドレスが`http://localhost/Application1/MyService.svc`次のエンドポイント構成を持つ場合。</span><span class="sxs-lookup"><span data-stu-id="fd622-171">For example, if the base address of a WCF service is `http://localhost/Application1/MyService.svc` with the following endpoint configuration:</span></span>

```xml
<endpoint address="anotherEndpoint" />
```

<span data-ttu-id="fd622-172">これにより、 で`http://localhost/Application1/MyService.svc/anotherEndpoint`到達できるエンドポイントが提供されます。</span><span class="sxs-lookup"><span data-stu-id="fd622-172">This provides an endpoint that can be reached at `http://localhost/Application1/MyService.svc/anotherEndpoint`.</span></span>

<span data-ttu-id="fd622-173">同様に、相対アドレスとして空の文字列を使用するエンドポイント構成要素は、ベース アドレスである`http://localhost/Application1/MyService.svc`で到達可能なエンドポイントを提供します。</span><span class="sxs-lookup"><span data-stu-id="fd622-173">Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at `http://localhost/Application1/MyService.svc`, which is the base address.</span></span>

```xml
<endpoint address="" />
```

<span data-ttu-id="fd622-174">IIS でホストされるサービスのエンドポイントには、常に相対エンドポイント アドレスを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fd622-174">You must always use relative endpoint addresses for IIS-hosted service endpoints.</span></span> <span data-ttu-id="fd622-175">エンドポイント アドレス ( など) を完全修飾して`http://localhost/MyService.svc`指定すると、エンドポイント アドレスが、エンドポイントを公開するサービスをホストする IIS アプリケーションを指していない場合、サービスの展開でエラーが発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="fd622-175">Supplying a fully-qualified endpoint address (for example, `http://localhost/MyService.svc`) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint.</span></span> <span data-ttu-id="fd622-176">ホストされるサービスに相対エンドポイント アドレスを使用すると、このような競合が回避されます。</span><span class="sxs-lookup"><span data-stu-id="fd622-176">Using relative endpoint addresses for hosted services avoids these potential conflicts.</span></span>

### <a name="available-transports"></a><span data-ttu-id="fd622-177">利用可能なトランスポート</span><span class="sxs-lookup"><span data-stu-id="fd622-177">Available Transports</span></span>

<span data-ttu-id="fd622-178">IIS 5.1 および IIS 6.0 でホストされる WCF サービスは、HTTP ベースの通信を使用するように制限されています。</span><span class="sxs-lookup"><span data-stu-id="fd622-178">WCF services hosted in IIS 5.1 and IIS 6.0 are restricted to using HTTP-based communication.</span></span> <span data-ttu-id="fd622-179">これらの IIS プラットフォームでホストされるサービスで、非 HTTP バインドを使用するように構成すると、サービスをアクティブ化するときにエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="fd622-179">On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation.</span></span> <span data-ttu-id="fd622-180">IIS 7.0 では、サポートされるトランスポートには、HTTP、Net.TCP、Net.Pipe、Net.MSMQ、および msmq.formatname が含まれます。</span><span class="sxs-lookup"><span data-stu-id="fd622-180">For IIS 7.0, the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.</span></span>

### <a name="http-transport-security"></a><span data-ttu-id="fd622-181">HTTP トランスポート セキュリティ</span><span class="sxs-lookup"><span data-stu-id="fd622-181">HTTP Transport Security</span></span>

<span data-ttu-id="fd622-182">IIS でホストされる WCF サービスは、サービスを含む IIS 仮想ディレクトリがこれらの設定をサポートしている限り、HTTP トランスポート セキュリティ (たとえば、基本認証、ダイジェスト認証、Windows 統合認証などの HTTPS 認証スキーム) を使用できます。</span><span class="sxs-lookup"><span data-stu-id="fd622-182">IIS-hosted WCF services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings.</span></span> <span data-ttu-id="fd622-183">ホストされるエンドポイントのバインディングでの HTTP トランスポート セキュリティ設定は、そのエンドポイントを格納する IIS 仮想ディレクトリでのトランスポート セキュリティ設定と一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fd622-183">The HTTP Transport Security settings on a hosted endpoint’s binding must match the transport security settings on the IIS virtual directory that contains it.</span></span>

<span data-ttu-id="fd622-184">たとえば、HTTP ダイジェスト認証を使用するように構成された WCF エンドポイントは、HTTP ダイジェスト認証を許可するように構成されている IIS 仮想ディレクトリに存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fd622-184">For example, a WCF endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication.</span></span> <span data-ttu-id="fd622-185">IIS 設定と WCF エンドポイント設定の組み合わせが一致しない場合、サービスのアクティブ化中にエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="fd622-185">Unmatched combinations of IIS settings and WCF endpoint settings result in an error during service activation.</span></span>

## <a name="see-also"></a><span data-ttu-id="fd622-186">関連項目</span><span class="sxs-lookup"><span data-stu-id="fd622-186">See also</span></span>

- [<span data-ttu-id="fd622-187">インターネット インフォメーション サービスでのホスティング</span><span class="sxs-lookup"><span data-stu-id="fd622-187">Hosting in Internet Information Services</span></span>](hosting-in-internet-information-services.md)
- [<span data-ttu-id="fd622-188">インターネット インフォメーション サービス ホスティングのベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="fd622-188">Internet Information Services Hosting Best Practices</span></span>](internet-information-services-hosting-best-practices.md)
- <span data-ttu-id="fd622-189">[AppFabric のホスティング機能](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="fd622-189">[Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>
