---
title: '方法: SecurityBindingElement を使用してカスタム バインドを作成する'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- security [WCF], creating custom bindings
ms.assetid: 203a9f9e-3a73-427c-87aa-721c56265b29
ms.openlocfilehash: 15fdd50b05bd2217cb9819373cd1c015da52b15b
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/09/2020
ms.locfileid: "84599010"
---
# <a name="how-to-create-a-custom-binding-using-the-securitybindingelement"></a><span data-ttu-id="6f1e2-102">方法: SecurityBindingElement を使用してカスタム バインドを作成する</span><span class="sxs-lookup"><span data-stu-id="6f1e2-102">How to: Create a Custom Binding Using the SecurityBindingElement</span></span>
<span data-ttu-id="6f1e2-103">Windows Communication Foundation (WCF) には、構成できるシステム指定のバインディングがいくつか用意されていますが、WCF がサポートするすべてのセキュリティオプションを構成するときに完全な柔軟性は提供されません。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-103">Windows Communication Foundation (WCF) includes several system-provided bindings that can be configured but do not provide full flexibility when configuring all the security options that WCF supports.</span></span> <span data-ttu-id="6f1e2-104">ここでは、個別のバインド要素からカスタム バインディングを直接作成する方法を説明し、このようなバインディングを作成する場合に指定できるセキュリティ設定のいくつかに焦点を当てます。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-104">This topic demonstrates how to create a custom binding directly from individual binding elements and highlights some of the security settings that can be specified when creating such a binding.</span></span> <span data-ttu-id="6f1e2-105">カスタムバインディングの作成の詳細については、「[バインディングの拡張](../extending/extending-bindings.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-105">For more information about creating custom bindings, see [Extending Bindings](../extending/extending-bindings.md).</span></span>  
  
> [!WARNING]
> <span data-ttu-id="6f1e2-106"><xref:System.ServiceModel.Channels.SecurityBindingElement> では、<xref:System.ServiceModel.Channels.IDuplexSessionChannel> が <xref:System.ServiceModel.TransferMode> に設定されている場合に TCP トランスポートによって使用される既定のチャネル形状である <xref:System.ServiceModel.TransferMode.Buffered> チャネル形状をサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-106"><xref:System.ServiceModel.Channels.SecurityBindingElement> does not support the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> channel shape, which is the default channel shape use by the TCP transport when <xref:System.ServiceModel.TransferMode> is set to <xref:System.ServiceModel.TransferMode.Buffered>.</span></span> <span data-ttu-id="6f1e2-107">このシナリオで <xref:System.ServiceModel.TransferMode> を使用するには、<xref:System.ServiceModel.TransferMode.Streamed> を <xref:System.ServiceModel.Channels.SecurityBindingElement> に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-107">You must set <xref:System.ServiceModel.TransferMode> to <xref:System.ServiceModel.TransferMode.Streamed> in order to use <xref:System.ServiceModel.Channels.SecurityBindingElement> in this scenario.</span></span>  
  
## <a name="creating-a-custom-binding"></a><span data-ttu-id="6f1e2-108">カスタム バインドの作成</span><span class="sxs-lookup"><span data-stu-id="6f1e2-108">Creating a Custom Binding</span></span>  
 <span data-ttu-id="6f1e2-109">WCF では、すべてのバインドは*バインド要素*で構成されます。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-109">In WCF all bindings are made up of *binding elements*.</span></span> <span data-ttu-id="6f1e2-110">各バインド要素は <xref:System.ServiceModel.Channels.BindingElement> クラスから派生します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-110">Each binding element derives from the <xref:System.ServiceModel.Channels.BindingElement> class.</span></span> <span data-ttu-id="6f1e2-111">標準のシステム指定のバインディングの場合、バインド要素は自動的に作成および構成されます。ただし、プロパティ設定の一部はカスタマイズが可能です。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-111">For the standard system-provided bindings, the binding elements are created and configured for you, although you can customize some of the property settings.</span></span>  
  
 <span data-ttu-id="6f1e2-112">これに対し、カスタム バインドを作成する場合は、バインド要素が作成および構成され、そのバインド要素から <xref:System.ServiceModel.Channels.CustomBinding> が作成されます。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-112">In contrast, to create a custom binding, binding elements are created and configured and a <xref:System.ServiceModel.Channels.CustomBinding> is created from the binding elements.</span></span>  
  
 <span data-ttu-id="6f1e2-113">これを行うには、<xref:System.ServiceModel.Channels.BindingElementCollection> クラスのインスタンスによって表されるコレクションに個別のバインド要素を追加し、`Elements` の `CustomBinding` プロパティをそのオブジェクトと同じにします。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-113">To do this, you add the individual binding elements to a collection represented by an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class, and then set the `Elements` property of the `CustomBinding` equal to that object.</span></span> <span data-ttu-id="6f1e2-114">バインド要素は、トランザクション フロー、信頼できるセッション、セキュリティ、複合二重、一方向、ストリーム セキュリティ、メッセージ エンコーディング、トランスポートの順に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-114">You must add the binding elements in the following order: Transaction Flow, Reliable Session, Security, Composite Duplex, One-way, Stream Security, Message Encoding, and Transport.</span></span> <span data-ttu-id="6f1e2-115">どのバインディングでも、これらすべてのバインド要素が必要になるとは限りません。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-115">Note that not all the binding elements listed are required in every binding.</span></span>  
  
## <a name="securitybindingelement"></a><span data-ttu-id="6f1e2-116">SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-116">SecurityBindingElement</span></span>  
 <span data-ttu-id="6f1e2-117">3 つのバインド要素がメッセージ レベルのセキュリティに関連しており、これらはすべて <xref:System.ServiceModel.Channels.SecurityBindingElement> クラスから派生します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-117">Three binding elements relate to message level security, all of which derive from the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.</span></span> <span data-ttu-id="6f1e2-118">この 3 つのバインディングとは、<xref:System.ServiceModel.Channels.TransportSecurityBindingElement>、<xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>、および <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> です。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-118">The three are <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>, <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>, and <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>.</span></span> <span data-ttu-id="6f1e2-119"><xref:System.ServiceModel.Channels.TransportSecurityBindingElement> は混合モード セキュリティを提供するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-119">The <xref:System.ServiceModel.Channels.TransportSecurityBindingElement> is used to provide Mixed mode security.</span></span> <span data-ttu-id="6f1e2-120">他の 2 つの要素は、メッセージ層でセキュリティを提供する場合に使用します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-120">The other two elements are used when the message layer provides security.</span></span>  
  
 <span data-ttu-id="6f1e2-121">トランスポート レベルのセキュリティが提供される場合は、次の追加のクラスが使用されます。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-121">Additional classes are used when transport level security is provided:</span></span>  
  
- <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>  
  
- <xref:System.ServiceModel.Channels.SslStreamSecurityBindingElement>  
  
- <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement>  
  
## <a name="required-binding-elements"></a><span data-ttu-id="6f1e2-122">必要なバインド要素</span><span class="sxs-lookup"><span data-stu-id="6f1e2-122">Required Binding Elements</span></span>  
 <span data-ttu-id="6f1e2-123">1 つのバインディングに結合できる可能性のあるバインド要素は多数存在します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-123">There are a large number of possible binding elements that can be combined into a binding.</span></span> <span data-ttu-id="6f1e2-124">これらの組み合わせすべてが有効なわけではありません。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-124">Not all of these combinations are valid.</span></span> <span data-ttu-id="6f1e2-125">ここでは、セキュリティ バインディングに存在する必要のある要素について説明します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-125">This section describes the required elements that must be present in a security binding.</span></span>  
  
 <span data-ttu-id="6f1e2-126">有効なセキュリティ バインディングは、次のような多くの要因に依存します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-126">Valid security bindings depend on many factors, including the following:</span></span>  
  
- <span data-ttu-id="6f1e2-127">セキュリティ モード</span><span class="sxs-lookup"><span data-stu-id="6f1e2-127">Security mode.</span></span>  
  
- <span data-ttu-id="6f1e2-128">トランスポート プロトコル</span><span class="sxs-lookup"><span data-stu-id="6f1e2-128">Transport protocol.</span></span>  
  
- <span data-ttu-id="6f1e2-129">コントラクトに指定されているメッセージ交換パターン (MEP)</span><span class="sxs-lookup"><span data-stu-id="6f1e2-129">The message exchange pattern (MEP) specified in the contract.</span></span>  
  
 <span data-ttu-id="6f1e2-130">前述の要因の各組み合わせに有効なバインド要素のスタックの構成を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-130">The following table shows the valid binding element stack configurations for each combination of the preceding factors.</span></span> <span data-ttu-id="6f1e2-131">これらは最小限の要件であることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-131">Note that these are minimal requirements.</span></span> <span data-ttu-id="6f1e2-132">メッセージ エンコーディング バインド要素、トランザクション バインド要素などの追加のバインド要素をバインディングに追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-132">You can add additional binding elements to the binding, such as message encoding binding elements, transaction binding elements, and other binding elements.</span></span>  
  
|<span data-ttu-id="6f1e2-133">セキュリティ モード</span><span class="sxs-lookup"><span data-stu-id="6f1e2-133">Security Mode</span></span>|<span data-ttu-id="6f1e2-134">トランスポート</span><span class="sxs-lookup"><span data-stu-id="6f1e2-134">Transport</span></span>|<span data-ttu-id="6f1e2-135">コントラクトのメッセージ交換パターン</span><span class="sxs-lookup"><span data-stu-id="6f1e2-135">Contract Message Exchange Pattern</span></span>|<span data-ttu-id="6f1e2-136">コントラクトのメッセージ交換パターン</span><span class="sxs-lookup"><span data-stu-id="6f1e2-136">Contract Message Exchange Pattern</span></span>|<span data-ttu-id="6f1e2-137">コントラクトのメッセージ交換パターン</span><span class="sxs-lookup"><span data-stu-id="6f1e2-137">Contract Message Exchange Pattern</span></span>|  
|-------------------|---------------|---------------------------------------|---------------------------------------|---------------------------------------|  
|||`Datagram`|`Request Reply`|`Duplex`|  
|<span data-ttu-id="6f1e2-138">トランスポート</span><span class="sxs-lookup"><span data-stu-id="6f1e2-138">Transport</span></span>|<span data-ttu-id="6f1e2-139">Https</span><span class="sxs-lookup"><span data-stu-id="6f1e2-139">Https</span></span>||||  
|||<span data-ttu-id="6f1e2-140">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-140">OneWayBindingElement</span></span>|||  
|||<span data-ttu-id="6f1e2-141">HttpsTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-141">HttpsTransportBindingElement</span></span>|<span data-ttu-id="6f1e2-142">HttpsTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-142">HttpsTransportBindingElement</span></span>||  
||<span data-ttu-id="6f1e2-143">TCP</span><span class="sxs-lookup"><span data-stu-id="6f1e2-143">TCP</span></span>||||  
|||<span data-ttu-id="6f1e2-144">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-144">OneWayBindingElement</span></span>|||  
|||<span data-ttu-id="6f1e2-145">SSL または Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-145">SSL or Windows StreamSecurityBindingElement</span></span>|<span data-ttu-id="6f1e2-146">SSL または Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-146">SSL or Windows StreamSecurityBindingElement</span></span>|<span data-ttu-id="6f1e2-147">SSL または Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-147">SSL or Windows StreamSecurityBindingElement</span></span>|  
|||<span data-ttu-id="6f1e2-148">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-148">TcpTransportBindingElement</span></span>|<span data-ttu-id="6f1e2-149">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-149">TcpTransportBindingElement</span></span>|<span data-ttu-id="6f1e2-150">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-150">TcpTransportBindingElement</span></span>|  
|<span data-ttu-id="6f1e2-151">Message</span><span class="sxs-lookup"><span data-stu-id="6f1e2-151">Message</span></span>|<span data-ttu-id="6f1e2-152">Http</span><span class="sxs-lookup"><span data-stu-id="6f1e2-152">Http</span></span>|<span data-ttu-id="6f1e2-153">SymmetricSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-153">SymmetricSecurityBindingElement</span></span>|<span data-ttu-id="6f1e2-154">SymmetricSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-154">SymmetricSecurityBindingElement</span></span>|<span data-ttu-id="6f1e2-155">SymmetricSecurityBindingElement (認証モード = SecureConversation)</span><span class="sxs-lookup"><span data-stu-id="6f1e2-155">SymmetricSecurityBindingElement (authentication mode = SecureConversation)</span></span>|  
|||||<span data-ttu-id="6f1e2-156">CompositeDuplexBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-156">CompositeDuplexBindingElement</span></span>|  
|||<span data-ttu-id="6f1e2-157">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-157">OneWayBindingElement</span></span>||<span data-ttu-id="6f1e2-158">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-158">OneWayBindingElement</span></span>|  
|||<span data-ttu-id="6f1e2-159">HttpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-159">HttpTransportBindingElement</span></span>|<span data-ttu-id="6f1e2-160">HttpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-160">HttpTransportBindingElement</span></span>|<span data-ttu-id="6f1e2-161">HttpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-161">HttpTransportBindingElement</span></span>|  
||<span data-ttu-id="6f1e2-162">Tcp</span><span class="sxs-lookup"><span data-stu-id="6f1e2-162">Tcp</span></span>|<span data-ttu-id="6f1e2-163">SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-163">SecurityBindingElement</span></span>|<span data-ttu-id="6f1e2-164">SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-164">SecurityBindingElement</span></span>|<span data-ttu-id="6f1e2-165">SymmetricSecurityBindingElement (認証モード = SecureConversation)</span><span class="sxs-lookup"><span data-stu-id="6f1e2-165">SymmetricSecurityBindingElement (authentication mode = SecureConversation)</span></span>|  
|||<span data-ttu-id="6f1e2-166">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-166">TcpTransportBindingElement</span></span>|<span data-ttu-id="6f1e2-167">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-167">TcpTransportBindingElement</span></span>|<span data-ttu-id="6f1e2-168">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-168">TcpTransportBindingElement</span></span>|  
|<span data-ttu-id="6f1e2-169">混合 (メッセージ資格情報付きトランスポート)</span><span class="sxs-lookup"><span data-stu-id="6f1e2-169">Mixed (transport with message credentials)</span></span>|<span data-ttu-id="6f1e2-170">Https</span><span class="sxs-lookup"><span data-stu-id="6f1e2-170">Https</span></span>|<span data-ttu-id="6f1e2-171">TransportSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-171">TransportSecurityBindingElement</span></span>|<span data-ttu-id="6f1e2-172">TransportSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-172">TransportSecurityBindingElement</span></span>||  
|||<span data-ttu-id="6f1e2-173">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-173">OneWayBindingElement</span></span>|||  
|||<span data-ttu-id="6f1e2-174">HttpsTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-174">HttpsTransportBindingElement</span></span>|<span data-ttu-id="6f1e2-175">HttpsTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-175">HttpsTransportBindingElement</span></span>||  
||<span data-ttu-id="6f1e2-176">TCP</span><span class="sxs-lookup"><span data-stu-id="6f1e2-176">TCP</span></span>|<span data-ttu-id="6f1e2-177">TransportSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-177">TransportSecurityBindingElement</span></span>|<span data-ttu-id="6f1e2-178">SymmetricSecurityBindingElement (認証モード = SecureConversation)</span><span class="sxs-lookup"><span data-stu-id="6f1e2-178">SymmetricSecurityBindingElement (authentication mode = SecureConversation)</span></span>|<span data-ttu-id="6f1e2-179">SymmetricSecurityBindingElement (認証モード = SecureConversation)</span><span class="sxs-lookup"><span data-stu-id="6f1e2-179">SymmetricSecurityBindingElement (authentication mode = SecureConversation)</span></span>|  
|||<span data-ttu-id="6f1e2-180">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-180">OneWayBindingElement</span></span>|||  
|||<span data-ttu-id="6f1e2-181">SSL または Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-181">SSL or Windows StreamSecurityBindingElement</span></span>|<span data-ttu-id="6f1e2-182">SSL または Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-182">SSL or Windows StreamSecurityBindingElement</span></span>|<span data-ttu-id="6f1e2-183">SSL または Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-183">SSL or Windows StreamSecurityBindingElement</span></span>|  
|||<span data-ttu-id="6f1e2-184">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-184">TcpTransportBindingElement</span></span>|<span data-ttu-id="6f1e2-185">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-185">TcpTransportBindingElement</span></span>|<span data-ttu-id="6f1e2-186">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="6f1e2-186">TcpTransportBindingElement</span></span>|  
  
 <span data-ttu-id="6f1e2-187">SecurityBindingElements には構成可能な設定が多数あることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-187">Note that there are many configurable settings on the SecurityBindingElements.</span></span> <span data-ttu-id="6f1e2-188">詳細については、「[認証モード](securitybindingelement-authentication-modes.md)の使用」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-188">For more information, see [SecurityBindingElement Authentication Modes](securitybindingelement-authentication-modes.md).</span></span>  
  
 <span data-ttu-id="6f1e2-189">詳細については、「[セキュリティで保護された通信とセッション](secure-conversations-and-secure-sessions.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-189">For more information, see [Secure Conversations and Secure Sessions](secure-conversations-and-secure-sessions.md).</span></span>  
  
## <a name="procedures"></a><span data-ttu-id="6f1e2-190">手順</span><span class="sxs-lookup"><span data-stu-id="6f1e2-190">Procedures</span></span>  
  
#### <a name="to-create-a-custom-binding-that-uses-a-symmetricsecuritybindingelement"></a><span data-ttu-id="6f1e2-191">SymmetricSecurityBindingElement を使用するカスタム バインディングを作成するには</span><span class="sxs-lookup"><span data-stu-id="6f1e2-191">To create a custom binding that uses a SymmetricSecurityBindingElement</span></span>  
  
1. <span data-ttu-id="6f1e2-192"><xref:System.ServiceModel.Channels.BindingElementCollection> クラスのインスタンスを `outputBec` という名前で作成します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-192">Create an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class with the name `outputBec`.</span></span>  
  
2. <span data-ttu-id="6f1e2-193">静的メソッド `M:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement(true)` を呼び出します。このメソッドは、<xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> クラスのインスタンスを返します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-193">Call the static method `M:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement(true)`, which returns an instance of the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> class.</span></span>  
  
3. <span data-ttu-id="6f1e2-194"><xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> クラスの `outputBec` の `Add` メソッドを呼び出して、<xref:System.Collections.ObjectModel.Collection%601> をコレクション (<xref:System.ServiceModel.Channels.BindingElement>) に追加します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-194">Add the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the collection (`outputBec`) by calling the `Add` method of the <xref:System.Collections.ObjectModel.Collection%601> of <xref:System.ServiceModel.Channels.BindingElement> class.</span></span>  
  
4. <span data-ttu-id="6f1e2-195"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> クラスのインスタンスを作成し、これをコレクション (`outputBec`) に追加します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-195">Create an instance of the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> class and add it to the collection (`outputBec`).</span></span> <span data-ttu-id="6f1e2-196">これにより、バインディングによって使用されるエンコーディングが指定されます。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-196">This specifies the encoding used by the binding.</span></span>  
  
5. <span data-ttu-id="6f1e2-197"><xref:System.ServiceModel.Channels.HttpTransportBindingElement> を作成し、これをコレクション (`outputBec`) に追加します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-197">Create a <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and add it to the collection (`outputBec`).</span></span> <span data-ttu-id="6f1e2-198">これにより、バインディングが HTTP トランスポートを使用することが指定されます。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-198">This specifies that the binding uses the HTTP transport.</span></span>  
  
6. <span data-ttu-id="6f1e2-199"><xref:System.ServiceModel.Channels.CustomBinding> クラスのインスタンスを作成し、コレクション `outputBec` をコンストラクターに渡して、新規のカスタム バインドを作成します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-199">Create a new custom binding by creating an instance of the <xref:System.ServiceModel.Channels.CustomBinding> class and passing the collection `outputBec` to the constructor.</span></span>  
  
7. <span data-ttu-id="6f1e2-200">作成されたカスタム バインドは、標準の <xref:System.ServiceModel.WSHttpBinding> と同じ特性を数多く共有しています。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-200">The resulting custom binding shares many of the same characteristics as the standard <xref:System.ServiceModel.WSHttpBinding>.</span></span> <span data-ttu-id="6f1e2-201">カスタム バインディングではメッセージ レベルのセキュリティと Windows 資格情報が指定されていますが、セキュリティで保護されたセッションは無効になっているため、サービス資格情報が帯域外で指定される必要があり、また署名も暗号化されません。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-201">It specifies message-level security and Windows credentials but disables secure sessions, requires that the service credential be specified out-of-band, and does not encrypt signatures.</span></span> <span data-ttu-id="6f1e2-202">署名の暗号化は、<xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A> プロパティを手順 4. で示したように設定することでのみ制御できます。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-202">The last can be controlled only by setting the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A> property as shown in step 4.</span></span> <span data-ttu-id="6f1e2-203">他の 2 つについては、標準バインディングの設定を使用することで制御できます。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-203">The other two can be controlled using settings on the standard binding.</span></span>  
  
## <a name="example"></a><span data-ttu-id="6f1e2-204">例</span><span class="sxs-lookup"><span data-stu-id="6f1e2-204">Example</span></span>  
  
### <a name="description"></a><span data-ttu-id="6f1e2-205">説明</span><span class="sxs-lookup"><span data-stu-id="6f1e2-205">Description</span></span>  
 <span data-ttu-id="6f1e2-206">次の例では、<xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> を使用するカスタム バインドを作成する関数全体を示します。</span><span class="sxs-lookup"><span data-stu-id="6f1e2-206">The following example provides a complete function to create a custom binding that uses a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span></span>  
  
### <a name="code"></a><span data-ttu-id="6f1e2-207">コード</span><span class="sxs-lookup"><span data-stu-id="6f1e2-207">Code</span></span>  
 [!code-csharp[c_CustomBinding#20](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#20)]
 [!code-vb[c_CustomBinding#20](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_custombinding/vb/source.vb#20)]  
  
## <a name="see-also"></a><span data-ttu-id="6f1e2-208">関連項目</span><span class="sxs-lookup"><span data-stu-id="6f1e2-208">See also</span></span>

- <xref:System.ServiceModel.Channels.SecurityBindingElement>
- <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>
- <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>
- <xref:System.ServiceModel.Channels.CustomBinding>
- [<span data-ttu-id="6f1e2-209">バインディングの拡張</span><span class="sxs-lookup"><span data-stu-id="6f1e2-209">Extending Bindings</span></span>](../extending/extending-bindings.md)
- [<span data-ttu-id="6f1e2-210">システム標準のバインディング</span><span class="sxs-lookup"><span data-stu-id="6f1e2-210">System-Provided Bindings</span></span>](../system-provided-bindings.md)
