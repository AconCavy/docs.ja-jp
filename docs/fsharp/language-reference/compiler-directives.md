---
title: コンパイラ ディレクティブ
description: 'F # 言語のプリプロセッサディレクティブ、条件付きコンパイルディレクティブ、行ディレクティブ、およびコンパイラディレクティブについて説明します。'
ms.date: 12/10/2018
f1_keywords:
- '#endif_FS'
ms.openlocfilehash: c3e1a07e0e09b5ae090c550368f8a9f8ee575bfb
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/15/2020
ms.locfileid: "90557321"
---
# <a name="compiler-directives"></a>コンパイラ ディレクティブ

このトピックでは、プロセッサ ディレクティブとコンパイラ ディレクティブについて説明します。

## <a name="preprocessor-directives"></a>プリプロセッサ ディレクティブ

プリプロセッサ ディレクティブは、# シンボルで始まり、独立した行に記述されます。 プリプロセッサ ディレクティブは、コンパイラ自体の前に実行されるプリプロセッサにより解釈されます。

次の表に、F# で使用できるプリプロセッサ ディレクティブの一覧を示します。

|ディレクティブ|説明|
|---------|-----------|
|`#if`*シンボル*|条件付きコンパイルをサポートします。 シンボルが定義されている場合、の後にあるセクションのコードが `#if` 含まれます。 *symbol* 記号は、で否定することもでき `!` ます。|
|`#else`|条件付きコンパイルをサポートします。 前の `#if` で使用したシンボルが定義されていない場合に含めるコードのセクションをマークします。|
|`#endif`|条件付きコンパイルをサポートします。 コードの条件付きセクションの末尾をマークします。|
|`#`直線 *int*、<br/>`#`直線 *int* *文字列*、<br/>`#`直線 *int* *逐語的文字列*|デバッグ用に、元のソース コードの行とファイル名を示します。 この機能は、F# ソース コードを生成するツール用に用意されています。|
|`#nowarn`*警告コード*|コンパイラ警告を無効にします。 警告を無効にするには、コンパイラ出力で警告の番号を確認し、その番号を引用符で囲んで指定します。 "FS" プレフィックスを省略します。 1 つの行で複数の警告番号を無効にするには、それぞれの番号を引用符で囲んだうえで各文字列をスペースで区切ります。 次に例を示します。

`#nowarn "9" "40"`

警告を無効にした場合の影響は、ファイル全体 (ディレクティブの前にあるファイルの部分を含む) に適用されます |。

## <a name="conditional-compilation-directives"></a>条件付きコンパイル ディレクティブ

これらのディレクティブのいずれかによって非アクティブ化されたコードは、Visual Studio Code エディターでは淡色表示になります。

> [!NOTE]
> 条件付きコンパイル ディレクティブの動作は、他の言語と同じではありません。 たとえば、シンボルを含むブール式を使用することはできません。また、`true` および `false` には特別な意味はありません。 `if` ディレクティブで使用するシンボルは、コマンド ラインまたはプロジェクト設定で定義する必要があります。`define` プリプロセッサ ディレクティブは存在しません。

次のコードは、`#if` ディレクティブ、`#else` ディレクティブ、および `#endif` ディレクティブの使用例を示しています。 この例では、`function1` の定義の 2 つのバージョンがコードに含まれています。 `VERSION1` [-Define コンパイラオプション](./compiler-options.md)を使用してを定義すると、ディレクティブとディレクティブの間のコード `#if` `#else` がアクティブ化されます。 それ以外の場合、`#else` と `#endif` の間にあるコードがアクティブになります。

[!code-fsharp[Main](~/samples/snippets/fsharp/lang-ref-2/snippet7301.fs)]

F# には、`#define` プリプロセッサ ディレクティブはありません。 `#if` ディレクティブで使用するシンボルを定義するには、コンパイラ オプションまたはプロジェクト設定を使用する必要があります。

条件付きコンパイル ディレクティブは、入れ子にすることができます。 プリプロセッサ ディレクティブでは、インデントに意味はありません。

また、シンボルをで反転させることもでき `!` ます。 この例では、文字列の値は、デバッグ _されていない_ 場合にのみ使用されます。

```fsharp
#if !DEBUG
let str = "Not debugging!"
#else
let str = "Debugging!"
#endif
```

## <a name="line-directives"></a>行ディレクティブ

ビルド時にコンパイラは、各エラーが発生した行番号を参照して、F# コード内のエラーを報告します。 これらの行番号は、ファイル内の最初の行から 1 で始まります。 ただし、別のツールから F# ソース コードを生成している場合、生成されたコードの行番号は、通常、重要ではありません。これは、生成された F# コード内のエラーは、別のソースから発生する可能性が高いためです。 `#line` ディレクティブを使用すると、F# ソース コードを生成するツールの作成者が、元の行番号およびソース ファイルに関する情報を、生成された F# コードに渡すことができます。

`#line` ディレクティブを使用する場合、ファイル名を引用符で囲む必要があります。 パスでバックスラッシュ文字を使用するには、文字列の前に逐語的トークン (`@`) がある場合を除き、バックスラッシュ文字をエスケープする必要があります。エスケープするには、バックスラッシュ文字を 1 つではなく、2 つ使用します。 有効な行トークンを次に示します。 これらの例では、ツールを使用して元のファイル `Script1` を実行したときに F# コード ファイルが自動生成され、これらのディレクティブがある位置のコードが `Script1` ファイルの 25 行目のトークンから生成されるものと仮定します。

[!code-fsharp[Main](~/samples/snippets/fsharp/lang-ref-2/snippet7303.fs)]

これらのトークンは、この場所で生成された F# コードが、`Script1` 内の行 `25` またはその近くにあるなんらかの構成要素から派生したことを示します。

## <a name="compiler-directives"></a>コンパイラ ディレクティブ

コンパイラ ディレクティブは、# 記号で始まるという点でプリプロセッサ ディレクティブに似ていますが、プリプロセッサが解釈するのではなく、コンパイラが解釈して対応できるように放置されます。

次の表に、F# で使用できるコンパイラ ディレクティブの一覧を示します。

|ディレクティブ|説明|
|---------|-----------|
|`#light` ["on" &#124; "off"]|他のバージョンの ML との互換性を保つために、軽量構文を有効または無効にします。 既定では、軽量構文は有効です。 冗語構文は常に有効です。 したがって、軽量構文と冗語構文の両方を使用できます。 ディレクティブ `#light` は `#light "on"` と同等です。 `#light "off"` を指定した場合は、すべての言語構成要素に冗語構文を使用する必要があります。 F# のドキュメント内の構文は、軽量構文の使用を前提として記述されています。 詳細については、「 [Verbose 構文](verbose-syntax.md)」を参照してください。|

インタープリター (fsi.exe) のディレクティブについては、「 [F # を使用した対話型プログラミング](../tutorials/fsharp-interactive/index.md)」を参照してください。

## <a name="see-also"></a>関連項目

- [F# 言語リファレンス](index.md)
- [コンパイラ オプション](compiler-options.md)
