---
title: .NET Compiler Platform SDK (Roslyn API)
description: .NET Compiler Platform SDK (Roslyn API とも呼ばれます) を使用して、.NET コードを理解し、エラーを見つけて、そのエラーを修正する方法について説明します。
ms.date: 10/10/2017
ms.custom: mvc
ms.openlocfilehash: a1ceb1d11cf846e67be2c6558978e01133e591da
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2020
ms.locfileid: "76742742"
---
# <a name="the-net-compiler-platform-sdk"></a><span data-ttu-id="2ed74-103">.NET Compiler Platform SDK</span><span class="sxs-lookup"><span data-stu-id="2ed74-103">The .NET Compiler Platform SDK</span></span>

<span data-ttu-id="2ed74-104">コンパイラでは、コードの構文とセマンティクスを検証するように、アプリケーション コードの詳細なモデルをビルドします。</span><span class="sxs-lookup"><span data-stu-id="2ed74-104">Compilers build a detailed model of application code as they validate the syntax and semantics of that code.</span></span> <span data-ttu-id="2ed74-105">このモデルを使用して、ソース コードから実行可能な出力をビルドします。</span><span class="sxs-lookup"><span data-stu-id="2ed74-105">They use this model to build the executable output from the source code.</span></span> <span data-ttu-id="2ed74-106">.NET Compiler Platform SDK では、このモデルへのアクセスが提供されます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-106">The .NET Compiler Platform SDK provides access to this model.</span></span> <span data-ttu-id="2ed74-107">Microsoft では、生産性を向上させるために、IntelliSense、リファクタリング、インテリジェントな名前の変更、"すべての参照の検索"、"定義へ移動" などの統合開発環境 (IDE) 機能をますます使用するようになっています。</span><span class="sxs-lookup"><span data-stu-id="2ed74-107">Increasingly, we rely on integrated development environment (IDE) features such as IntelliSense, refactoring, intelligent rename, "Find all references," and "Go to definition" to increase our productivity.</span></span> <span data-ttu-id="2ed74-108">コードの品質を向上させるためにコード分析ツールを使用し、アプリケーションの構築に役立てるためにコード ジェネレーターを使用します。</span><span class="sxs-lookup"><span data-stu-id="2ed74-108">We rely on code analysis tools to improve our code quality, and code generators to aid in application construction.</span></span> <span data-ttu-id="2ed74-109">これらのツールがスマートになったので、アプリケーション コードを処理するときに、コンパイラのみが作成するモデルにますますツールがアクセスする必要が生じます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-109">As these tools get smarter, they need access to more and more of the model that only compilers create as they process application code.</span></span> <span data-ttu-id="2ed74-110">これが Roslyn API の主要な目的です。ブラック ボックスを開いて、ツールとエンド ユーザーが豊富な情報コンパイラを共有することを許可するためにこのコードがあります。</span><span class="sxs-lookup"><span data-stu-id="2ed74-110">This is the core mission of the Roslyn APIs: opening up the black boxes and allowing tools and end users to share in the wealth of information compilers have about our code.</span></span>
<span data-ttu-id="2ed74-111">コンパイラは Roslyn の使用により、ソース コード イン、オブジェクト コード アウトの曖昧なトランスレーターではなく、次のようなプラットフォームになります。ツールとアプリケーションのコード関連のタスクで使用できる API。</span><span class="sxs-lookup"><span data-stu-id="2ed74-111">Instead of being opaque source-code-in and object-code-out translators, through Roslyn, compilers become platforms: APIs that you can use for code-related tasks in your tools and applications.</span></span>

## <a name="net-compiler-platform-sdk-concepts"></a><span data-ttu-id="2ed74-112">.NET Compiler Platform SDK の概念</span><span class="sxs-lookup"><span data-stu-id="2ed74-112">.NET Compiler Platform SDK concepts</span></span>

<span data-ttu-id="2ed74-113">.NET Compiler Platform SDK は、コードにフォーカスされたツールとアプリケーションの作成における参入障壁を劇的に低くします。</span><span class="sxs-lookup"><span data-stu-id="2ed74-113">The .NET Compiler Platform SDK dramatically lowers the barrier to entry for creating code focused tools and applications.</span></span> <span data-ttu-id="2ed74-114">これにより、メタプログラミング、コードの生成と変換、C# と Visual Basic 言語の対話型の使用、ドメイン固有の言語での C# と Visual Basic の埋め込みなどの領域で、多くのイノベーションの機会が生み出されます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-114">It creates many opportunities for innovation in areas such as meta-programming, code generation and transformation, interactive use of the C# and Visual Basic languages, and embedding of C# and Visual Basic in domain-specific languages.</span></span>

<span data-ttu-id="2ed74-115">.NET Compiler Platform SDK では、コードの誤りを見つける***アナライザー***と、修正する***コード修正機能***をビルドできます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-115">The .NET Compiler Platform SDK enables you to build ***analyzers*** and ***code fixes*** that find and correct coding mistakes.</span></span> <span data-ttu-id="2ed74-116">***アナライザー***では、構文とコードの構造を理解し、修正すべき慣用・誤実装・非推奨実装を検出します。</span><span class="sxs-lookup"><span data-stu-id="2ed74-116">***Analyzers*** understand the syntax and structure of code and detect practices that should be corrected.</span></span> <span data-ttu-id="2ed74-117">***コード修正機能***では、アナライザーによって検出されたコードの誤りに対処するために、1 つまたは複数の修正方法が提案されます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-117">***Code fixes*** provide one or more suggested fixes for addressing coding mistakes found by analyzers.</span></span> <span data-ttu-id="2ed74-118">通常、アナライザーと関連付けられているコード修正は、1 つのプロジェクトにまとめてパッケージ化されます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-118">Typically, an analyzer and the associated code fixes are packaged together in a single project.</span></span>

<span data-ttu-id="2ed74-119">アナライザーとコード修正機能では、スタティック分析を使用してコードを理解します。</span><span class="sxs-lookup"><span data-stu-id="2ed74-119">Analyzers and code fixes use static analysis to understand code.</span></span> <span data-ttu-id="2ed74-120">コードを実行したり、その他のテストのメリットを提供したりすることはありません。</span><span class="sxs-lookup"><span data-stu-id="2ed74-120">They do not run the code or provide other testing benefits.</span></span> <span data-ttu-id="2ed74-121">ただし、バグ、保守性の低いコード、または標準ガイドライン違反につながることが多い使用方法を指摘することができます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-121">They can, however, point out practices that often lead to bugs, unmaintainable code, or standard guideline violation.</span></span>

<span data-ttu-id="2ed74-122">.NET Compiler Platform SDK では、C# または Visual Basic のコードベースを調査および理解できる API のセットが 1 つ提供されます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-122">The .NET Compiler Platform SDK provides a single set of APIs that enable you to examine and understand a C# or Visual Basic codebase.</span></span> <span data-ttu-id="2ed74-123">この単一のコードベースを使用できるため、.NET Compiler Platform SDK によって提供される構文と意味の分析 API を利用して、簡単にアナライザーとコード修正機能を記述できます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-123">Because you can use this single codebase, you can write analyzers and code fixes more easily by leveraging the syntactic and semantic analysis APIs provided by the .NET Compiler Platform SDK.</span></span> <span data-ttu-id="2ed74-124">コンパイラによって行う分析を何度も繰り返している大規模なタスクから解放されると、プロジェクトやライブラリの一般的なコーディング エラーの検出と修正という、より集中したタスクに専念することができます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-124">Freed from the large task of replicating the analysis done by the compiler, you can concentrate on the more focused task of finding and fixing common coding errors for your project or library.</span></span>

<span data-ttu-id="2ed74-125">小さな利点として、独自のプロジェクトでコード解析機能を記述するよりも、Visual Studio で読み込んだほうがアナライザーとコード修正機能が小さくなり、使用するメモリがはるかに少なくなります。</span><span class="sxs-lookup"><span data-stu-id="2ed74-125">A smaller benefit is that your analyzers and code fixes are smaller and use much less memory when loaded in Visual Studio than they would if you wrote your own codebase to understand the code in a project.</span></span> <span data-ttu-id="2ed74-126">コンパイラと Visual Studio とで使用される同じクラスを利用して、独自の静的分析ツールを作成できます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-126">By leveraging the same classes used by the compiler and Visual Studio, you can create your own static analysis tools.</span></span> <span data-ttu-id="2ed74-127">つまり、チームは IDE のパフォーマンスに顕著な影響をあたえることなく、アナライザーとコード修正機能を使用できるということです。</span><span class="sxs-lookup"><span data-stu-id="2ed74-127">This means your team can use analyzers and code fixes without a noticeable impact on the IDE's performance.</span></span>

<span data-ttu-id="2ed74-128">アナライザーとコード修正機能の記述には、3 つの主なシナリオがあります。</span><span class="sxs-lookup"><span data-stu-id="2ed74-128">There are three main scenarios for writing analyzers and code fixes:</span></span>

1. [<span data-ttu-id="2ed74-129">*チームのコーディング標準を適用する*</span><span class="sxs-lookup"><span data-stu-id="2ed74-129">*Enforce team coding standards*</span></span>](#enforce-team-coding-standards)
1. [<span data-ttu-id="2ed74-130">*ライブラリ パッケージと共にガイダンスを提供する*</span><span class="sxs-lookup"><span data-stu-id="2ed74-130">*Provide guidance with library packages*</span></span>](#provide-guidance-with-library-packages)
1. [<span data-ttu-id="2ed74-131">*一般的なガイダンスを提供する*</span><span class="sxs-lookup"><span data-stu-id="2ed74-131">*Provide general guidance*</span></span>](#provide-general-guidance)

## <a name="enforce-team-coding-standards"></a><span data-ttu-id="2ed74-132">チームのコーディング標準を適用する</span><span class="sxs-lookup"><span data-stu-id="2ed74-132">Enforce team coding standards</span></span>

<span data-ttu-id="2ed74-133">多くのチームには、他のチーム メンバーとのコード レビューを介して適用されたコーディング標準があります。</span><span class="sxs-lookup"><span data-stu-id="2ed74-133">Many teams have coding standards that are enforced through code reviews with other team members.</span></span> <span data-ttu-id="2ed74-134">アナライザーとコード修正を使用すると、このプロセスの効率をさらに高めることができます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-134">Analyzers and code fixes can make this process much more efficient.</span></span> <span data-ttu-id="2ed74-135">開発者がチームの他のユーザーと作業を共有するときに、コード レビューが行われます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-135">Code reviews happen when a developer shares their work with others on the team.</span></span> <span data-ttu-id="2ed74-136">開発者はコメントを受け取る前に、新機能を完成させるために必要な投資を常に行うことになります。</span><span class="sxs-lookup"><span data-stu-id="2ed74-136">The developer will have invested all the time needed to complete a new feature before getting any comments.</span></span> <span data-ttu-id="2ed74-137">チームの慣行に合わない習慣を徹底するには、数週間かかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="2ed74-137">Weeks may go by while the developer reinforces habits that don't match the team's practices.</span></span>

<span data-ttu-id="2ed74-138">開発者がコードを記述すると同時にアナライザーは実行されます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-138">Analyzers run as a developer writes code.</span></span> <span data-ttu-id="2ed74-139">開発者は、すぐにガイダンスに従うように促す即時フィードバックを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="2ed74-139">The developer gets immediate feedback that encourages following the guidance immediately.</span></span> <span data-ttu-id="2ed74-140">開発者はプロトタイプの作成を始めるとすぐに、準拠したコードを記述する習慣を身に付けます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-140">The developer builds habits to write compliant code as soon as they begin prototyping.</span></span> <span data-ttu-id="2ed74-141">そのコードが人間によるコードレビューできるようになるときには、すべての標準的なガイダンスが適用されています。</span><span class="sxs-lookup"><span data-stu-id="2ed74-141">When the feature is ready for humans to review, all the standard guidance has been enforced.</span></span>

<span data-ttu-id="2ed74-142">チームは、チームのコーディング規約に違反している一般的な規約を探すアナライザーとコード修正機能をビルドできます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-142">Teams can build analyzers and code fixes that look for the most common practices that violate team coding practices.</span></span> <span data-ttu-id="2ed74-143">これらは標準を適用するために、各開発者のマシンにインストールできます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-143">These can be installed on each developer's machine to enforce the standards.</span></span>

## <a name="provide-guidance-with-library-packages"></a><span data-ttu-id="2ed74-144">ライブラリ パッケージと共にガイダンスを提供する</span><span class="sxs-lookup"><span data-stu-id="2ed74-144">Provide guidance with library packages</span></span>

<span data-ttu-id="2ed74-145">NuGet には .NET 開発者が使用できる豊富なライブラリがあります。</span><span class="sxs-lookup"><span data-stu-id="2ed74-145">There is a wealth of libraries available for .NET developers on NuGet.</span></span>
<span data-ttu-id="2ed74-146">それらは Microsoft から提供されたり、サード パーティの会社から提供されたり、コミュニティ メンバーやボランティアから提供されたものです。</span><span class="sxs-lookup"><span data-stu-id="2ed74-146">Some of these come from Microsoft, some from third-party companies, and others from community members and volunteers.</span></span> <span data-ttu-id="2ed74-147">開発者がこれらのライブラリを活用すると、ライブラリはより多く導入され、さらによいレビューを得ることができます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-147">These libraries get more adoption and higher reviews when developers can succeed with those libraries.</span></span>

<span data-ttu-id="2ed74-148">ドキュメントの提供のほか、ライブラリの一般的な誤用を見つけて修正するアナライザーとコード修正を提供できます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-148">In addition to providing documentation, you can provide analyzers and code fixes that find and correct common mis-uses of your library.</span></span> <span data-ttu-id="2ed74-149">これらの迅速な修正は、開発者が早く成功するために役立ちます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-149">These immediate corrections will help developers succeed more quickly.</span></span>

<span data-ttu-id="2ed74-150">NuGet 上の自分のライブラリを使用して、アナライザーとコード修正をパッケージ化することができます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-150">You can package analyzers and code fixes with your library on NuGet.</span></span> <span data-ttu-id="2ed74-151">このシナリオでは、お客様の NuGet パッケージをインストールする開発者もすべて、このアナライザー パッケージをインストールします。</span><span class="sxs-lookup"><span data-stu-id="2ed74-151">In that scenario, every developer who installs your NuGet package will also install the analyzer package.</span></span> <span data-ttu-id="2ed74-152">お客様のライブラリを使用しているすべての開発者が、誤りや修正案への即時フィードバックの形式で、お客様のチームからガイダンスをすぐに受け取ります。</span><span class="sxs-lookup"><span data-stu-id="2ed74-152">All developers using your library will immediately get guidance from your team in the form of immediate feedback on mistakes and suggested corrections.</span></span>

## <a name="provide-general-guidance"></a><span data-ttu-id="2ed74-153">一般的なガイダンスを提供する</span><span class="sxs-lookup"><span data-stu-id="2ed74-153">Provide general guidance</span></span>

<span data-ttu-id="2ed74-154">.NET 開発者コミュニティは、適切に動作するパターンと避けた方がよいパターンの経験によって見いだされました。</span><span class="sxs-lookup"><span data-stu-id="2ed74-154">The .NET developer community has discovered through experience patterns that work well and patterns that are best avoided.</span></span> <span data-ttu-id="2ed74-155">数人のコミュニティ メンバーが、推奨されるパターンを適用するアナライザーを作成しています。</span><span class="sxs-lookup"><span data-stu-id="2ed74-155">Several community members have created analyzers that enforce those recommended patterns.</span></span> <span data-ttu-id="2ed74-156">理解を深めると、常に新しいアイデアの余地が生まれます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-156">As we learn more, there is always room for new ideas.</span></span>

<span data-ttu-id="2ed74-157">これらのアナライザーは、[Visual Studio Marketplace](https://marketplace.visualstudio.com/vs) にアップロードしたり、Visual Studio を使用して開発者がダウンロードしたりすることができます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-157">These analyzers can be uploaded to the [Visual Studio Marketplace](https://marketplace.visualstudio.com/vs) and downloaded by developers using Visual Studio.</span></span> <span data-ttu-id="2ed74-158">言語とプラットフォームの初心者の方は承認済みのプラクティスをすばやく学習し、.NET 体験で生産性を早く向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-158">Newcomers to the language and the platform learn accepted practices quickly and become productive earlier in their .NET journey.</span></span> <span data-ttu-id="2ed74-159">これらが広く使われるようになると、コミュニティがこれらのプラクティスを導入します。</span><span class="sxs-lookup"><span data-stu-id="2ed74-159">As these become more widely used, the community adopts these practices.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2ed74-160">次の手順</span><span class="sxs-lookup"><span data-stu-id="2ed74-160">Next steps</span></span>

<span data-ttu-id="2ed74-161">.NET Compiler Platform SDK には、コードの生成、分析、リファクタリングを行うために、最新の言語オブジェクト モデルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="2ed74-161">The .NET Compiler Platform SDK includes the latest language object models for code generation, analysis, and refactoring.</span></span> <span data-ttu-id="2ed74-162">このセクションでは、.NET Compiler Platform SDK の概念的な概要を示します。</span><span class="sxs-lookup"><span data-stu-id="2ed74-162">This section provides a conceptual overview of the .NET Compiler Platform SDK.</span></span> <span data-ttu-id="2ed74-163">詳細については、クイックスタート、サンプル、チュートリアルのセクションで確認できます。</span><span class="sxs-lookup"><span data-stu-id="2ed74-163">Further details can be found in the quickstarts, samples, and tutorials sections.</span></span>

<span data-ttu-id="2ed74-164">.NET Compiler Platform SDK の概念の詳細については、次の 5 つのトピックを参照してください。</span><span class="sxs-lookup"><span data-stu-id="2ed74-164">You can learn more about the concepts in the .NET Compiler Platform SDK in these five topics:</span></span>

- [<span data-ttu-id="2ed74-165">構文ビジュアライザーでコードを調べる</span><span class="sxs-lookup"><span data-stu-id="2ed74-165">Explore code with the syntax visualizer</span></span>](syntax-visualizer.md)
- [<span data-ttu-id="2ed74-166">.NET Compiler Platform SDK の概念とオブジェクト モデル</span><span class="sxs-lookup"><span data-stu-id="2ed74-166">Understand the compiler API model</span></span>](compiler-api-model.md)
- [<span data-ttu-id="2ed74-167">構文の使用</span><span class="sxs-lookup"><span data-stu-id="2ed74-167">Work with syntax</span></span>](work-with-syntax.md)
- [<span data-ttu-id="2ed74-168">セマンティクスの使用</span><span class="sxs-lookup"><span data-stu-id="2ed74-168">Work with semantics</span></span>](work-with-semantics.md)
- [<span data-ttu-id="2ed74-169">ワークスペースの使用</span><span class="sxs-lookup"><span data-stu-id="2ed74-169">Work with a workspace</span></span>](work-with-workspace.md)

<span data-ttu-id="2ed74-170">まず **.NET Compiler Platform SDK** をインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="2ed74-170">To get started, you'll need to install the **.NET Compiler Platform SDK**:</span></span>

[!INCLUDE[interactive-note](~/includes/roslyn-installation.md)]

<!--

Turn this on as more of the conceptual content is in place:
- Try the [Quickstarts](quickstart/index.md) to create your first tutorial.
- Experiment with one of the [Tutorials](tutorials/index.md).
- Explore the [Samples](samples/index.md) to see some simple analyzers.
- Read the [Concepts](concepts/index.md) to understand the ideas behind analyzers and code fixes.

-->
