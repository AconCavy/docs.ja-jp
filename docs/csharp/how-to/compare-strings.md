---
title: 文字列を比較する方法 - C# ガイド
description: 大文字小文字の区別およびカルチャ固有の順序を使用してまたは使用せずに文字列値を比較および並べ替える方法について説明します。
ms.date: 10/03/2018
helpviewer_keywords:
- strings [C#], comparison
- comparing strings [C#]
ms.openlocfilehash: dda3ec8cb6a0131867e6ea3bb0cf7199d86058ff
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/14/2020
ms.locfileid: "73973319"
---
# <a name="how-to-compare-strings-in-c"></a><span data-ttu-id="3c7b9-103">C\# で文字列を比較する方法</span><span class="sxs-lookup"><span data-stu-id="3c7b9-103">How to compare strings in C\#</span></span>

<span data-ttu-id="3c7b9-104">文字列を比較して、次の 2 つの質問のいずれかに回答します。"これら 2 つの文字列は等しいですか"</span><span class="sxs-lookup"><span data-stu-id="3c7b9-104">You compare strings to answer one of two questions: "Are these two strings equal?"</span></span> <span data-ttu-id="3c7b9-105">または "これらを並べ替えるときにどのような順序でこれらの文字列を配置しますか"</span><span class="sxs-lookup"><span data-stu-id="3c7b9-105">or "In what order should these strings be placed when sorting them?"</span></span>

<span data-ttu-id="3c7b9-106">これら 2 つの質問は、文字列比較に影響する要因によって複雑になります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-106">Those two questions are complicated by factors that affect string comparisons:</span></span>

- <span data-ttu-id="3c7b9-107">序数に基づく比較または言語的な比較を選択することができます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-107">You can choose an ordinal or linguistic comparison.</span></span>
- <span data-ttu-id="3c7b9-108">大文字小文字が重要かどうかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-108">You can choose if case matters.</span></span>
- <span data-ttu-id="3c7b9-109">カルチャに固有の比較を選択できます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-109">You can choose culture-specific comparisons.</span></span>
- <span data-ttu-id="3c7b9-110">言語的な比較は、カルチャおよびプラットフォームに依存します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-110">Linguistic comparisons are culture and platform-dependent.</span></span>

[!INCLUDE[interactive-note](~/includes/csharp-interactive-note.md)]

<span data-ttu-id="3c7b9-111">文字列を比較するときに、それらの間で順序を定義します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-111">When you compare strings, you define an order among them.</span></span> <span data-ttu-id="3c7b9-112">比較は、文字列のシーケンスの並べ替えに使用されます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-112">Comparisons are used to sort a sequence of strings.</span></span> <span data-ttu-id="3c7b9-113">シーケンスが既知の順序の場合、ソフトウェアと人間の両方が簡単に検索できます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-113">Once the sequence is in a known order, it is easier to search, both for software and for humans.</span></span> <span data-ttu-id="3c7b9-114">その他の比較では、文字列が等しいかどうかを確認する場合があります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-114">Other comparisons may check if strings are the same.</span></span> <span data-ttu-id="3c7b9-115">これらの類似性チェックは等値に似ていますが、大文字小文字の違いなど、いくつかの違いは無視される場合があります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-115">These sameness checks are similar to equality, but some differences, such as case differences, may be ignored.</span></span>

## <a name="default-ordinal-comparisons"></a><span data-ttu-id="3c7b9-116">既定の序数の比較</span><span class="sxs-lookup"><span data-stu-id="3c7b9-116">Default ordinal comparisons</span></span>

<span data-ttu-id="3c7b9-117">既定では、最も一般的な操作は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-117">By default, the most common operations:</span></span>

- <xref:System.String.CompareTo%2A?displayProperty=nameWithType>
- <xref:System.String.Equals%2A?displayProperty=nameWithType>
- <span data-ttu-id="3c7b9-118"><xref:System.String.op_Equality%2A?displayProperty=nameWithType> と <xref:System.String.op_Inequality%2A?displayProperty=nameWithType>。つまり、それぞれ[等価演算子 `==` と `!=`](../language-reference/operators/equality-operators.md#string-equality)。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-118"><xref:System.String.op_Equality%2A?displayProperty=nameWithType> and <xref:System.String.op_Inequality%2A?displayProperty=nameWithType>, that is, [equality operators `==` and `!=`](../language-reference/operators/equality-operators.md#string-equality), respectively</span></span>

<span data-ttu-id="3c7b9-119">大文字と小文字を区別する序数の比較を実行し、必要に応じて現在のカルチャを使用します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-119">perform a case-sensitive ordinal comparison and, if necessary, use the current culture.</span></span> <span data-ttu-id="3c7b9-120">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-120">The following example demonstrates that:</span></span>

[!code-csharp-interactive[Comparing strings using an ordinal comparison](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#1)]

<span data-ttu-id="3c7b9-121">既定の序数の比較では、文字列を比較するときに言語の規則を考慮しません。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-121">The default ordinal comparison doesn't take linguistic rules into account when comparing strings.</span></span> <span data-ttu-id="3c7b9-122">2 つの文字列のそれぞれの <xref:System.Char> オブジェクトのバイナリ値を比較します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-122">It compares the binary value of each <xref:System.Char> object in two strings.</span></span> <span data-ttu-id="3c7b9-123">その結果、既定の序数の比較でも大文字と小文字が区別されます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-123">As a result, the default ordinal comparison is also case-sensitive.</span></span>

<span data-ttu-id="3c7b9-124"><xref:System.String.Equals%2A?displayProperty=nameWithType> と `==` および `!=` 演算子を使用した等価性のテストは、<xref:System.String.CompareTo%2A?displayProperty=nameWithType> と <xref:System.String.Compare(System.String,System.String)?displayProperty=nameWithType)> のメソッドを使用した文字列の比較とは異なります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-124">Note that the test for equality with <xref:System.String.Equals%2A?displayProperty=nameWithType> and the `==` and `!=` operators differs from string comparison using the <xref:System.String.CompareTo%2A?displayProperty=nameWithType> and <xref:System.String.Compare(System.String,System.String)?displayProperty=nameWithType)> methods.</span></span> <span data-ttu-id="3c7b9-125">等価性のテストでは大文字と小文字を区別する序数の比較が行われますが、比較メソッドでは大文字と小文字だけでなく、現在のカルチャを使用してカルチャを区別する比較が行われます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-125">While the tests for equality perform a case-sensitive ordinal comparison, the comparison methods perform a case-sensitive, culture-sensitive comparison using the current culture.</span></span> <span data-ttu-id="3c7b9-126">既定の比較メソッドでは多くの場合、さまざまな種類の比較が実行されるため、実行する比較の種類を明示的に指定するオーバーロードを呼び出して、コードの意図を常に明確にすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-126">Because the default comparison methods often perform different types of comparisons, we recommend that you always make the intent of your code clear by calling an overload that explicitly specifies the type of comparison to perform.</span></span>

## <a name="case-insensitive-ordinal-comparisons"></a><span data-ttu-id="3c7b9-127">大文字と小文字を区別しない、序数に基づく比較</span><span class="sxs-lookup"><span data-stu-id="3c7b9-127">Case-insensitive ordinal comparisons</span></span>

<span data-ttu-id="3c7b9-128"><xref:System.String.Equals(System.String,System.StringComparison)?displayProperty=nameWithType> メソッドでは、<xref:System.StringComparison> の <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> 値を指定して、</span><span class="sxs-lookup"><span data-stu-id="3c7b9-128">The <xref:System.String.Equals(System.String,System.StringComparison)?displayProperty=nameWithType> method enables you to specify a <xref:System.StringComparison> value of <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType></span></span>
<span data-ttu-id="3c7b9-129">大文字と小文字を区別しない、序数に基づく比較ができるようにします。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-129">for a case-insensitive ordinal comparison.</span></span> <span data-ttu-id="3c7b9-130"><xref:System.String.Compare(System.String,System.String,System.StringComparison)?displayProperty=nameWithType> 引数に <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> の値を指定すると、大文字と小文字を区別しない序数に基づく比較が実行される、静的な <xref:System.StringComparison> メソッドもあります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-130">There is also a static <xref:System.String.Compare(System.String,System.String,System.StringComparison)?displayProperty=nameWithType> method that performs a case-insensitive ordinal comparison if you specify a value of <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> for the <xref:System.StringComparison> argument.</span></span> <span data-ttu-id="3c7b9-131">これを次のコードに示します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-131">These are shown in the following code:</span></span>

[!code-csharp-interactive[Comparing strings ignoring case](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#2)]

<span data-ttu-id="3c7b9-132">大文字と小文字を区別しない、序数に基づく比較を実行すると、これらのメソッドでは[インバリアント カルチャ](xref:System.Globalization.CultureInfo.InvariantCulture)の大文字と小文字の区別が使用されます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-132">When performing a case-insensitive ordinal comparison, these methods use the casing conventions of the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture).</span></span>

## <a name="linguistic-comparisons"></a><span data-ttu-id="3c7b9-133">言語的な比較</span><span class="sxs-lookup"><span data-stu-id="3c7b9-133">Linguistic comparisons</span></span>

<span data-ttu-id="3c7b9-134">現在のカルチャの言語の規則を使用して文字列の順序を指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-134">Strings can also be ordered using linguistic rules for the current culture.</span></span>
<span data-ttu-id="3c7b9-135">これは、"単語の並べ替え順序" と呼ばれることもあります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-135">This is sometimes referred to as "word sort order."</span></span> <span data-ttu-id="3c7b9-136">言語的な比較を実行するときには、一部の英数字以外の Unicode 文字に、特別な重みが割り当てられる場合があります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-136">When you perform a linguistic comparison, some nonalphanumeric Unicode characters might have special weights assigned.</span></span> <span data-ttu-id="3c7b9-137">たとえば、ハイフン ("-") に割り当てられる重みは非常に小さいため、並べ替え順序で "coop" と "co-op" の出現位置が隣接します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-137">For example, the hyphen "-" may have a very small weight assigned to it so that "co-op" and "coop" appear next to each other in sort order.</span></span> <span data-ttu-id="3c7b9-138">さらに、いくつかの Unicode 文字が <xref:System.Char> インスタンスのシーケンスと等しくなる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-138">In addition, some Unicode characters may be equivalent to a sequence of <xref:System.Char> instances.</span></span> <span data-ttu-id="3c7b9-139">次の例では、ドイツ語で "They dance in the street" という語句を</span><span class="sxs-lookup"><span data-stu-id="3c7b9-139">The following example uses the phrase "They dance in the street."</span></span> <span data-ttu-id="3c7b9-140">一方の文字列では "ss" (U+0073 U+0073)、もう一方の文字列では 'ß' (U+00DF) を使って表しています。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-140">in German with the "ss" (U+0073 U+0073) in one string and 'ß' (U+00DF) in another.</span></span> <span data-ttu-id="3c7b9-141">言語的に (Windows では)、"en-US" と "de-DE" の両方のカルチャで、"ss" はドイツ語の Essetz: 'ß' 文字と同じです。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-141">Linguistically (in Windows), "ss" is equal to the German Esszet: 'ß' character in both the "en-US" and "de-DE" cultures.</span></span>

[!code-csharp-interactive[Comparing strings using linguistic rules](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#3)]

<span data-ttu-id="3c7b9-142">このサンプルでは、言語的な比較に依存するオペレーティング システムの性質を示します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-142">This sample demonstrates the operating system-dependent nature of linguistic comparisons.</span></span> <span data-ttu-id="3c7b9-143">対話型ウィンドウのホストは、Linux ホストです。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-143">The host for the interactive window is a Linux host.</span></span> <span data-ttu-id="3c7b9-144">言語比較および序数比較は、同じ結果を生成します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-144">The linguistic and ordinal comparisons produce the same results.</span></span> <span data-ttu-id="3c7b9-145">Windows ホストで同じこのサンプルを実行する場合、次の出力が表示されます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-145">If you ran this same sample on a Windows host, you would see the following output:</span></span>

```console
<coop> is less than <co-op> using invariant culture
<coop> is greater than <co-op> using ordinal comparison
<coop> is less than <cop> using invariant culture
<coop> is less than <cop> using ordinal comparison
<co-op> is less than <cop> using invariant culture
<co-op> is less than <cop> using ordinal comparison
```

<span data-ttu-id="3c7b9-146">Windows では、言語的な比較から序数に基づく比較に変更した場合に、"cop"、"coop"、および "co-op" の並べ替え順序は変更されます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-146">On Windows, the sort order of "cop", "coop", and "co-op" change when you change from a linguistic comparison to an ordinal comparison.</span></span> <span data-ttu-id="3c7b9-147">ドイツ語の 2 つの文も、異なる比較の種類を使用して異なる方法で比較されます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-147">The two German sentences also compare differently using the different comparison types.</span></span>

## <a name="comparisons-using-specific-cultures"></a><span data-ttu-id="3c7b9-148">特定のカルチャを使用した比較</span><span class="sxs-lookup"><span data-stu-id="3c7b9-148">Comparisons using specific cultures</span></span>

<span data-ttu-id="3c7b9-149">このサンプルでは en-US と de-DE のカルチャの <xref:System.Globalization.CultureInfo> オブジェクトを格納しています。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-149">This sample stores <xref:System.Globalization.CultureInfo> objects for the en-US and de-DE cultures.</span></span>
<span data-ttu-id="3c7b9-150">比較は、カルチャ固有の比較を確保するために <xref:System.Globalization.CultureInfo> オブジェクトを使用して実行されます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-150">The comparisons are performed using a <xref:System.Globalization.CultureInfo> object to ensure a culture-specific comparison.</span></span>

<span data-ttu-id="3c7b9-151">使用されるカルチャは言語的な比較に影響します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-151">The culture used affects linguistic comparisons.</span></span> <span data-ttu-id="3c7b9-152">次の例は、"en-US" カルチャと "de-DE" カルチャを使用する 2 つのドイツ語の文の比較の結果を示しています。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-152">The following example shows the results of comparing the two German sentences using the "en-US" culture and the "de-DE" culture:</span></span>

[!code-csharp-interactive[Comparing strings across cultures](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#4)]

<span data-ttu-id="3c7b9-153">カルチャに依存した比較は、一般的にユーザーによる文字列入力とユーザーによる他の文字列入力の比較および並べ替えに使用されます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-153">Culture-sensitive comparisons are typically used to compare and sort strings input by users with other strings input by users.</span></span> <span data-ttu-id="3c7b9-154">これらの文字列の文字および並べ替え規則は、ユーザーのコンピューターのロケールによって異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-154">The characters and sorting conventions of these strings might vary depending on the locale of the user's computer.</span></span> <span data-ttu-id="3c7b9-155">同一の文字を含む文字列でも、現在のスレッドのカルチャに応じて、異なる方法で並べ替えられます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-155">Even strings that contain identical characters might sort differently depending on the culture of the current thread.</span></span> <span data-ttu-id="3c7b9-156">さらに、Windows コンピューターでローカルでこのサンプル コードを試すと、次の結果が表示されます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-156">In addition, try this sample code locally on a Windows machine, and you will the following results:</span></span>

```console
<coop> is less than <co-op> using en-US culture
<coop> is greater than <co-op> using ordinal comparison
<coop> is less than <cop> using en-US culture
<coop> is less than <cop> using ordinal comparison
<co-op> is less than <cop> using en-US culture
<co-op> is less than <cop> using ordinal comparison
```

<span data-ttu-id="3c7b9-157">言語的な比較は、現在のカルチャに依存し、OS に依存します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-157">Linguistic comparisons are dependent on the current culture, and are OS dependent.</span></span> <span data-ttu-id="3c7b9-158">文字列の比較を使用する場合は、これを考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-158">You must take that into account when you work with string comparisons.</span></span>

## <a name="linguistic-sorting-and-searching-strings-in-arrays"></a><span data-ttu-id="3c7b9-159">配列の言語的な並べ替えと文字列の検索</span><span class="sxs-lookup"><span data-stu-id="3c7b9-159">Linguistic sorting and searching strings in arrays</span></span>

<span data-ttu-id="3c7b9-160">次の例は、現在のカルチャに依存する言語的な比較を使用して、配列内の文字列を並べ替えおよび検索する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-160">The following examples show how to sort and search for strings in an array using a linguistic comparison dependent on the current culture.</span></span> <span data-ttu-id="3c7b9-161"><xref:System.Array> パラメーターを取得する静的な <xref:System.StringComparer?displayProperty=nameWithType> メソッドを使用します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-161">You use the static <xref:System.Array> methods that take a <xref:System.StringComparer?displayProperty=nameWithType> parameter.</span></span>

<span data-ttu-id="3c7b9-162">この例では、現在のカルチャを使用して文字列の配列を並べ替える方法を示します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-162">This example shows how to sort an array of strings using the current culture:</span></span>

[!code-csharp-interactive[Sorting an array of strings](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#5)]

<span data-ttu-id="3c7b9-163">配列が並べ替えられた後は、バイナリ検索を使用してエントリを検索できます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-163">Once the array is sorted, you can search for entries using a binary search.</span></span> <span data-ttu-id="3c7b9-164">バイナリ検索は、コレクションの中央で開始され、要求された文字列がコレクションのどちらの半分に含まれているかを判断します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-164">A binary search starts in the middle of the collection to determine which half of the collection would contain the sought string.</span></span> <span data-ttu-id="3c7b9-165">各後続の比較は、半分にコレクションの残りの部分を半分に細分化します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-165">Each subsequent comparison subdivides the remaining part of the collection in half.</span></span>  <span data-ttu-id="3c7b9-166">配列は <xref:System.StringComparer.CurrentCulture?displayProperty=nameWithType> を使用して並べ替えられます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-166">The array is sorted using the <xref:System.StringComparer.CurrentCulture?displayProperty=nameWithType>.</span></span> <span data-ttu-id="3c7b9-167">ローカル関数 `ShowWhere` は、文字列が見つかった場所に関する情報を表示します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-167">The local function `ShowWhere` displays information about where the string was found.</span></span> <span data-ttu-id="3c7b9-168">文字列が見つからなかった場合、返された値は、見つからなかった場合にどこにあるべきかを示します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-168">If the string was not found, the returned value indicates where it would be if it were found.</span></span>

[!code-csharp-interactive[Searching in a sorted array](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#6)]

## <a name="ordinal-sorting-and-searching-in-collections"></a><span data-ttu-id="3c7b9-169">コレクションの序数に基づく並べ替えと検索</span><span class="sxs-lookup"><span data-stu-id="3c7b9-169">Ordinal sorting and searching in collections</span></span>

<span data-ttu-id="3c7b9-170">次のコードでは、<xref:System.Collections.Generic.List%601?displayProperty=nameWithType> コレクション クラスを使用して文字列を格納します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-170">The following code uses the <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> collection class to store strings.</span></span> <span data-ttu-id="3c7b9-171">文字列は、<xref:System.Collections.Generic.List%601.Sort%2A?displayProperty=nameWithType> メソッドを使用して並べ替えられます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-171">The strings are sorted using the <xref:System.Collections.Generic.List%601.Sort%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="3c7b9-172">このメソッドでは、2 つの文字列の順序を比較するデリゲートが必要です。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-172">This method needs a delegate that compares and orders two strings.</span></span> <span data-ttu-id="3c7b9-173"><xref:System.String.CompareTo%2A?displayProperty=nameWithType> メソッドは、その比較関数を提供します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-173">The <xref:System.String.CompareTo%2A?displayProperty=nameWithType> method provides that comparison function.</span></span> <span data-ttu-id="3c7b9-174">このサンプルを実行し、順序を確認します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-174">Run the sample and observe the order.</span></span> <span data-ttu-id="3c7b9-175">この並べ替え操作では、大文字小文字を区別する序数の並べ替えを使用します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-175">This sort operation uses an ordinal case sensitive sort.</span></span> <span data-ttu-id="3c7b9-176">静的な <xref:System.String.Compare%2A?displayProperty=nameWithType> メソッドを使用し、別の比較規則を指定します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-176">You would use the static <xref:System.String.Compare%2A?displayProperty=nameWithType> methods to specify different comparison rules.</span></span>

[!code-csharp-interactive[Sorting a list of strings](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#7)]

<span data-ttu-id="3c7b9-177">並べ替えられたら、バイナリ検索を使用して文字列の一覧を検索できます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-177">Once sorted, the list of strings can be searched using a binary search.</span></span> <span data-ttu-id="3c7b9-178">次の例では、同じ比較関数を使用して、並べ替えられた一覧を検索する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-178">The following sample shows how to search the sorted listed using the same comparison function.</span></span> <span data-ttu-id="3c7b9-179">ローカル関数 `ShowWhere` は、要求されたテキストの場所、またはあるべき場所を示します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-179">The local function `ShowWhere` shows where the sought text is or would be:</span></span>

[!code-csharp-interactive[csProgGuideStrings#11](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#8)]

<span data-ttu-id="3c7b9-180">並べ替えと検索に常に同じ種類の比較を使用してください。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-180">Always make sure to use the same type of comparison for sorting and searching.</span></span> <span data-ttu-id="3c7b9-181">並べ替えと検索に異なる種類の比較を使用すると、予期しない結果になります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-181">Using different comparison types for sorting and searching produces unexpected results.</span></span>

<span data-ttu-id="3c7b9-182"><xref:System.Collections.Hashtable?displayProperty=nameWithType>、<xref:System.Collections.Generic.Dictionary%602?displayProperty=nameWithType>、および <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> などのコレクション クラスには、要素またはキーの種類が <xref:System.StringComparer?displayProperty=nameWithType> の場合、`string` パラメーターを取るコンストラクターが用意されています。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-182">Collection classes such as <xref:System.Collections.Hashtable?displayProperty=nameWithType>, <xref:System.Collections.Generic.Dictionary%602?displayProperty=nameWithType>, and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> have constructors that take a <xref:System.StringComparer?displayProperty=nameWithType> parameter when the type of the elements or keys is `string`.</span></span> <span data-ttu-id="3c7b9-183">通常は、これらのコンストラクターをできるだけ使用し、<xref:System.StringComparer.Ordinal?displayProperty=nameWithType> または <xref:System.StringComparer.OrdinalIgnoreCase?displayProperty=nameWithType> を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-183">In general, you should use these constructors whenever possible, and specify either <xref:System.StringComparer.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparer.OrdinalIgnoreCase?displayProperty=nameWithType>.</span></span>

## <a name="reference-equality-and-string-interning"></a><span data-ttu-id="3c7b9-184">参照の等価性と文字列インターン</span><span class="sxs-lookup"><span data-stu-id="3c7b9-184">Reference equality and string interning</span></span>

<span data-ttu-id="3c7b9-185">どの例でも <xref:System.Object.ReferenceEquals%2A> を使用していません。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-185">None of the samples have used <xref:System.Object.ReferenceEquals%2A>.</span></span> <span data-ttu-id="3c7b9-186">このメソッドは、2 つの文字列が同じオブジェクトかどうかを判断します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-186">This method determines if two strings are the same object.</span></span> <span data-ttu-id="3c7b9-187">これは、文字列比較で一貫性のない結果につながる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-187">This can lead to inconsistent results in string comparisons.</span></span> <span data-ttu-id="3c7b9-188">次の例は、C# の*文字列のインターン*機能を示しています。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-188">The following example demonstrates the *string interning* feature of C#.</span></span> <span data-ttu-id="3c7b9-189">プログラムで 2 つ以上の同じ文字列変数を宣言すると、コンパイラはそれらをすべて同じ場所に保管します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-189">When a program declares two or more identical string variables, the compiler stores them all in the same location.</span></span> <span data-ttu-id="3c7b9-190"><xref:System.Object.ReferenceEquals%2A> メソッドを呼び出すと、2 つの文字列がメモリ内の同じオブジェクトを実際に参照していることを確認できます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-190">By calling the <xref:System.Object.ReferenceEquals%2A> method, you can see that the two strings actually refer to the same object in memory.</span></span> <span data-ttu-id="3c7b9-191">インターン処理を回避するには、<xref:System.String.Copy%2A?displayProperty=nameWithType> メソッドを使用します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-191">Use the <xref:System.String.Copy%2A?displayProperty=nameWithType> method to avoid interning.</span></span> <span data-ttu-id="3c7b9-192">コピーが行われた後、同じ値が含まれていても、2 つの文字列は別の記憶場所を使用します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-192">After the copy has been made, the two strings have different storage locations, even though they have the same value.</span></span> <span data-ttu-id="3c7b9-193">次の例を実行し、文字列 `a` と `b` が*インターン処理される*ことを示します。これは、同じ記憶域を共有することを意味します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-193">Run the following sample to show that strings `a` and `b` are *interned* meaning they share the same storage.</span></span> <span data-ttu-id="3c7b9-194">文字列 `a` と `c` は異なります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-194">The strings `a` and `c` are not.</span></span>

[!code-csharp-interactive[Demonstrating string interning](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#9)]

> [!NOTE]
> <span data-ttu-id="3c7b9-195">文字列の等価をテストする場合、実行する比較の種類を明示的に指定するメソッドを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-195">When you test for equality of strings, you should use the methods that explicitly specify what kind of comparison you intend to perform.</span></span> <span data-ttu-id="3c7b9-196">コードを保守しやすく、読みやすくすることができます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-196">Your code is much more maintainable and readable.</span></span> <span data-ttu-id="3c7b9-197"><xref:System.String?displayProperty=nameWithType> 列挙パラメーターを取る <xref:System.Array?displayProperty=nameWithType> および <xref:System.StringComparison> クラスのメソッドのオーバーロードを使用します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-197">Use the overloads of the methods of the <xref:System.String?displayProperty=nameWithType> and <xref:System.Array?displayProperty=nameWithType> classes that take a <xref:System.StringComparison> enumeration parameter.</span></span> <span data-ttu-id="3c7b9-198">実行する比較の種類を指定します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-198">You specify which type of comparison to perform.</span></span> <span data-ttu-id="3c7b9-199">等価をテストするときには、`==` および `!=` 演算子を使用しないでください。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-199">Avoid using the `==` and `!=` operators when you test for equality.</span></span> <span data-ttu-id="3c7b9-200"><xref:System.String.CompareTo%2A?displayProperty=nameWithType> インスタンス メソッドは常に、序数に基づいた大文字小文字を区別する比較を実行します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-200">The <xref:System.String.CompareTo%2A?displayProperty=nameWithType> instance methods always perform an ordinal case-sensitive comparison.</span></span> <span data-ttu-id="3c7b9-201">これらは、文字列をアルファベット順に並べ替える場合に適しています。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-201">They are primarily suited for ordering strings alphabetically.</span></span>

<span data-ttu-id="3c7b9-202"><xref:System.String.Intern%2A?displayProperty=nameWithType> メソッドを呼び出すことで、文字列をインターンしたり、既存のインターンされた文字列への参照を取得したりできます。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-202">You can intern a string or retrieve a reference to an existing interned string by calling the <xref:System.String.Intern%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="3c7b9-203">文字列がインターンされているかどうかを確認するには、<xref:System.String.IsInterned%2A?displayProperty=nameWithType> メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="3c7b9-203">To determine whether a string is interned, call the <xref:System.String.IsInterned%2A?displayProperty=nameWithType> method.</span></span>

## <a name="see-also"></a><span data-ttu-id="3c7b9-204">参照</span><span class="sxs-lookup"><span data-stu-id="3c7b9-204">See also</span></span>

- <xref:System.Globalization.CultureInfo?displayProperty=nameWithType>
- <xref:System.StringComparer?displayProperty=nameWithType>
- [<span data-ttu-id="3c7b9-205">文字列</span><span class="sxs-lookup"><span data-stu-id="3c7b9-205">Strings</span></span>](../programming-guide/strings/index.md)
- [<span data-ttu-id="3c7b9-206">文字列の比較</span><span class="sxs-lookup"><span data-stu-id="3c7b9-206">Comparing Strings</span></span>](../../standard/base-types/comparing.md)
- [<span data-ttu-id="3c7b9-207">アプリケーションのグローバライズとローカライズ</span><span class="sxs-lookup"><span data-stu-id="3c7b9-207">Globalizing and Localizing Applications</span></span>](/visualstudio/ide/globalizing-and-localizing-applications)
