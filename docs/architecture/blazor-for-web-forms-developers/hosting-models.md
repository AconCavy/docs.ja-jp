---
title: ブレイザアプリホスティングモデル
description: WebAssembly 上のブラウザーやサーバー上など、Blazor アプリをホストするさまざまな方法について説明します。
author: danroth27
ms.author: daroth
ms.date: 09/11/2019
ms.openlocfilehash: 77a022b01efba01038790c9601ea03f315a28fdf
ms.sourcegitcommit: d9470d8b2278b33108332c05224d86049cb9484b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2020
ms.locfileid: "81607933"
---
# <a name="blazor-app-hosting-models"></a>ブレイザアプリホスティングモデル

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

Blazor アプリは、Web フォーム アプリと同様に IIS でホストASP.NETできます。 Blazor アプリは、次のいずれかの方法でホストすることもできます。

- Web アセンブリのブラウザーでクライアント側。
- ASP.NET コア アプリのサーバー側。

## <a name="blazor-webassembly-apps"></a>ブラゾールウェブアセンブリアプリ

Blazor WebAssembly アプリは、WebAssembly ベースの .NET ランタイムでブラウザーで直接実行されます。 Blazor WebAssembly アプリは、Angular や React などのフロントエンド JavaScript フレームワークと同様の方法で機能します。 ただし、JavaScript を記述する代わりに C# を記述します。 NET ランタイムは、アプリアセンブリおよび必要な依存関係とともに、アプリとともにダウンロードされます。 ブラウザのプラグインや拡張機能は必要ありません。

ダウンロードされたアセンブリは、他の .NET アプリで使用するアセンブリと同様に、通常の .NET アセンブリです。 ランタイムは .NET 標準をサポートしているため、既存の .NET 標準ライブラリを Blazor WebAssembly アプリで使用できます。 ただし、これらのアセンブリは、ブラウザーのセキュリティ サンドボックスで実行されます。 一部の機能は<xref:System.PlatformNotSupportedException>、ファイルシステムへのアクセスや任意のネットワーク接続のオープンなど、 をスローする場合があります。

アプリが読み込まれると、.NET ランタイムが起動され、アプリ アセンブリがポイントされます。 アプリの起動ロジックが実行され、ルート コンポーネントがレンダリングされます。 Blazor は、コンポーネントからのレンダリングされた出力に基づいて UI の更新を計算します。 その後、DOM の更新プログラムが適用されます。

![Blazor WebAssembly](media/hosting-models/blazor-webassembly.png)

Blazor WebAssembly アプリは純粋にクライアント側で実行されます。 このようなアプリは、GitHub ページや Azure 静的 Web サイト ホスティングなどの静的サイト ホスティング ソリューションにデプロイできます。 .NET はサーバー上でまったく必要ありません。 アプリの一部へのディープ リンクには、通常、サーバー上のルーティング ソリューションが必要です。 ルーティング ソリューションは、アプリのルートに要求をリダイレクトします。 たとえば、このリダイレクトは IIS の URL 書き換え規則を使用して処理できます。

Blazor およびフルスタックの .NET Web 開発のすべての利点を得るために、ASP.NETコアで Blazor WebAssembly アプリをホストします。 クライアントとサーバーの両方で .NET を使用すると、コードを簡単に共有し、一貫性のある言語、フレームワーク、ツールの 1 つのセットを使用してアプリをビルドできます。 Blazor は、Blazor WebAssembly アプリと ASP.NET コア ホスト プロジェクトの両方を含むソリューションを設定するための便利なテンプレートを提供します。 ソリューションがビルドされると、Blazor アプリから構築された静的ファイルは、フォールバック ルーティングが既に設定されている ASP.NET Core アプリによってホストされます。

## <a name="blazor-server-apps"></a>ブレイザサーバーアプリ

[Blazor アーキテクチャ](architecture-comparison.md#blazor)の説明から、Blazor コンポーネントは、出力を`RenderTree`. 次に、Blazor フレームワークは、レンダリングされたものと以前にレンダリングされたものを比較します。 この違いは DOM に適用されます。 Blazor コンポーネントは、レンダリングされた出力の適用方法から切り離されます。 したがって、コンポーネント自体は、UI を更新するプロセスと同じプロセスで実行する必要はありません。 実際、彼らは同じマシンで実行する必要はありません。

Blazor Server アプリでは、コンポーネントはブラウザのクライアント側ではなくサーバー上で実行されます。 ブラウザーで発生する UI イベントは、リアルタイム接続を介してサーバーに送信されます。 イベントは、正しいコンポーネントインスタンスに送出されます。 コンポーネントがレンダリングされ、計算された UI diff がシリアル化され、DOM に適用されるブラウザーに送信されます。

![Blazor サーバー](media/hosting-models/blazor-server.png)

AJAX と<xref:System.Web.UI.UpdatePanel>コントロールを使用した場合、Blazor サーバーホスティング モデルは、よく知ASP.NET聞こえるかもしれません。 コントロール`UpdatePanel`は、ページ上のトリガー イベントに応答して、部分的なページ更新を適用します。 トリガーされると、部分的な`UpdatePanel`更新を要求し、ページを更新する必要なく適用します。 UI の状態は を使用`ViewState`して管理されます。 Blazor Server アプリは、アプリがクライアントとのアクティブな接続を必要とするという小さい違いです。 さらに、すべての UI 状態はサーバー上で維持されます。 これらの違いのほかに、2 つのモデルは概念的に似ています。

## <a name="how-to-choose-the-right-blazor-hosting-model"></a>適切なブラゾールホスティングモデルを選択する方法

[Blazor ホスティング モデルドキュメント](/aspnet/core/blazor/hosting-models)で説明されているように、異なる Blazor ホスティング モデルにはトレードオフが異なります。

Blazor WebAssembly ホスティング モデルには、次の利点があります。

- .NET サーバー側の依存関係はありません。 アプリは、クライアントにダウンロードした後、完全に機能しています。
- クライアントのリソースと機能は完全に活用されます。
- 作業はサーバーからクライアントにオフロードされます。
- ASP.NET Core Web サーバーは、アプリをホストする必要はありません。 サーバーレスの展開シナリオが可能です (CDN からアプリを提供するなど)。

Blazor WebAssembly ホスティング モデルの欠点は次のとおりです。

- ブラウザーの機能は、アプリを制限します。
- 対応するクライアント ハードウェアとソフトウェア (WebAssembly のサポートなど) が必要です。
- ダウンロードサイズが大きくなり、アプリの読み込みに時間がかかります。
- .NET ランタイムとツールのサポートは、成熟が少ないです。 たとえば[、.NET Standard](../../standard/net-standard.md)のサポートとデバッグには制限があります。

逆に、Blazor サーバー ホスティング モデルには、次の利点があります。

- ダウンロード サイズはクライアント側のアプリよりもはるかに小さく、アプリの読み込み速度が大幅に向上します。
- このアプリは、.NET Core 互換 API の使用を含め、サーバー機能を最大限に活用します。
- サーバー上の .NET Core を使用してアプリを実行するため、デバッグなどの既存の .NET ツールは期待どおりに動作します。
- シン クライアントがサポートされています。 たとえば、サーバー側アプリは、WebAssembly をサポートしないブラウザーやリソースに制約のあるデバイスで動作します。
- アプリのコンポーネント コードを含む、アプリの .NET/C# コード ベースは、クライアントに提供されません。

Blazor サーバー ホスティング モデルの欠点は次のとおりです。

- UI の遅延が高くなります。 すべてのユーザーの操作には、ネットワーク ホップが含まれます。
- オフラインサポートはありません。 クライアント接続に失敗すると、アプリは動作を停止します。
- スケーラビリティは、多くのユーザーを持つアプリにとって困難です。 サーバーは、複数のクライアント接続を管理し、クライアントの状態を処理する必要があります。
- アプリを提供するには、ASP.NETコア サーバーが必要です。 サーバーレスの展開シナリオは不可能です。 たとえば、CDN からアプリを提供することはできません。

上記のトレードオフの一覧は、威圧的かもしれませんが、ホスティング モデルは後で変更できます。 選択した Blazor ホスティング モデルに関係なく、コンポーネント モデルは*同じです*。 原則として、同じコンポーネントをどちらのホスト モデルでも使用できます。 アプリコードは変更されません。ただし、コンポーネントがモデルに依存しないホストを維持できるように、抽象化を導入することをお勧めします。 抽象化により、アプリは別のホスティング モデルをより簡単に採用できます。

## <a name="deploy-your-app"></a>アプリをデプロイする

ASP.NET Web フォーム アプリは、通常、Windows Server コンピューターまたはクラスター上の IIS でホストされます。 Blazor アプリは次のこともできます。

- 静的ファイルまたはASP.NETコア アプリとして、IIS でホストされます。
- さまざまなプラットフォームやサーバー インフラストラクチャでホストされるcoreの柔軟性をASP.NET活用します。 たとえば、Linux で[Nginx](/aspnet/core/host-and-deploy/linux-nginx)または[Apache](/aspnet/core/host-and-deploy/linux-apache)を使用して Blazor アプリをホストできます。 Blazor アプリを公開および展開する方法の詳細については、Blazor[のホスティングとデプロイ](/aspnet/core/host-and-deploy/blazor/)に関するドキュメントを参照してください。

次のセクションでは、Blazor WebAssembly と Blazor サーバー アプリのプロジェクトがどのように設定されているかを見ていきます。

>[!div class="step-by-step"]
>[前へ](architecture-comparison.md)
>[次へ](project-structure.md)
