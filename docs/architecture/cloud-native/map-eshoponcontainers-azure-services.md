---
title: eShopOnContainers を Azure サービスにマッピングする
description: Azure Kubernetes Service、API Gateway、Azure Service Bus などの Azure サービスへの eShopOnContainers のマッピング。
ms.date: 06/30/2019
ms.openlocfilehash: eb37be94461a5373afe328572a94892dec50432d
ms.sourcegitcommit: 13e79efdbd589cad6b1de634f5d6b1262b12ab01
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/28/2020
ms.locfileid: "76781212"
---
# <a name="mapping-eshoponcontainers-to-azure-services"></a><span data-ttu-id="6bd7b-103">eShopOnContainers を Azure サービスにマッピングする</span><span class="sxs-lookup"><span data-stu-id="6bd7b-103">Mapping eShopOnContainers to Azure Services</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="6bd7b-104">必須ではありませんが、Azure は eShopOnContainers のサポートに適しています。これは、プロジェクトがクラウドネイティブアプリケーションとして構築されたためです。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-104">Although not required, Azure is well-suited to supporting the eShopOnContainers because the project was built to be a cloud-native application.</span></span> <span data-ttu-id="6bd7b-105">アプリケーションは .NET Core を使用して構築されているため、Docker ホストに応じて Linux または Windows コンテナーで実行できます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-105">The application is built with .NET Core, so it can run on Linux or Windows containers depending on the Docker host.</span></span> <span data-ttu-id="6bd7b-106">アプリケーションは複数の自律マイクロサービスで構成され、それぞれに独自のデータがあります。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-106">The application is made up of multiple autonomous microservices, each with its own data.</span></span> <span data-ttu-id="6bd7b-107">さまざまなマイクロサービスは、単純な CRUD 操作から複雑な DDD や CQRS パターンまで、さまざまなアプローチを紹介しています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-107">The different microservices showcase different approaches, ranging from simple CRUD operations to more complex DDD and CQRS patterns.</span></span> <span data-ttu-id="6bd7b-108">マイクロサービスは、HTTP 経由でクライアントと通信し、メッセージベースの通信を介して相互に通信します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-108">Microservices communicate with clients over HTTP and with one another via message-based communication.</span></span> <span data-ttu-id="6bd7b-109">アプリケーションでは、標準の通信プロトコルとして HTTP を採用し、Android、iOS、Windows の各プラットフォームで実行される ASP.NET Core および Xamarin mobile アプリを含むため、クライアントの複数のプラットフォームもサポートしています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-109">The application supports multiple platforms for clients as well, since it adopts HTTP as a standard communication protocol and includes ASP.NET Core and Xamarin mobile apps that run on Android, iOS, and Windows platforms.</span></span>

<span data-ttu-id="6bd7b-110">図2-5 に、アプリケーションのアーキテクチャを示します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-110">The application's architecture is shown in Figure 2-5.</span></span> <span data-ttu-id="6bd7b-111">左側にはクライアントアプリがあり、モバイル、従来の Web、および Web シングルページアプリケーション (SPA) のフレーバーに分割されています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-111">On the left are the client apps, broken up into mobile, traditional Web, and Web Single Page Application (SPA) flavors.</span></span> <span data-ttu-id="6bd7b-112">右側には、システムを構成するサーバー側コンポーネントがあります。各コンポーネントは、Docker コンテナーと Kubernetes クラスターでホストできます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-112">On the right are the server-side components that make up the system, each of which can be hosted in Docker containers and Kubernetes clusters.</span></span> <span data-ttu-id="6bd7b-113">従来の web アプリには、黄色で示されている ASP.NET Core MVC アプリケーションが搭載されています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-113">The traditional web app is powered by the ASP.NET Core MVC application shown in yellow.</span></span> <span data-ttu-id="6bd7b-114">このアプリとモバイルおよび web SPA アプリケーションは、1つまたは複数の API ゲートウェイを介して個々のマイクロサービスと通信します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-114">This app and the mobile and web SPA applications communicate with the individual microservices through one or more API gateways.</span></span> <span data-ttu-id="6bd7b-115">API ゲートウェイは、"バックエンドのフロントエンド" (BFF) パターンに従います。つまり、各ゲートウェイは、特定のフロントエンドクライアントをサポートするように設計されています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-115">The API gateways follow the "backends for front ends" (BFF) pattern, meaning that each gateway is designed to support a given front-end client.</span></span> <span data-ttu-id="6bd7b-116">個々のマイクロサービスは API ゲートウェイの右側に一覧表示され、ビジネスロジックといくつかの永続化ストアが含まれます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-116">The individual microservices are listed to the right of the API gateways and include both business logic and some kind of persistence store.</span></span> <span data-ttu-id="6bd7b-117">さまざまなサービスで、SQL Server データベース、Redis cache インスタンス、および MongoDB/CosmosDB ストアを使用します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-117">The different services make use of SQL Server databases, Redis cache instances, and MongoDB/CosmosDB stores.</span></span> <span data-ttu-id="6bd7b-118">一番右には、マイクロサービス間の通信に使用されるシステムのイベントバスがあります。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-118">On the far right is the system's Event Bus, which is used for communication between the microservices.</span></span>

<span data-ttu-id="6bd7b-119">![eShopOnContainers アーキテクチャ](./media/eshoponcontainers-architecture.png)
**図 2-5**。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-119">![eShopOnContainers Architecture](./media/eshoponcontainers-architecture.png)
**Figure 2-5**.</span></span> <span data-ttu-id="6bd7b-120">EShopOnContainers アーキテクチャ。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-120">The eShopOnContainers Architecture.</span></span>

<span data-ttu-id="6bd7b-121">このアーキテクチャのサーバー側コンポーネントはすべて、Azure サービスに簡単にマップできます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-121">The server-side components of this architecture all map easily to Azure services.</span></span>

## <a name="container-orchestration-and-clustering"></a><span data-ttu-id="6bd7b-122">コンテナーのオーケストレーションとクラスタリング</span><span class="sxs-lookup"><span data-stu-id="6bd7b-122">Container orchestration and clustering</span></span>

<span data-ttu-id="6bd7b-123">Azure Kubernetes Service (AKS) では、アプリケーションのコンテナーでホストされるサービスを ASP.NET Core MVC アプリから個々のカタログおよび注文マイクロサービスに対してホストし、管理することができます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-123">The application's container-hosted services, from ASP.NET Core MVC apps to individual Catalog and Ordering microservices, can be hosted and managed in Azure Kubernetes Service (AKS).</span></span> <span data-ttu-id="6bd7b-124">アプリケーションは Docker と Kubernetes でローカルに実行でき、同じコンテナーを AKS でホストされているステージング環境と運用環境に配置できます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-124">The application can run locally on Docker and Kubernetes, and the same containers can then be deployed to staging and production environments hosted in AKS.</span></span> <span data-ttu-id="6bd7b-125">このプロセスは、次のセクションで説明するように自動化できます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-125">This process can be automated as we'll see in the next section.</span></span>

<span data-ttu-id="6bd7b-126">AKS は、コンテナーの個々のクラスターの管理サービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-126">AKS provides management services for individual clusters of containers.</span></span> <span data-ttu-id="6bd7b-127">アプリケーションでは、上のアーキテクチャ図に示されているマイクロサービスごとに個別の AKS クラスターをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-127">The application will deploy separate AKS clusters for each microservice shown in the architecture diagram above.</span></span> <span data-ttu-id="6bd7b-128">この方法では、各サービスがリソース要求に応じて個別にスケールできます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-128">This approach allows each individual service to scale independently according to its resource demands.</span></span> <span data-ttu-id="6bd7b-129">各マイクロサービスは個別にデプロイすることもできます。このような展開では、システムのダウンタイムをゼロにすることが理想的です。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-129">Each microservice can also be deployed independently, and ideally such deployments should incur zero system downtime.</span></span>

## <a name="api-gateway"></a><span data-ttu-id="6bd7b-130">API ゲートウェイ</span><span class="sxs-lookup"><span data-stu-id="6bd7b-130">API Gateway</span></span>

<span data-ttu-id="6bd7b-131">EShopOnContainers アプリケーションには、複数のフロントエンドクライアントと複数の異なるバックエンドサービスがあります。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-131">The eShopOnContainers application has multiple front-end clients and multiple different back-end services.</span></span> <span data-ttu-id="6bd7b-132">クライアントアプリケーションとそれらをサポートするマイクロサービスの間に1対1の対応はありません。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-132">There's no one-to-one correspondence between the client applications and the microservices that support them.</span></span> <span data-ttu-id="6bd7b-133">このようなシナリオでは、さまざまなバックエンドサービスとのインターフェイスをセキュリティで保護された方法でクライアントソフトウェアを作成する場合に、複雑になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-133">In such a scenario, there may be a great deal of complexity when writing client software to interface with the various back-end services in a secure manner.</span></span> <span data-ttu-id="6bd7b-134">各クライアントは、この複雑さに対処する必要があります。その結果、重複が発生し、サービスの変更または新しいポリシーの実装に合わせて、さまざまな場所で更新を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-134">Each client would need to address this complexity on its own, resulting in duplication and many places in which to make updates as services change or new policies are implemented.</span></span>

<span data-ttu-id="6bd7b-135">Azure API Management (APIM) を使用すると、組織は一貫した管理しやすい方法で Api を発行できます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-135">Azure API Management (APIM) helps organizations publish APIs in a consistent, manageable fashion.</span></span> <span data-ttu-id="6bd7b-136">APIM は、API ゲートウェイと管理ポータル (Azure portal) と開発者ポータルの3つのコンポーネントで構成されています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-136">APIM consists of three components: the API Gateway, and administration portal (the Azure portal), and a developer portal.</span></span>

<span data-ttu-id="6bd7b-137">Api ゲートウェイは API 呼び出しを受け入れ、適切なバックエンド API にルーティングします。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-137">The API Gateway accepts API calls and routes them to the appropriate back-end API.</span></span> <span data-ttu-id="6bd7b-138">また、API キーや JWT トークンの検証などの追加サービスや、コードを変更せずに実行時の API 変換 (古いインターフェイスを想定しているクライアントに対応するためなど) を提供することもできます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-138">It can also provide additional services like verification of API keys or JWT tokens and API transformation on the fly without code modifications (for instance, to accommodate clients expecting an older interface).</span></span>

<span data-ttu-id="6bd7b-139">Azure portal では、API スキーマを定義し、さまざまな Api を製品にパッケージ化します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-139">The Azure portal is where you define the API schema and package different APIs into products.</span></span> <span data-ttu-id="6bd7b-140">また、ユーザーアクセスを構成したり、レポートを表示したり、クォータや変換のポリシーを構成したりすることもできます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-140">You also configure user access, view reports, and configure policies for quotas or transformations.</span></span>

<span data-ttu-id="6bd7b-141">開発者ポータルは、開発者のメインリソースとして機能します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-141">The developer portal serves as the main resource for developers.</span></span> <span data-ttu-id="6bd7b-142">これにより、開発者は API ドキュメント、対話型のテストコンソール、および独自の使用状況に関するレポートを作成できます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-142">It provides developers with API documentation, an interactive test console, and reports on their own usage.</span></span> <span data-ttu-id="6bd7b-143">開発者は、ポータルを使用して、サブスクリプションや API キーのサポートなど、独自のアカウントを作成および管理することもできます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-143">Developers also use the portal to create and manage their own accounts, including subscription and API key support.</span></span>

<span data-ttu-id="6bd7b-144">APIM を使用すると、アプリケーションは複数の異なるサービスグループを公開でき、それぞれが特定のフロントエンドクライアントのバックエンドを提供します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-144">Using APIM, applications can expose several different groups of services, each providing a back end for a particular front-end client.</span></span> <span data-ttu-id="6bd7b-145">APIM は複雑なシナリオに使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-145">APIM is recommended for complex scenarios.</span></span> <span data-ttu-id="6bd7b-146">ニーズを簡単にするために、軽量の API ゲートウェイ Ocelot を使用できます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-146">For simpler needs, the lightweight API Gateway Ocelot can be used.</span></span> <span data-ttu-id="6bd7b-147">EShopOnContainers アプリでは、単純であり、アプリケーション自体と同じアプリケーション環境にデプロイできるため、Ocelot が使用されます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-147">The eShopOnContainers app uses Ocelot because of its simplicity and because it can be deployed into the same application environment as the application itself.</span></span> [<span data-ttu-id="6bd7b-148">EShopOnContainers、APIM、および Ocelot の詳細については、こちらを参照してください。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-148">Learn more about eShopOnContainers, APIM, and Ocelot.</span></span>](https://docs.microsoft.com/dotnet/architecture/microservices/architect-microservice-container-applications/direct-client-to-microservice-communication-versus-the-api-gateway-pattern#azure-api-management)

<span data-ttu-id="6bd7b-149">アプリケーションが AKS を使用している場合のもう1つのオプションは、AKS クラスター内のポッドとして Azure ゲートウェイの受信コントローラーをデプロイすることです。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-149">Another option if your application is using AKS is to deploy the Azure Gateway Ingress Controller as a pod within your AKS cluster.</span></span> <span data-ttu-id="6bd7b-150">これにより、クラスターを Azure アプリケーションゲートウェイと統合し、ゲートウェイがトラフィックを AKS ポッドに負荷分散できるようになります。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-150">This allows your cluster to integrate with an Azure Application Gateway, allowing the gateway to load-balance traffic to the AKS pods.</span></span> <span data-ttu-id="6bd7b-151">[詳細については、AKS 用の Azure ゲートウェイの受信コントローラーに関するページを参照して](https://github.com/Azure/application-gateway-kubernetes-ingress)ください。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-151">[Learn more about the Azure Gateway Ingress Controller for AKS](https://github.com/Azure/application-gateway-kubernetes-ingress).</span></span>

## <a name="data"></a><span data-ttu-id="6bd7b-152">データ</span><span class="sxs-lookup"><span data-stu-id="6bd7b-152">Data</span></span>

<span data-ttu-id="6bd7b-153">EShopOnContainers で使用されるさまざまなバックエンドサービスには、異なる記憶域要件があります。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-153">The various back-end services used by eShopOnContainers have different storage requirements.</span></span> <span data-ttu-id="6bd7b-154">複数のマイクロサービスで SQL Server データベースを使用します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-154">Several microservices use SQL Server databases.</span></span> <span data-ttu-id="6bd7b-155">バスケットマイクロサービスは、永続化のために Redis キャッシュを活用します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-155">The Basket microservice leverages a Redis cache for its persistence.</span></span> <span data-ttu-id="6bd7b-156">場所マイクロサービスでは、データに MongoDB API が必要です。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-156">The Locations microservice expects a MongoDB API for its data.</span></span> <span data-ttu-id="6bd7b-157">Azure では、これらの各データ形式をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-157">Azure supports each of these data formats.</span></span>

<span data-ttu-id="6bd7b-158">SQL Server データベースのサポートのために、Azure には、1つのデータベースから拡張性の高い SQL Database エラスティックプールまで、あらゆるものに対応する製品が用意されています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-158">For SQL Server database support, Azure has products for everything from single databases up to highly scalable SQL Database elastic pools.</span></span> <span data-ttu-id="6bd7b-159">個々のマイクロサービスは、個々の SQL Server データベースとすばやく簡単に通信できるように構成できます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-159">Individual microservices can be configured to communicate with their own individual SQL Server databases quickly and easily.</span></span> <span data-ttu-id="6bd7b-160">これらのデータベースは、ニーズに応じて各マイクロサービスをサポートするために、必要に応じてスケールすることができます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-160">These databases can be scaled as needed to support each separate microservice according to its needs.</span></span>

<span data-ttu-id="6bd7b-161">EShopOnContainers アプリケーションでは、ユーザーの現在の買い物かごが要求間に保存されます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-161">The eShopOnContainers application stores the user's current shopping basket between requests.</span></span> <span data-ttu-id="6bd7b-162">これは、データを Redis cache に格納するバスケットマイクロサービスによって管理されます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-162">This is managed by the Basket microservice that stores the data in a Redis cache.</span></span> <span data-ttu-id="6bd7b-163">開発時には、このキャッシュをコンテナーにデプロイできます。運用環境では、Azure Cache for Redis を利用できます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-163">In development, this cache can be deployed in a container, while in production it can utilize Azure Cache for Redis.</span></span> <span data-ttu-id="6bd7b-164">Redis の Azure Cache は、完全に管理されたサービスであり、Redis インスタンスやコンテナーを独自にデプロイおよび管理することなく、高いパフォーマンスと信頼性を提供します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-164">Azure Cache for Redis is a fully managed service offering high performance and reliability without the need to deploy and manage Redis instances or containers on your own.</span></span>

<span data-ttu-id="6bd7b-165">場所マイクロサービスは、その永続化に MongoDB NoSQL データベースを使用します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-165">The Locations microservice uses a MongoDB NoSQL database for its persistence.</span></span> <span data-ttu-id="6bd7b-166">開発時には、データベースを独自のコンテナーに配置できます。運用環境では、サービスは[Azure Cosmos DB の MongoDB 用 API](https://docs.microsoft.com/azure/cosmos-db/mongodb-introduction)を活用できます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-166">During development, the database can be deployed in its own container, while in production the service can leverage [Azure Cosmos DB's API for MongoDB](https://docs.microsoft.com/azure/cosmos-db/mongodb-introduction).</span></span> <span data-ttu-id="6bd7b-167">Azure Cosmos DB の利点の1つは、SQL API や、MongoDB、Cassandra、NoSQL、Azure Table Storage などの一般的な Api を含む、複数の異なる通信プロトコルを利用できることです。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-167">One of the benefits of Azure Cosmos DB is its ability to leverage multiple different communication protocols, including a SQL API and common NoSQL APIs including MongoDB, Cassandra, Gremlin, and Azure Table Storage.</span></span> <span data-ttu-id="6bd7b-168">Azure Cosmos DB は、完全に管理されたグローバルに分散されたデータベースをサービスとして提供し、それを使用するサービスのニーズに合わせて拡張することができます。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-168">Azure Cosmos DB offers a fully managed and globally distributed database as a service that can scale to meet the needs of the services that use it.</span></span>

<span data-ttu-id="6bd7b-169">クラウドネイティブアプリケーションの分散データの詳細については、[第5章](database-per-microservice.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-169">Distributed data in cloud-native applications is covered in more detail in [chapter 5](database-per-microservice.md).</span></span>

## <a name="event-bus"></a><span data-ttu-id="6bd7b-170">イベントバス</span><span class="sxs-lookup"><span data-stu-id="6bd7b-170">Event Bus</span></span>

<span data-ttu-id="6bd7b-171">アプリケーションでは、イベントを使用して異なるサービス間で変更を通知します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-171">The application uses events to communicate changes between different services.</span></span> <span data-ttu-id="6bd7b-172">この機能は、さまざまな実装で実装できます。また、ローカルの eShopOnContainers アプリケーションでは、 [RabbitMQ](https://www.rabbitmq.com/)を使用します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-172">This functionality can be implemented with a variety of implementations, and locally the eShopOnContainers application uses [RabbitMQ](https://www.rabbitmq.com/).</span></span> <span data-ttu-id="6bd7b-173">Azure でホストされている場合、アプリケーションはメッセージングのために[Azure Service Bus](https://docs.microsoft.com/azure/service-bus/)を活用します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-173">When hosted in Azure, the application would leverage [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/) for its messaging.</span></span> <span data-ttu-id="6bd7b-174">Azure Service Bus は、アプリケーションとサービスが分離された信頼性の高い非同期方式で相互に通信できるようにする、完全に管理された統合メッセージブローカーです。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-174">Azure Service Bus is a fully managed integration message broker that allows applications and services to communicate with one another in a decoupled, reliable, asynchronous manner.</span></span> <span data-ttu-id="6bd7b-175">Azure Service Bus は、個々のキューと、パブリッシャーとサブスクライバーのシナリオをサポートするための個別の*トピック*をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-175">Azure Service Bus supports individual queues as well as separate *topics* to support publisher-subscriber scenarios.</span></span> <span data-ttu-id="6bd7b-176">EShopOnContainers アプリケーションでは、Azure Service Bus のトピックを活用して、あるマイクロサービスから特定のメッセージに応答するために必要なその他のマイクロサービスへのメッセージの配布をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-176">The eShopOnContainers application would leverage topics with Azure Service Bus to support distributing messages from one microservice to any other microservice that needed to react to a given message.</span></span>

## <a name="resiliency"></a><span data-ttu-id="6bd7b-177">柔軟性</span><span class="sxs-lookup"><span data-stu-id="6bd7b-177">Resiliency</span></span>

<span data-ttu-id="6bd7b-178">運用環境にデプロイされると、eShopOnContainers アプリケーションは、回復性を向上させるために使用できる複数の Azure サービスを活用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-178">Once deployed to production, the eShopOnContainers application would be able to take advantage of several Azure services available to improve its resiliency.</span></span> <span data-ttu-id="6bd7b-179">アプリケーションは、Application Insights と統合できる正常性チェックを発行して、アプリの可用性に基づいてレポートとアラートを提供します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-179">The application publishes health checks, which can be integrated with Application Insights to provide reporting and alerts based on the app's availability.</span></span> <span data-ttu-id="6bd7b-180">Azure リソースには、バグやパフォーマンスの問題を特定して修正するために使用できる診断ログも用意されています。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-180">Azure resources also provide diagnostic logs that can be used to identify and correct bugs and performance issues.</span></span> <span data-ttu-id="6bd7b-181">リソースログは、アプリケーションでさまざまな Azure リソースがどのように使用されているか、およびその方法に関する詳細情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-181">Resource logs provide detailed information on when and how different Azure resources are used by the application.</span></span> <span data-ttu-id="6bd7b-182">クラウドネイティブの回復性機能の詳細については、[第6章](resiliency.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6bd7b-182">You'll learn more about cloud-native resiliency features in [chapter 6](resiliency.md).</span></span>

## <a name="references"></a><span data-ttu-id="6bd7b-183">参照</span><span class="sxs-lookup"><span data-stu-id="6bd7b-183">References</span></span>

- [<span data-ttu-id="6bd7b-184">EShopOnContainers アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="6bd7b-184">The eShopOnContainers Architecture</span></span>](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Architecture)
- [<span data-ttu-id="6bd7b-185">高いスケーラビリティと可用性のためにマイクロサービスと複数のコンテナー アプリケーションを調整する</span><span class="sxs-lookup"><span data-stu-id="6bd7b-185">Orchestrating microservices and multi-container applications for high scalability and availability</span></span>](https://docs.microsoft.com/dotnet/architecture/microservices/architect-microservice-container-applications/scalable-available-multi-container-microservice-applications)
- [<span data-ttu-id="6bd7b-186">Azure API Management</span><span class="sxs-lookup"><span data-stu-id="6bd7b-186">Azure API Management</span></span>](https://docs.microsoft.com/azure/api-management/api-management-key-concepts)
- [<span data-ttu-id="6bd7b-187">Azure SQL Database の概要</span><span class="sxs-lookup"><span data-stu-id="6bd7b-187">Azure SQL Database Overview</span></span>](https://docs.microsoft.com/azure/sql-database/sql-database-technical-overview)
- [<span data-ttu-id="6bd7b-188">Redis 用 Azure キャッシュ</span><span class="sxs-lookup"><span data-stu-id="6bd7b-188">Azure Cache for Redis</span></span>](https://azure.microsoft.com/services/cache/)
- [<span data-ttu-id="6bd7b-189">MongoDB 用の Azure Cosmos DB の API</span><span class="sxs-lookup"><span data-stu-id="6bd7b-189">Azure Cosmos DB's API for MongoDB</span></span>](https://docs.microsoft.com/azure/cosmos-db/mongodb-introduction)
- [<span data-ttu-id="6bd7b-190">Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="6bd7b-190">Azure Service Bus</span></span>](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview)
- [<span data-ttu-id="6bd7b-191">Azure Monitor の概要</span><span class="sxs-lookup"><span data-stu-id="6bd7b-191">Azure Monitor overview</span></span>](https://docs.microsoft.com/azure/azure-monitor/overview)

>[!div class="step-by-step"]
><span data-ttu-id="6bd7b-192">[前へ](introduce-eshoponcontainers-reference-app.md)
>[次へ](deploy-eshoponcontainers-azure.md)</span><span class="sxs-lookup"><span data-stu-id="6bd7b-192">[Previous](introduce-eshoponcontainers-reference-app.md)
[Next](deploy-eshoponcontainers-azure.md)</span></span>
