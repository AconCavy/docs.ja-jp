---
title: Azure のデータストレージ
description: Azure 向けのクラウドネイティブ .NET アプリの設計 |Azure のデータストレージ
ms.date: 06/30/2019
ms.openlocfilehash: 1a86cecf005c6dbdfda5cf4cacfafaad4711c076
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/30/2019
ms.locfileid: "73841895"
---
# <a name="data-storage-in-azure"></a><span data-ttu-id="26589-103">Azure のデータストレージ</span><span class="sxs-lookup"><span data-stu-id="26589-103">Data storage in Azure</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="26589-104">この書籍全体で見てきたように、クラウドでは、アプリケーションの設計、展開、および管理の方法が変更されています。</span><span class="sxs-lookup"><span data-stu-id="26589-104">As we've seen throughout this book, the cloud is changing the way applications are designed, deployed, and managed.</span></span> <span data-ttu-id="26589-105">クラウドへの移行時には、データをどのように移動するかという重要な質問がありますか。</span><span class="sxs-lookup"><span data-stu-id="26589-105">When moving to the cloud, a critical question is how do you move your data?</span></span> <span data-ttu-id="26589-106">幸い、Azure クラウドには多くのオプションが用意されています。</span><span class="sxs-lookup"><span data-stu-id="26589-106">Fortunately, the Azure cloud offers many options.</span></span>

<span data-ttu-id="26589-107">Azure 仮想マシンをプロビジョニングし、任意のデータベースをインストールするだけで済みます。</span><span class="sxs-lookup"><span data-stu-id="26589-107">You could just provision an Azure virtual machine and install your database of choice.</span></span> <span data-ttu-id="26589-108">これは[、サービスとしてのインフラストラクチャ (IaaS)](https://www.techopedia.com/definition/141/infrastructure-as-a-service-iaas)と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="26589-108">This is known as [Infrastructure as a Service (IaaS)](https://www.techopedia.com/definition/141/infrastructure-as-a-service-iaas).</span></span> <span data-ttu-id="26589-109">この方法を使用すると、オンプレミスのデータベースをそのままクラウドに移行することが簡単になりますが、仮想マシンとデータベースの管理の負担が軽減されます。</span><span class="sxs-lookup"><span data-stu-id="26589-109">This approach simplifies moving an on-premises database to the cloud, as-is, but shifts the burden of managing the virtual machine and the database to you.</span></span>

<span data-ttu-id="26589-110">代わりに、完全に管理された[サービスとしてのデータベース (DBaaS)](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/)が適切なオプションです。</span><span class="sxs-lookup"><span data-stu-id="26589-110">Instead, a fully managed [Database as a Service (DBaaS)](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/) is a better option.</span></span> <span data-ttu-id="26589-111">多くの組み込み機能を利用できますが、ホスティング、保守、ライセンスは Microsoft によって管理されています。</span><span class="sxs-lookup"><span data-stu-id="26589-111">You get many built-in features while the hosting, maintenance, and licensing are managed by Microsoft.</span></span> <span data-ttu-id="26589-112">Azure では、さまざまな種類の完全管理データストレージオプションが用意されており、それぞれに特定の利点があります。</span><span class="sxs-lookup"><span data-stu-id="26589-112">Azure features different kinds of fully managed data storage options, each with specific benefits.</span></span> <span data-ttu-id="26589-113">これらはすべて、ジャストインタイム容量と従量課金制モデルをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="26589-113">They all support just-in-time capacity and a pay-as-you-go model.</span></span>

<span data-ttu-id="26589-114">次に、Azure で使用可能な DBaaS オプションについて見ていきます。</span><span class="sxs-lookup"><span data-stu-id="26589-114">We'll next look at DBaaS options available in Azure.</span></span> <span data-ttu-id="26589-115">Microsoft は、Azure を "オープンプラットフォーム" にして、さまざまなオープンソースのリレーショナルデータベースと NoSQL データベースの管理されたサポートを提供し、さまざまなオープンソースの基礎に対する重要な貢献をアクティブメンバーとして提供するという取り組みを続けています。</span><span class="sxs-lookup"><span data-stu-id="26589-115">You'll see how Microsoft continues is commitment to keeping Azure an “open platform,” offering managed support for many open-source relational and NoSQL databases and making key contributions to the various open-source foundations as an active member.</span></span>

## <a name="azure-sql-database"></a><span data-ttu-id="26589-116">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="26589-116">Azure SQL Database</span></span>

<span data-ttu-id="26589-117">[Azure SQL Database](https://docs.microsoft.com/azure/sql-database/)は、Microsoft SQL Server データベースエンジンに基づいて、機能豊富で汎用的なサービスとしてのリレーショナルデータベース (dbaas) です。</span><span class="sxs-lookup"><span data-stu-id="26589-117">[Azure SQL Database](https://docs.microsoft.com/azure/sql-database/) is a feature-rich, general-purpose relational database-as-a-service (DBaaS) based on the Microsoft SQL Server Database Engine.</span></span> <span data-ttu-id="26589-118">これは、Microsoft によって完全に管理され、高パフォーマンスで信頼性の高い、セキュリティで保護されたクラウドデータベースです。</span><span class="sxs-lookup"><span data-stu-id="26589-118">It's fully managed by Microsoft and is a high-performance, reliable, and secure cloud database.</span></span> <span data-ttu-id="26589-119">このサービスは、オンプレミスバージョンの SQL Server で検出された多くの機能を共有します。</span><span class="sxs-lookup"><span data-stu-id="26589-119">The service shares many of the features found in the on-premises version of SQL Server.</span></span>

<span data-ttu-id="26589-120">SQL Database サーバーとデータベースを数分でプロビジョニングできます。</span><span class="sxs-lookup"><span data-stu-id="26589-120">You can provision a SQL Database server and database in minutes.</span></span> <span data-ttu-id="26589-121">アプリケーションの需要が少数の顧客から何百万に増加した場合、最小限のダウンタイムですぐにスケール Azure SQL Database できます。</span><span class="sxs-lookup"><span data-stu-id="26589-121">When demand for your application grows from a handful of customers to millions, Azure SQL Database scales on-the-fly with minimal downtime.</span></span> <span data-ttu-id="26589-122">リソースを動的に追加または削除できます。これには、データベースに割り当てられた CPU 電力、メモリ、IO スループット、ストレージなどが含まれます。</span><span class="sxs-lookup"><span data-stu-id="26589-122">You can dynamically add or remove resources, including CPU power, memory, IO throughput, and storage allocated to your databases.</span></span>

<span data-ttu-id="26589-123">図5-12 に、Azure SQL Database の配置オプションを示します。</span><span class="sxs-lookup"><span data-stu-id="26589-123">Figure 5-12 shows the deployment options for Azure SQL Database.</span></span>

![Azure SQL の配置オプション](./media/azure-sql-database-deployment-options.png)

<span data-ttu-id="26589-125">**図 5-12**</span><span class="sxs-lookup"><span data-stu-id="26589-125">**Figure 5-12**.</span></span> <span data-ttu-id="26589-126">Azure SQL の配置オプション</span><span class="sxs-lookup"><span data-stu-id="26589-126">Azure SQL deployment options</span></span>

<span data-ttu-id="26589-127">SQL Database をデプロイする場合は、前の図の代替手段に注意してください。</span><span class="sxs-lookup"><span data-stu-id="26589-127">Note the alternatives in the previous figure when deploying a SQL Database:</span></span>

- <span data-ttu-id="26589-128">[1 つのデータベース](https://docs.microsoft.com/azure/sql-database/sql-database-single-database) 、 [SQL Database サーバー](https://docs.microsoft.com/azure/sql-database/sql-database-servers)によって管理される独自のリソースセットを使用します。</span><span class="sxs-lookup"><span data-stu-id="26589-128">A [Single database](https://docs.microsoft.com/azure/sql-database/sql-database-single-database) with its own set of resources managed by a [SQL Database server](https://docs.microsoft.com/azure/sql-database/sql-database-servers).</span></span> <span data-ttu-id="26589-129">1つのデータベースは、オンプレミスの SQL Server デプロイに [含まれる包含データベース](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases) に似ています。</span><span class="sxs-lookup"><span data-stu-id="26589-129">A single database is similar to a [contained database](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases) in an on-premises SQL Server deployment.</span></span>

- <span data-ttu-id="26589-130">SQL データベースのコレクションが1つの SQL Database サーバーを設定価格で共有する[エラスティックプール](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)。</span><span class="sxs-lookup"><span data-stu-id="26589-130">An [Elastic pool](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool) in which a collection of SQL Databases share a single SQL Database server at a set price.</span></span> <span data-ttu-id="26589-131">必要に応じて、1つのデータベースをエラスティックプールとの間で移動して、データベースグループの価格パフォーマンスを最適化することができます。</span><span class="sxs-lookup"><span data-stu-id="26589-131">Single databases can be moved in and out of an elastic pool as needed to optimize the price performance for a group of databases.</span></span>

- <span data-ttu-id="26589-132">システムデータベースとユーザーデータベースのコレクションである[Managed Instance](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance)は、オンプレミスの SQL Server とほぼ100% の互換性を提供します。</span><span class="sxs-lookup"><span data-stu-id="26589-132">A [Managed Instance](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) in which is a collection of system and user databases provide near-100% compatibility with an on-premises SQL Server.</span></span> <span data-ttu-id="26589-133">このオプションは、35 TB までの大規模なデータベースをサポートしており、分離性を高めるために[Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview)に配置されています。</span><span class="sxs-lookup"><span data-stu-id="26589-133">This option supports larger databases, up to 35 TB and is placed in an [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) for better isolation.</span></span>

<span data-ttu-id="26589-134">Azure SQL Database は、完全に管理された[サービスとしてのプラットフォーム (PaaS) データベースエンジン](https://docs.microsoft.com/azure/sql-database/sql-database-paas)であり、ユーザーの介入なしにアップグレード、修正プログラム、バックアップ、および監視を処理します。</span><span class="sxs-lookup"><span data-stu-id="26589-134">Azure SQL Database is a fully managed [Platform as a Service (PaaS) Database Engine](https://docs.microsoft.com/azure/sql-database/sql-database-paas) that handles upgrading, patching, backups, and monitoring without user involvement.</span></span> <span data-ttu-id="26589-135">常に最新の安定したバージョンの SQL Server データベースエンジンと修正済みの OS を実行し、99.99% の可用性を保証します。</span><span class="sxs-lookup"><span data-stu-id="26589-135">It always runs the latest stable version of the SQL Server Database Engine and patched OS and guarantees 99.99% availability.</span></span> <span data-ttu-id="26589-136">1つの機能である[アクティブ geo レプリケーション](https://docs.microsoft.com/azure/sql-database/sql-database-active-geo-replication)を使用すると、同じまたは別の Azure データセンターで読み取り可能なセカンダリデータベースを作成できます。</span><span class="sxs-lookup"><span data-stu-id="26589-136">One feature, [active geo-replication](https://docs.microsoft.com/azure/sql-database/sql-database-active-geo-replication), lets you create readable secondary databases in the same or a different Azure data center.</span></span> <span data-ttu-id="26589-137">障害が発生したときに、セカンダリデータベースへのフェールオーバーを開始できます。</span><span class="sxs-lookup"><span data-stu-id="26589-137">Upon failure, a failover to a secondary database can be initiated.</span></span> <span data-ttu-id="26589-138">その時点で、他のセカンダリは自動的に新しいプライマリにリンクされます。</span><span class="sxs-lookup"><span data-stu-id="26589-138">At that point, the other secondaries automatically link to the new primary.</span></span> <span data-ttu-id="26589-139">最大4つのセカンダリレプリカが同じまたは異なるリージョンでサポートされており、これらのセカンダリは読み取り専用アクセスクエリにも使用できます。</span><span class="sxs-lookup"><span data-stu-id="26589-139">Up to four secondary replicas are supported in either the same or in different regions, and these secondaries can also be used for read-only access queries.</span></span>

<span data-ttu-id="26589-140">Azure SQL Database には、パフォーマンスを最大化し、運用コストを削減するのに役立つ、[組み込みの監視機能とインテリジェントチューニング](https://docs.microsoft.com/azure/sql-database/sql-database-monitoring-tuning-index)機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="26589-140">Azure SQL Database includes [built-in monitoring and intelligent tuning](https://docs.microsoft.com/azure/sql-database/sql-database-monitoring-tuning-index) features that can help you maximize performance and reduce operational costs.</span></span> <span data-ttu-id="26589-141">たとえば、[自動チューニング](https://docs.microsoft.com/azure/sql-database/sql-database-automatic-tuning)機能を使用すると、AI と機械学習に基づいて継続的なパフォーマンスチューニングを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="26589-141">For example, the [Automatic Tuning](https://docs.microsoft.com/azure/sql-database/sql-database-automatic-tuning) feature provides continuous performance tuning based on AI and machine learning.</span></span> <span data-ttu-id="26589-142">サービスは、実行中のワークロードから学習し、チューニングに関する推奨設定を適用できます。</span><span class="sxs-lookup"><span data-stu-id="26589-142">The service learns from your running workloads and can apply tuning recommendations.</span></span> <span data-ttu-id="26589-143">自動チューニングが有効になっている Azure SQL Database の実行時間が長くなるほど、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="26589-143">The longer an Azure SQL Database runs with automatic tuning enabled, the better it performs.</span></span>

<span data-ttu-id="26589-144">[Azure SQL Database サーバーレス](https://docs.microsoft.com/azure/sql-database/sql-database-serverless)(本書の執筆時点でのプレビューで利用可能) は、ワークロードの需要に基づいて自動的に拡張され、1秒あたりに使用されるコンピューティングの量に応じて課金される、単一データベースのコンピューティングレベルです。</span><span class="sxs-lookup"><span data-stu-id="26589-144">[Azure SQL Database serverless](https://docs.microsoft.com/azure/sql-database/sql-database-serverless) (available for preview at time of the writing of this book) is a compute tier for single databases that automatically scales based on workload demand, and bills for the amount of compute used per second.</span></span> <span data-ttu-id="26589-145">また、サーバーレスコンピューティング層は、非アクティブ期間中に自動的にデータベースを一時停止して、ストレージの料金のみが課金されるようにします。</span><span class="sxs-lookup"><span data-stu-id="26589-145">The serverless compute tier also automatically pauses databases during inactive periods so that only storage charges are billed.</span></span> <span data-ttu-id="26589-146">アクティビティが戻ると自動的に再開されます。</span><span class="sxs-lookup"><span data-stu-id="26589-146">It automatically resumes when activity returns.</span></span>

<span data-ttu-id="26589-147">最後に、新しい[Azure SQL Database ハイパースケール](https://azure.microsoft.com/services/sql-database/)の価格レベルがあります。</span><span class="sxs-lookup"><span data-stu-id="26589-147">Finally, there's the new [Azure SQL Database Hyperscale](https://azure.microsoft.com/services/sql-database/) pricing tier.</span></span><span data-ttu-id="26589-148"> 拡張性の高いストレージアーキテクチャが採用されており、必要に応じてデータベースを拡張できるため、ストレージリソースを事前にプロビジョニングする必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="26589-148"> It's powered by a highly scalable storage architecture and enables your database to grow as needed, eliminating the need to pre-provision storage resources.</span></span> <span data-ttu-id="26589-149">コンピューティングリソースとストレージリソースを個別に拡張して、各ワークロードのパフォーマンスを柔軟に最適化することができます。</span><span class="sxs-lookup"><span data-stu-id="26589-149">You can scale compute and storage resources independently, providing the flexibility to optimize performance for each workload.</span></span> <span data-ttu-id="26589-150">Azure SQL Database ハイパースケールは、100 TB までのストレージを使用した[OLTP](https://en.wikipedia.org/wiki/Online_transaction_processing)処理および高スループット分析ワークロード用に最適化されています。</span><span class="sxs-lookup"><span data-stu-id="26589-150">Azure SQL Database Hyperscale is optimized for [OLTP](https://en.wikipedia.org/wiki/Online_transaction_processing) processing and high throughput analytic workloads with storage up to 100 TB.</span></span><span data-ttu-id="26589-151">  読み取りを集中的に行うワークロードでは、読み取りワークロードのオフロードのために必要に応じて追加の読み取りレプリカをプロビジョニングすることによって、迅速なスケールアウトを実現します。</span><span class="sxs-lookup"><span data-stu-id="26589-151">  With read-intensive workloads, Hyperscale provides rapid scale-out by provisioning additional read replicas as needed for offloading read workloads.</span></span>

<span data-ttu-id="26589-152">Azure では、従来の Microsoft SQL Server スタックに加えて、いくつかの一般的なオープンソースデータベースのマネージバージョンも機能します。</span><span class="sxs-lookup"><span data-stu-id="26589-152">In addition to the traditional Microsoft SQL Server stack, Azure also features managed versions of several popular open-source databases.</span></span>

## <a name="azure-database-for-mysql"></a><span data-ttu-id="26589-153">Azure Database for MySQL</span><span class="sxs-lookup"><span data-stu-id="26589-153">Azure Database for MySQL</span></span>

<span data-ttu-id="26589-154">[MySQL](https://en.wikipedia.org/wiki/MySQL) は [オープンソースの](https://en.wikipedia.org/wiki/Open-source_software) [リレーショナルデータベース](https://en.wikipedia.org/wiki/Relational_database_management_system)です。</span><span class="sxs-lookup"><span data-stu-id="26589-154">[MySQL](https://en.wikipedia.org/wiki/MySQL) is an [open-source](https://en.wikipedia.org/wiki/Open-source_software) [relational database](https://en.wikipedia.org/wiki/Relational_database_management_system).</span></span> <span data-ttu-id="26589-155">これは、[ランプソフトウェアスタック](https://en.wikipedia.org/wiki/LAMP_(software_bundle))のコンポーネントであり、Facebook、Twitter、YouTube を含む多くの大規模な組織で使用されています。</span><span class="sxs-lookup"><span data-stu-id="26589-155">It's a component in the [LAMP software stack](https://en.wikipedia.org/wiki/LAMP_(software_bundle)) and used by many large organizations, including Facebook, Twitter, and YouTube.</span></span> <span data-ttu-id="26589-156">Community edition は無料でご利用いただけます。 enterprise edition にはライセンス購入が必要です。</span><span class="sxs-lookup"><span data-stu-id="26589-156">The community edition is available for free and the enterprise edition requires a license purchase.</span></span> <span data-ttu-id="26589-157">1995で作成された製品は、Sun Microsystems の2008で購入されていました。この製品は、2010で Oracle によって取得されました。</span><span class="sxs-lookup"><span data-stu-id="26589-157">Originally created in 1995, the product was purchased by Sun Microsystems in 2008, which was acquired by Oracle in 2010.</span></span>

<span data-ttu-id="26589-158">[Azure Database for MySQL](https://azure.microsoft.com/services/mysql/)は、オープンソースの MySQL サーバーエンジンに基づく、完全に管理されたエンタープライズ対応のリレーショナルデータベースサービスです。</span><span class="sxs-lookup"><span data-stu-id="26589-158">[Azure Database for MySQL](https://azure.microsoft.com/services/mysql/) is a fully managed, enterprise-ready relational database service based on the open-source MySQL Server engine.</span></span> <span data-ttu-id="26589-159">MySQL Community edition の実装には、追加コストなしで次の PaaS 機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="26589-159">Implementing the MySQL Community edition, it includes the following PaaS capabilities at no additional cost:</span></span>

- <span data-ttu-id="26589-160">組み込みの[高可用性](https://docs.microsoft.com/azure/mysql/concepts-high-availability)。</span><span class="sxs-lookup"><span data-stu-id="26589-160">Built-in [high availability](https://docs.microsoft.com/azure/mysql/concepts-high-availability).</span></span>

- <span data-ttu-id="26589-161">包括的[な従量課金](https://docs.microsoft.com/azure/mysql/concepts-pricing-tiers)制の料金を使用した、予測可能なパフォーマンス。</span><span class="sxs-lookup"><span data-stu-id="26589-161">Predictable performance, using inclusive [pay-as-you-go pricing](https://docs.microsoft.com/azure/mysql/concepts-pricing-tiers).</span></span>

- <span data-ttu-id="26589-162">必要に応じて数秒以内に[スケール](https://docs.microsoft.com/azure/mysql/concepts-high-availability)します。</span><span class="sxs-lookup"><span data-stu-id="26589-162">[Scale](https://docs.microsoft.com/azure/mysql/concepts-high-availability) as needed within seconds.</span></span>

- <span data-ttu-id="26589-163">保存中および移動中の機密データを保護するためにセキュリティで保護されています。</span><span class="sxs-lookup"><span data-stu-id="26589-163">Secured to protect sensitive data at-rest and in-motion.</span></span>

- <span data-ttu-id="26589-164">[自動バックアップ](https://docs.microsoft.com/azure/mysql/concepts-backup)と[特定の時点への復元 (](https://docs.microsoft.com/azure/mysql/concepts-backup)最大35日間)。</span><span class="sxs-lookup"><span data-stu-id="26589-164">[Automatic backups](https://docs.microsoft.com/azure/mysql/concepts-backup) and [point-in-time-restore](https://docs.microsoft.com/azure/mysql/concepts-backup) for up to 35 days.</span></span>

- <span data-ttu-id="26589-165">エンタープライズグレードのセキュリティとコンプライアンス。</span><span class="sxs-lookup"><span data-stu-id="26589-165">Enterprise-grade security and compliance.</span></span>

<span data-ttu-id="26589-166">これらの組み込みの PaaS 機能は、データセンターに何百もの "戦術" (非戦略的) データベースを持つ組織にとって重要ですが、パッチ適用、バックアップ、セキュリティ、およびパフォーマンスの監視を実行するためのリソースはありません。</span><span class="sxs-lookup"><span data-stu-id="26589-166">These built-in PaaS features are important for organizations who have hundreds of “tactical" (non-strategic) databases in their data centers, but don't have the resources to perform patching, backup, security, and performance monitoring.</span></span>

<span data-ttu-id="26589-167">さらに、 [Azure データ移行サービス](https://azure.microsoft.com/services/database-migration/)では、最小限のダウンタイムで、複数のデータベースソースから azure データプラットフォームにデータを移行することができます。</span><span class="sxs-lookup"><span data-stu-id="26589-167">Additionally, the [Azure Data Migration Service](https://azure.microsoft.com/services/database-migration/) can migrate data from multiple database sources to Azure Data platforms with minimal downtime.</span></span> <span data-ttu-id="26589-168">このサービスは、評価レポートを生成し、小規模または大規模の移行の実行に必要な変更を案内する推奨事項を提供します。</span><span class="sxs-lookup"><span data-stu-id="26589-168">The service generates assessment reports and provides recommendations to guide you through the changes required to performing a migration, both small or large.</span></span>

<span data-ttu-id="26589-169">管理対象の[Azure MySQL サーバー](https://docs.microsoft.com/azure/mysql/concepts-servers)は、サービスの中央管理ポイントです。</span><span class="sxs-lookup"><span data-stu-id="26589-169">The managed [Azure MySQL server](https://docs.microsoft.com/azure/mysql/concepts-servers) is the central administrative point for the service.</span></span> <span data-ttu-id="26589-170">これは、オンプレミスのデプロイに使用されるものと同じ MySQL サーバーエンジンです。</span><span class="sxs-lookup"><span data-stu-id="26589-170">It's the same MySQL server engine used for on-premises deployments.</span></span> <span data-ttu-id="26589-171">これにより、サーバーごとに1つのデータベースを作成し、すべてのリソースを使用したり、サーバーごとに複数のデータベースを作成してリソースを共有したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="26589-171">With it, you can create a single database per server to consume all resources or create multiple databases per server to share resources.</span></span> <span data-ttu-id="26589-172">新しいスキルを習得したり、仮想マシンやインフラストラクチャを管理したりすることなく、お好きなオープンソースのツールとプラットフォームでアプリケーションを開発し続けることができます。</span><span class="sxs-lookup"><span data-stu-id="26589-172">Your team can continue to develop applications with the open-source tools and platform of your choice without having to learn new skills or manage virtual machines and infrastructure.</span></span>

## <a name="azure-database-for-mariadb"></a><span data-ttu-id="26589-173">Azure Database for MariaDB</span><span class="sxs-lookup"><span data-stu-id="26589-173">Azure Database for MariaDB</span></span>

<span data-ttu-id="26589-174">[MariaDB](https://mariadb.com/)サーバーは、もう1つの一般的なオープンソースのデータベースサーバーです。</span><span class="sxs-lookup"><span data-stu-id="26589-174">[MariaDB](https://mariadb.com/) Server is another popular open-source database server.</span></span> <span data-ttu-id="26589-175">Mysql のフォークとして作成されました。これは、Oracle が MySQL を所有する Sun Microsystems を購入した時点での mysql の開発者によるものです。</span><span class="sxs-lookup"><span data-stu-id="26589-175">It was created as a fork of MySQL by the original developers of MySQL at the time that Oracle purchased Sun Microsystems who owned MySQL.</span></span> <span data-ttu-id="26589-176">目的は、MariaDB がオープンソースのままになっていることを確認することでした。</span><span class="sxs-lookup"><span data-stu-id="26589-176">The intent was to ensure that MariaDB remained open-source.</span></span>

<span data-ttu-id="26589-177">MariaDB は[MySQL のフォーク](https://blog.panoply.io/a-comparative-vmariadb-vs-mysql)であるため、データとテーブルの定義には互換性があり、クライアントプロトコル、構造体、および api は knit になります。</span><span class="sxs-lookup"><span data-stu-id="26589-177">Since MariaDB is a [fork of MySQL](https://blog.panoply.io/a-comparative-vmariadb-vs-mysql), the data and table definitions are compatible, and the client protocols, structures, and APIs, are close-knit.</span></span> <span data-ttu-id="26589-178">MySQL データコネクタは、変更せずに MariaDB で動作します。</span><span class="sxs-lookup"><span data-stu-id="26589-178">MySQL data connectors will work MariaDB without modification.</span></span>

<span data-ttu-id="26589-179">MariaDB は強力なものであり、多くの大企業で使用されています。</span><span class="sxs-lookup"><span data-stu-id="26589-179">MariaDB has a strong following and is used by many large enterprises.</span></span> <span data-ttu-id="26589-180">Oracle は MySQL を引き続き維持し、強化し、サポートしていますが、MariaDB は MariaDB Foundation によって管理されており、製品とドキュメントを公開することができます。</span><span class="sxs-lookup"><span data-stu-id="26589-180">While Oracle continues to maintain, enhance and support MySQL, MariaDB is managed by the MariaDB Foundation allowing public contributions to the product and documentation.</span></span>

<span data-ttu-id="26589-181">[Azure Database for MariaDB](https://azure.microsoft.com/services/mariadb/)は、Azure クラウドで完全に管理されたサービスとしてのデータベースです。</span><span class="sxs-lookup"><span data-stu-id="26589-181">[Azure Database for MariaDB](https://azure.microsoft.com/services/mariadb/) is a fully managed database as a service in the Azure cloud.</span></span> <span data-ttu-id="26589-182">これは、 [MariaDB community edition](https://mariadb.org/download/)サーバーエンジンに基づいています。</span><span class="sxs-lookup"><span data-stu-id="26589-182">It's based on the [MariaDB community edition](https://mariadb.org/download/) server engine.</span></span> <span data-ttu-id="26589-183">予測可能なパフォーマンスと動的なスケーラビリティを備えたミッションクリティカルなワークロードを処理できます。</span><span class="sxs-lookup"><span data-stu-id="26589-183">It can handle mission-critical workloads with predictable performance and dynamic scalability.</span></span> <span data-ttu-id="26589-184">他の Azure データベースプラットフォームと同様に、追加コストなしで、サービスとしてのプラットフォームのさまざまな機能を備えています。</span><span class="sxs-lookup"><span data-stu-id="26589-184">Similar to the other Azure Database platforms, it includes many Platform-as-a-Service capabilities at no additional cost:</span></span>

- <span data-ttu-id="26589-185">組み込みの[高可用性](https://docs.microsoft.com/azure/mariadb/concepts-high-availability)。</span><span class="sxs-lookup"><span data-stu-id="26589-185">Built-in [high availability](https://docs.microsoft.com/azure/mariadb/concepts-high-availability).</span></span>

- <span data-ttu-id="26589-186">包括的[な従量課金](https://docs.microsoft.com/azure/mariadb/concepts-pricing-tiers)制の料金を使用した、予測可能なパフォーマンス。</span><span class="sxs-lookup"><span data-stu-id="26589-186">Predictable performance, using inclusive [pay-as-you-go pricing](https://docs.microsoft.com/azure/mariadb/concepts-pricing-tiers).</span></span>

- <span data-ttu-id="26589-187">必要に応じて数秒以内に[スケーリング](https://docs.microsoft.com/azure/mariadb/concepts-high-availability)します。</span><span class="sxs-lookup"><span data-stu-id="26589-187">[Scaling](https://docs.microsoft.com/azure/mariadb/concepts-high-availability) as needed within seconds.</span></span>

- <span data-ttu-id="26589-188">保存データと移動中の機密データを保護します。</span><span class="sxs-lookup"><span data-stu-id="26589-188">Secured protection of sensitive data at rest and in-motion.</span></span>

- <span data-ttu-id="26589-189">[自動バックアップ](https://docs.microsoft.com/azure/mariadb/concepts-backup)と[特定の時点への復元 (](https://docs.microsoft.com/azure/mariadb/concepts-backup)最大35日間)。</span><span class="sxs-lookup"><span data-stu-id="26589-189">[Automatic backups](https://docs.microsoft.com/azure/mariadb/concepts-backup) and [point-in-time-restore](https://docs.microsoft.com/azure/mariadb/concepts-backup) for up to 35 days.</span></span>

- <span data-ttu-id="26589-190">エンタープライズグレードのセキュリティとコンプライアンス。</span><span class="sxs-lookup"><span data-stu-id="26589-190">Enterprise-grade security and compliance.</span></span>

## <a name="azure-database-for-postgresql"></a><span data-ttu-id="26589-191">Azure Database for PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="26589-191">Azure Database for PostgreSQL</span></span>

<span data-ttu-id="26589-192">[PostgreSQL](https://www.postgresql.org/)は、30年を超えるアクティブな開発を含む、広く普及しているオープンソースのリレーショナルデータベースです。</span><span class="sxs-lookup"><span data-stu-id="26589-192">[PostgreSQL](https://www.postgresql.org/) is another popular, open-source relational database with over 30 years of active development.</span></span> <span data-ttu-id="26589-193">これは、汎用的なオブジェクトリレーショナルデータベース管理システムです。</span><span class="sxs-lookup"><span data-stu-id="26589-193">It's a general purpose and object-relational database management system.</span></span> <span data-ttu-id="26589-194">ライセンスは "自由度" と見なされ、製品は任意の形式で自由に使用、変更、および配布できます。</span><span class="sxs-lookup"><span data-stu-id="26589-194">Its licensing is considered to be “liberal” and the product is free to use, modify, and distribute in any form.</span></span> <span data-ttu-id="26589-195">Apple、Red Hat、および富士通を含む多くの大企業は、PostgreSQL を使用して製品を構築しています。</span><span class="sxs-lookup"><span data-stu-id="26589-195">Many large enterprises including Apple, Red Hat, and Fujitsu have built products using PostgreSQL.</span></span>

<span data-ttu-id="26589-196">[Azure Database for PostgreSQL](https://azure.microsoft.com/services/postgresql/)は、オープンソースの Postgres データベースエンジンに基づいた、完全に管理されたリレーショナルデータベースサービスです。</span><span class="sxs-lookup"><span data-stu-id="26589-196">[Azure Database for PostgreSQL](https://azure.microsoft.com/services/postgresql/) is a fully managed relational database service, based on the open-source Postgres database engine.</span></span> <span data-ttu-id="26589-197">予測可能なパフォーマンス、セキュリティ、高可用性、および動的なスケーラビリティを備えたミッションクリティカルなワークロードを処理できます。</span><span class="sxs-lookup"><span data-stu-id="26589-197">It can handle mission-critical workloads with predictable performance, security, high availability, and dynamic scalability.</span></span> <span data-ttu-id="26589-198">Java、Python、Node、C\#、PHP などC++、いくつかのオープンソースフレームワークと言語をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="26589-198">It supports several open-source frameworks and languages—including C++, Java, Python, Node, C\#, and PHP.</span></span> <span data-ttu-id="26589-199">これにより、コマンドラインインターフェイスまたは[Azure データ移行サービス](https://azure.microsoft.com/services/database-migration/)を使用して PostgreSQL データベースを[移行](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1)できます。</span><span class="sxs-lookup"><span data-stu-id="26589-199">It enables [migration](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1) of PostgreSQL databases through a command-line interface or the [Azure Data Migration Service](https://azure.microsoft.com/services/database-migration/).</span></span>

<span data-ttu-id="26589-200">このサービスには、独自のデータベースパターンを調査し、PostgreSQL データベースのパフォーマンスを最大化するのに役立つ、カスタマイズされた推奨事項と洞察を提供する[組み込みのインテリジェンス](https://docs.microsoft.com/azure/postgresql/concepts-monitoring)が含まれています。</span><span class="sxs-lookup"><span data-stu-id="26589-200">The service includes [built-in intelligence](https://docs.microsoft.com/azure/postgresql/concepts-monitoring) that studies your unique database patterns and provides customized recommendations and insights to help you maximize the performance of your PostgreSQL database.</span></span> <span data-ttu-id="26589-201">[Advanced Threat Protection](https://docs.microsoft.com/azure/postgresql/concepts-data-access-and-security-threat-protection)は、データベースを時計の周りで監視し、悪意のある可能性のあるアクティビティを検出し、すぐに介入できるように検出を警告します。</span><span class="sxs-lookup"><span data-stu-id="26589-201">[Advanced Threat Protection](https://docs.microsoft.com/azure/postgresql/concepts-data-access-and-security-threat-protection) monitors your database around the clock and detects potential malicious activities, alerting you upon detection so you can intervene right away.</span></span>

<span data-ttu-id="26589-202">Azure Database for PostgreSQL は、1台のサーバーとハイパースケール (Citus) という2つのデプロイオプションを利用できます。この書籍の執筆時点でプレビューで利用できます。</span><span class="sxs-lookup"><span data-stu-id="26589-202">Azure Database for PostgreSQL is available as two deployment options: Single Server and Hyperscale (Citus), available for preview at time of the writing of this book</span></span>

- <span data-ttu-id="26589-203">[単一サーバー](https://docs.microsoft.com/azure/postgresql/concepts-servers)配置オプションは、複数のデータベースの中央管理ポイントです。</span><span class="sxs-lookup"><span data-stu-id="26589-203">The [Single Server](https://docs.microsoft.com/azure/postgresql/concepts-servers) deployment option is a central administrative point for multiple databases.</span></span> <span data-ttu-id="26589-204">オンプレミスのデプロイで使用できるのと同じ PostgreSQL サーバーエンジンです。</span><span class="sxs-lookup"><span data-stu-id="26589-204">It's the same PostgreSQL server engine available for on-premises deployments.</span></span> <span data-ttu-id="26589-205">これを使用すると、サーバーごとに1つのデータベースを作成し、すべてのリソースを使用したり、複数のデータベースを作成してリソースを共有したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="26589-205">With it, you can create a single database per server to consume all resources or create multiple databases to share the resources.</span></span> <span data-ttu-id="26589-206">価格は、コアとストレージに基づいてサーバーごとに構造化されています。</span><span class="sxs-lookup"><span data-stu-id="26589-206">The pricing is structured per-server based upon cores and storage.</span></span>

- <span data-ttu-id="26589-207">[Hyperscale (Citus) オプション](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/)は、 [Citus データ](https://www.citusdata.com/) テクノロジによって強化されています。</span><span class="sxs-lookup"><span data-stu-id="26589-207">The [Hyperscale (Citus) option](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/) is powered by [Citus Data](https://www.citusdata.com/) technology.</span></span> <span data-ttu-id="26589-208">これにより、1つのデータベースを数百のノードで水平方向にスケーリングすることにより、パフォーマンスを向上させることができ、驚異的高速なパフォーマンスとスケールを実現できます。</span><span class="sxs-lookup"><span data-stu-id="26589-208">It enables high-performance scaling by horizontally scaling a single database across hundreds of nodes to deliver blazingly fast performance and scale.</span></span> <span data-ttu-id="26589-209">このオプションを使用すると、エンジンはメモリにより多くのデータを格納し、数百のノードにわたってクエリを並列化して、データのインデックス作成を高速化できます。</span><span class="sxs-lookup"><span data-stu-id="26589-209">This option allows the engine to fit more data in memory, parallelize queries across hundreds of nodes, and index data faster.</span></span> <span data-ttu-id="26589-210">ハイパースケール機能は、PostgreSQL の最新のイノベーション、バージョン、およびツールと互換性があるため、既存の PostgreSQL の専門知識を活用できます。</span><span class="sxs-lookup"><span data-stu-id="26589-210">The Hyperscale feature is compatible with the latest innovations, versions, and tools for PostgreSQL, so you can leverage your existing PostgreSQL expertise.</span></span>

## <a name="cosmos-db"></a><span data-ttu-id="26589-211">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="26589-211">Cosmos DB</span></span>

<span data-ttu-id="26589-212">Azure Cosmos DB は、完全に管理された、グローバルに分散された NoSQL データベースサービスであり、低待機時間、柔軟なスケーラビリティ、管理データの一貫性、および高可用性を提供するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="26589-212">Azure Cosmos DB is a fully managed, globally distributed NoSQL database service that's designed to provide low latency, elastic scalability, managed data consistency, and high availability.</span></span> <span data-ttu-id="26589-213">つまり、アプリケーションが世界中のどこでも迅速な応答時間を保証する必要がある場合、常にオンラインにする必要があり、スループットとストレージの無制限で柔軟なスケーラビリティが必要な場合は、Cosmos DB が最適な選択肢です。</span><span class="sxs-lookup"><span data-stu-id="26589-213">In short, if your application needs guaranteed fast response time anywhere in the world, if it's required to be always online and needs unlimited and elastic scalability of throughput and storage, Cosmos DB is a great choice.</span></span> <span data-ttu-id="26589-214">図5-13 に、Cosmos DB の概要を示します。</span><span class="sxs-lookup"><span data-stu-id="26589-214">Figure 5-13 shows a high-level overview of Cosmos DB.</span></span>

![Cosmos DB の概要](./media/cosmos-db-overview.png)

<span data-ttu-id="26589-216">**図 5-13**: Cosmos DB の概要</span><span class="sxs-lookup"><span data-stu-id="26589-216">**Figure 5-13**: Overview of Cosmos DB</span></span>

<span data-ttu-id="26589-217">図5-13 に、Cosmos DB は、多くの組み込みクラウドネイティブ機能を備えた堅牢で汎用性の高いデータベースサービスです。</span><span class="sxs-lookup"><span data-stu-id="26589-217">Note in the Figure 5-13 how Cosmos DB is a robust and highly versatile database service with many built-in cloud-native capabilities.</span></span> <span data-ttu-id="26589-218">このセクションでは、詳しく見ていきます。</span><span class="sxs-lookup"><span data-stu-id="26589-218">In this section, we’ll take a closer look at them.</span></span>

### <a name="global-support"></a><span data-ttu-id="26589-219">グローバルサポート</span><span class="sxs-lookup"><span data-stu-id="26589-219">Global Support</span></span>

<span data-ttu-id="26589-220">世界中のすべての Azure リージョンで Cosmos データベースをグローバルに分散し、データをユーザーの近くに配置し、応答時間を短縮し、待機時間を短縮することができます。</span><span class="sxs-lookup"><span data-stu-id="26589-220">You can globally distribute Cosmos databases across all Azure regions across the world, placing data close to your users, improving response time, and reducing latency.</span></span> <span data-ttu-id="26589-221">アプリケーションを一時停止または再配置しなくても、リージョンのデータベースを追加または削除できます。</span><span class="sxs-lookup"><span data-stu-id="26589-221">You can add or remove a database from a region without pausing or redeploying your application.</span></span> <span data-ttu-id="26589-222">バックグラウンドでは、Cosmos DB は、構成されているすべてのリージョンにデータを透過的にレプリケートします。</span><span class="sxs-lookup"><span data-stu-id="26589-222">In the background, Cosmos DB transparently replicates the data to all of the configured regions.</span></span>

<span data-ttu-id="26589-223">Cosmos DB は、グローバルレベルで[アクティブ/アクティブ](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/)クラスタリングをサポートしているので、書き込みと読み取りの両方をサポートするように、またはすべてのデータベースリージョンを構成できます。</span><span class="sxs-lookup"><span data-stu-id="26589-223">Cosmos DB supports [active/active](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/) clustering at the global level, enabling you to configure any or all your database regions to support both writes and reads.</span></span>

<span data-ttu-id="26589-224">Cosmos DB の[マルチマスター](https://docs.microsoft.com/azure/cosmos-db/how-to-multi-master)プロトコル機能を使用すると、次の機能が有効になります。</span><span class="sxs-lookup"><span data-stu-id="26589-224">The [Multi-Master](https://docs.microsoft.com/azure/cosmos-db/how-to-multi-master) protocol feature in Cosmos DB enables the following functionality:</span></span>

- <span data-ttu-id="26589-225">無制限のエラスティック書き込みと読み取りのスケーラビリティ。</span><span class="sxs-lookup"><span data-stu-id="26589-225">Unlimited elastic write and read scalability.</span></span>

- <span data-ttu-id="26589-226">99.999% は世界中のすべての可用性を読み取り、書き込みます。</span><span class="sxs-lookup"><span data-stu-id="26589-226">99.999% read and write availability all around the world.</span></span>

- <span data-ttu-id="26589-227">99パーセンタイルでは、読み取りと書き込みが10ミリ秒未満で保証されます。</span><span class="sxs-lookup"><span data-stu-id="26589-227">Guaranteed reads and writes served in less than 10 milliseconds at the 99th percentile.</span></span>

<span data-ttu-id="26589-228">内部的には、Cosmos DB は、整合性レベルが保証され、経済的にサポートされるサービスレベルアグリーメントによって、リージョン間でのデータレプリケーションを処理します。</span><span class="sxs-lookup"><span data-stu-id="26589-228">Internally, Cosmos DB handles data replication between regions with consistency level guarantees and financially backed service level agreements.</span></span>

<span data-ttu-id="26589-229">Cosmos DB[マルチホーム api](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally)を使用すると、アプリケーションは、最も近い Azure リージョンを自動的に認識し、要求を送信できます。</span><span class="sxs-lookup"><span data-stu-id="26589-229">With the Cosmos DB [Multi-Homing APIs](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally), your application can automatically become aware of the nearest Azure region and send requests to it.</span></span> <span data-ttu-id="26589-230">最も近いリージョンは、構成を変更せずに Cosmos DB によって識別されます。</span><span class="sxs-lookup"><span data-stu-id="26589-230">The nearest region is identified by Cosmos DB without any configuration changes.</span></span> <span data-ttu-id="26589-231">リージョンが使用できなくなった場合、Cosmos DB は自動フェールオーバーをサポートし、マルチホーム機能は、次に最も近い利用可能なリージョンに要求を自動的にルーティングします。</span><span class="sxs-lookup"><span data-stu-id="26589-231">Should a region become unavailable, Cosmos DB supports automatic failover, and the Multi-Homing feature will automatically route your request to the next nearest available region.</span></span>

### <a name="multi-model-support"></a><span data-ttu-id="26589-232">マルチモデルサポート</span><span class="sxs-lookup"><span data-stu-id="26589-232">Multi-Model Support</span></span>

<span data-ttu-id="26589-233">Cosmos DB は、ドキュメント、キーと値のペア、ワイド列、グラフ表現など、サポートされている多数の NoSQL モデルを使用してデータを操作できる*マルチモデルデータプラットフォーム*です。</span><span class="sxs-lookup"><span data-stu-id="26589-233">Cosmos DB is a *multi-model data platform* enabling you to interact with your data using a number of supported NoSQL models, including documents, key-value pairs, wide-column, and graph representations.</span></span> <span data-ttu-id="26589-234">内部的には、データは、文字列、ブール、数値などのプリミティブデータ型で構成される単純な[構造体](https://docs.microsoft.com/dotnet/csharp/programming-guide/classes-and-structs/using-structs)形式で格納されます。</span><span class="sxs-lookup"><span data-stu-id="26589-234">Internally, data is stored in a simple [struct](https://docs.microsoft.com/dotnet/csharp/programming-guide/classes-and-structs/using-structs) format made up of primitive data types, including strings, bools, and numbers.</span></span> <span data-ttu-id="26589-235">データベースエンジンは、要求ごとに、選択したモデル表現にデータを変換します。</span><span class="sxs-lookup"><span data-stu-id="26589-235">For each request, the database engine translates data into the model representation you have selected.</span></span> <span data-ttu-id="26589-236">独自の Cosmos DB SQL ベースの API、または図5-14 に示されている[互換性 api](https://www.wikiwand.com/en/Cosmos_DB)から選択できます。</span><span class="sxs-lookup"><span data-stu-id="26589-236">You can choose from a proprietary Cosmos DB SQL-based API or any of the [compatibility APIs](https://www.wikiwand.com/en/Cosmos_DB) shown in Figure 5-14.</span></span>

![Cosmos DB プロバイダー](./media/cosmos-db-providers.png)

<span data-ttu-id="26589-238">**図 5-14**: Cosmos DB プロバイダー</span><span class="sxs-lookup"><span data-stu-id="26589-238">**Figure 5-14**: Cosmos DB providers</span></span>

<span data-ttu-id="26589-239">図5-14 では、Cosmos DB が[Table Storage](https://azure.microsoft.com/services/storage/tables/)をサポートしている点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="26589-239">Note in Figure 5-14 how Cosmos DB supports [Table Storage](https://azure.microsoft.com/services/storage/tables/).</span></span> <span data-ttu-id="26589-240">Cosmos DB と[Azure Table Storage](https://docs.microsoft.com/azure/cosmos-db/table-storage-overview)は、同じ基になるテーブルモデルを共有し、同じテーブル操作の多くを公開します。</span><span class="sxs-lookup"><span data-stu-id="26589-240">Both Cosmos DB and [Azure Table Storage](https://docs.microsoft.com/azure/cosmos-db/table-storage-overview) share the same underlying table model and expose many of the same table operations.</span></span> <span data-ttu-id="26589-241">ただし、 [Cosmos DB Table API](https://docs.microsoft.com/azure/cosmos-db/table-introduction)には、Azure Storage API では利用できない多くの premium 拡張機能が用意されています。</span><span class="sxs-lookup"><span data-stu-id="26589-241">However, the [Cosmos DB Table API](https://docs.microsoft.com/azure/cosmos-db/table-introduction) provides many premium enhancements not available in the Azure Storage API.</span></span> <span data-ttu-id="26589-242">これらの機能は、図5-15 で比較しています。</span><span class="sxs-lookup"><span data-stu-id="26589-242">These features are contrasted in Figure 5-15.</span></span>

![Azure Table API](./media/azure-table-api.png)

<span data-ttu-id="26589-244">**図 5-15**: Azure Table API</span><span class="sxs-lookup"><span data-stu-id="26589-244">**Figure 5-15**: Azure Table API</span></span>

<span data-ttu-id="26589-245">Azure Table storage 用に作成されたアプリケーションは、コードを変更せずに Table API を使用して Azure Cosmos DB に移行できます。</span><span class="sxs-lookup"><span data-stu-id="26589-245">Applications written for Azure Table storage can migrate to Azure Cosmos DB by using the Table API with no code changes.</span></span>

<span data-ttu-id="26589-246">既存[のデータ](https://en.wikipedia.org/wiki/Brownfield_(software_development))またはアプリケーションコードに最小限の変更を加えることで、開発チームは、既存の Mongo、Cassandra、またはのデータベースを Cosmos DB に移行することができます。</span><span class="sxs-lookup"><span data-stu-id="26589-246">In [Brownfield](https://en.wikipedia.org/wiki/Brownfield_(software_development)) application scenarios, development teams can migrate existing Mongo, Gremlin, or Cassandra databases into Cosmos DB with minimal changes to the existing data or application code.</span></span> <span data-ttu-id="26589-247">[未開発](https://en.wikipedia.org/wiki/Greenfield_project)のシナリオでは、開発チームは、MongoDB、Cassandra、およびグリーン mlin プラットフォームに対して完全にサポートされているオープンソースオプションを含む、要件と基本設定を最もよく満たすデータモデルを選択できます。</span><span class="sxs-lookup"><span data-stu-id="26589-247">For [Greenfield](https://en.wikipedia.org/wiki/Greenfield_project) scenarios, development teams can choose the data model that best meets their requirements and preferences, including fully supported open-source options for the MongoDB, Cassandra, and Gremlin platforms.</span></span>

### <a name="consistency-models"></a><span data-ttu-id="26589-248">整合性モデル</span><span class="sxs-lookup"><span data-stu-id="26589-248">Consistency Models</span></span>

<span data-ttu-id="26589-249">「リレーショナルと*NoSQL* 」セクションでは *、データの*整合性について説明しました。これは、データの整合性を意味する用語です。</span><span class="sxs-lookup"><span data-stu-id="26589-249">Earlier in the *Relational versus NoSQL* section, we discussed the subject of *data consistency*, which is a term that refers to the integrity of your data.</span></span> <span data-ttu-id="26589-250">高可用性、低待機時間、またはその両方のレプリケーションに依存する分散データベースは、読み取り整合性、可用性、および待機時間の間に基本的なトレードオフを行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="26589-250">Distributed databases that rely on replication for high availability, low latency, or both, must make a fundamental tradeoff between read consistency, availability, and latency.</span></span>

<span data-ttu-id="26589-251">多くの分散データベースにより、開発者は、 [強力な整合性](https://en.wikipedia.org/wiki/Strong_consistency)と [最終的な整合性](https://en.wikipedia.org/wiki/Eventual_consistency)の2つの整合性モデルを選択できます。</span><span class="sxs-lookup"><span data-stu-id="26589-251">Most distributed databases allow developers to choose between two consistency models: [strong consistency](https://en.wikipedia.org/wiki/Strong_consistency) and [eventual consistency](https://en.wikipedia.org/wiki/Eventual_consistency).</span></span> <span data-ttu-id="26589-252">*強力な一貫性*は、データプログラミングのゴールド標準です。</span><span class="sxs-lookup"><span data-stu-id="26589-252">*Strong consistency* is the gold standard of data programmability.</span></span> <span data-ttu-id="26589-253">これにより、すべてのデータベースコピーにわたって更新がレプリケートされるのを待機する待機時間がシステムで発生しても、常に最新のデータが返されます。</span><span class="sxs-lookup"><span data-stu-id="26589-253">It guarantees that a query result will always return the most current data, even if  the system must incur latency waiting for an update to replicate across all database copies.</span></span> <span data-ttu-id="26589-254">一方、*最終的な整合性を確保*するように構成されたシステムは、データが最新のコピーでない場合でも、すぐにデータを返します。</span><span class="sxs-lookup"><span data-stu-id="26589-254">On the other hand, a system configured for *eventual consistency* will return data immediately, even if that data isn't the most current copy.</span></span> <span data-ttu-id="26589-255">このオプションを使用すると、可用性が向上し、スケールが向上し、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="26589-255">This option enables higher availability, greater scale, and increased performance.</span></span>

<span data-ttu-id="26589-256">Azure Cosmos DB には、図5-16 に示すように、[明確に定義された5つの整合性モデル](https://docs.microsoft.com/azure/cosmos-db/consistency-levels)が用意されています。</span><span class="sxs-lookup"><span data-stu-id="26589-256">Azure Cosmos DB offers a spectrum of [five well-defined consistency models](https://docs.microsoft.com/azure/cosmos-db/consistency-levels) shown in Figure 5-16.</span></span> <span data-ttu-id="26589-257">これらのオプションを使用すると、アプリケーションのニーズに基づいて、可用性とパフォーマンスに関して正確な選択肢や詳細なトレードオフを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="26589-257">These options enable you to make precise choices and granular tradeoffs with respect to availability and performance based on the needs of your application.</span></span> <span data-ttu-id="26589-258">これらのモデルは、適切に定義され、直感的で、サービスレベルアグリーメント (Sla) によって支えられています。</span><span class="sxs-lookup"><span data-stu-id="26589-258">These models are well-defined, intuitive, and backed by the service level agreements (SLAs).</span></span>

![Cosmos DB の整合性レベル](./media/cosmos-db-consistency-levels.png)

<span data-ttu-id="26589-260">**図 5-16**: Cosmos DB の整合性レベル</span><span class="sxs-lookup"><span data-stu-id="26589-260">**Figure 5-16**: Cosmos DB Consistency Levels</span></span>

### <a name="partitioning"></a><span data-ttu-id="26589-261">パーティション分割</span><span class="sxs-lookup"><span data-stu-id="26589-261">Partitioning</span></span>

<span data-ttu-id="26589-262">Azure Cosmos DB は自動[パーティション分割](https://docs.microsoft.com/azure/cosmos-db/partitioning-overview)を使用して、アプリケーションのパフォーマンスニーズに合わせてデータベースをスケーリングします。</span><span class="sxs-lookup"><span data-stu-id="26589-262">Azure Cosmos DB uses automatic [partitioning](https://docs.microsoft.com/azure/cosmos-db/partitioning-overview) to scale the database to meet the performance needs of your application.</span></span>

<span data-ttu-id="26589-263">図5-17 に示すように、[データベース、コンテナー、およびアイテム](https://docs.microsoft.com/azure/cosmos-db/databases-containers-items)を作成することによって、Cosmos DB データ内のデータを管理します。</span><span class="sxs-lookup"><span data-stu-id="26589-263">You manage data in Cosmos DB data by creating [databases, containers, and items](https://docs.microsoft.com/azure/cosmos-db/databases-containers-items), shown in Figure 5-17.</span></span>

![Cosmos DB エンティティ](./media/cosmos-db-entities.png)

<span data-ttu-id="26589-265">**図 5-17**: Cosmos DB エンティティの階層</span><span class="sxs-lookup"><span data-stu-id="26589-265">**Figure 5-17**: Hierarchy of Cosmos DB entities</span></span>

<span data-ttu-id="26589-266">図5-17 では、データベースアカウント内で Cosmos DB データベースを作成する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="26589-266">Note in Figure 5-17 how you start by creating a Cosmos DB database inside of a database account.</span></span> <span data-ttu-id="26589-267">このデータベースは、一連のコンテナーの管理単位になります。</span><span class="sxs-lookup"><span data-stu-id="26589-267">That database becomes the unit of management for a set of containers.</span></span> <span data-ttu-id="26589-268">コンテナーは、選択した API プロバイダー (前のセクションで説明したもの) に基づいて、コレクション、テーブル、またはグラフとして表現できる項目のスキーマに依存しないグループです。</span><span class="sxs-lookup"><span data-stu-id="26589-268">A container is a schema-agnostic grouping of items that can be expressed as a collection, table, or graph, based on your selected API provider (discussed in the prior section).</span></span> <span data-ttu-id="26589-269">アイテムは、コンテナーに追加するデータで、ドキュメント、行、ノード、またはエッジとして表されます。</span><span class="sxs-lookup"><span data-stu-id="26589-269">Items are the data that you add to the container and are represented as documents, rows, nodes, or edges.</span></span> <span data-ttu-id="26589-270">既定では、コンテナーに追加したすべてのアイテムには、明示的なインデックスまたはスキーマ管理を必要とせずに、自動的にインデックスが作成されます。</span><span class="sxs-lookup"><span data-stu-id="26589-270">By default, all items that you add to a container are automatically indexed without requiring explicit index or schema management.</span></span>

<span data-ttu-id="26589-271">コンテナーをパーティション分割するために、項目は [論理パーティション](https://docs.microsoft.com/azure/cosmos-db/partition-data)と呼ばれる個別のサブセットに分割されます。</span><span class="sxs-lookup"><span data-stu-id="26589-271">To partition the container, items are divided into distinct subsets called [logical partitions](https://docs.microsoft.com/azure/cosmos-db/partition-data).</span></span> <span data-ttu-id="26589-272">論理パーティションは、コンテナー内の各項目に関連付けられているパーティションキーの値に基づいて作成されます。</span><span class="sxs-lookup"><span data-stu-id="26589-272">Logical partitions are created based on the value of a partition key that is associated with each item in a container.</span></span> <span data-ttu-id="26589-273">図5-18 は、論理パーティション内のすべての項目が同じパーティションキー値を持っていることを示しています。</span><span class="sxs-lookup"><span data-stu-id="26589-273">Figure 5-18 shows how all items in a logical partition have the same partition key value.</span></span>

![Cosmos DB パーティション分割機構](./media/cosmos-db-partitioning.png)

<span data-ttu-id="26589-275">**図 5-18**: Cosmos DB パーティション分割機構</span><span class="sxs-lookup"><span data-stu-id="26589-275">**Figure 5-18**: Cosmos DB partitioning mechanics</span></span>

<span data-ttu-id="26589-276">図5-18 では、各項目に ' city ' または ' 空港 ' のパーティションキーが含まれていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="26589-276">Note in Figure 5-18 how each item includes a partition key of either ‘city’ or ‘airport’.</span></span> <span data-ttu-id="26589-277">このパーティションキーによって、項目の論理パーティションが決定されます。</span><span class="sxs-lookup"><span data-stu-id="26589-277">This partition key determines the item’s logical partition.</span></span> <span data-ttu-id="26589-278">各都市コードは、左側のコンテナー内の論理パーティションに割り当てられ、右側のコンテナーに空港コードを使用します。</span><span class="sxs-lookup"><span data-stu-id="26589-278">Each city code is assigned to a logical partition in the container on the left-side and those with an airport code to the container on the right.</span></span> <span data-ttu-id="26589-279">パーティションキー値と項目の ID 値を組み合わせると、項目を一意に識別する項目のインデックスが作成されます。</span><span class="sxs-lookup"><span data-stu-id="26589-279">Combining the partition key value with an item's ID value creates the item's index, which uniquely identifies the item.</span></span>

<span data-ttu-id="26589-280">内部的には、Cosmos DB は、コンテナーのスケーラビリティとパフォーマンスのニーズを効率的に満たすために、[物理パーティション](https://docs.microsoft.com/azure/cosmos-db/partition-data)上の[論理パーティション](https://docs.microsoft.com/azure/cosmos-db/partition-data)の配置を自動的に管理します。</span><span class="sxs-lookup"><span data-stu-id="26589-280">Internally, Cosmos DB automatically manages the placement of [logical partitions](https://docs.microsoft.com/azure/cosmos-db/partition-data) on [physical partitions](https://docs.microsoft.com/azure/cosmos-db/partition-data) to efficiently satisfy the scalability and performance needs of the container.</span></span> <span data-ttu-id="26589-281">アプリケーションのスループットと記憶域の要件が増加するにつれて、Azure Cosmos DB は論理パーティションを移動して、より多くのサーバーに負荷を分散させます。</span><span class="sxs-lookup"><span data-stu-id="26589-281">As the throughput and storage requirements of an application increase, Azure Cosmos DB moves logical partitions to redistribute the load across a greater number of servers.</span></span> <span data-ttu-id="26589-282">これらの再配布操作は Cosmos DB によって管理され、中断やダウンタイムなしで実行されます。</span><span class="sxs-lookup"><span data-stu-id="26589-282">These redistribution operations are managed by Cosmos DB and are performed without any interruption or downtime.</span></span>

## <a name="azure-redis-cache"></a><span data-ttu-id="26589-283">Azure Redis Cache</span><span class="sxs-lookup"><span data-stu-id="26589-283">Azure Redis Cache</span></span>

<span data-ttu-id="26589-284">パフォーマンスとスケーラビリティを向上させるためのキャッシュの利点を十分に理解しておいてください。</span><span class="sxs-lookup"><span data-stu-id="26589-284">The benefits of caching to improve performance and scalability are well understood.</span></span>

<span data-ttu-id="26589-285">クラウドネイティブアプリケーションの場合、キャッシュを追加する一般的な場所は API ゲートウェイ内にあります。</span><span class="sxs-lookup"><span data-stu-id="26589-285">For a cloud-native application, a common location to add caching is inside the API Gateway.</span></span> <span data-ttu-id="26589-286">ゲートウェイは、すべての受信要求のフロントエンドとして機能します。</span><span class="sxs-lookup"><span data-stu-id="26589-286">The gateway serves as a front end for all incoming requests.</span></span> <span data-ttu-id="26589-287">キャッシュを追加することで、キャッシュされたデータを返し、ローカルデータベースや下流サービスへのラウンドトリップを回避することで、パフォーマンスと応答性を向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="26589-287">By adding caching, you can increase performance and responsiveness by returning cached data and avoiding round-trips to a local database or downstream service.</span></span> <span data-ttu-id="26589-288">図5-19 は、クラウドネイティブアプリケーションのキャッシュアーキテクチャを示しています。</span><span class="sxs-lookup"><span data-stu-id="26589-288">Figure 5-19 shows a caching architecture for a cloud-native application.</span></span>

![クラウドネイティブアプリでのキャッシュ](./media/caching-in-a-cloud-native-app.png)

<span data-ttu-id="26589-290">**図 5-19**: クラウドネイティブアプリでのキャッシュ</span><span class="sxs-lookup"><span data-stu-id="26589-290">**Figure 5-19**: Caching in a cloud-native app</span></span>

<span data-ttu-id="26589-291">一般的なキャッシュパターンは、[キャッシュアサイドパターン](https://docs.microsoft.com/azure/architecture/patterns/cache-aside)です。</span><span class="sxs-lookup"><span data-stu-id="26589-291">A common caching pattern is the [cache-aside pattern](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span></span> <span data-ttu-id="26589-292">受信要求の場合、最初にキャッシュのクエリを実行します。この応答は、図5-19 の手順 #1 に示されています。</span><span class="sxs-lookup"><span data-stu-id="26589-292">For an incoming request, you first query the cache for the response, shown in step #1 in Figure 5-19.</span></span> <span data-ttu-id="26589-293">見つかった場合は、すぐにデータが返されます。</span><span class="sxs-lookup"><span data-stu-id="26589-293">If found, the data is returned immediately.</span></span> <span data-ttu-id="26589-294">データがキャッシュに存在しない場合 ([キャッシュミス](https://www.techopedia.com/definition/6308/cache-miss)とも呼ばれます)、ローカルデータベースまたは下流のサービス (ステップ #2) から取得され、将来の要求 (ステップ #3) のためにキャッシュに書き込まれ、呼び出し元に返されます。</span><span class="sxs-lookup"><span data-stu-id="26589-294">If the data doesn't exist in the cache (known as a [cache miss](https://www.techopedia.com/definition/6308/cache-miss)), it's retrieved from the local database or downstream service (step #2), written to the cache for future requests (step #3), and returned to the caller.</span></span> <span data-ttu-id="26589-295">システムの一貫性と正確性を維持するために、キャッシュされたデータを定期的に削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="26589-295">Care must be taken to periodically evict cached data so that the system remains consistent and accurate.</span></span>

<span data-ttu-id="26589-296">また、図5-19 では、キャッシュがサービスの境界内でローカルに実装されておらず、その代わりに、第1章で説明したように、クラウドベースのバッキングサービスとして使用されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="26589-296">Additionally, note in Figure 5-19 how the cache isn't implemented locally within the boundaries of the service, but instead is consumed as a cloud-based backing service, as discussed in Chapter 1.</span></span>

<span data-ttu-id="26589-297">[Azure Redis Cache](https://azure.microsoft.com/services/cache/)は、データキャッシュとメッセージングブローカーサービスです。</span><span class="sxs-lookup"><span data-stu-id="26589-297">[Azure Redis Cache](https://azure.microsoft.com/services/cache/) is a data caching and messaging broker service.</span></span> <span data-ttu-id="26589-298">アプリケーションのデータへの高スループットと待機時間の短いアクセスを提供します。</span><span class="sxs-lookup"><span data-stu-id="26589-298">It provides high throughput and low-latency access to data for applications.</span></span> <span data-ttu-id="26589-299">Microsoft によって完全に管理され、Azure 内でホストされ、Azure の内部または外部の任意のアプリケーションからアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="26589-299">It's fully managed by Microsoft, hosted within Azure, and accessible to any application within or outside of Azure.</span></span>

<span data-ttu-id="26589-300">Azure cache for Redis は、内部的にはオープンソースの[redis サーバー](https://redis.io/)によって支えられており、[文字列](https://redis.io/topics/data-types#strings)、[ハッシュ](https://redis.io/topics/data-types#hashes)、[リスト](https://redis.io/topics/data-types#sets)、[セット](https://redis.io/topics/data-types#sets)、[並べ替えら](https://redis.io/topics/data-types#sorted-sets)れたセットなどのデータ構造をネイティブでサポートしています。</span><span class="sxs-lookup"><span data-stu-id="26589-300">Internally, Azure Cache for Redis is backed by the open-source [Redis server](https://redis.io/) and natively supports data structures such as [strings](https://redis.io/topics/data-types#strings), [hashes](https://redis.io/topics/data-types#hashes), [lists](https://redis.io/topics/data-types#sets), [sets](https://redis.io/topics/data-types#sets), and [sorted sets](https://redis.io/topics/data-types#sorted-sets).</span></span> <span data-ttu-id="26589-301">アプリケーションで Redis を使用する場合、Redis の Azure Cache と同様に機能します。</span><span class="sxs-lookup"><span data-stu-id="26589-301">If your application uses Redis, it will work as-is with Azure Cache for Redis.</span></span>

<span data-ttu-id="26589-302">Redis の Azure Cache は、メモリ内のデータキャッシュ、分散型の非リレーショナルデータベース、メッセージブローカーとしても使用できます。</span><span class="sxs-lookup"><span data-stu-id="26589-302">Azure Cache for Redis can also be used as an in-memory data cache, a distributed non-relational database, and a message broker.</span></span> <span data-ttu-id="26589-303">これは、3つの異なる価格レベルで利用できます。</span><span class="sxs-lookup"><span data-stu-id="26589-303">It's available in three different pricing tiers.</span></span> <span data-ttu-id="26589-304">Premium レベルでは、クラスタリング、データの永続性、geo レプリケーション、仮想ネットワークのセキュリティと分離など、多くのエンタープライズレベルの機能が機能します。</span><span class="sxs-lookup"><span data-stu-id="26589-304">The Premium tier features many enterprise-level features such as clustering, data persistence, geo-replication, and Virtual-network security and isolation.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="26589-305">[前へ](data-patterns.md)
>[次へ](resiliency.md)</span><span class="sxs-lookup"><span data-stu-id="26589-305">[Previous](data-patterns.md)
[Next](resiliency.md)</span></span>
